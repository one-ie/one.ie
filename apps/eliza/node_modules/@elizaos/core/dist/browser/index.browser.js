var nf=Object.create;var{getPrototypeOf:rf,defineProperty:w7,getOwnPropertyNames:Jj,getOwnPropertyDescriptor:Bf}=Object,vj=Object.prototype.hasOwnProperty;var K6=(q,$,K)=>{K=q!=null?nf(rf(q)):{};let _=$||!q||!q.__esModule?w7(K,"default",{value:q,enumerable:!0}):K;for(let P of Jj(q))if(!vj.call(_,P))w7(_,P,{get:()=>q[P],enumerable:!0});return _},zj=new WeakMap,M$=(q)=>{var $=zj.get(q),K;if($)return $;if($=w7({},"__esModule",{value:!0}),q&&typeof q==="object"||typeof q==="function")Jj(q).map((_)=>!vj.call($,_)&&w7($,_,{get:()=>q[_],enumerable:!(K=Bf(q,_))||K.enumerable}));return zj.set(q,$),$},bq=(q,$)=>()=>($||q(($={exports:{}}).exports,$),$.exports);var yK=(q,$)=>{for(var K in $)w7(q,K,{get:$[K],enumerable:!0,configurable:!0,set:(_)=>$[K]=()=>_})};var T7=(q,$)=>()=>(q&&($=q(q=0)),$);var B_=((q)=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(q,{get:($,K)=>(typeof require<"u"?require:$)[K]}):q)(function(q){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+q+'" is not supported')});var hj=bq((Rx,Rj)=>{function H6(q,$){if(typeof $==="boolean")$={forever:$};if(this._originalTimeouts=JSON.parse(JSON.stringify(q)),this._timeouts=q,this._options=$||{},this._maxRetryTime=$&&$.maxRetryTime||1/0,this._fn=null,this._errors=[],this._attempts=1,this._operationTimeout=null,this._operationTimeoutCb=null,this._timeout=null,this._operationStart=null,this._timer=null,this._options.forever)this._cachedTimeouts=this._timeouts.slice(0)}Rj.exports=H6;H6.prototype.reset=function(){this._attempts=1,this._timeouts=this._originalTimeouts.slice(0)};H6.prototype.stop=function(){if(this._timeout)clearTimeout(this._timeout);if(this._timer)clearTimeout(this._timer);this._timeouts=[],this._cachedTimeouts=null};H6.prototype.retry=function(q){if(this._timeout)clearTimeout(this._timeout);if(!q)return!1;var $=new Date().getTime();if(q&&$-this._operationStart>=this._maxRetryTime)return this._errors.push(q),this._errors.unshift(Error("RetryOperation timeout occurred")),!1;this._errors.push(q);var K=this._timeouts.shift();if(K===void 0)if(this._cachedTimeouts)this._errors.splice(0,this._errors.length-1),K=this._cachedTimeouts.slice(-1);else return!1;var _=this;if(this._timer=setTimeout(function(){if(_._attempts++,_._operationTimeoutCb){if(_._timeout=setTimeout(function(){_._operationTimeoutCb(_._attempts)},_._operationTimeout),_._options.unref)_._timeout.unref()}_._fn(_._attempts)},K),this._options.unref)this._timer.unref();return!0};H6.prototype.attempt=function(q,$){if(this._fn=q,$){if($.timeout)this._operationTimeout=$.timeout;if($.cb)this._operationTimeoutCb=$.cb}var K=this;if(this._operationTimeoutCb)this._timeout=setTimeout(function(){K._operationTimeoutCb()},K._operationTimeout);this._operationStart=new Date().getTime(),this._fn(this._attempts)};H6.prototype.try=function(q){console.log("Using RetryOperation.try() is deprecated"),this.attempt(q)};H6.prototype.start=function(q){console.log("Using RetryOperation.start() is deprecated"),this.attempt(q)};H6.prototype.start=H6.prototype.try;H6.prototype.errors=function(){return this._errors};H6.prototype.attempts=function(){return this._attempts};H6.prototype.mainError=function(){if(this._errors.length===0)return null;var q={},$=null,K=0;for(var _=0;_<this._errors.length;_++){var P=this._errors[_],O=P.message,Y=(q[O]||0)+1;if(q[O]=Y,Y>=K)$=P,K=Y}return $}});var Ij=bq((Ck)=>{var Sk=hj();Ck.operation=function(q){var $=Ck.timeouts(q);return new Sk($,{forever:q&&(q.forever||q.retries===1/0),unref:q&&q.unref,maxRetryTime:q&&q.maxRetryTime})};Ck.timeouts=function(q){if(q instanceof Array)return[].concat(q);var $={retries:10,factor:2,minTimeout:1000,maxTimeout:1/0,randomize:!1};for(var K in q)$[K]=q[K];if($.minTimeout>$.maxTimeout)throw Error("minTimeout is greater than maxTimeout");var _=[];for(var P=0;P<$.retries;P++)_.push(this.createTimeout(P,$));if(q&&q.forever&&!_.length)_.push(this.createTimeout(P,$));return _.sort(function(O,Y){return O-Y}),_};Ck.createTimeout=function(q,$){var K=$.randomize?Math.random()+1:1,_=Math.round(K*Math.max($.minTimeout,1)*Math.pow($.factor,q));return _=Math.min(_,$.maxTimeout),_};Ck.wrap=function(q,$,K){if($ instanceof Array)K=$,$=null;if(!K){K=[];for(var _ in q)if(typeof q[_]==="function")K.push(_)}for(var P=0;P<K.length;P++){var O=K[P],Y=q[O];q[O]=function(v){var X=Ck.operation($),Z=Array.prototype.slice.call(arguments,1),k=Z.pop();Z.push(function(G){if(X.retry(G))return;if(G)arguments[0]=X.mainError();k.apply(this,arguments)}),X.attempt(function(){v.apply(q,Z)})}.bind(q,Y),q[O].options=$}}});var q9=bq((Dx,sP)=>{var hk=Ij(),Dk=["Failed to fetch","NetworkError when attempting to fetch resource.","The Internet connection appears to be offline.","Network request failed"];class Z5 extends Error{constructor(q){super();if(q instanceof Error)this.originalError=q,{message:q}=q;else this.originalError=Error(q),this.originalError.stack=this.stack;this.name="AbortError",this.message=q}}var Ik=(q,$,K)=>{let _=K.retries-($-1);return q.attemptNumber=$,q.retriesLeft=_,q},Lk=(q)=>Dk.includes(q),Lj=(q,$)=>new Promise((K,_)=>{$={onFailedAttempt:()=>{},retries:10,...$};let P=hk.operation($);P.attempt(async(O)=>{try{K(await q(O))}catch(Y){if(!(Y instanceof Error)){_(TypeError(`Non-error was thrown: "${Y}". You should only throw errors.`));return}if(Y instanceof Z5)P.stop(),_(Y.originalError);else if(Y instanceof TypeError&&!Lk(Y.message))P.stop(),_(Y);else{Ik(Y,O,$);try{await $.onFailedAttempt(Y)}catch(H){_(H);return}if(!P.retry(Y))_(P.mainError())}}})});sP.exports=Lj;sP.exports.default=Lj;sP.exports.AbortError=Z5});var gO=bq((cu,d5)=>{var vG=Object.prototype.hasOwnProperty,x8="~";function h7(){}if(Object.create){if(h7.prototype=Object.create(null),!new h7().__proto__)x8=!1}function wG(q,$,K){this.fn=q,this.context=$,this.once=K||!1}function bO(q,$,K,_,P){if(typeof K!=="function")throw TypeError("The listener must be a function");var O=new wG(K,_||q,P),Y=x8?x8+$:$;if(!q._events[Y])q._events[Y]=O,q._eventsCount++;else if(!q._events[Y].fn)q._events[Y].push(O);else q._events[Y]=[q._events[Y],O];return q}function X9(q,$){if(--q._eventsCount===0)q._events=new h7;else delete q._events[$]}function g8(){this._events=new h7,this._eventsCount=0}g8.prototype.eventNames=function(){var $=[],K,_;if(this._eventsCount===0)return $;for(_ in K=this._events)if(vG.call(K,_))$.push(x8?_.slice(1):_);if(Object.getOwnPropertySymbols)return $.concat(Object.getOwnPropertySymbols(K));return $};g8.prototype.listeners=function($){var K=x8?x8+$:$,_=this._events[K];if(!_)return[];if(_.fn)return[_.fn];for(var P=0,O=_.length,Y=Array(O);P<O;P++)Y[P]=_[P].fn;return Y};g8.prototype.listenerCount=function($){var K=x8?x8+$:$,_=this._events[K];if(!_)return 0;if(_.fn)return 1;return _.length};g8.prototype.emit=function($,K,_,P,O,Y){var H=x8?x8+$:$;if(!this._events[H])return!1;var v=this._events[H],X=arguments.length,Z,k;if(v.fn){if(v.once)this.removeListener($,v.fn,void 0,!0);switch(X){case 1:return v.fn.call(v.context),!0;case 2:return v.fn.call(v.context,K),!0;case 3:return v.fn.call(v.context,K,_),!0;case 4:return v.fn.call(v.context,K,_,P),!0;case 5:return v.fn.call(v.context,K,_,P,O),!0;case 6:return v.fn.call(v.context,K,_,P,O,Y),!0}for(k=1,Z=Array(X-1);k<X;k++)Z[k-1]=arguments[k];v.fn.apply(v.context,Z)}else{var G=v.length,S;for(k=0;k<G;k++){if(v[k].once)this.removeListener($,v[k].fn,void 0,!0);switch(X){case 1:v[k].fn.call(v[k].context);break;case 2:v[k].fn.call(v[k].context,K);break;case 3:v[k].fn.call(v[k].context,K,_);break;case 4:v[k].fn.call(v[k].context,K,_,P);break;default:if(!Z)for(S=1,Z=Array(X-1);S<X;S++)Z[S-1]=arguments[S];v[k].fn.apply(v[k].context,Z)}}}return!0};g8.prototype.on=function($,K,_){return bO(this,$,K,_,!1)};g8.prototype.once=function($,K,_){return bO(this,$,K,_,!0)};g8.prototype.removeListener=function($,K,_,P){var O=x8?x8+$:$;if(!this._events[O])return this;if(!K)return X9(this,O),this;var Y=this._events[O];if(Y.fn){if(Y.fn===K&&(!P||Y.once)&&(!_||Y.context===_))X9(this,O)}else{for(var H=0,v=[],X=Y.length;H<X;H++)if(Y[H].fn!==K||P&&!Y[H].once||_&&Y[H].context!==_)v.push(Y[H]);if(v.length)this._events[O]=v.length===1?v[0]:v;else X9(this,O)}return this};g8.prototype.removeAllListeners=function($){var K;if($){if(K=x8?x8+$:$,this._events[K])X9(this,K)}else this._events=new h7,this._eventsCount=0;return this};g8.prototype.off=g8.prototype.removeListener;g8.prototype.addListener=g8.prototype.on;g8.prefixed=x8;g8.EventEmitter=g8;if(typeof d5<"u")d5.exports=g8});var pO=bq((lu,yO)=>{yO.exports=(q,$)=>{return $=$||(()=>{}),q.then((K)=>new Promise((_)=>{_($())}).then(()=>K),(K)=>new Promise((_)=>{_($())}).then(()=>{throw K}))}});var uO=bq((du,f9)=>{var TG=pO();class o5 extends Error{constructor(q){super(q);this.name="TimeoutError"}}var xO=(q,$,K)=>new Promise((_,P)=>{if(typeof $!=="number"||$<0)throw TypeError("Expected `milliseconds` to be a positive number");if($===1/0){_(q);return}let O=setTimeout(()=>{if(typeof K==="function"){try{_(K())}catch(v){P(v)}return}let Y=typeof K==="string"?K:`Promise timed out after ${$} milliseconds`,H=K instanceof Error?K:new o5(Y);if(typeof q.cancel==="function")q.cancel();P(H)},$);TG(q.then(_,P),()=>{clearTimeout(O)})});f9.exports=xO;f9.exports.default=xO;f9.exports.TimeoutError=o5});var cO=bq((mO)=>{Object.defineProperty(mO,"__esModule",{value:!0});function XG(q,$,K){let _=0,P=q.length;while(P>0){let O=P/2|0,Y=_+O;if(K(q[Y],$)<=0)_=++Y,P-=O+1;else P=O}return _}mO.default=XG});var oO=bq((dO)=>{Object.defineProperty(dO,"__esModule",{value:!0});var AG=cO();class lO{constructor(){this._queue=[]}enqueue(q,$){$=Object.assign({priority:0},$);let K={priority:$.priority,run:q};if(this.size&&this._queue[this.size-1].priority>=$.priority){this._queue.push(K);return}let _=AG.default(this._queue,K,(P,O)=>O.priority-P.priority);this._queue.splice(_,0,K)}dequeue(){let q=this._queue.shift();return q===null||q===void 0?void 0:q.run}filter(q){return this._queue.filter(($)=>$.priority===q.priority).map(($)=>$.run)}get size(){return this._queue.length}}dO.default=lO});var k9=bq((BO)=>{Object.defineProperty(BO,"__esModule",{value:!0});var GG=gO(),nO=uO(),ZG=oO(),A9=()=>{},VG=new nO.TimeoutError;class rO extends GG{constructor(q){var $,K,_,P;super();if(this._intervalCount=0,this._intervalEnd=0,this._pendingCount=0,this._resolveEmpty=A9,this._resolveIdle=A9,q=Object.assign({carryoverConcurrencyCount:!1,intervalCap:1/0,interval:0,concurrency:1/0,autoStart:!0,queueClass:ZG.default},q),!(typeof q.intervalCap==="number"&&q.intervalCap>=1))throw TypeError(`Expected \`intervalCap\` to be a number from 1 and up, got \`${(K=($=q.intervalCap)===null||$===void 0?void 0:$.toString())!==null&&K!==void 0?K:""}\` (${typeof q.intervalCap})`);if(q.interval===void 0||!(Number.isFinite(q.interval)&&q.interval>=0))throw TypeError(`Expected \`interval\` to be a finite number >= 0, got \`${(P=(_=q.interval)===null||_===void 0?void 0:_.toString())!==null&&P!==void 0?P:""}\` (${typeof q.interval})`);this._carryoverConcurrencyCount=q.carryoverConcurrencyCount,this._isIntervalIgnored=q.intervalCap===1/0||q.interval===0,this._intervalCap=q.intervalCap,this._interval=q.interval,this._queue=new q.queueClass,this._queueClass=q.queueClass,this.concurrency=q.concurrency,this._timeout=q.timeout,this._throwOnTimeout=q.throwOnTimeout===!0,this._isPaused=q.autoStart===!1}get _doesIntervalAllowAnother(){return this._isIntervalIgnored||this._intervalCount<this._intervalCap}get _doesConcurrentAllowAnother(){return this._pendingCount<this._concurrency}_next(){this._pendingCount--,this._tryToStartAnother(),this.emit("next")}_resolvePromises(){if(this._resolveEmpty(),this._resolveEmpty=A9,this._pendingCount===0)this._resolveIdle(),this._resolveIdle=A9,this.emit("idle")}_onResumeInterval(){this._onInterval(),this._initializeIntervalIfNeeded(),this._timeoutId=void 0}_isIntervalPaused(){let q=Date.now();if(this._intervalId===void 0){let $=this._intervalEnd-q;if($<0)this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0;else{if(this._timeoutId===void 0)this._timeoutId=setTimeout(()=>{this._onResumeInterval()},$);return!0}}return!1}_tryToStartAnother(){if(this._queue.size===0){if(this._intervalId)clearInterval(this._intervalId);return this._intervalId=void 0,this._resolvePromises(),!1}if(!this._isPaused){let q=!this._isIntervalPaused();if(this._doesIntervalAllowAnother&&this._doesConcurrentAllowAnother){let $=this._queue.dequeue();if(!$)return!1;if(this.emit("active"),$(),q)this._initializeIntervalIfNeeded();return!0}}return!1}_initializeIntervalIfNeeded(){if(this._isIntervalIgnored||this._intervalId!==void 0)return;this._intervalId=setInterval(()=>{this._onInterval()},this._interval),this._intervalEnd=Date.now()+this._interval}_onInterval(){if(this._intervalCount===0&&this._pendingCount===0&&this._intervalId)clearInterval(this._intervalId),this._intervalId=void 0;this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0,this._processQueue()}_processQueue(){while(this._tryToStartAnother());}get concurrency(){return this._concurrency}set concurrency(q){if(!(typeof q==="number"&&q>=1))throw TypeError(`Expected \`concurrency\` to be a number from 1 and up, got \`${q}\` (${typeof q})`);this._concurrency=q,this._processQueue()}async add(q,$={}){return new Promise((K,_)=>{let P=async()=>{this._pendingCount++,this._intervalCount++;try{let O=this._timeout===void 0&&$.timeout===void 0?q():nO.default(Promise.resolve(q()),$.timeout===void 0?this._timeout:$.timeout,()=>{if($.throwOnTimeout===void 0?this._throwOnTimeout:$.throwOnTimeout)_(VG);return});K(await O)}catch(O){_(O)}this._next()};this._queue.enqueue(P,$),this._tryToStartAnother(),this.emit("add")})}async addAll(q,$){return Promise.all(q.map(async(K)=>this.add(K,$)))}start(){if(!this._isPaused)return this;return this._isPaused=!1,this._processQueue(),this}pause(){this._isPaused=!0}clear(){this._queue=new this._queueClass}async onEmpty(){if(this._queue.size===0)return;return new Promise((q)=>{let $=this._resolveEmpty;this._resolveEmpty=()=>{$(),q()}})}async onIdle(){if(this._pendingCount===0&&this._queue.size===0)return;return new Promise((q)=>{let $=this._resolveIdle;this._resolveIdle=()=>{$(),q()}})}get size(){return this._queue.size}sizeBy(q){return this._queue.filter(q).length}get pending(){return this._pendingCount}get isPaused(){return this._isPaused}get timeout(){return this._timeout}set timeout(q){this._timeout=q}}BO.default=rO});var D7=bq((tu,FO)=>{var NG=Number.MAX_SAFE_INTEGER||9007199254740991,EG=["major","premajor","minor","preminor","patch","prepatch","prerelease"];FO.exports={MAX_LENGTH:256,MAX_SAFE_COMPONENT_LENGTH:16,MAX_SAFE_BUILD_LENGTH:250,MAX_SAFE_INTEGER:NG,RELEASE_TYPES:EG,SEMVER_SPEC_VERSION:"2.0.0",FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2}});var I7=bq((Qu,tO)=>{var RG=typeof process==="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...q)=>console.error("SEMVER",...q):()=>{};tO.exports=RG});var z4=bq((o6,QO)=>{var{MAX_SAFE_COMPONENT_LENGTH:B5,MAX_SAFE_BUILD_LENGTH:hG,MAX_LENGTH:DG}=D7(),IG=I7();o6=QO.exports={};var LG=o6.re=[],bG=o6.safeRe=[],Uq=o6.src=[],gG=o6.safeSrc=[],Fq=o6.t={},yG=0,i5="[a-zA-Z0-9-]",pG=[["\\s",1],["\\d",DG],[i5,hG]],xG=(q)=>{for(let[$,K]of pG)q=q.split(`${$}*`).join(`${$}{0,${K}}`).split(`${$}+`).join(`${$}{1,${K}}`);return q},H$=(q,$,K)=>{let _=xG($),P=yG++;IG(q,P,$),Fq[q]=P,Uq[P]=$,gG[P]=_,LG[P]=new RegExp($,K?"g":void 0),bG[P]=new RegExp(_,K?"g":void 0)};H$("NUMERICIDENTIFIER","0|[1-9]\\d*");H$("NUMERICIDENTIFIERLOOSE","\\d+");H$("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${i5}*`);H$("MAINVERSION",`(${Uq[Fq.NUMERICIDENTIFIER]})\\.(${Uq[Fq.NUMERICIDENTIFIER]})\\.(${Uq[Fq.NUMERICIDENTIFIER]})`);H$("MAINVERSIONLOOSE",`(${Uq[Fq.NUMERICIDENTIFIERLOOSE]})\\.(${Uq[Fq.NUMERICIDENTIFIERLOOSE]})\\.(${Uq[Fq.NUMERICIDENTIFIERLOOSE]})`);H$("PRERELEASEIDENTIFIER",`(?:${Uq[Fq.NONNUMERICIDENTIFIER]}|${Uq[Fq.NUMERICIDENTIFIER]})`);H$("PRERELEASEIDENTIFIERLOOSE",`(?:${Uq[Fq.NONNUMERICIDENTIFIER]}|${Uq[Fq.NUMERICIDENTIFIERLOOSE]})`);H$("PRERELEASE",`(?:-(${Uq[Fq.PRERELEASEIDENTIFIER]}(?:\\.${Uq[Fq.PRERELEASEIDENTIFIER]})*))`);H$("PRERELEASELOOSE",`(?:-?(${Uq[Fq.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${Uq[Fq.PRERELEASEIDENTIFIERLOOSE]})*))`);H$("BUILDIDENTIFIER",`${i5}+`);H$("BUILD",`(?:\\+(${Uq[Fq.BUILDIDENTIFIER]}(?:\\.${Uq[Fq.BUILDIDENTIFIER]})*))`);H$("FULLPLAIN",`v?${Uq[Fq.MAINVERSION]}${Uq[Fq.PRERELEASE]}?${Uq[Fq.BUILD]}?`);H$("FULL",`^${Uq[Fq.FULLPLAIN]}$`);H$("LOOSEPLAIN",`[v=\\s]*${Uq[Fq.MAINVERSIONLOOSE]}${Uq[Fq.PRERELEASELOOSE]}?${Uq[Fq.BUILD]}?`);H$("LOOSE",`^${Uq[Fq.LOOSEPLAIN]}$`);H$("GTLT","((?:<|>)?=?)");H$("XRANGEIDENTIFIERLOOSE",`${Uq[Fq.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`);H$("XRANGEIDENTIFIER",`${Uq[Fq.NUMERICIDENTIFIER]}|x|X|\\*`);H$("XRANGEPLAIN",`[v=\\s]*(${Uq[Fq.XRANGEIDENTIFIER]})(?:\\.(${Uq[Fq.XRANGEIDENTIFIER]})(?:\\.(${Uq[Fq.XRANGEIDENTIFIER]})(?:${Uq[Fq.PRERELEASE]})?${Uq[Fq.BUILD]}?)?)?`);H$("XRANGEPLAINLOOSE",`[v=\\s]*(${Uq[Fq.XRANGEIDENTIFIERLOOSE]})(?:\\.(${Uq[Fq.XRANGEIDENTIFIERLOOSE]})(?:\\.(${Uq[Fq.XRANGEIDENTIFIERLOOSE]})(?:${Uq[Fq.PRERELEASELOOSE]})?${Uq[Fq.BUILD]}?)?)?`);H$("XRANGE",`^${Uq[Fq.GTLT]}\\s*${Uq[Fq.XRANGEPLAIN]}$`);H$("XRANGELOOSE",`^${Uq[Fq.GTLT]}\\s*${Uq[Fq.XRANGEPLAINLOOSE]}$`);H$("COERCEPLAIN",`(^|[^\\d])(\\d{1,${B5}})(?:\\.(\\d{1,${B5}}))?(?:\\.(\\d{1,${B5}}))?`);H$("COERCE",`${Uq[Fq.COERCEPLAIN]}(?:$|[^\\d])`);H$("COERCEFULL",Uq[Fq.COERCEPLAIN]+`(?:${Uq[Fq.PRERELEASE]})?(?:${Uq[Fq.BUILD]})?(?:$|[^\\d])`);H$("COERCERTL",Uq[Fq.COERCE],!0);H$("COERCERTLFULL",Uq[Fq.COERCEFULL],!0);H$("LONETILDE","(?:~>?)");H$("TILDETRIM",`(\\s*)${Uq[Fq.LONETILDE]}\\s+`,!0);o6.tildeTrimReplace="$1~";H$("TILDE",`^${Uq[Fq.LONETILDE]}${Uq[Fq.XRANGEPLAIN]}$`);H$("TILDELOOSE",`^${Uq[Fq.LONETILDE]}${Uq[Fq.XRANGEPLAINLOOSE]}$`);H$("LONECARET","(?:\\^)");H$("CARETTRIM",`(\\s*)${Uq[Fq.LONECARET]}\\s+`,!0);o6.caretTrimReplace="$1^";H$("CARET",`^${Uq[Fq.LONECARET]}${Uq[Fq.XRANGEPLAIN]}$`);H$("CARETLOOSE",`^${Uq[Fq.LONECARET]}${Uq[Fq.XRANGEPLAINLOOSE]}$`);H$("COMPARATORLOOSE",`^${Uq[Fq.GTLT]}\\s*(${Uq[Fq.LOOSEPLAIN]})$|^$`);H$("COMPARATOR",`^${Uq[Fq.GTLT]}\\s*(${Uq[Fq.FULLPLAIN]})$|^$`);H$("COMPARATORTRIM",`(\\s*)${Uq[Fq.GTLT]}\\s*(${Uq[Fq.LOOSEPLAIN]}|${Uq[Fq.XRANGEPLAIN]})`,!0);o6.comparatorTrimReplace="$1$2$3";H$("HYPHENRANGE",`^\\s*(${Uq[Fq.XRANGEPLAIN]})\\s+-\\s+(${Uq[Fq.XRANGEPLAIN]})\\s*$`);H$("HYPHENRANGELOOSE",`^\\s*(${Uq[Fq.XRANGEPLAINLOOSE]})\\s+-\\s+(${Uq[Fq.XRANGEPLAINLOOSE]})\\s*$`);H$("STAR","(<|>)?=?\\s*\\*");H$("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$");H$("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")});var M9=bq((au,aO)=>{var uG=Object.freeze({loose:!0}),mG=Object.freeze({}),cG=(q)=>{if(!q)return mG;if(typeof q!=="object")return uG;return q};aO.exports=cG});var U5=bq((eu,qW)=>{var eO=/^[0-9]+$/,sO=(q,$)=>{let K=eO.test(q),_=eO.test($);if(K&&_)q=+q,$=+$;return q===$?0:K&&!_?-1:_&&!K?1:q<$?-1:1},lG=(q,$)=>sO($,q);qW.exports={compareIdentifiers:sO,rcompareIdentifiers:lG}});var y8=bq((su,KW)=>{var S9=I7(),{MAX_LENGTH:$W,MAX_SAFE_INTEGER:C9}=D7(),{safeRe:N9,t:E9}=z4(),dG=M9(),{compareIdentifiers:J4}=U5();class E6{constructor(q,$){if($=dG($),q instanceof E6)if(q.loose===!!$.loose&&q.includePrerelease===!!$.includePrerelease)return q;else q=q.version;else if(typeof q!=="string")throw TypeError(`Invalid version. Must be a string. Got type "${typeof q}".`);if(q.length>$W)throw TypeError(`version is longer than ${$W} characters`);S9("SemVer",q,$),this.options=$,this.loose=!!$.loose,this.includePrerelease=!!$.includePrerelease;let K=q.trim().match($.loose?N9[E9.LOOSE]:N9[E9.FULL]);if(!K)throw TypeError(`Invalid Version: ${q}`);if(this.raw=q,this.major=+K[1],this.minor=+K[2],this.patch=+K[3],this.major>C9||this.major<0)throw TypeError("Invalid major version");if(this.minor>C9||this.minor<0)throw TypeError("Invalid minor version");if(this.patch>C9||this.patch<0)throw TypeError("Invalid patch version");if(!K[4])this.prerelease=[];else this.prerelease=K[4].split(".").map((_)=>{if(/^[0-9]+$/.test(_)){let P=+_;if(P>=0&&P<C9)return P}return _});this.build=K[5]?K[5].split("."):[],this.format()}format(){if(this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length)this.version+=`-${this.prerelease.join(".")}`;return this.version}toString(){return this.version}compare(q){if(S9("SemVer.compare",this.version,this.options,q),!(q instanceof E6)){if(typeof q==="string"&&q===this.version)return 0;q=new E6(q,this.options)}if(q.version===this.version)return 0;return this.compareMain(q)||this.comparePre(q)}compareMain(q){if(!(q instanceof E6))q=new E6(q,this.options);return J4(this.major,q.major)||J4(this.minor,q.minor)||J4(this.patch,q.patch)}comparePre(q){if(!(q instanceof E6))q=new E6(q,this.options);if(this.prerelease.length&&!q.prerelease.length)return-1;else if(!this.prerelease.length&&q.prerelease.length)return 1;else if(!this.prerelease.length&&!q.prerelease.length)return 0;let $=0;do{let K=this.prerelease[$],_=q.prerelease[$];if(S9("prerelease compare",$,K,_),K===void 0&&_===void 0)return 0;else if(_===void 0)return 1;else if(K===void 0)return-1;else if(K===_)continue;else return J4(K,_)}while(++$)}compareBuild(q){if(!(q instanceof E6))q=new E6(q,this.options);let $=0;do{let K=this.build[$],_=q.build[$];if(S9("build compare",$,K,_),K===void 0&&_===void 0)return 0;else if(_===void 0)return 1;else if(K===void 0)return-1;else if(K===_)continue;else return J4(K,_)}while(++$)}inc(q,$,K){if(q.startsWith("pre")){if(!$&&K===!1)throw Error("invalid increment argument: identifier is empty");if($){let _=`-${$}`.match(this.options.loose?N9[E9.PRERELEASELOOSE]:N9[E9.PRERELEASE]);if(!_||_[1]!==$)throw Error(`invalid identifier: ${$}`)}}switch(q){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",$,K);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",$,K);break;case"prepatch":this.prerelease.length=0,this.inc("patch",$,K),this.inc("pre",$,K);break;case"prerelease":if(this.prerelease.length===0)this.inc("patch",$,K);this.inc("pre",$,K);break;case"release":if(this.prerelease.length===0)throw Error(`version ${this.raw} is not a prerelease`);this.prerelease.length=0;break;case"major":if(this.minor!==0||this.patch!==0||this.prerelease.length===0)this.major++;this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":if(this.patch!==0||this.prerelease.length===0)this.minor++;this.patch=0,this.prerelease=[];break;case"patch":if(this.prerelease.length===0)this.patch++;this.prerelease=[];break;case"pre":{let _=Number(K)?1:0;if(this.prerelease.length===0)this.prerelease=[_];else{let P=this.prerelease.length;while(--P>=0)if(typeof this.prerelease[P]==="number")this.prerelease[P]++,P=-2;if(P===-1){if($===this.prerelease.join(".")&&K===!1)throw Error("invalid increment argument: identifier already exists");this.prerelease.push(_)}}if($){let P=[$,_];if(K===!1)P=[$];if(J4(this.prerelease[0],$)===0){if(isNaN(this.prerelease[1]))this.prerelease=P}else this.prerelease=P}break}default:throw Error(`invalid increment argument: ${q}`)}if(this.raw=this.format(),this.build.length)this.raw+=`+${this.build.join(".")}`;return this}}KW.exports=E6});var X_=bq((qm,PW)=>{var _W=y8(),oG=(q,$,K=!1)=>{if(q instanceof _W)return q;try{return new _W(q,$)}catch(_){if(!K)return null;throw _}};PW.exports=oG});var jW=bq(($m,YW)=>{var nG=X_(),rG=(q,$)=>{let K=nG(q,$);return K?K.version:null};YW.exports=rG});var WW=bq((Km,OW)=>{var BG=X_(),iG=(q,$)=>{let K=BG(q.trim().replace(/^[=v]+/,""),$);return K?K.version:null};OW.exports=iG});var JW=bq((_m,zW)=>{var HW=y8(),UG=(q,$,K,_,P)=>{if(typeof K==="string")P=_,_=K,K=void 0;try{return new HW(q instanceof HW?q.version:q,K).inc($,_,P).version}catch(O){return null}};zW.exports=UG});var TW=bq((Pm,wW)=>{var vW=X_(),FG=(q,$)=>{let K=vW(q,null,!0),_=vW($,null,!0),P=K.compare(_);if(P===0)return null;let O=P>0,Y=O?K:_,H=O?_:K,v=!!Y.prerelease.length;if(!!H.prerelease.length&&!v){if(!H.patch&&!H.minor)return"major";if(H.compareMain(Y)===0){if(H.minor&&!H.patch)return"minor";return"patch"}}let Z=v?"pre":"";if(K.major!==_.major)return Z+"major";if(K.minor!==_.minor)return Z+"minor";if(K.patch!==_.patch)return Z+"patch";return"prerelease"};wW.exports=FG});var fW=bq((Ym,XW)=>{var tG=y8(),QG=(q,$)=>new tG(q,$).major;XW.exports=QG});var kW=bq((jm,AW)=>{var aG=y8(),eG=(q,$)=>new aG(q,$).minor;AW.exports=eG});var ZW=bq((Om,GW)=>{var sG=y8(),qZ=(q,$)=>new sG(q,$).patch;GW.exports=qZ});var MW=bq((Wm,VW)=>{var $Z=X_(),KZ=(q,$)=>{let K=$Z(q,$);return K&&K.prerelease.length?K.prerelease:null};VW.exports=KZ});var J6=bq((Hm,CW)=>{var SW=y8(),_Z=(q,$,K)=>new SW(q,K).compare(new SW($,K));CW.exports=_Z});var EW=bq((zm,NW)=>{var PZ=J6(),YZ=(q,$,K)=>PZ($,q,K);NW.exports=YZ});var hW=bq((Jm,RW)=>{var jZ=J6(),OZ=(q,$)=>jZ(q,$,!0);RW.exports=OZ});var R9=bq((vm,IW)=>{var DW=y8(),WZ=(q,$,K)=>{let _=new DW(q,K),P=new DW($,K);return _.compare(P)||_.compareBuild(P)};IW.exports=WZ});var bW=bq((wm,LW)=>{var HZ=R9(),zZ=(q,$)=>q.sort((K,_)=>HZ(K,_,$));LW.exports=zZ});var yW=bq((Tm,gW)=>{var JZ=R9(),vZ=(q,$)=>q.sort((K,_)=>JZ(_,K,$));gW.exports=vZ});var L7=bq((Xm,pW)=>{var wZ=J6(),TZ=(q,$,K)=>wZ(q,$,K)>0;pW.exports=TZ});var h9=bq((fm,xW)=>{var XZ=J6(),fZ=(q,$,K)=>XZ(q,$,K)<0;xW.exports=fZ});var F5=bq((Am,uW)=>{var AZ=J6(),kZ=(q,$,K)=>AZ(q,$,K)===0;uW.exports=kZ});var t5=bq((km,mW)=>{var GZ=J6(),ZZ=(q,$,K)=>GZ(q,$,K)!==0;mW.exports=ZZ});var D9=bq((Gm,cW)=>{var VZ=J6(),MZ=(q,$,K)=>VZ(q,$,K)>=0;cW.exports=MZ});var I9=bq((Zm,lW)=>{var SZ=J6(),CZ=(q,$,K)=>SZ(q,$,K)<=0;lW.exports=CZ});var Q5=bq((Vm,dW)=>{var NZ=F5(),EZ=t5(),RZ=L7(),hZ=D9(),DZ=h9(),IZ=I9(),LZ=(q,$,K,_)=>{switch($){case"===":if(typeof q==="object")q=q.version;if(typeof K==="object")K=K.version;return q===K;case"!==":if(typeof q==="object")q=q.version;if(typeof K==="object")K=K.version;return q!==K;case"":case"=":case"==":return NZ(q,K,_);case"!=":return EZ(q,K,_);case">":return RZ(q,K,_);case">=":return hZ(q,K,_);case"<":return DZ(q,K,_);case"<=":return IZ(q,K,_);default:throw TypeError(`Invalid operator: ${$}`)}};dW.exports=LZ});var nW=bq((Mm,oW)=>{var bZ=y8(),gZ=X_(),{safeRe:L9,t:b9}=z4(),yZ=(q,$)=>{if(q instanceof bZ)return q;if(typeof q==="number")q=String(q);if(typeof q!=="string")return null;$=$||{};let K=null;if(!$.rtl)K=q.match($.includePrerelease?L9[b9.COERCEFULL]:L9[b9.COERCE]);else{let v=$.includePrerelease?L9[b9.COERCERTLFULL]:L9[b9.COERCERTL],X;while((X=v.exec(q))&&(!K||K.index+K[0].length!==q.length)){if(!K||X.index+X[0].length!==K.index+K[0].length)K=X;v.lastIndex=X.index+X[1].length+X[2].length}v.lastIndex=-1}if(K===null)return null;let _=K[2],P=K[3]||"0",O=K[4]||"0",Y=$.includePrerelease&&K[5]?`-${K[5]}`:"",H=$.includePrerelease&&K[6]?`+${K[6]}`:"";return gZ(`${_}.${P}.${O}${Y}${H}`,$)};oW.exports=yZ});var iW=bq((Sm,BW)=>{class rW{constructor(){this.max=1000,this.map=new Map}get(q){let $=this.map.get(q);if($===void 0)return;else return this.map.delete(q),this.map.set(q,$),$}delete(q){return this.map.delete(q)}set(q,$){if(!this.delete(q)&&$!==void 0){if(this.map.size>=this.max){let _=this.map.keys().next().value;this.delete(_)}this.map.set(q,$)}return this}}BW.exports=rW});var v6=bq((Cm,QW)=>{var pZ=/\s+/g;class b7{constructor(q,$){if($=uZ($),q instanceof b7)if(q.loose===!!$.loose&&q.includePrerelease===!!$.includePrerelease)return q;else return new b7(q.raw,$);if(q instanceof a5)return this.raw=q.value,this.set=[[q]],this.formatted=void 0,this;if(this.options=$,this.loose=!!$.loose,this.includePrerelease=!!$.includePrerelease,this.raw=q.trim().replace(pZ," "),this.set=this.raw.split("||").map((K)=>this.parseRange(K.trim())).filter((K)=>K.length),!this.set.length)throw TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){let K=this.set[0];if(this.set=this.set.filter((_)=>!FW(_[0])),this.set.length===0)this.set=[K];else if(this.set.length>1){for(let _ of this.set)if(_.length===1&&rZ(_[0])){this.set=[_];break}}}this.formatted=void 0}get range(){if(this.formatted===void 0){this.formatted="";for(let q=0;q<this.set.length;q++){if(q>0)this.formatted+="||";let $=this.set[q];for(let K=0;K<$.length;K++){if(K>0)this.formatted+=" ";this.formatted+=$[K].toString().trim()}}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(q){let K=((this.options.includePrerelease&&oZ)|(this.options.loose&&nZ))+":"+q,_=UW.get(K);if(_)return _;let P=this.options.loose,O=P?i8[u8.HYPHENRANGELOOSE]:i8[u8.HYPHENRANGE];q=q.replace(O,qV(this.options.includePrerelease)),L$("hyphen replace",q),q=q.replace(i8[u8.COMPARATORTRIM],cZ),L$("comparator trim",q),q=q.replace(i8[u8.TILDETRIM],lZ),L$("tilde trim",q),q=q.replace(i8[u8.CARETTRIM],dZ),L$("caret trim",q);let Y=q.split(" ").map((Z)=>BZ(Z,this.options)).join(" ").split(/\s+/).map((Z)=>sZ(Z,this.options));if(P)Y=Y.filter((Z)=>{return L$("loose invalid filter",Z,this.options),!!Z.match(i8[u8.COMPARATORLOOSE])});L$("range list",Y);let H=new Map,v=Y.map((Z)=>new a5(Z,this.options));for(let Z of v){if(FW(Z))return[Z];H.set(Z.value,Z)}if(H.size>1&&H.has(""))H.delete("");let X=[...H.values()];return UW.set(K,X),X}intersects(q,$){if(!(q instanceof b7))throw TypeError("a Range is required");return this.set.some((K)=>{return tW(K,$)&&q.set.some((_)=>{return tW(_,$)&&K.every((P)=>{return _.every((O)=>{return P.intersects(O,$)})})})})}test(q){if(!q)return!1;if(typeof q==="string")try{q=new mZ(q,this.options)}catch($){return!1}for(let $=0;$<this.set.length;$++)if($V(this.set[$],q,this.options))return!0;return!1}}QW.exports=b7;var xZ=iW(),UW=new xZ,uZ=M9(),a5=g7(),L$=I7(),mZ=y8(),{safeRe:i8,t:u8,comparatorTrimReplace:cZ,tildeTrimReplace:lZ,caretTrimReplace:dZ}=z4(),{FLAG_INCLUDE_PRERELEASE:oZ,FLAG_LOOSE:nZ}=D7(),FW=(q)=>q.value==="<0.0.0-0",rZ=(q)=>q.value==="",tW=(q,$)=>{let K=!0,_=q.slice(),P=_.pop();while(K&&_.length)K=_.every((O)=>{return P.intersects(O,$)}),P=_.pop();return K},BZ=(q,$)=>{return L$("comp",q,$),q=FZ(q,$),L$("caret",q),q=iZ(q,$),L$("tildes",q),q=QZ(q,$),L$("xrange",q),q=eZ(q,$),L$("stars",q),q},m8=(q)=>!q||q.toLowerCase()==="x"||q==="*",iZ=(q,$)=>{return q.trim().split(/\s+/).map((K)=>UZ(K,$)).join(" ")},UZ=(q,$)=>{let K=$.loose?i8[u8.TILDELOOSE]:i8[u8.TILDE];return q.replace(K,(_,P,O,Y,H)=>{L$("tilde",q,_,P,O,Y,H);let v;if(m8(P))v="";else if(m8(O))v=`>=${P}.0.0 <${+P+1}.0.0-0`;else if(m8(Y))v=`>=${P}.${O}.0 <${P}.${+O+1}.0-0`;else if(H)L$("replaceTilde pr",H),v=`>=${P}.${O}.${Y}-${H} <${P}.${+O+1}.0-0`;else v=`>=${P}.${O}.${Y} <${P}.${+O+1}.0-0`;return L$("tilde return",v),v})},FZ=(q,$)=>{return q.trim().split(/\s+/).map((K)=>tZ(K,$)).join(" ")},tZ=(q,$)=>{L$("caret",q,$);let K=$.loose?i8[u8.CARETLOOSE]:i8[u8.CARET],_=$.includePrerelease?"-0":"";return q.replace(K,(P,O,Y,H,v)=>{L$("caret",q,P,O,Y,H,v);let X;if(m8(O))X="";else if(m8(Y))X=`>=${O}.0.0${_} <${+O+1}.0.0-0`;else if(m8(H))if(O==="0")X=`>=${O}.${Y}.0${_} <${O}.${+Y+1}.0-0`;else X=`>=${O}.${Y}.0${_} <${+O+1}.0.0-0`;else if(v)if(L$("replaceCaret pr",v),O==="0")if(Y==="0")X=`>=${O}.${Y}.${H}-${v} <${O}.${Y}.${+H+1}-0`;else X=`>=${O}.${Y}.${H}-${v} <${O}.${+Y+1}.0-0`;else X=`>=${O}.${Y}.${H}-${v} <${+O+1}.0.0-0`;else if(L$("no pr"),O==="0")if(Y==="0")X=`>=${O}.${Y}.${H}${_} <${O}.${Y}.${+H+1}-0`;else X=`>=${O}.${Y}.${H}${_} <${O}.${+Y+1}.0-0`;else X=`>=${O}.${Y}.${H} <${+O+1}.0.0-0`;return L$("caret return",X),X})},QZ=(q,$)=>{return L$("replaceXRanges",q,$),q.split(/\s+/).map((K)=>aZ(K,$)).join(" ")},aZ=(q,$)=>{q=q.trim();let K=$.loose?i8[u8.XRANGELOOSE]:i8[u8.XRANGE];return q.replace(K,(_,P,O,Y,H,v)=>{L$("xRange",q,_,P,O,Y,H,v);let X=m8(O),Z=X||m8(Y),k=Z||m8(H),G=k;if(P==="="&&G)P="";if(v=$.includePrerelease?"-0":"",X)if(P===">"||P==="<")_="<0.0.0-0";else _="*";else if(P&&G){if(Z)Y=0;if(H=0,P===">")if(P=">=",Z)O=+O+1,Y=0,H=0;else Y=+Y+1,H=0;else if(P==="<=")if(P="<",Z)O=+O+1;else Y=+Y+1;if(P==="<")v="-0";_=`${P+O}.${Y}.${H}${v}`}else if(Z)_=`>=${O}.0.0${v} <${+O+1}.0.0-0`;else if(k)_=`>=${O}.${Y}.0${v} <${O}.${+Y+1}.0-0`;return L$("xRange return",_),_})},eZ=(q,$)=>{return L$("replaceStars",q,$),q.trim().replace(i8[u8.STAR],"")},sZ=(q,$)=>{return L$("replaceGTE0",q,$),q.trim().replace(i8[$.includePrerelease?u8.GTE0PRE:u8.GTE0],"")},qV=(q)=>($,K,_,P,O,Y,H,v,X,Z,k,G)=>{if(m8(_))K="";else if(m8(P))K=`>=${_}.0.0${q?"-0":""}`;else if(m8(O))K=`>=${_}.${P}.0${q?"-0":""}`;else if(Y)K=`>=${K}`;else K=`>=${K}${q?"-0":""}`;if(m8(X))v="";else if(m8(Z))v=`<${+X+1}.0.0-0`;else if(m8(k))v=`<${X}.${+Z+1}.0-0`;else if(G)v=`<=${X}.${Z}.${k}-${G}`;else if(q)v=`<${X}.${Z}.${+k+1}-0`;else v=`<=${v}`;return`${K} ${v}`.trim()},$V=(q,$,K)=>{for(let _=0;_<q.length;_++)if(!q[_].test($))return!1;if($.prerelease.length&&!K.includePrerelease){for(let _=0;_<q.length;_++){if(L$(q[_].semver),q[_].semver===a5.ANY)continue;if(q[_].semver.prerelease.length>0){let P=q[_].semver;if(P.major===$.major&&P.minor===$.minor&&P.patch===$.patch)return!0}}return!1}return!0}});var g7=bq((Nm,KH)=>{var y7=Symbol("SemVer ANY");class g9{static get ANY(){return y7}constructor(q,$){if($=aW($),q instanceof g9)if(q.loose===!!$.loose)return q;else q=q.value;if(q=q.trim().split(/\s+/).join(" "),s5("comparator",q,$),this.options=$,this.loose=!!$.loose,this.parse(q),this.semver===y7)this.value="";else this.value=this.operator+this.semver.version;s5("comp",this)}parse(q){let $=this.options.loose?eW[sW.COMPARATORLOOSE]:eW[sW.COMPARATOR],K=q.match($);if(!K)throw TypeError(`Invalid comparator: ${q}`);if(this.operator=K[1]!==void 0?K[1]:"",this.operator==="=")this.operator="";if(!K[2])this.semver=y7;else this.semver=new qH(K[2],this.options.loose)}toString(){return this.value}test(q){if(s5("Comparator.test",q,this.options.loose),this.semver===y7||q===y7)return!0;if(typeof q==="string")try{q=new qH(q,this.options)}catch($){return!1}return e5(q,this.operator,this.semver,this.options)}intersects(q,$){if(!(q instanceof g9))throw TypeError("a Comparator is required");if(this.operator===""){if(this.value==="")return!0;return new $H(q.value,$).test(this.value)}else if(q.operator===""){if(q.value==="")return!0;return new $H(this.value,$).test(q.semver)}if($=aW($),$.includePrerelease&&(this.value==="<0.0.0-0"||q.value==="<0.0.0-0"))return!1;if(!$.includePrerelease&&(this.value.startsWith("<0.0.0")||q.value.startsWith("<0.0.0")))return!1;if(this.operator.startsWith(">")&&q.operator.startsWith(">"))return!0;if(this.operator.startsWith("<")&&q.operator.startsWith("<"))return!0;if(this.semver.version===q.semver.version&&this.operator.includes("=")&&q.operator.includes("="))return!0;if(e5(this.semver,"<",q.semver,$)&&this.operator.startsWith(">")&&q.operator.startsWith("<"))return!0;if(e5(this.semver,">",q.semver,$)&&this.operator.startsWith("<")&&q.operator.startsWith(">"))return!0;return!1}}KH.exports=g9;var aW=M9(),{safeRe:eW,t:sW}=z4(),e5=Q5(),s5=I7(),qH=y8(),$H=v6()});var p7=bq((Em,_H)=>{var KV=v6(),_V=(q,$,K)=>{try{$=new KV($,K)}catch(_){return!1}return $.test(q)};_H.exports=_V});var YH=bq((Rm,PH)=>{var PV=v6(),YV=(q,$)=>new PV(q,$).set.map((K)=>K.map((_)=>_.value).join(" ").trim().split(" "));PH.exports=YV});var OH=bq((hm,jH)=>{var jV=y8(),OV=v6(),WV=(q,$,K)=>{let _=null,P=null,O=null;try{O=new OV($,K)}catch(Y){return null}return q.forEach((Y)=>{if(O.test(Y)){if(!_||P.compare(Y)===-1)_=Y,P=new jV(_,K)}}),_};jH.exports=WV});var HH=bq((Dm,WH)=>{var HV=y8(),zV=v6(),JV=(q,$,K)=>{let _=null,P=null,O=null;try{O=new zV($,K)}catch(Y){return null}return q.forEach((Y)=>{if(O.test(Y)){if(!_||P.compare(Y)===1)_=Y,P=new HV(_,K)}}),_};WH.exports=JV});var vH=bq((Im,JH)=>{var qY=y8(),vV=v6(),zH=L7(),wV=(q,$)=>{q=new vV(q,$);let K=new qY("0.0.0");if(q.test(K))return K;if(K=new qY("0.0.0-0"),q.test(K))return K;K=null;for(let _=0;_<q.set.length;++_){let P=q.set[_],O=null;if(P.forEach((Y)=>{let H=new qY(Y.semver.version);switch(Y.operator){case">":if(H.prerelease.length===0)H.patch++;else H.prerelease.push(0);H.raw=H.format();case"":case">=":if(!O||zH(H,O))O=H;break;case"<":case"<=":break;default:throw Error(`Unexpected operation: ${Y.operator}`)}}),O&&(!K||zH(K,O)))K=O}if(K&&q.test(K))return K;return null};JH.exports=wV});var TH=bq((Lm,wH)=>{var TV=v6(),XV=(q,$)=>{try{return new TV(q,$).range||"*"}catch(K){return null}};wH.exports=XV});var y9=bq((bm,kH)=>{var fV=y8(),AH=g7(),{ANY:AV}=AH,kV=v6(),GV=p7(),XH=L7(),fH=h9(),ZV=I9(),VV=D9(),MV=(q,$,K,_)=>{q=new fV(q,_),$=new kV($,_);let P,O,Y,H,v;switch(K){case">":P=XH,O=ZV,Y=fH,H=">",v=">=";break;case"<":P=fH,O=VV,Y=XH,H="<",v="<=";break;default:throw TypeError('Must provide a hilo val of "<" or ">"')}if(GV(q,$,_))return!1;for(let X=0;X<$.set.length;++X){let Z=$.set[X],k=null,G=null;if(Z.forEach((S)=>{if(S.semver===AV)S=new AH(">=0.0.0");if(k=k||S,G=G||S,P(S.semver,k.semver,_))k=S;else if(Y(S.semver,G.semver,_))G=S}),k.operator===H||k.operator===v)return!1;if((!G.operator||G.operator===H)&&O(q,G.semver))return!1;else if(G.operator===v&&Y(q,G.semver))return!1}return!0};kH.exports=MV});var ZH=bq((gm,GH)=>{var SV=y9(),CV=(q,$,K)=>SV(q,$,">",K);GH.exports=CV});var MH=bq((ym,VH)=>{var NV=y9(),EV=(q,$,K)=>NV(q,$,"<",K);VH.exports=EV});var NH=bq((pm,CH)=>{var SH=v6(),RV=(q,$,K)=>{return q=new SH(q,K),$=new SH($,K),q.intersects($,K)};CH.exports=RV});var RH=bq((xm,EH)=>{var hV=p7(),DV=J6();EH.exports=(q,$,K)=>{let _=[],P=null,O=null,Y=q.sort((Z,k)=>DV(Z,k,K));for(let Z of Y)if(hV(Z,$,K)){if(O=Z,!P)P=Z}else{if(O)_.push([P,O]);O=null,P=null}if(P)_.push([P,null]);let H=[];for(let[Z,k]of _)if(Z===k)H.push(Z);else if(!k&&Z===Y[0])H.push("*");else if(!k)H.push(`>=${Z}`);else if(Z===Y[0])H.push(`<=${k}`);else H.push(`${Z} - ${k}`);let v=H.join(" || "),X=typeof $.raw==="string"?$.raw:String($);return v.length<X.length?v:$}});var gH=bq((um,bH)=>{var hH=v6(),KY=g7(),{ANY:$Y}=KY,x7=p7(),_Y=J6(),IV=(q,$,K={})=>{if(q===$)return!0;q=new hH(q,K),$=new hH($,K);let _=!1;q:for(let P of q.set){for(let O of $.set){let Y=bV(P,O,K);if(_=_||Y!==null,Y)continue q}if(_)return!1}return!0},LV=[new KY(">=0.0.0-0")],DH=[new KY(">=0.0.0")],bV=(q,$,K)=>{if(q===$)return!0;if(q.length===1&&q[0].semver===$Y)if($.length===1&&$[0].semver===$Y)return!0;else if(K.includePrerelease)q=LV;else q=DH;if($.length===1&&$[0].semver===$Y)if(K.includePrerelease)return!0;else $=DH;let _=new Set,P,O;for(let S of q)if(S.operator===">"||S.operator===">=")P=IH(P,S,K);else if(S.operator==="<"||S.operator==="<=")O=LH(O,S,K);else _.add(S.semver);if(_.size>1)return null;let Y;if(P&&O){if(Y=_Y(P.semver,O.semver,K),Y>0)return null;else if(Y===0&&(P.operator!==">="||O.operator!=="<="))return null}for(let S of _){if(P&&!x7(S,String(P),K))return null;if(O&&!x7(S,String(O),K))return null;for(let N of $)if(!x7(S,String(N),K))return!1;return!0}let H,v,X,Z,k=O&&!K.includePrerelease&&O.semver.prerelease.length?O.semver:!1,G=P&&!K.includePrerelease&&P.semver.prerelease.length?P.semver:!1;if(k&&k.prerelease.length===1&&O.operator==="<"&&k.prerelease[0]===0)k=!1;for(let S of $){if(Z=Z||S.operator===">"||S.operator===">=",X=X||S.operator==="<"||S.operator==="<=",P){if(G){if(S.semver.prerelease&&S.semver.prerelease.length&&S.semver.major===G.major&&S.semver.minor===G.minor&&S.semver.patch===G.patch)G=!1}if(S.operator===">"||S.operator===">="){if(H=IH(P,S,K),H===S&&H!==P)return!1}else if(P.operator===">="&&!x7(P.semver,String(S),K))return!1}if(O){if(k){if(S.semver.prerelease&&S.semver.prerelease.length&&S.semver.major===k.major&&S.semver.minor===k.minor&&S.semver.patch===k.patch)k=!1}if(S.operator==="<"||S.operator==="<="){if(v=LH(O,S,K),v===S&&v!==O)return!1}else if(O.operator==="<="&&!x7(O.semver,String(S),K))return!1}if(!S.operator&&(O||P)&&Y!==0)return!1}if(P&&X&&!O&&Y!==0)return!1;if(O&&Z&&!P&&Y!==0)return!1;if(G||k)return!1;return!0},IH=(q,$,K)=>{if(!q)return $;let _=_Y(q.semver,$.semver,K);return _>0?q:_<0?$:$.operator===">"&&q.operator===">="?$:q},LH=(q,$,K)=>{if(!q)return $;let _=_Y(q.semver,$.semver,K);return _<0?q:_>0?$:$.operator==="<"&&q.operator==="<="?$:q};bH.exports=IV});var uH=bq((mm,xH)=>{var PY=z4(),yH=D7(),gV=y8(),pH=U5(),yV=X_(),pV=jW(),xV=WW(),uV=JW(),mV=TW(),cV=fW(),lV=kW(),dV=ZW(),oV=MW(),nV=J6(),rV=EW(),BV=hW(),iV=R9(),UV=bW(),FV=yW(),tV=L7(),QV=h9(),aV=F5(),eV=t5(),sV=D9(),qM=I9(),$M=Q5(),KM=nW(),_M=g7(),PM=v6(),YM=p7(),jM=YH(),OM=OH(),WM=HH(),HM=vH(),zM=TH(),JM=y9(),vM=ZH(),wM=MH(),TM=NH(),XM=RH(),fM=gH();xH.exports={parse:yV,valid:pV,clean:xV,inc:uV,diff:mV,major:cV,minor:lV,patch:dV,prerelease:oV,compare:nV,rcompare:rV,compareLoose:BV,compareBuild:iV,sort:UV,rsort:FV,gt:tV,lt:QV,eq:aV,neq:eV,gte:sV,lte:qM,cmp:$M,coerce:KM,Comparator:_M,Range:PM,satisfies:YM,toComparators:jM,maxSatisfying:OM,minSatisfying:WM,minVersion:HM,validRange:zM,outside:JM,gtr:vM,ltr:wM,intersects:TM,simplifyRange:XM,subset:fM,SemVer:gV,re:PY.re,src:PY.src,tokens:PY.t,SEMVER_SPEC_VERSION:yH.SEMVER_SPEC_VERSION,RELEASE_TYPES:yH.RELEASE_TYPES,compareIdentifiers:pH.compareIdentifiers,rcompareIdentifiers:pH.rcompareIdentifiers}});var sH=bq((fc,eH)=>{eH.exports=function(q,$){if(typeof q!=="string")throw TypeError("Expected a string");return $=typeof $>"u"?"_":$,q.replace(/([a-z\d])([A-Z])/g,"$1"+$+"$2").replace(/([A-Z]+)([A-Z][a-z\d]+)/g,"$1"+$+"$2").toLowerCase()}});var jz=bq((Ac,HY)=>{var xM=/[\p{Lu}]/u,uM=/[\p{Ll}]/u,qz=/^[\p{Lu}](?![\p{Lu}])/gu,_z=/([\p{Alpha}\p{N}_]|$)/u,Pz=/[_.\- ]+/,mM=new RegExp("^"+Pz.source),$z=new RegExp(Pz.source+_z.source,"gu"),Kz=new RegExp("\\d+"+_z.source,"gu"),cM=(q,$,K)=>{let _=!1,P=!1,O=!1;for(let Y=0;Y<q.length;Y++){let H=q[Y];if(_&&xM.test(H))q=q.slice(0,Y)+"-"+q.slice(Y),_=!1,O=P,P=!0,Y++;else if(P&&O&&uM.test(H))q=q.slice(0,Y-1)+"-"+q.slice(Y-1),O=P,P=!1,_=!0;else _=$(H)===H&&K(H)!==H,O=P,P=K(H)===H&&$(H)!==H}return q},lM=(q,$)=>{return qz.lastIndex=0,q.replace(qz,(K)=>$(K))},dM=(q,$)=>{return $z.lastIndex=0,Kz.lastIndex=0,q.replace($z,(K,_)=>$(_)).replace(Kz,(K)=>$(K))},Yz=(q,$)=>{if(!(typeof q==="string"||Array.isArray(q)))throw TypeError("Expected the input to be `string | string[]`");if($={pascalCase:!1,preserveConsecutiveUppercase:!1,...$},Array.isArray(q))q=q.map((O)=>O.trim()).filter((O)=>O.length).join("-");else q=q.trim();if(q.length===0)return"";let K=$.locale===!1?(O)=>O.toLowerCase():(O)=>O.toLocaleLowerCase($.locale),_=$.locale===!1?(O)=>O.toUpperCase():(O)=>O.toLocaleUpperCase($.locale);if(q.length===1)return $.pascalCase?_(q):K(q);if(q!==K(q))q=cM(q,K,_);if(q=q.replace(mM,""),$.preserveConsecutiveUppercase)q=lM(q,K);else q=K(q);if($.pascalCase)q=_(q.charAt(0))+q.slice(1);return dM(q,_)};HY.exports=Yz;HY.exports.default=Yz});var Az=bq((Dc,fz)=>{var Tz=(q=0)=>($)=>`\x1B[${38+q};5;${$}m`,Xz=(q=0)=>($,K,_)=>`\x1B[${38+q};2;${$};${K};${_}m`;function QM(){let q=new Map,$={modifier:{reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],overline:[53,55],inverse:[7,27],hidden:[8,28],strikethrough:[9,29]},color:{black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],blackBright:[90,39],redBright:[91,39],greenBright:[92,39],yellowBright:[93,39],blueBright:[94,39],magentaBright:[95,39],cyanBright:[96,39],whiteBright:[97,39]},bgColor:{bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgBlackBright:[100,49],bgRedBright:[101,49],bgGreenBright:[102,49],bgYellowBright:[103,49],bgBlueBright:[104,49],bgMagentaBright:[105,49],bgCyanBright:[106,49],bgWhiteBright:[107,49]}};$.color.gray=$.color.blackBright,$.bgColor.bgGray=$.bgColor.bgBlackBright,$.color.grey=$.color.blackBright,$.bgColor.bgGrey=$.bgColor.bgBlackBright;for(let[K,_]of Object.entries($)){for(let[P,O]of Object.entries(_))$[P]={open:`\x1B[${O[0]}m`,close:`\x1B[${O[1]}m`},_[P]=$[P],q.set(O[0],O[1]);Object.defineProperty($,K,{value:_,enumerable:!1})}return Object.defineProperty($,"codes",{value:q,enumerable:!1}),$.color.close="\x1B[39m",$.bgColor.close="\x1B[49m",$.color.ansi256=Tz(),$.color.ansi16m=Xz(),$.bgColor.ansi256=Tz(10),$.bgColor.ansi16m=Xz(10),Object.defineProperties($,{rgbToAnsi256:{value:(K,_,P)=>{if(K===_&&_===P){if(K<8)return 16;if(K>248)return 231;return Math.round((K-8)/247*24)+232}return 16+36*Math.round(K/255*5)+6*Math.round(_/255*5)+Math.round(P/255*5)},enumerable:!1},hexToRgb:{value:(K)=>{let _=/(?<colorString>[a-f\d]{6}|[a-f\d]{3})/i.exec(K.toString(16));if(!_)return[0,0,0];let{colorString:P}=_.groups;if(P.length===3)P=P.split("").map((Y)=>Y+Y).join("");let O=Number.parseInt(P,16);return[O>>16&255,O>>8&255,O&255]},enumerable:!1},hexToAnsi256:{value:(K)=>$.rgbToAnsi256(...$.hexToRgb(K)),enumerable:!1}}),$}Object.defineProperty(fz,"exports",{enumerable:!0,get:QM})});var aJ=bq((O0)=>{O0.byteLength=$0;O0.toByteArray=_0;O0.fromByteArray=j0;var e6=[],f6=[],q0=typeof Uint8Array<"u"?Uint8Array:Array,eY="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(UK=0,sY=eY.length;UK<sY;++UK)e6[UK]=eY[UK],f6[eY.charCodeAt(UK)]=UK;var UK,sY;f6[45]=62;f6[95]=63;function QJ(q){var $=q.length;if($%4>0)throw Error("Invalid string. Length must be a multiple of 4");var K=q.indexOf("=");if(K===-1)K=$;var _=K===$?0:4-K%4;return[K,_]}function $0(q){var $=QJ(q),K=$[0],_=$[1];return(K+_)*3/4-_}function K0(q,$,K){return($+K)*3/4-K}function _0(q){var $,K=QJ(q),_=K[0],P=K[1],O=new q0(K0(q,_,P)),Y=0,H=P>0?_-4:_,v;for(v=0;v<H;v+=4)$=f6[q.charCodeAt(v)]<<18|f6[q.charCodeAt(v+1)]<<12|f6[q.charCodeAt(v+2)]<<6|f6[q.charCodeAt(v+3)],O[Y++]=$>>16&255,O[Y++]=$>>8&255,O[Y++]=$&255;if(P===2)$=f6[q.charCodeAt(v)]<<2|f6[q.charCodeAt(v+1)]>>4,O[Y++]=$&255;if(P===1)$=f6[q.charCodeAt(v)]<<10|f6[q.charCodeAt(v+1)]<<4|f6[q.charCodeAt(v+2)]>>2,O[Y++]=$>>8&255,O[Y++]=$&255;return O}function P0(q){return e6[q>>18&63]+e6[q>>12&63]+e6[q>>6&63]+e6[q&63]}function Y0(q,$,K){var _,P=[];for(var O=$;O<K;O+=3)_=(q[O]<<16&16711680)+(q[O+1]<<8&65280)+(q[O+2]&255),P.push(P0(_));return P.join("")}function j0(q){var $,K=q.length,_=K%3,P=[],O=16383;for(var Y=0,H=K-_;Y<H;Y+=O)P.push(Y0(q,Y,Y+O>H?H:Y+O));if(_===1)$=q[K-1],P.push(e6[$>>2]+e6[$<<4&63]+"==");else if(_===2)$=(q[K-2]<<8)+q[K-1],P.push(e6[$>>10]+e6[$>>4&63]+e6[$<<2&63]+"=");return P.join("")}});var o8=bq((h0)=>{h0.__esModule=!0;h0.extend=qv;h0.indexOf=M0;h0.escapeExpression=S0;h0.isEmpty=C0;h0.createFrame=N0;h0.blockParams=E0;h0.appendContextPath=R0;var k0={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;","=":"&#x3D;"},G0=/[&<>"'`=]/g,Z0=/[&<>"'`=]/;function V0(q){return k0[q]}function qv(q){for(var $=1;$<arguments.length;$++)for(var K in arguments[$])if(Object.prototype.hasOwnProperty.call(arguments[$],K))q[K]=arguments[$][K];return q}var _2=Object.prototype.toString;h0.toString=_2;var K2=function($){return typeof $==="function"};if(K2(/x/))h0.isFunction=K2=function(q){return typeof q==="function"&&_2.call(q)==="[object Function]"};h0.isFunction=K2;var $v=Array.isArray||function(q){return q&&typeof q==="object"?_2.call(q)==="[object Array]":!1};h0.isArray=$v;function M0(q,$){for(var K=0,_=q.length;K<_;K++)if(q[K]===$)return K;return-1}function S0(q){if(typeof q!=="string"){if(q&&q.toHTML)return q.toHTML();else if(q==null)return"";else if(!q)return q+"";q=""+q}if(!Z0.test(q))return q;return q.replace(G0,V0)}function C0(q){if(!q&&q!==0)return!0;else if($v(q)&&q.length===0)return!0;else return!1}function N0(q){var $=qv({},q);return $._parent=q,$}function E0(q,$){return q.path=$,q}function R0(q,$){return(q?q+".":"")+$}});var A6=bq((Kv,_v)=>{Kv.__esModule=!0;var P2=["description","fileName","lineNumber","endLineNumber","message","name","number","stack"];function Y2(q,$){var K=$&&$.loc,_=void 0,P=void 0,O=void 0,Y=void 0;if(K)_=K.start.line,P=K.end.line,O=K.start.column,Y=K.end.column,q+=" - "+_+":"+O;var H=Error.prototype.constructor.call(this,q);for(var v=0;v<P2.length;v++)this[P2[v]]=H[P2[v]];if(Error.captureStackTrace)Error.captureStackTrace(this,Y2);try{if(K)if(this.lineNumber=_,this.endLineNumber=P,Object.defineProperty)Object.defineProperty(this,"column",{value:O,enumerable:!0}),Object.defineProperty(this,"endColumn",{value:Y,enumerable:!0});else this.column=O,this.endColumn=Y}catch(X){}}Y2.prototype=Error();Kv.default=Y2;_v.exports=Kv.default});var jv=bq((Pv,Yv)=>{Pv.__esModule=!0;var j2=o8();Pv.default=function(q){q.registerHelper("blockHelperMissing",function($,K){var{inverse:_,fn:P}=K;if($===!0)return P(this);else if($===!1||$==null)return _(this);else if(j2.isArray($))if($.length>0){if(K.ids)K.ids=[K.name];return q.helpers.each($,K)}else return _(this);else{if(K.data&&K.ids){var O=j2.createFrame(K.data);O.contextPath=j2.appendContextPath(K.data.contextPath,K.name),K={data:O}}return P($,K)}})};Yv.exports=Pv.default});var Hv=bq((Ov,Wv)=>{Ov.__esModule=!0;function r0(q){return q&&q.__esModule?q:{default:q}}var JP=o8(),B0=A6(),i0=r0(B0);Ov.default=function(q){q.registerHelper("each",function($,K){if(!K)throw new i0.default("Must pass iterator to #each");var{fn:_,inverse:P}=K,O=0,Y="",H=void 0,v=void 0;if(K.data&&K.ids)v=JP.appendContextPath(K.data.contextPath,K.ids[0])+".";if(JP.isFunction($))$=$.call(this);if(K.data)H=JP.createFrame(K.data);function X(N,E,h){if(H){if(H.key=N,H.index=E,H.first=E===0,H.last=!!h,v)H.contextPath=v+N}Y=Y+_($[N],{data:H,blockParams:JP.blockParams([$[N],N],[v+N,null])})}if($&&typeof $==="object")if(JP.isArray($)){for(var Z=$.length;O<Z;O++)if(O in $)X(O,O,O===$.length-1)}else if(typeof Symbol==="function"&&$[Symbol.iterator]){var k=[],G=$[Symbol.iterator]();for(var S=G.next();!S.done;S=G.next())k.push(S.value);$=k;for(var Z=$.length;O<Z;O++)X(O,O,O===$.length-1)}else(function(){var N=void 0;if(Object.keys($).forEach(function(E){if(N!==void 0)X(N,O-1);N=E,O++}),N!==void 0)X(N,O-1,!0)})();if(O===0)Y=P(this);return Y})};Wv.exports=Ov.default});var vv=bq((zv,Jv)=>{zv.__esModule=!0;function t0(q){return q&&q.__esModule?q:{default:q}}var Q0=A6(),a0=t0(Q0);zv.default=function(q){q.registerHelper("helperMissing",function(){if(arguments.length===1)return;else throw new a0.default('Missing helper: "'+arguments[arguments.length-1].name+'"')})};Jv.exports=zv.default});var Av=bq((Xv,fv)=>{Xv.__esModule=!0;function qC(q){return q&&q.__esModule?q:{default:q}}var wv=o8(),$C=A6(),Tv=qC($C);Xv.default=function(q){q.registerHelper("if",function($,K){if(arguments.length!=2)throw new Tv.default("#if requires exactly one argument");if(wv.isFunction($))$=$.call(this);if(!K.hash.includeZero&&!$||wv.isEmpty($))return K.inverse(this);else return K.fn(this)}),q.registerHelper("unless",function($,K){if(arguments.length!=2)throw new Tv.default("#unless requires exactly one argument");return q.helpers.if.call(this,$,{fn:K.inverse,inverse:K.fn,hash:K.hash})})};fv.exports=Xv.default});var Zv=bq((kv,Gv)=>{kv.__esModule=!0;kv.default=function(q){q.registerHelper("log",function(){var $=[void 0],K=arguments[arguments.length-1];for(var _=0;_<arguments.length-1;_++)$.push(arguments[_]);var P=1;if(K.hash.level!=null)P=K.hash.level;else if(K.data&&K.data.level!=null)P=K.data.level;$[0]=P,q.log.apply(q,$)})};Gv.exports=kv.default});var Sv=bq((Vv,Mv)=>{Vv.__esModule=!0;Vv.default=function(q){q.registerHelper("lookup",function($,K,_){if(!$)return $;return _.lookupProperty($,K)})};Mv.exports=Vv.default});var Ev=bq((Cv,Nv)=>{Cv.__esModule=!0;function WC(q){return q&&q.__esModule?q:{default:q}}var vP=o8(),HC=A6(),zC=WC(HC);Cv.default=function(q){q.registerHelper("with",function($,K){if(arguments.length!=2)throw new zC.default("#with requires exactly one argument");if(vP.isFunction($))$=$.call(this);var _=K.fn;if(!vP.isEmpty($)){var P=K.data;if(K.data&&K.ids)P=vP.createFrame(K.data),P.contextPath=vP.appendContextPath(K.data.contextPath,K.ids[0]);return _($,{data:P,blockParams:vP.blockParams([$],[P&&P.contextPath])})}else return K.inverse(this)})};Nv.exports=Cv.default});var O2=bq((DC)=>{DC.__esModule=!0;DC.registerDefaultHelpers=RC;DC.moveHelperToHooks=hC;function E_(q){return q&&q.__esModule?q:{default:q}}var wC=jv(),TC=E_(wC),XC=Hv(),fC=E_(XC),AC=vv(),kC=E_(AC),GC=Av(),ZC=E_(GC),VC=Zv(),MC=E_(VC),SC=Sv(),CC=E_(SC),NC=Ev(),EC=E_(NC);function RC(q){TC.default(q),fC.default(q),kC.default(q),ZC.default(q),MC.default(q),CC.default(q),EC.default(q)}function hC(q,$,K){if(q.helpers[$]){if(q.hooks[$]=q.helpers[$],!K)delete q.helpers[$]}}});var Dv=bq((Rv,hv)=>{Rv.__esModule=!0;var gC=o8();Rv.default=function(q){q.registerDecorator("inline",function($,K,_,P){var O=$;if(!K.partials)K.partials={},O=function(Y,H){var v=_.partials;_.partials=gC.extend({},v,K.partials);var X=$(Y,H);return _.partials=v,X};return K.partials[P.args[0]]=P.fn,O})};hv.exports=Rv.default});var Iv=bq((lC)=>{lC.__esModule=!0;lC.registerDefaultDecorators=cC;function xC(q){return q&&q.__esModule?q:{default:q}}var uC=Dv(),mC=xC(uC);function cC(q){mC.default(q)}});var W2=bq((Lv,bv)=>{Lv.__esModule=!0;var nC=o8(),E4={methodMap:["debug","info","warn","error"],level:"info",lookupLevel:function($){if(typeof $==="string"){var K=nC.indexOf(E4.methodMap,$.toLowerCase());if(K>=0)$=K;else $=parseInt($,10)}return $},log:function($){if($=E4.lookupLevel($),typeof console<"u"&&E4.lookupLevel(E4.level)<=$){var K=E4.methodMap[$];if(!console[K])K="log";for(var _=arguments.length,P=Array(_>1?_-1:0),O=1;O<_;O++)P[O-1]=arguments[O];console[K].apply(console,P)}}};Lv.default=E4;bv.exports=Lv.default});var gv=bq((FC)=>{FC.__esModule=!0;FC.createNewLookupObject=UC;var iC=o8();function UC(){for(var q=arguments.length,$=Array(q),K=0;K<q;K++)$[K]=arguments[K];return iC.extend.apply(void 0,[Object.create(null)].concat($))}});var H2=bq((PN)=>{PN.__esModule=!0;PN.createProtoAccessControl=qN;PN.resultIsAllowed=$N;PN.resetLoggedProperties=_N;function aC(q){return q&&q.__esModule?q:{default:q}}var yv=gv(),eC=W2(),sC=aC(eC),k1=Object.create(null);function qN(q){var $=Object.create(null);$.constructor=!1,$.__defineGetter__=!1,$.__defineSetter__=!1,$.__lookupGetter__=!1;var K=Object.create(null);return K.__proto__=!1,{properties:{whitelist:yv.createNewLookupObject(K,q.allowedProtoProperties),defaultValue:q.allowProtoPropertiesByDefault},methods:{whitelist:yv.createNewLookupObject($,q.allowedProtoMethods),defaultValue:q.allowProtoMethodsByDefault}}}function $N(q,$,K){if(typeof q==="function")return pv($.methods,K);else return pv($.properties,K)}function pv(q,$){if(q.whitelist[$]!==void 0)return q.whitelist[$]===!0;if(q.defaultValue!==void 0)return q.defaultValue;return KN($),!1}function KN(q){if(k1[q]!==!0)k1[q]=!0,sC.default.log("error",'Handlebars: Access has been denied to resolve the property "'+q+`" because it is not an "own property" of its parent.
You can add a runtime option to disable the check or this warning:
See https://handlebarsjs.com/api-reference/runtime-options.html#options-to-control-prototype-access for details`)}function _N(){Object.keys(k1).forEach(function(q){delete k1[q]})}});var Z1=bq((GN)=>{GN.__esModule=!0;GN.HandlebarsEnvironment=v2;function xv(q){return q&&q.__esModule?q:{default:q}}var R_=o8(),HN=A6(),z2=xv(HN),zN=O2(),JN=Iv(),vN=W2(),G1=xv(vN),wN=H2(),TN="4.7.8";GN.VERSION=TN;var XN=8;GN.COMPILER_REVISION=XN;var fN=7;GN.LAST_COMPATIBLE_COMPILER_REVISION=fN;var AN={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:"== 1.x.x",5:"== 2.0.0-alpha.x",6:">= 2.0.0-beta.1",7:">= 4.0.0 <4.3.0",8:">= 4.3.0"};GN.REVISION_CHANGES=AN;var J2="[object Object]";function v2(q,$,K){this.helpers=q||{},this.partials=$||{},this.decorators=K||{},zN.registerDefaultHelpers(this),JN.registerDefaultDecorators(this)}v2.prototype={constructor:v2,logger:G1.default,log:G1.default.log,registerHelper:function($,K){if(R_.toString.call($)===J2){if(K)throw new z2.default("Arg not supported with multiple helpers");R_.extend(this.helpers,$)}else this.helpers[$]=K},unregisterHelper:function($){delete this.helpers[$]},registerPartial:function($,K){if(R_.toString.call($)===J2)R_.extend(this.partials,$);else{if(typeof K>"u")throw new z2.default('Attempting to register a partial called "'+$+'" as undefined');this.partials[$]=K}},unregisterPartial:function($){delete this.partials[$]},registerDecorator:function($,K){if(R_.toString.call($)===J2){if(K)throw new z2.default("Arg not supported with multiple decorators");R_.extend(this.decorators,$)}else this.decorators[$]=K},unregisterDecorator:function($){delete this.decorators[$]},resetLoggedPropertyAccesses:function(){wN.resetLoggedProperties()}};var kN=G1.default.log;GN.log=kN;GN.createFrame=R_.createFrame;GN.logger=G1.default});var cv=bq((uv,mv)=>{uv.__esModule=!0;function w2(q){this.string=q}w2.prototype.toString=w2.prototype.toHTML=function(){return""+this.string};uv.default=w2;mv.exports=uv.default});var lv=bq((bN)=>{bN.__esModule=!0;bN.wrapHelper=LN;function LN(q,$){if(typeof q!=="function")return q;var K=function(){var P=arguments[arguments.length-1];return arguments[arguments.length-1]=$(P),q.apply(this,arguments)};return K}});var Bv=bq((UN)=>{UN.__esModule=!0;UN.checkRevision=lN;UN.template=dN;UN.wrapProgram=V1;UN.resolvePartial=oN;UN.invokePartial=nN;UN.noop=nv;function pN(q){return q&&q.__esModule?q:{default:q}}function xN(q){if(q&&q.__esModule)return q;else{var $={};if(q!=null){for(var K in q)if(Object.prototype.hasOwnProperty.call(q,K))$[K]=q[K]}return $.default=q,$}}var uN=o8(),VK=xN(uN),mN=A6(),MK=pN(mN),SK=Z1(),dv=O2(),cN=lv(),ov=H2();function lN(q){var $=q&&q[0]||1,K=SK.COMPILER_REVISION;if($>=SK.LAST_COMPATIBLE_COMPILER_REVISION&&$<=SK.COMPILER_REVISION)return;if($<SK.LAST_COMPATIBLE_COMPILER_REVISION){var _=SK.REVISION_CHANGES[K],P=SK.REVISION_CHANGES[$];throw new MK.default("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+_+") or downgrade your runtime to an older version ("+P+").")}else throw new MK.default("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+q[1]+").")}function dN(q,$){if(!$)throw new MK.default("No environment passed to template");if(!q||!q.main)throw new MK.default("Unknown template object: "+typeof q);q.main.decorator=q.main_d,$.VM.checkRevision(q.compiler);var K=q.compiler&&q.compiler[0]===7;function _(Y,H,v){if(v.hash){if(H=VK.extend({},H,v.hash),v.ids)v.ids[0]=!0}Y=$.VM.resolvePartial.call(this,Y,H,v);var X=VK.extend({},v,{hooks:this.hooks,protoAccessControl:this.protoAccessControl}),Z=$.VM.invokePartial.call(this,Y,H,X);if(Z==null&&$.compile)v.partials[v.name]=$.compile(Y,q.compilerOptions,$),Z=v.partials[v.name](H,X);if(Z!=null){if(v.indent){var k=Z.split(`
`);for(var G=0,S=k.length;G<S;G++){if(!k[G]&&G+1===S)break;k[G]=v.indent+k[G]}Z=k.join(`
`)}return Z}else throw new MK.default("The partial "+v.name+" could not be compiled when running in runtime-only mode")}var P={strict:function(H,v,X){if(!H||!(v in H))throw new MK.default('"'+v+'" not defined in '+H,{loc:X});return P.lookupProperty(H,v)},lookupProperty:function(H,v){var X=H[v];if(X==null)return X;if(Object.prototype.hasOwnProperty.call(H,v))return X;if(ov.resultIsAllowed(X,P.protoAccessControl,v))return X;return},lookup:function(H,v){var X=H.length;for(var Z=0;Z<X;Z++){var k=H[Z]&&P.lookupProperty(H[Z],v);if(k!=null)return H[Z][v]}},lambda:function(H,v){return typeof H==="function"?H.call(v):H},escapeExpression:VK.escapeExpression,invokePartial:_,fn:function(H){var v=q[H];return v.decorator=q[H+"_d"],v},programs:[],program:function(H,v,X,Z,k){var G=this.programs[H],S=this.fn(H);if(v||k||Z||X)G=V1(this,H,S,v,X,Z,k);else if(!G)G=this.programs[H]=V1(this,H,S);return G},data:function(H,v){while(H&&v--)H=H._parent;return H},mergeIfNeeded:function(H,v){var X=H||v;if(H&&v&&H!==v)X=VK.extend({},v,H);return X},nullContext:Object.seal({}),noop:$.VM.noop,compilerInfo:q.compiler};function O(Y){var H=arguments.length<=1||arguments[1]===void 0?{}:arguments[1],v=H.data;if(O._setup(H),!H.partial&&q.useData)v=rN(Y,v);var X=void 0,Z=q.useBlockParams?[]:void 0;if(q.useDepths)if(H.depths)X=Y!=H.depths[0]?[Y].concat(H.depths):H.depths;else X=[Y];function k(G){return""+q.main(P,G,P.helpers,P.partials,v,Z,X)}return k=rv(q.main,k,P,H.depths||[],v,Z),k(Y,H)}return O.isTop=!0,O._setup=function(Y){if(!Y.partial){var H=VK.extend({},$.helpers,Y.helpers);if(BN(H,P),P.helpers=H,q.usePartial)P.partials=P.mergeIfNeeded(Y.partials,$.partials);if(q.usePartial||q.useDecorators)P.decorators=VK.extend({},$.decorators,Y.decorators);P.hooks={},P.protoAccessControl=ov.createProtoAccessControl(Y);var v=Y.allowCallsToHelperMissing||K;dv.moveHelperToHooks(P,"helperMissing",v),dv.moveHelperToHooks(P,"blockHelperMissing",v)}else P.protoAccessControl=Y.protoAccessControl,P.helpers=Y.helpers,P.partials=Y.partials,P.decorators=Y.decorators,P.hooks=Y.hooks},O._child=function(Y,H,v,X){if(q.useBlockParams&&!v)throw new MK.default("must pass block params");if(q.useDepths&&!X)throw new MK.default("must pass parent depths");return V1(P,Y,q[Y],H,0,v,X)},O}function V1(q,$,K,_,P,O,Y){function H(v){var X=arguments.length<=1||arguments[1]===void 0?{}:arguments[1],Z=Y;if(Y&&v!=Y[0]&&!(v===q.nullContext&&Y[0]===null))Z=[v].concat(Y);return K(q,v,q.helpers,q.partials,X.data||_,O&&[X.blockParams].concat(O),Z)}return H=rv(K,H,q,Y,_,O),H.program=$,H.depth=Y?Y.length:0,H.blockParams=P||0,H}function oN(q,$,K){if(!q)if(K.name==="@partial-block")q=K.data["partial-block"];else q=K.partials[K.name];else if(!q.call&&!K.name)K.name=q,q=K.partials[q];return q}function nN(q,$,K){var _=K.data&&K.data["partial-block"];if(K.partial=!0,K.ids)K.data.contextPath=K.ids[0]||K.data.contextPath;var P=void 0;if(K.fn&&K.fn!==nv)(function(){K.data=SK.createFrame(K.data);var O=K.fn;if(P=K.data["partial-block"]=function(H){var v=arguments.length<=1||arguments[1]===void 0?{}:arguments[1];return v.data=SK.createFrame(v.data),v.data["partial-block"]=_,O(H,v)},O.partials)K.partials=VK.extend({},K.partials,O.partials)})();if(q===void 0&&P)q=P;if(q===void 0)throw new MK.default("The partial "+K.name+" could not be found");else if(q instanceof Function)return q($,K)}function nv(){return""}function rN(q,$){if(!$||!("root"in $))$=$?SK.createFrame($):{},$.root=q;return $}function rv(q,$,K,_,P,O){if(q.decorator){var Y={};$=q.decorator($,Y,K,_&&_[0],P,O,_),VK.extend($,Y)}return $}function BN(q,$){Object.keys(q).forEach(function(K){var _=q[K];q[K]=iN(_,$)})}function iN(q,$){var K=$.lookupProperty;return cN.wrapHelper(q,function(_){return VK.extend({lookupProperty:K},_)})}});var T2=bq((iv,Uv)=>{iv.__esModule=!0;iv.default=function(q){(function(){if(typeof globalThis==="object")return;Object.prototype.__defineGetter__("__magic__",function(){return this}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__})();var $=globalThis.Handlebars;q.noConflict=function(){if(globalThis.Handlebars===q)globalThis.Handlebars=$;return q}};Uv.exports=iv.default});var sv=bq((av,ev)=>{av.__esModule=!0;function f2(q){return q&&q.__esModule?q:{default:q}}function A2(q){if(q&&q.__esModule)return q;else{var $={};if(q!=null){for(var K in q)if(Object.prototype.hasOwnProperty.call(q,K))$[K]=q[K]}return $.default=q,$}}var _E=Z1(),Fv=A2(_E),PE=cv(),YE=f2(PE),jE=A6(),OE=f2(jE),WE=o8(),X2=A2(WE),HE=Bv(),tv=A2(HE),zE=T2(),JE=f2(zE);function Qv(){var q=new Fv.HandlebarsEnvironment;return X2.extend(q,Fv),q.SafeString=YE.default,q.Exception=OE.default,q.Utils=X2,q.escapeExpression=X2.escapeExpression,q.VM=tv,q.template=function($){return tv.template($,q)},q}var wP=Qv();wP.create=Qv;JE.default(wP);wP.default=wP;av.default=wP;ev.exports=av.default});var k2=bq(($w,Kw)=>{$w.__esModule=!0;var qw={helpers:{helperExpression:function($){return $.type==="SubExpression"||($.type==="MustacheStatement"||$.type==="BlockStatement")&&!!($.params&&$.params.length||$.hash)},scopedId:function($){return/^\.|this\b/.test($.original)},simpleId:function($){return $.parts.length===1&&!qw.helpers.scopedId($)&&!$.depth}}};$w.default=qw;Kw.exports=$w.default});var Yw=bq((_w,Pw)=>{_w.__esModule=!0;var fE=function(){var q={trace:function(){},yy:{},symbols_:{error:2,root:3,program:4,EOF:5,program_repetition0:6,statement:7,mustache:8,block:9,rawBlock:10,partial:11,partialBlock:12,content:13,COMMENT:14,CONTENT:15,openRawBlock:16,rawBlock_repetition0:17,END_RAW_BLOCK:18,OPEN_RAW_BLOCK:19,helperName:20,openRawBlock_repetition0:21,openRawBlock_option0:22,CLOSE_RAW_BLOCK:23,openBlock:24,block_option0:25,closeBlock:26,openInverse:27,block_option1:28,OPEN_BLOCK:29,openBlock_repetition0:30,openBlock_option0:31,openBlock_option1:32,CLOSE:33,OPEN_INVERSE:34,openInverse_repetition0:35,openInverse_option0:36,openInverse_option1:37,openInverseChain:38,OPEN_INVERSE_CHAIN:39,openInverseChain_repetition0:40,openInverseChain_option0:41,openInverseChain_option1:42,inverseAndProgram:43,INVERSE:44,inverseChain:45,inverseChain_option0:46,OPEN_ENDBLOCK:47,OPEN:48,mustache_repetition0:49,mustache_option0:50,OPEN_UNESCAPED:51,mustache_repetition1:52,mustache_option1:53,CLOSE_UNESCAPED:54,OPEN_PARTIAL:55,partialName:56,partial_repetition0:57,partial_option0:58,openPartialBlock:59,OPEN_PARTIAL_BLOCK:60,openPartialBlock_repetition0:61,openPartialBlock_option0:62,param:63,sexpr:64,OPEN_SEXPR:65,sexpr_repetition0:66,sexpr_option0:67,CLOSE_SEXPR:68,hash:69,hash_repetition_plus0:70,hashSegment:71,ID:72,EQUALS:73,blockParams:74,OPEN_BLOCK_PARAMS:75,blockParams_repetition_plus0:76,CLOSE_BLOCK_PARAMS:77,path:78,dataName:79,STRING:80,NUMBER:81,BOOLEAN:82,UNDEFINED:83,NULL:84,DATA:85,pathSegments:86,SEP:87,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",14:"COMMENT",15:"CONTENT",18:"END_RAW_BLOCK",19:"OPEN_RAW_BLOCK",23:"CLOSE_RAW_BLOCK",29:"OPEN_BLOCK",33:"CLOSE",34:"OPEN_INVERSE",39:"OPEN_INVERSE_CHAIN",44:"INVERSE",47:"OPEN_ENDBLOCK",48:"OPEN",51:"OPEN_UNESCAPED",54:"CLOSE_UNESCAPED",55:"OPEN_PARTIAL",60:"OPEN_PARTIAL_BLOCK",65:"OPEN_SEXPR",68:"CLOSE_SEXPR",72:"ID",73:"EQUALS",75:"OPEN_BLOCK_PARAMS",77:"CLOSE_BLOCK_PARAMS",80:"STRING",81:"NUMBER",82:"BOOLEAN",83:"UNDEFINED",84:"NULL",85:"DATA",87:"SEP"},productions_:[0,[3,2],[4,1],[7,1],[7,1],[7,1],[7,1],[7,1],[7,1],[7,1],[13,1],[10,3],[16,5],[9,4],[9,4],[24,6],[27,6],[38,6],[43,2],[45,3],[45,1],[26,3],[8,5],[8,5],[11,5],[12,3],[59,5],[63,1],[63,1],[64,5],[69,1],[71,3],[74,3],[20,1],[20,1],[20,1],[20,1],[20,1],[20,1],[20,1],[56,1],[56,1],[79,2],[78,1],[86,3],[86,1],[6,0],[6,2],[17,0],[17,2],[21,0],[21,2],[22,0],[22,1],[25,0],[25,1],[28,0],[28,1],[30,0],[30,2],[31,0],[31,1],[32,0],[32,1],[35,0],[35,2],[36,0],[36,1],[37,0],[37,1],[40,0],[40,2],[41,0],[41,1],[42,0],[42,1],[46,0],[46,1],[49,0],[49,2],[50,0],[50,1],[52,0],[52,2],[53,0],[53,1],[57,0],[57,2],[58,0],[58,1],[61,0],[61,2],[62,0],[62,1],[66,0],[66,2],[67,0],[67,1],[70,1],[70,2],[76,1],[76,2]],performAction:function(P,O,Y,H,v,X,Z){var k=X.length-1;switch(v){case 1:return X[k-1];case 2:this.$=H.prepareProgram(X[k]);break;case 3:this.$=X[k];break;case 4:this.$=X[k];break;case 5:this.$=X[k];break;case 6:this.$=X[k];break;case 7:this.$=X[k];break;case 8:this.$=X[k];break;case 9:this.$={type:"CommentStatement",value:H.stripComment(X[k]),strip:H.stripFlags(X[k],X[k]),loc:H.locInfo(this._$)};break;case 10:this.$={type:"ContentStatement",original:X[k],value:X[k],loc:H.locInfo(this._$)};break;case 11:this.$=H.prepareRawBlock(X[k-2],X[k-1],X[k],this._$);break;case 12:this.$={path:X[k-3],params:X[k-2],hash:X[k-1]};break;case 13:this.$=H.prepareBlock(X[k-3],X[k-2],X[k-1],X[k],!1,this._$);break;case 14:this.$=H.prepareBlock(X[k-3],X[k-2],X[k-1],X[k],!0,this._$);break;case 15:this.$={open:X[k-5],path:X[k-4],params:X[k-3],hash:X[k-2],blockParams:X[k-1],strip:H.stripFlags(X[k-5],X[k])};break;case 16:this.$={path:X[k-4],params:X[k-3],hash:X[k-2],blockParams:X[k-1],strip:H.stripFlags(X[k-5],X[k])};break;case 17:this.$={path:X[k-4],params:X[k-3],hash:X[k-2],blockParams:X[k-1],strip:H.stripFlags(X[k-5],X[k])};break;case 18:this.$={strip:H.stripFlags(X[k-1],X[k-1]),program:X[k]};break;case 19:var G=H.prepareBlock(X[k-2],X[k-1],X[k],X[k],!1,this._$),S=H.prepareProgram([G],X[k-1].loc);S.chained=!0,this.$={strip:X[k-2].strip,program:S,chain:!0};break;case 20:this.$=X[k];break;case 21:this.$={path:X[k-1],strip:H.stripFlags(X[k-2],X[k])};break;case 22:this.$=H.prepareMustache(X[k-3],X[k-2],X[k-1],X[k-4],H.stripFlags(X[k-4],X[k]),this._$);break;case 23:this.$=H.prepareMustache(X[k-3],X[k-2],X[k-1],X[k-4],H.stripFlags(X[k-4],X[k]),this._$);break;case 24:this.$={type:"PartialStatement",name:X[k-3],params:X[k-2],hash:X[k-1],indent:"",strip:H.stripFlags(X[k-4],X[k]),loc:H.locInfo(this._$)};break;case 25:this.$=H.preparePartialBlock(X[k-2],X[k-1],X[k],this._$);break;case 26:this.$={path:X[k-3],params:X[k-2],hash:X[k-1],strip:H.stripFlags(X[k-4],X[k])};break;case 27:this.$=X[k];break;case 28:this.$=X[k];break;case 29:this.$={type:"SubExpression",path:X[k-3],params:X[k-2],hash:X[k-1],loc:H.locInfo(this._$)};break;case 30:this.$={type:"Hash",pairs:X[k],loc:H.locInfo(this._$)};break;case 31:this.$={type:"HashPair",key:H.id(X[k-2]),value:X[k],loc:H.locInfo(this._$)};break;case 32:this.$=H.id(X[k-1]);break;case 33:this.$=X[k];break;case 34:this.$=X[k];break;case 35:this.$={type:"StringLiteral",value:X[k],original:X[k],loc:H.locInfo(this._$)};break;case 36:this.$={type:"NumberLiteral",value:Number(X[k]),original:Number(X[k]),loc:H.locInfo(this._$)};break;case 37:this.$={type:"BooleanLiteral",value:X[k]==="true",original:X[k]==="true",loc:H.locInfo(this._$)};break;case 38:this.$={type:"UndefinedLiteral",original:void 0,value:void 0,loc:H.locInfo(this._$)};break;case 39:this.$={type:"NullLiteral",original:null,value:null,loc:H.locInfo(this._$)};break;case 40:this.$=X[k];break;case 41:this.$=X[k];break;case 42:this.$=H.preparePath(!0,X[k],this._$);break;case 43:this.$=H.preparePath(!1,X[k],this._$);break;case 44:X[k-2].push({part:H.id(X[k]),original:X[k],separator:X[k-1]}),this.$=X[k-2];break;case 45:this.$=[{part:H.id(X[k]),original:X[k]}];break;case 46:this.$=[];break;case 47:X[k-1].push(X[k]);break;case 48:this.$=[];break;case 49:X[k-1].push(X[k]);break;case 50:this.$=[];break;case 51:X[k-1].push(X[k]);break;case 58:this.$=[];break;case 59:X[k-1].push(X[k]);break;case 64:this.$=[];break;case 65:X[k-1].push(X[k]);break;case 70:this.$=[];break;case 71:X[k-1].push(X[k]);break;case 78:this.$=[];break;case 79:X[k-1].push(X[k]);break;case 82:this.$=[];break;case 83:X[k-1].push(X[k]);break;case 86:this.$=[];break;case 87:X[k-1].push(X[k]);break;case 90:this.$=[];break;case 91:X[k-1].push(X[k]);break;case 94:this.$=[];break;case 95:X[k-1].push(X[k]);break;case 98:this.$=[X[k]];break;case 99:X[k-1].push(X[k]);break;case 100:this.$=[X[k]];break;case 101:X[k-1].push(X[k]);break}},table:[{3:1,4:2,5:[2,46],6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{1:[3]},{5:[1,4]},{5:[2,2],7:5,8:6,9:7,10:8,11:9,12:10,13:11,14:[1,12],15:[1,20],16:17,19:[1,23],24:15,27:16,29:[1,21],34:[1,22],39:[2,2],44:[2,2],47:[2,2],48:[1,13],51:[1,14],55:[1,18],59:19,60:[1,24]},{1:[2,1]},{5:[2,47],14:[2,47],15:[2,47],19:[2,47],29:[2,47],34:[2,47],39:[2,47],44:[2,47],47:[2,47],48:[2,47],51:[2,47],55:[2,47],60:[2,47]},{5:[2,3],14:[2,3],15:[2,3],19:[2,3],29:[2,3],34:[2,3],39:[2,3],44:[2,3],47:[2,3],48:[2,3],51:[2,3],55:[2,3],60:[2,3]},{5:[2,4],14:[2,4],15:[2,4],19:[2,4],29:[2,4],34:[2,4],39:[2,4],44:[2,4],47:[2,4],48:[2,4],51:[2,4],55:[2,4],60:[2,4]},{5:[2,5],14:[2,5],15:[2,5],19:[2,5],29:[2,5],34:[2,5],39:[2,5],44:[2,5],47:[2,5],48:[2,5],51:[2,5],55:[2,5],60:[2,5]},{5:[2,6],14:[2,6],15:[2,6],19:[2,6],29:[2,6],34:[2,6],39:[2,6],44:[2,6],47:[2,6],48:[2,6],51:[2,6],55:[2,6],60:[2,6]},{5:[2,7],14:[2,7],15:[2,7],19:[2,7],29:[2,7],34:[2,7],39:[2,7],44:[2,7],47:[2,7],48:[2,7],51:[2,7],55:[2,7],60:[2,7]},{5:[2,8],14:[2,8],15:[2,8],19:[2,8],29:[2,8],34:[2,8],39:[2,8],44:[2,8],47:[2,8],48:[2,8],51:[2,8],55:[2,8],60:[2,8]},{5:[2,9],14:[2,9],15:[2,9],19:[2,9],29:[2,9],34:[2,9],39:[2,9],44:[2,9],47:[2,9],48:[2,9],51:[2,9],55:[2,9],60:[2,9]},{20:25,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:36,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{4:37,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],39:[2,46],44:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{4:38,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],44:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{15:[2,48],17:39,18:[2,48]},{20:41,56:40,64:42,65:[1,43],72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{4:44,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{5:[2,10],14:[2,10],15:[2,10],18:[2,10],19:[2,10],29:[2,10],34:[2,10],39:[2,10],44:[2,10],47:[2,10],48:[2,10],51:[2,10],55:[2,10],60:[2,10]},{20:45,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:46,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:47,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:41,56:48,64:42,65:[1,43],72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{33:[2,78],49:49,65:[2,78],72:[2,78],80:[2,78],81:[2,78],82:[2,78],83:[2,78],84:[2,78],85:[2,78]},{23:[2,33],33:[2,33],54:[2,33],65:[2,33],68:[2,33],72:[2,33],75:[2,33],80:[2,33],81:[2,33],82:[2,33],83:[2,33],84:[2,33],85:[2,33]},{23:[2,34],33:[2,34],54:[2,34],65:[2,34],68:[2,34],72:[2,34],75:[2,34],80:[2,34],81:[2,34],82:[2,34],83:[2,34],84:[2,34],85:[2,34]},{23:[2,35],33:[2,35],54:[2,35],65:[2,35],68:[2,35],72:[2,35],75:[2,35],80:[2,35],81:[2,35],82:[2,35],83:[2,35],84:[2,35],85:[2,35]},{23:[2,36],33:[2,36],54:[2,36],65:[2,36],68:[2,36],72:[2,36],75:[2,36],80:[2,36],81:[2,36],82:[2,36],83:[2,36],84:[2,36],85:[2,36]},{23:[2,37],33:[2,37],54:[2,37],65:[2,37],68:[2,37],72:[2,37],75:[2,37],80:[2,37],81:[2,37],82:[2,37],83:[2,37],84:[2,37],85:[2,37]},{23:[2,38],33:[2,38],54:[2,38],65:[2,38],68:[2,38],72:[2,38],75:[2,38],80:[2,38],81:[2,38],82:[2,38],83:[2,38],84:[2,38],85:[2,38]},{23:[2,39],33:[2,39],54:[2,39],65:[2,39],68:[2,39],72:[2,39],75:[2,39],80:[2,39],81:[2,39],82:[2,39],83:[2,39],84:[2,39],85:[2,39]},{23:[2,43],33:[2,43],54:[2,43],65:[2,43],68:[2,43],72:[2,43],75:[2,43],80:[2,43],81:[2,43],82:[2,43],83:[2,43],84:[2,43],85:[2,43],87:[1,50]},{72:[1,35],86:51},{23:[2,45],33:[2,45],54:[2,45],65:[2,45],68:[2,45],72:[2,45],75:[2,45],80:[2,45],81:[2,45],82:[2,45],83:[2,45],84:[2,45],85:[2,45],87:[2,45]},{52:52,54:[2,82],65:[2,82],72:[2,82],80:[2,82],81:[2,82],82:[2,82],83:[2,82],84:[2,82],85:[2,82]},{25:53,38:55,39:[1,57],43:56,44:[1,58],45:54,47:[2,54]},{28:59,43:60,44:[1,58],47:[2,56]},{13:62,15:[1,20],18:[1,61]},{33:[2,86],57:63,65:[2,86],72:[2,86],80:[2,86],81:[2,86],82:[2,86],83:[2,86],84:[2,86],85:[2,86]},{33:[2,40],65:[2,40],72:[2,40],80:[2,40],81:[2,40],82:[2,40],83:[2,40],84:[2,40],85:[2,40]},{33:[2,41],65:[2,41],72:[2,41],80:[2,41],81:[2,41],82:[2,41],83:[2,41],84:[2,41],85:[2,41]},{20:64,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{26:65,47:[1,66]},{30:67,33:[2,58],65:[2,58],72:[2,58],75:[2,58],80:[2,58],81:[2,58],82:[2,58],83:[2,58],84:[2,58],85:[2,58]},{33:[2,64],35:68,65:[2,64],72:[2,64],75:[2,64],80:[2,64],81:[2,64],82:[2,64],83:[2,64],84:[2,64],85:[2,64]},{21:69,23:[2,50],65:[2,50],72:[2,50],80:[2,50],81:[2,50],82:[2,50],83:[2,50],84:[2,50],85:[2,50]},{33:[2,90],61:70,65:[2,90],72:[2,90],80:[2,90],81:[2,90],82:[2,90],83:[2,90],84:[2,90],85:[2,90]},{20:74,33:[2,80],50:71,63:72,64:75,65:[1,43],69:73,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{72:[1,79]},{23:[2,42],33:[2,42],54:[2,42],65:[2,42],68:[2,42],72:[2,42],75:[2,42],80:[2,42],81:[2,42],82:[2,42],83:[2,42],84:[2,42],85:[2,42],87:[1,50]},{20:74,53:80,54:[2,84],63:81,64:75,65:[1,43],69:82,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{26:83,47:[1,66]},{47:[2,55]},{4:84,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],39:[2,46],44:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{47:[2,20]},{20:85,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{4:86,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{26:87,47:[1,66]},{47:[2,57]},{5:[2,11],14:[2,11],15:[2,11],19:[2,11],29:[2,11],34:[2,11],39:[2,11],44:[2,11],47:[2,11],48:[2,11],51:[2,11],55:[2,11],60:[2,11]},{15:[2,49],18:[2,49]},{20:74,33:[2,88],58:88,63:89,64:75,65:[1,43],69:90,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{65:[2,94],66:91,68:[2,94],72:[2,94],80:[2,94],81:[2,94],82:[2,94],83:[2,94],84:[2,94],85:[2,94]},{5:[2,25],14:[2,25],15:[2,25],19:[2,25],29:[2,25],34:[2,25],39:[2,25],44:[2,25],47:[2,25],48:[2,25],51:[2,25],55:[2,25],60:[2,25]},{20:92,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:74,31:93,33:[2,60],63:94,64:75,65:[1,43],69:95,70:76,71:77,72:[1,78],75:[2,60],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:74,33:[2,66],36:96,63:97,64:75,65:[1,43],69:98,70:76,71:77,72:[1,78],75:[2,66],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:74,22:99,23:[2,52],63:100,64:75,65:[1,43],69:101,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:74,33:[2,92],62:102,63:103,64:75,65:[1,43],69:104,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{33:[1,105]},{33:[2,79],65:[2,79],72:[2,79],80:[2,79],81:[2,79],82:[2,79],83:[2,79],84:[2,79],85:[2,79]},{33:[2,81]},{23:[2,27],33:[2,27],54:[2,27],65:[2,27],68:[2,27],72:[2,27],75:[2,27],80:[2,27],81:[2,27],82:[2,27],83:[2,27],84:[2,27],85:[2,27]},{23:[2,28],33:[2,28],54:[2,28],65:[2,28],68:[2,28],72:[2,28],75:[2,28],80:[2,28],81:[2,28],82:[2,28],83:[2,28],84:[2,28],85:[2,28]},{23:[2,30],33:[2,30],54:[2,30],68:[2,30],71:106,72:[1,107],75:[2,30]},{23:[2,98],33:[2,98],54:[2,98],68:[2,98],72:[2,98],75:[2,98]},{23:[2,45],33:[2,45],54:[2,45],65:[2,45],68:[2,45],72:[2,45],73:[1,108],75:[2,45],80:[2,45],81:[2,45],82:[2,45],83:[2,45],84:[2,45],85:[2,45],87:[2,45]},{23:[2,44],33:[2,44],54:[2,44],65:[2,44],68:[2,44],72:[2,44],75:[2,44],80:[2,44],81:[2,44],82:[2,44],83:[2,44],84:[2,44],85:[2,44],87:[2,44]},{54:[1,109]},{54:[2,83],65:[2,83],72:[2,83],80:[2,83],81:[2,83],82:[2,83],83:[2,83],84:[2,83],85:[2,83]},{54:[2,85]},{5:[2,13],14:[2,13],15:[2,13],19:[2,13],29:[2,13],34:[2,13],39:[2,13],44:[2,13],47:[2,13],48:[2,13],51:[2,13],55:[2,13],60:[2,13]},{38:55,39:[1,57],43:56,44:[1,58],45:111,46:110,47:[2,76]},{33:[2,70],40:112,65:[2,70],72:[2,70],75:[2,70],80:[2,70],81:[2,70],82:[2,70],83:[2,70],84:[2,70],85:[2,70]},{47:[2,18]},{5:[2,14],14:[2,14],15:[2,14],19:[2,14],29:[2,14],34:[2,14],39:[2,14],44:[2,14],47:[2,14],48:[2,14],51:[2,14],55:[2,14],60:[2,14]},{33:[1,113]},{33:[2,87],65:[2,87],72:[2,87],80:[2,87],81:[2,87],82:[2,87],83:[2,87],84:[2,87],85:[2,87]},{33:[2,89]},{20:74,63:115,64:75,65:[1,43],67:114,68:[2,96],69:116,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{33:[1,117]},{32:118,33:[2,62],74:119,75:[1,120]},{33:[2,59],65:[2,59],72:[2,59],75:[2,59],80:[2,59],81:[2,59],82:[2,59],83:[2,59],84:[2,59],85:[2,59]},{33:[2,61],75:[2,61]},{33:[2,68],37:121,74:122,75:[1,120]},{33:[2,65],65:[2,65],72:[2,65],75:[2,65],80:[2,65],81:[2,65],82:[2,65],83:[2,65],84:[2,65],85:[2,65]},{33:[2,67],75:[2,67]},{23:[1,123]},{23:[2,51],65:[2,51],72:[2,51],80:[2,51],81:[2,51],82:[2,51],83:[2,51],84:[2,51],85:[2,51]},{23:[2,53]},{33:[1,124]},{33:[2,91],65:[2,91],72:[2,91],80:[2,91],81:[2,91],82:[2,91],83:[2,91],84:[2,91],85:[2,91]},{33:[2,93]},{5:[2,22],14:[2,22],15:[2,22],19:[2,22],29:[2,22],34:[2,22],39:[2,22],44:[2,22],47:[2,22],48:[2,22],51:[2,22],55:[2,22],60:[2,22]},{23:[2,99],33:[2,99],54:[2,99],68:[2,99],72:[2,99],75:[2,99]},{73:[1,108]},{20:74,63:125,64:75,65:[1,43],72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{5:[2,23],14:[2,23],15:[2,23],19:[2,23],29:[2,23],34:[2,23],39:[2,23],44:[2,23],47:[2,23],48:[2,23],51:[2,23],55:[2,23],60:[2,23]},{47:[2,19]},{47:[2,77]},{20:74,33:[2,72],41:126,63:127,64:75,65:[1,43],69:128,70:76,71:77,72:[1,78],75:[2,72],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{5:[2,24],14:[2,24],15:[2,24],19:[2,24],29:[2,24],34:[2,24],39:[2,24],44:[2,24],47:[2,24],48:[2,24],51:[2,24],55:[2,24],60:[2,24]},{68:[1,129]},{65:[2,95],68:[2,95],72:[2,95],80:[2,95],81:[2,95],82:[2,95],83:[2,95],84:[2,95],85:[2,95]},{68:[2,97]},{5:[2,21],14:[2,21],15:[2,21],19:[2,21],29:[2,21],34:[2,21],39:[2,21],44:[2,21],47:[2,21],48:[2,21],51:[2,21],55:[2,21],60:[2,21]},{33:[1,130]},{33:[2,63]},{72:[1,132],76:131},{33:[1,133]},{33:[2,69]},{15:[2,12],18:[2,12]},{14:[2,26],15:[2,26],19:[2,26],29:[2,26],34:[2,26],47:[2,26],48:[2,26],51:[2,26],55:[2,26],60:[2,26]},{23:[2,31],33:[2,31],54:[2,31],68:[2,31],72:[2,31],75:[2,31]},{33:[2,74],42:134,74:135,75:[1,120]},{33:[2,71],65:[2,71],72:[2,71],75:[2,71],80:[2,71],81:[2,71],82:[2,71],83:[2,71],84:[2,71],85:[2,71]},{33:[2,73],75:[2,73]},{23:[2,29],33:[2,29],54:[2,29],65:[2,29],68:[2,29],72:[2,29],75:[2,29],80:[2,29],81:[2,29],82:[2,29],83:[2,29],84:[2,29],85:[2,29]},{14:[2,15],15:[2,15],19:[2,15],29:[2,15],34:[2,15],39:[2,15],44:[2,15],47:[2,15],48:[2,15],51:[2,15],55:[2,15],60:[2,15]},{72:[1,137],77:[1,136]},{72:[2,100],77:[2,100]},{14:[2,16],15:[2,16],19:[2,16],29:[2,16],34:[2,16],44:[2,16],47:[2,16],48:[2,16],51:[2,16],55:[2,16],60:[2,16]},{33:[1,138]},{33:[2,75]},{33:[2,32]},{72:[2,101],77:[2,101]},{14:[2,17],15:[2,17],19:[2,17],29:[2,17],34:[2,17],39:[2,17],44:[2,17],47:[2,17],48:[2,17],51:[2,17],55:[2,17],60:[2,17]}],defaultActions:{4:[2,1],54:[2,55],56:[2,20],60:[2,57],73:[2,81],82:[2,85],86:[2,18],90:[2,89],101:[2,53],104:[2,93],110:[2,19],111:[2,77],116:[2,97],119:[2,63],122:[2,69],135:[2,75],136:[2,32]},parseError:function(P,O){throw Error(P)},parse:function(P){var O=this,Y=[0],H=[null],v=[],X=this.table,Z="",k=0,G=0,S=0,N=2,E=1;if(this.lexer.setInput(P),this.lexer.yy=this.yy,this.yy.lexer=this.lexer,this.yy.parser=this,typeof this.lexer.yylloc>"u")this.lexer.yylloc={};var h=this.lexer.yylloc;v.push(h);var D=this.lexer.options&&this.lexer.options.ranges;if(typeof this.yy.parseError==="function")this.parseError=this.yy.parseError;function I(z){Y.length=Y.length-2*z,H.length=H.length-z,v.length=v.length-z}function g(){var z=O.lexer.lex()||1;if(typeof z!=="number")z=O.symbols_[z]||z;return z}var y,p,m,c,$q,e,d={},n,M,j,J;while(!0){if(m=Y[Y.length-1],this.defaultActions[m])c=this.defaultActions[m];else{if(y===null||typeof y>"u")y=g();c=X[m]&&X[m][y]}if(typeof c>"u"||!c.length||!c[0]){var w="";if(!S){J=[];for(n in X[m])if(this.terminals_[n]&&n>2)J.push("'"+this.terminals_[n]+"'");if(this.lexer.showPosition)w="Parse error on line "+(k+1)+`:
`+this.lexer.showPosition()+`
Expecting `+J.join(", ")+", got '"+(this.terminals_[y]||y)+"'";else w="Parse error on line "+(k+1)+": Unexpected "+(y==1?"end of input":"'"+(this.terminals_[y]||y)+"'");this.parseError(w,{text:this.lexer.match,token:this.terminals_[y]||y,line:this.lexer.yylineno,loc:h,expected:J})}}if(c[0]instanceof Array&&c.length>1)throw Error("Parse Error: multiple actions possible at state: "+m+", token: "+y);switch(c[0]){case 1:if(Y.push(y),H.push(this.lexer.yytext),v.push(this.lexer.yylloc),Y.push(c[1]),y=null,!p){if(G=this.lexer.yyleng,Z=this.lexer.yytext,k=this.lexer.yylineno,h=this.lexer.yylloc,S>0)S--}else y=p,p=null;break;case 2:if(M=this.productions_[c[1]][1],d.$=H[H.length-M],d._$={first_line:v[v.length-(M||1)].first_line,last_line:v[v.length-1].last_line,first_column:v[v.length-(M||1)].first_column,last_column:v[v.length-1].last_column},D)d._$.range=[v[v.length-(M||1)].range[0],v[v.length-1].range[1]];if(e=this.performAction.call(d,Z,G,k,this.yy,c[1],H,v),typeof e<"u")return e;if(M)Y=Y.slice(0,-1*M*2),H=H.slice(0,-1*M),v=v.slice(0,-1*M);Y.push(this.productions_[c[1]][0]),H.push(d.$),v.push(d._$),j=X[Y[Y.length-2]][Y[Y.length-1]],Y.push(j);break;case 3:return!0}}return!0}},$=function(){var _={EOF:1,parseError:function(O,Y){if(this.yy.parser)this.yy.parser.parseError(O,Y);else throw Error(O)},setInput:function(O){if(this._input=O,this._more=this._less=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges)this.yylloc.range=[0,0];return this.offset=0,this},input:function(){var O=this._input[0];this.yytext+=O,this.yyleng++,this.offset++,this.match+=O,this.matched+=O;var Y=O.match(/(?:\r\n?|\n).*/g);if(Y)this.yylineno++,this.yylloc.last_line++;else this.yylloc.last_column++;if(this.options.ranges)this.yylloc.range[1]++;return this._input=this._input.slice(1),O},unput:function(O){var Y=O.length,H=O.split(/(?:\r\n?|\n)/g);this._input=O+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-Y-1),this.offset-=Y;var v=this.match.split(/(?:\r\n?|\n)/g);if(this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),H.length-1)this.yylineno-=H.length-1;var X=this.yylloc.range;if(this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:H?(H.length===v.length?this.yylloc.first_column:0)+v[v.length-H.length].length-H[0].length:this.yylloc.first_column-Y},this.options.ranges)this.yylloc.range=[X[0],X[0]+this.yyleng-Y];return this},more:function(){return this._more=!0,this},less:function(O){this.unput(this.match.slice(O))},pastInput:function(){var O=this.matched.substr(0,this.matched.length-this.match.length);return(O.length>20?"...":"")+O.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var O=this.match;if(O.length<20)O+=this._input.substr(0,20-O.length);return(O.substr(0,20)+(O.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var O=this.pastInput(),Y=Array(O.length+1).join("-");return O+this.upcomingInput()+`
`+Y+"^"},next:function(){if(this.done)return this.EOF;if(!this._input)this.done=!0;var O,Y,H,v,X,Z;if(!this._more)this.yytext="",this.match="";var k=this._currentRules();for(var G=0;G<k.length;G++)if(H=this._input.match(this.rules[k[G]]),H&&(!Y||H[0].length>Y[0].length)){if(Y=H,v=G,!this.options.flex)break}if(Y){if(Z=Y[0].match(/(?:\r\n?|\n).*/g),Z)this.yylineno+=Z.length;if(this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:Z?Z[Z.length-1].length-Z[Z.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+Y[0].length},this.yytext+=Y[0],this.match+=Y[0],this.matches=Y,this.yyleng=this.yytext.length,this.options.ranges)this.yylloc.range=[this.offset,this.offset+=this.yyleng];if(this._more=!1,this._input=this._input.slice(Y[0].length),this.matched+=Y[0],O=this.performAction.call(this,this.yy,this,k[v],this.conditionStack[this.conditionStack.length-1]),this.done&&this._input)this.done=!1;if(O)return O;else return}if(this._input==="")return this.EOF;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var O=this.next();if(typeof O<"u")return O;else return this.lex()},begin:function(O){this.conditionStack.push(O)},popState:function(){return this.conditionStack.pop()},_currentRules:function(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},topState:function(){return this.conditionStack[this.conditionStack.length-2]},pushState:function(O){this.begin(O)}};return _.options={},_.performAction=function(O,Y,H,v){function X(k,G){return Y.yytext=Y.yytext.substring(k,Y.yyleng-G+k)}var Z=v;switch(H){case 0:if(Y.yytext.slice(-2)==="\\\\")X(0,1),this.begin("mu");else if(Y.yytext.slice(-1)==="\\")X(0,1),this.begin("emu");else this.begin("mu");if(Y.yytext)return 15;break;case 1:return 15;case 2:return this.popState(),15;break;case 3:return this.begin("raw"),15;break;case 4:if(this.popState(),this.conditionStack[this.conditionStack.length-1]==="raw")return 15;else return X(5,9),"END_RAW_BLOCK";break;case 5:return 15;case 6:return this.popState(),14;break;case 7:return 65;case 8:return 68;case 9:return 19;case 10:return this.popState(),this.begin("raw"),23;break;case 11:return 55;case 12:return 60;case 13:return 29;case 14:return 47;case 15:return this.popState(),44;break;case 16:return this.popState(),44;break;case 17:return 34;case 18:return 39;case 19:return 51;case 20:return 48;case 21:this.unput(Y.yytext),this.popState(),this.begin("com");break;case 22:return this.popState(),14;break;case 23:return 48;case 24:return 73;case 25:return 72;case 26:return 72;case 27:return 87;case 28:break;case 29:return this.popState(),54;break;case 30:return this.popState(),33;break;case 31:return Y.yytext=X(1,2).replace(/\\"/g,'"'),80;break;case 32:return Y.yytext=X(1,2).replace(/\\'/g,"'"),80;break;case 33:return 85;case 34:return 82;case 35:return 82;case 36:return 83;case 37:return 84;case 38:return 81;case 39:return 75;case 40:return 77;case 41:return 72;case 42:return Y.yytext=Y.yytext.replace(/\\([\\\]])/g,"$1"),72;break;case 43:return"INVALID";case 44:return 5}},_.rules=[/^(?:[^\x00]*?(?=(\{\{)))/,/^(?:[^\x00]+)/,/^(?:[^\x00]{2,}?(?=(\{\{|\\\{\{|\\\\\{\{|$)))/,/^(?:\{\{\{\{(?=[^/]))/,/^(?:\{\{\{\{\/[^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=[=}\s\/.])\}\}\}\})/,/^(?:[^\x00]+?(?=(\{\{\{\{)))/,/^(?:[\s\S]*?--(~)?\}\})/,/^(?:\()/,/^(?:\))/,/^(?:\{\{\{\{)/,/^(?:\}\}\}\})/,/^(?:\{\{(~)?>)/,/^(?:\{\{(~)?#>)/,/^(?:\{\{(~)?#\*?)/,/^(?:\{\{(~)?\/)/,/^(?:\{\{(~)?\^\s*(~)?\}\})/,/^(?:\{\{(~)?\s*else\s*(~)?\}\})/,/^(?:\{\{(~)?\^)/,/^(?:\{\{(~)?\s*else\b)/,/^(?:\{\{(~)?\{)/,/^(?:\{\{(~)?&)/,/^(?:\{\{(~)?!--)/,/^(?:\{\{(~)?![\s\S]*?\}\})/,/^(?:\{\{(~)?\*?)/,/^(?:=)/,/^(?:\.\.)/,/^(?:\.(?=([=~}\s\/.)|])))/,/^(?:[\/.])/,/^(?:\s+)/,/^(?:\}(~)?\}\})/,/^(?:(~)?\}\})/,/^(?:"(\\["]|[^"])*")/,/^(?:'(\\[']|[^'])*')/,/^(?:@)/,/^(?:true(?=([~}\s)])))/,/^(?:false(?=([~}\s)])))/,/^(?:undefined(?=([~}\s)])))/,/^(?:null(?=([~}\s)])))/,/^(?:-?[0-9]+(?:\.[0-9]+)?(?=([~}\s)])))/,/^(?:as\s+\|)/,/^(?:\|)/,/^(?:([^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=([=~}\s\/.)|]))))/,/^(?:\[(\\\]|[^\]])*\])/,/^(?:.)/,/^(?:$)/],_.conditions={mu:{rules:[7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44],inclusive:!1},emu:{rules:[2],inclusive:!1},com:{rules:[6],inclusive:!1},raw:{rules:[3,4,5],inclusive:!1},INITIAL:{rules:[0,1,44],inclusive:!0}},_}();q.lexer=$;function K(){this.yy={}}return K.prototype=q,q.Parser=K,new K}();_w.default=fE;Pw.exports=_w.default});var C1=bq((Ww,Hw)=>{Ww.__esModule=!0;function GE(q){return q&&q.__esModule?q:{default:q}}var ZE=A6(),G2=GE(ZE);function M1(){this.parents=[]}M1.prototype={constructor:M1,mutating:!1,acceptKey:function($,K){var _=this.accept($[K]);if(this.mutating){if(_&&!M1.prototype[_.type])throw new G2.default('Unexpected node type "'+_.type+'" found when accepting '+K+" on "+$.type);$[K]=_}},acceptRequired:function($,K){if(this.acceptKey($,K),!$[K])throw new G2.default($.type+" requires "+K)},acceptArray:function($){for(var K=0,_=$.length;K<_;K++)if(this.acceptKey($,K),!$[K])$.splice(K,1),K--,_--},accept:function($){if(!$)return;if(!this[$.type])throw new G2.default("Unknown type: "+$.type,$);if(this.current)this.parents.unshift(this.current);this.current=$;var K=this[$.type]($);if(this.current=this.parents.shift(),!this.mutating||K)return K;else if(K!==!1)return $},Program:function($){this.acceptArray($.body)},MustacheStatement:S1,Decorator:S1,BlockStatement:jw,DecoratorBlock:jw,PartialStatement:Ow,PartialBlockStatement:function($){Ow.call(this,$),this.acceptKey($,"program")},ContentStatement:function(){},CommentStatement:function(){},SubExpression:S1,PathExpression:function(){},StringLiteral:function(){},NumberLiteral:function(){},BooleanLiteral:function(){},UndefinedLiteral:function(){},NullLiteral:function(){},Hash:function($){this.acceptArray($.pairs)},HashPair:function($){this.acceptRequired($,"value")}};function S1(q){this.acceptRequired(q,"path"),this.acceptArray(q.params),this.acceptKey(q,"hash")}function jw(q){S1.call(this,q),this.acceptKey(q,"program"),this.acceptKey(q,"inverse")}function Ow(q){this.acceptRequired(q,"name"),this.acceptArray(q.params),this.acceptKey(q,"hash")}Ww.default=M1;Hw.exports=Ww.default});var vw=bq((zw,Jw)=>{zw.__esModule=!0;function SE(q){return q&&q.__esModule?q:{default:q}}var CE=C1(),NE=SE(CE);function s6(){var q=arguments.length<=0||arguments[0]===void 0?{}:arguments[0];this.options=q}s6.prototype=new NE.default;s6.prototype.Program=function(q){var $=!this.options.ignoreStandalone,K=!this.isRootSeen;this.isRootSeen=!0;var _=q.body;for(var P=0,O=_.length;P<O;P++){var Y=_[P],H=this.accept(Y);if(!H)continue;var v=Z2(_,P,K),X=V2(_,P,K),Z=H.openStandalone&&v,k=H.closeStandalone&&X,G=H.inlineStandalone&&v&&X;if(H.close)h_(_,P,!0);if(H.open)FK(_,P,!0);if($&&G){if(h_(_,P),FK(_,P)){if(Y.type==="PartialStatement")Y.indent=/([ \t]+$)/.exec(_[P-1].original)[1]}}if($&&Z)h_((Y.program||Y.inverse).body),FK(_,P);if($&&k)h_(_,P),FK((Y.inverse||Y.program).body)}return q};s6.prototype.BlockStatement=s6.prototype.DecoratorBlock=s6.prototype.PartialBlockStatement=function(q){this.accept(q.program),this.accept(q.inverse);var $=q.program||q.inverse,K=q.program&&q.inverse,_=K,P=K;if(K&&K.chained){_=K.body[0].program;while(P.chained)P=P.body[P.body.length-1].program}var O={open:q.openStrip.open,close:q.closeStrip.close,openStandalone:V2($.body),closeStandalone:Z2((_||$).body)};if(q.openStrip.close)h_($.body,null,!0);if(K){var Y=q.inverseStrip;if(Y.open)FK($.body,null,!0);if(Y.close)h_(_.body,null,!0);if(q.closeStrip.open)FK(P.body,null,!0);if(!this.options.ignoreStandalone&&Z2($.body)&&V2(_.body))FK($.body),h_(_.body)}else if(q.closeStrip.open)FK($.body,null,!0);return O};s6.prototype.Decorator=s6.prototype.MustacheStatement=function(q){return q.strip};s6.prototype.PartialStatement=s6.prototype.CommentStatement=function(q){var $=q.strip||{};return{inlineStandalone:!0,open:$.open,close:$.close}};function Z2(q,$,K){if($===void 0)$=q.length;var _=q[$-1],P=q[$-2];if(!_)return K;if(_.type==="ContentStatement")return(P||!K?/\r?\n\s*?$/:/(^|\r?\n)\s*?$/).test(_.original)}function V2(q,$,K){if($===void 0)$=-1;var _=q[$+1],P=q[$+2];if(!_)return K;if(_.type==="ContentStatement")return(P||!K?/^\s*?\r?\n/:/^\s*?(\r?\n|$)/).test(_.original)}function h_(q,$,K){var _=q[$==null?0:$+1];if(!_||_.type!=="ContentStatement"||!K&&_.rightStripped)return;var P=_.value;_.value=_.value.replace(K?/^\s+/:/^[ \t]*\r?\n?/,""),_.rightStripped=_.value!==P}function FK(q,$,K){var _=q[$==null?q.length-1:$-1];if(!_||_.type!=="ContentStatement"||!K&&_.leftStripped)return;var P=_.value;return _.value=_.value.replace(K?/\s+$/:/[ \t]+$/,""),_.leftStripped=_.value!==P,_.leftStripped}zw.default=s6;Jw.exports=zw.default});var ww=bq((lE)=>{lE.__esModule=!0;lE.SourceLocation=IE;lE.id=LE;lE.stripFlags=bE;lE.stripComment=gE;lE.preparePath=yE;lE.prepareMustache=pE;lE.prepareRawBlock=xE;lE.prepareBlock=uE;lE.prepareProgram=mE;lE.preparePartialBlock=cE;function hE(q){return q&&q.__esModule?q:{default:q}}var DE=A6(),M2=hE(DE);function S2(q,$){if($=$.path?$.path.original:$,q.path.original!==$){var K={loc:q.path.loc};throw new M2.default(q.path.original+" doesn't match "+$,K)}}function IE(q,$){this.source=q,this.start={line:$.first_line,column:$.first_column},this.end={line:$.last_line,column:$.last_column}}function LE(q){if(/^\[.*\]$/.test(q))return q.substring(1,q.length-1);else return q}function bE(q,$){return{open:q.charAt(2)==="~",close:$.charAt($.length-3)==="~"}}function gE(q){return q.replace(/^\{\{~?!-?-?/,"").replace(/-?-?~?\}\}$/,"")}function yE(q,$,K){K=this.locInfo(K);var _=q?"@":"",P=[],O=0;for(var Y=0,H=$.length;Y<H;Y++){var v=$[Y].part,X=$[Y].original!==v;if(_+=($[Y].separator||"")+v,!X&&(v===".."||v==="."||v==="this")){if(P.length>0)throw new M2.default("Invalid path: "+_,{loc:K});else if(v==="..")O++}else P.push(v)}return{type:"PathExpression",data:q,depth:O,parts:P,original:_,loc:K}}function pE(q,$,K,_,P,O){var Y=_.charAt(3)||_.charAt(2),H=Y!=="{"&&Y!=="&",v=/\*/.test(_);return{type:v?"Decorator":"MustacheStatement",path:q,params:$,hash:K,escaped:H,strip:P,loc:this.locInfo(O)}}function xE(q,$,K,_){S2(q,K),_=this.locInfo(_);var P={type:"Program",body:$,strip:{},loc:_};return{type:"BlockStatement",path:q.path,params:q.params,hash:q.hash,program:P,openStrip:{},inverseStrip:{},closeStrip:{},loc:_}}function uE(q,$,K,_,P,O){if(_&&_.path)S2(q,_);var Y=/\*/.test(q.open);$.blockParams=q.blockParams;var H=void 0,v=void 0;if(K){if(Y)throw new M2.default("Unexpected inverse block on decorator",K);if(K.chain)K.program.body[0].closeStrip=_.strip;v=K.strip,H=K.program}if(P)P=H,H=$,$=P;return{type:Y?"DecoratorBlock":"BlockStatement",path:q.path,params:q.params,hash:q.hash,program:$,inverse:H,openStrip:q.strip,inverseStrip:v,closeStrip:_&&_.strip,loc:this.locInfo(O)}}function mE(q,$){if(!$&&q.length){var K=q[0].loc,_=q[q.length-1].loc;if(K&&_)$={source:K.source,start:{line:K.start.line,column:K.start.column},end:{line:_.end.line,column:_.end.column}}}return{type:"Program",body:q,strip:{},loc:$}}function cE(q,$,K,_){return S2(q,K),{type:"PartialBlockStatement",name:q.path,params:q.params,hash:q.hash,program:$,openStrip:q.strip,closeStrip:K&&K.strip,loc:this.locInfo(_)}}});var fw=bq((jR)=>{jR.__esModule=!0;jR.parseWithoutProcessing=Xw;jR.parse=YR;function eE(q){if(q&&q.__esModule)return q;else{var $={};if(q!=null){for(var K in q)if(Object.prototype.hasOwnProperty.call(q,K))$[K]=q[K]}return $.default=q,$}}function Tw(q){return q&&q.__esModule?q:{default:q}}var sE=Yw(),C2=Tw(sE),qR=vw(),$R=Tw(qR),KR=ww(),_R=eE(KR),PR=o8();jR.parser=C2.default;var N1={};PR.extend(N1,_R);function Xw(q,$){if(q.type==="Program")return q;C2.default.yy=N1,N1.locInfo=function(_){return new N1.SourceLocation($&&$.srcName,_)};var K=C2.default.parse(q);return K}function YR(q,$){var K=Xw(q,$),_=new $R.default($);return _.accept(K)}});var Zw=bq((fR)=>{fR.__esModule=!0;fR.Compiler=N2;fR.precompile=TR;fR.compile=XR;function kw(q){return q&&q.__esModule?q:{default:q}}var JR=A6(),XP=kw(JR),fP=o8(),vR=k2(),TP=kw(vR),wR=[].slice;function N2(){}N2.prototype={compiler:N2,equals:function($){var K=this.opcodes.length;if($.opcodes.length!==K)return!1;for(var _=0;_<K;_++){var P=this.opcodes[_],O=$.opcodes[_];if(P.opcode!==O.opcode||!Gw(P.args,O.args))return!1}K=this.children.length;for(var _=0;_<K;_++)if(!this.children[_].equals($.children[_]))return!1;return!0},guid:0,compile:function($,K){return this.sourceNode=[],this.opcodes=[],this.children=[],this.options=K,this.stringParams=K.stringParams,this.trackIds=K.trackIds,K.blockParams=K.blockParams||[],K.knownHelpers=fP.extend(Object.create(null),{helperMissing:!0,blockHelperMissing:!0,each:!0,if:!0,unless:!0,with:!0,log:!0,lookup:!0},K.knownHelpers),this.accept($)},compileProgram:function($){var K=new this.compiler,_=K.compile($,this.options),P=this.guid++;return this.usePartial=this.usePartial||_.usePartial,this.children[P]=_,this.useDepths=this.useDepths||_.useDepths,P},accept:function($){if(!this[$.type])throw new XP.default("Unknown type: "+$.type,$);this.sourceNode.unshift($);var K=this[$.type]($);return this.sourceNode.shift(),K},Program:function($){this.options.blockParams.unshift($.blockParams);var K=$.body,_=K.length;for(var P=0;P<_;P++)this.accept(K[P]);return this.options.blockParams.shift(),this.isSimple=_===1,this.blockParams=$.blockParams?$.blockParams.length:0,this},BlockStatement:function($){Aw($);var{program:K,inverse:_}=$;K=K&&this.compileProgram(K),_=_&&this.compileProgram(_);var P=this.classifySexpr($);if(P==="helper")this.helperSexpr($,K,_);else if(P==="simple")this.simpleSexpr($),this.opcode("pushProgram",K),this.opcode("pushProgram",_),this.opcode("emptyHash"),this.opcode("blockValue",$.path.original);else this.ambiguousSexpr($,K,_),this.opcode("pushProgram",K),this.opcode("pushProgram",_),this.opcode("emptyHash"),this.opcode("ambiguousBlockValue");this.opcode("append")},DecoratorBlock:function($){var K=$.program&&this.compileProgram($.program),_=this.setupFullMustacheParams($,K,void 0),P=$.path;this.useDecorators=!0,this.opcode("registerDecorator",_.length,P.original)},PartialStatement:function($){this.usePartial=!0;var K=$.program;if(K)K=this.compileProgram($.program);var _=$.params;if(_.length>1)throw new XP.default("Unsupported number of partial arguments: "+_.length,$);else if(!_.length)if(this.options.explicitPartialContext)this.opcode("pushLiteral","undefined");else _.push({type:"PathExpression",parts:[],depth:0});var P=$.name.original,O=$.name.type==="SubExpression";if(O)this.accept($.name);this.setupFullMustacheParams($,K,void 0,!0);var Y=$.indent||"";if(this.options.preventIndent&&Y)this.opcode("appendContent",Y),Y="";this.opcode("invokePartial",O,P,Y),this.opcode("append")},PartialBlockStatement:function($){this.PartialStatement($)},MustacheStatement:function($){if(this.SubExpression($),$.escaped&&!this.options.noEscape)this.opcode("appendEscaped");else this.opcode("append")},Decorator:function($){this.DecoratorBlock($)},ContentStatement:function($){if($.value)this.opcode("appendContent",$.value)},CommentStatement:function(){},SubExpression:function($){Aw($);var K=this.classifySexpr($);if(K==="simple")this.simpleSexpr($);else if(K==="helper")this.helperSexpr($);else this.ambiguousSexpr($)},ambiguousSexpr:function($,K,_){var P=$.path,O=P.parts[0],Y=K!=null||_!=null;this.opcode("getContext",P.depth),this.opcode("pushProgram",K),this.opcode("pushProgram",_),P.strict=!0,this.accept(P),this.opcode("invokeAmbiguous",O,Y)},simpleSexpr:function($){var K=$.path;K.strict=!0,this.accept(K),this.opcode("resolvePossibleLambda")},helperSexpr:function($,K,_){var P=this.setupFullMustacheParams($,K,_),O=$.path,Y=O.parts[0];if(this.options.knownHelpers[Y])this.opcode("invokeKnownHelper",P.length,Y);else if(this.options.knownHelpersOnly)throw new XP.default("You specified knownHelpersOnly, but used the unknown helper "+Y,$);else O.strict=!0,O.falsy=!0,this.accept(O),this.opcode("invokeHelper",P.length,O.original,TP.default.helpers.simpleId(O))},PathExpression:function($){this.addDepth($.depth),this.opcode("getContext",$.depth);var K=$.parts[0],_=TP.default.helpers.scopedId($),P=!$.depth&&!_&&this.blockParamIndex(K);if(P)this.opcode("lookupBlockParam",P,$.parts);else if(!K)this.opcode("pushContext");else if($.data)this.options.data=!0,this.opcode("lookupData",$.depth,$.parts,$.strict);else this.opcode("lookupOnContext",$.parts,$.falsy,$.strict,_)},StringLiteral:function($){this.opcode("pushString",$.value)},NumberLiteral:function($){this.opcode("pushLiteral",$.value)},BooleanLiteral:function($){this.opcode("pushLiteral",$.value)},UndefinedLiteral:function(){this.opcode("pushLiteral","undefined")},NullLiteral:function(){this.opcode("pushLiteral","null")},Hash:function($){var K=$.pairs,_=0,P=K.length;this.opcode("pushHash");for(;_<P;_++)this.pushParam(K[_].value);while(_--)this.opcode("assignToHash",K[_].key);this.opcode("popHash")},opcode:function($){this.opcodes.push({opcode:$,args:wR.call(arguments,1),loc:this.sourceNode[0].loc})},addDepth:function($){if(!$)return;this.useDepths=!0},classifySexpr:function($){var K=TP.default.helpers.simpleId($.path),_=K&&!!this.blockParamIndex($.path.parts[0]),P=!_&&TP.default.helpers.helperExpression($),O=!_&&(P||K);if(O&&!P){var Y=$.path.parts[0],H=this.options;if(H.knownHelpers[Y])P=!0;else if(H.knownHelpersOnly)O=!1}if(P)return"helper";else if(O)return"ambiguous";else return"simple"},pushParams:function($){for(var K=0,_=$.length;K<_;K++)this.pushParam($[K])},pushParam:function($){var K=$.value!=null?$.value:$.original||"";if(this.stringParams){if(K.replace)K=K.replace(/^(\.?\.\/)*/g,"").replace(/\//g,".");if($.depth)this.addDepth($.depth);if(this.opcode("getContext",$.depth||0),this.opcode("pushStringParam",K,$.type),$.type==="SubExpression")this.accept($)}else{if(this.trackIds){var _=void 0;if($.parts&&!TP.default.helpers.scopedId($)&&!$.depth)_=this.blockParamIndex($.parts[0]);if(_){var P=$.parts.slice(1).join(".");this.opcode("pushId","BlockParam",_,P)}else{if(K=$.original||K,K.replace)K=K.replace(/^this(?:\.|$)/,"").replace(/^\.\//,"").replace(/^\.$/,"");this.opcode("pushId",$.type,K)}}this.accept($)}},setupFullMustacheParams:function($,K,_,P){var O=$.params;if(this.pushParams(O),this.opcode("pushProgram",K),this.opcode("pushProgram",_),$.hash)this.accept($.hash);else this.opcode("emptyHash",P);return O},blockParamIndex:function($){for(var K=0,_=this.options.blockParams.length;K<_;K++){var P=this.options.blockParams[K],O=P&&fP.indexOf(P,$);if(P&&O>=0)return[K,O]}}};function TR(q,$,K){if(q==null||typeof q!=="string"&&q.type!=="Program")throw new XP.default("You must pass a string or Handlebars AST to Handlebars.precompile. You passed "+q);if($=$||{},!("data"in $))$.data=!0;if($.compat)$.useDepths=!0;var _=K.parse(q,$),P=new K.Compiler().compile(_,$);return new K.JavaScriptCompiler().compile(P,$)}function XR(q,$,K){if($===void 0)$={};if(q==null||typeof q!=="string"&&q.type!=="Program")throw new XP.default("You must pass a string or Handlebars AST to Handlebars.compile. You passed "+q);if($=fP.extend({},$),!("data"in $))$.data=!0;if($.compat)$.useDepths=!0;var _=void 0;function P(){var Y=K.parse(q,$),H=new K.Compiler().compile(Y,$),v=new K.JavaScriptCompiler().compile(H,$,void 0,!0);return K.template(v)}function O(Y,H){if(!_)_=P();return _.call(this,Y,H)}return O._setup=function(Y){if(!_)_=P();return _._setup(Y)},O._child=function(Y,H,v,X){if(!_)_=P();return _._child(Y,H,v,X)},O}function Gw(q,$){if(q===$)return!0;if(fP.isArray(q)&&fP.isArray($)&&q.length===$.length){for(var K=0;K<q.length;K++)if(!Gw(q[K],$[K]))return!1;return!0}}function Aw(q){if(!q.path.parts){var $=q.path;q.path={type:"PathExpression",data:!1,depth:0,parts:[$.original+""],original:$.original+"",loc:$.loc}}}});var Mw=bq((VR)=>{var Vw="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split("");VR.encode=function(q){if(0<=q&&q<Vw.length)return Vw[q];throw TypeError("Must be between 0 and 63: "+q)};VR.decode=function(q){var $=65,K=90,_=97,P=122,O=48,Y=57,H=43,v=47,X=26,Z=52;if($<=q&&q<=K)return q-$;if(_<=q&&q<=P)return q-_+X;if(O<=q&&q<=Y)return q-O+Z;if(q==H)return 62;if(q==v)return 63;return-1}});var R2=bq((ER)=>{var Sw=Mw(),E2=5,Cw=1<<E2,Nw=Cw-1,Ew=Cw;function CR(q){return q<0?(-q<<1)+1:(q<<1)+0}function NR(q){var $=(q&1)===1,K=q>>1;return $?-K:K}ER.encode=function($){var K="",_,P=CR($);do{if(_=P&Nw,P>>>=E2,P>0)_|=Ew;K+=Sw.encode(_)}while(P>0);return K};ER.decode=function($,K,_){var P=$.length,O=0,Y=0,H,v;do{if(K>=P)throw Error("Expected more digits in base 64 VLQ value.");if(v=Sw.decode($.charCodeAt(K++)),v===-1)throw Error("Invalid base64 digit: "+$.charAt(K-1));H=!!(v&Ew),v&=Nw,O=O+(v<<Y),Y+=E2}while(H);_.value=NR(O),_.rest=K}});var D4=bq((cR)=>{function DR(q,$,K){if($ in q)return q[$];else if(arguments.length===3)return K;else throw Error('"'+$+'" is a required argument.')}cR.getArg=DR;var Rw=/^(?:([\w+\-.]+):)?\/\/(?:(\w+:\w+)@)?([\w.-]*)(?::(\d+))?(.*)$/,IR=/^data:.+\,.+$/;function AP(q){var $=q.match(Rw);if(!$)return null;return{scheme:$[1],auth:$[2],host:$[3],port:$[4],path:$[5]}}cR.urlParse=AP;function R4(q){var $="";if(q.scheme)$+=q.scheme+":";if($+="//",q.auth)$+=q.auth+"@";if(q.host)$+=q.host;if(q.port)$+=":"+q.port;if(q.path)$+=q.path;return $}cR.urlGenerate=R4;function h2(q){var $=q,K=AP(q);if(K){if(!K.path)return q;$=K.path}var _=cR.isAbsolute($),P=$.split(/\/+/);for(var O,Y=0,H=P.length-1;H>=0;H--)if(O=P[H],O===".")P.splice(H,1);else if(O==="..")Y++;else if(Y>0)if(O==="")P.splice(H+1,Y),Y=0;else P.splice(H,2),Y--;if($=P.join("/"),$==="")$=_?"/":".";if(K)return K.path=$,R4(K);return $}cR.normalize=h2;function hw(q,$){if(q==="")q=".";if($==="")$=".";var K=AP($),_=AP(q);if(_)q=_.path||"/";if(K&&!K.scheme){if(_)K.scheme=_.scheme;return R4(K)}if(K||$.match(IR))return $;if(_&&!_.host&&!_.path)return _.host=$,R4(_);var P=$.charAt(0)==="/"?$:h2(q.replace(/\/+$/,"")+"/"+$);if(_)return _.path=P,R4(_);return P}cR.join=hw;cR.isAbsolute=function(q){return q.charAt(0)==="/"||Rw.test(q)};function LR(q,$){if(q==="")q=".";q=q.replace(/\/$/,"");var K=0;while($.indexOf(q+"/")!==0){var _=q.lastIndexOf("/");if(_<0)return $;if(q=q.slice(0,_),q.match(/^([^\/]+:\/)?\/*$/))return $;++K}return Array(K+1).join("../")+$.substr(q.length+1)}cR.relative=LR;var Dw=function(){var q=Object.create(null);return!("__proto__"in q)}();function Iw(q){return q}function bR(q){if(Lw(q))return"$"+q;return q}cR.toSetString=Dw?Iw:bR;function gR(q){if(Lw(q))return q.slice(1);return q}cR.fromSetString=Dw?Iw:gR;function Lw(q){if(!q)return!1;var $=q.length;if($<9)return!1;if(q.charCodeAt($-1)!==95||q.charCodeAt($-2)!==95||q.charCodeAt($-3)!==111||q.charCodeAt($-4)!==116||q.charCodeAt($-5)!==111||q.charCodeAt($-6)!==114||q.charCodeAt($-7)!==112||q.charCodeAt($-8)!==95||q.charCodeAt($-9)!==95)return!1;for(var K=$-10;K>=0;K--)if(q.charCodeAt(K)!==36)return!1;return!0}function yR(q,$,K){var _=h4(q.source,$.source);if(_!==0)return _;if(_=q.originalLine-$.originalLine,_!==0)return _;if(_=q.originalColumn-$.originalColumn,_!==0||K)return _;if(_=q.generatedColumn-$.generatedColumn,_!==0)return _;if(_=q.generatedLine-$.generatedLine,_!==0)return _;return h4(q.name,$.name)}cR.compareByOriginalPositions=yR;function pR(q,$,K){var _=q.generatedLine-$.generatedLine;if(_!==0)return _;if(_=q.generatedColumn-$.generatedColumn,_!==0||K)return _;if(_=h4(q.source,$.source),_!==0)return _;if(_=q.originalLine-$.originalLine,_!==0)return _;if(_=q.originalColumn-$.originalColumn,_!==0)return _;return h4(q.name,$.name)}cR.compareByGeneratedPositionsDeflated=pR;function h4(q,$){if(q===$)return 0;if(q===null)return 1;if($===null)return-1;if(q>$)return 1;return-1}function xR(q,$){var K=q.generatedLine-$.generatedLine;if(K!==0)return K;if(K=q.generatedColumn-$.generatedColumn,K!==0)return K;if(K=h4(q.source,$.source),K!==0)return K;if(K=q.originalLine-$.originalLine,K!==0)return K;if(K=q.originalColumn-$.originalColumn,K!==0)return K;return h4(q.name,$.name)}cR.compareByGeneratedPositionsInflated=xR;function uR(q){return JSON.parse(q.replace(/^\)]}'[^\n]*\n/,""))}cR.parseSourceMapInput=uR;function mR(q,$,K){if($=$||"",q){if(q[q.length-1]!=="/"&&$[0]!=="/")q+="/";$=q+$}if(K){var _=AP(K);if(!_)throw Error("sourceMapURL could not be parsed");if(_.path){var P=_.path.lastIndexOf("/");if(P>=0)_.path=_.path.substring(0,P+1)}$=hw(R4(_),$)}return h2($)}cR.computeSourceURL=mR});var L2=bq((qh)=>{var D2=D4(),I2=Object.prototype.hasOwnProperty,D_=typeof Map<"u";function CK(){this._array=[],this._set=D_?new Map:Object.create(null)}CK.fromArray=function($,K){var _=new CK;for(var P=0,O=$.length;P<O;P++)_.add($[P],K);return _};CK.prototype.size=function(){return D_?this._set.size:Object.getOwnPropertyNames(this._set).length};CK.prototype.add=function($,K){var _=D_?$:D2.toSetString($),P=D_?this.has($):I2.call(this._set,_),O=this._array.length;if(!P||K)this._array.push($);if(!P)if(D_)this._set.set($,O);else this._set[_]=O};CK.prototype.has=function($){if(D_)return this._set.has($);else{var K=D2.toSetString($);return I2.call(this._set,K)}};CK.prototype.indexOf=function($){if(D_){var K=this._set.get($);if(K>=0)return K}else{var _=D2.toSetString($);if(I2.call(this._set,_))return this._set[_]}throw Error('"'+$+'" is not in the set.')};CK.prototype.at=function($){if($>=0&&$<this._array.length)return this._array[$];throw Error("No element indexed by "+$)};CK.prototype.toArray=function(){return this._array.slice()};qh.ArraySet=CK});var gw=bq((_h)=>{var bw=D4();function Kh(q,$){var K=q.generatedLine,_=$.generatedLine,P=q.generatedColumn,O=$.generatedColumn;return _>K||_==K&&O>=P||bw.compareByGeneratedPositionsInflated(q,$)<=0}function E1(){this._array=[],this._sorted=!0,this._last={generatedLine:-1,generatedColumn:0}}E1.prototype.unsortedForEach=function($,K){this._array.forEach($,K)};E1.prototype.add=function($){if(Kh(this._last,$))this._last=$,this._array.push($);else this._sorted=!1,this._array.push($)};E1.prototype.toArray=function(){if(!this._sorted)this._array.sort(bw.compareByGeneratedPositionsInflated),this._sorted=!0;return this._array};_h.MappingList=E1});var b2=bq((jh)=>{var kP=R2(),i$=D4(),R1=L2().ArraySet,Yh=gw().MappingList;function k6(q){if(!q)q={};this._file=i$.getArg(q,"file",null),this._sourceRoot=i$.getArg(q,"sourceRoot",null),this._skipValidation=i$.getArg(q,"skipValidation",!1),this._sources=new R1,this._names=new R1,this._mappings=new Yh,this._sourcesContents=null}k6.prototype._version=3;k6.fromSourceMap=function($){var K=$.sourceRoot,_=new k6({file:$.file,sourceRoot:K});return $.eachMapping(function(P){var O={generated:{line:P.generatedLine,column:P.generatedColumn}};if(P.source!=null){if(O.source=P.source,K!=null)O.source=i$.relative(K,O.source);if(O.original={line:P.originalLine,column:P.originalColumn},P.name!=null)O.name=P.name}_.addMapping(O)}),$.sources.forEach(function(P){var O=P;if(K!==null)O=i$.relative(K,P);if(!_._sources.has(O))_._sources.add(O);var Y=$.sourceContentFor(P);if(Y!=null)_.setSourceContent(P,Y)}),_};k6.prototype.addMapping=function($){var K=i$.getArg($,"generated"),_=i$.getArg($,"original",null),P=i$.getArg($,"source",null),O=i$.getArg($,"name",null);if(!this._skipValidation)this._validateMapping(K,_,P,O);if(P!=null){if(P=String(P),!this._sources.has(P))this._sources.add(P)}if(O!=null){if(O=String(O),!this._names.has(O))this._names.add(O)}this._mappings.add({generatedLine:K.line,generatedColumn:K.column,originalLine:_!=null&&_.line,originalColumn:_!=null&&_.column,source:P,name:O})};k6.prototype.setSourceContent=function($,K){var _=$;if(this._sourceRoot!=null)_=i$.relative(this._sourceRoot,_);if(K!=null){if(!this._sourcesContents)this._sourcesContents=Object.create(null);this._sourcesContents[i$.toSetString(_)]=K}else if(this._sourcesContents){if(delete this._sourcesContents[i$.toSetString(_)],Object.keys(this._sourcesContents).length===0)this._sourcesContents=null}};k6.prototype.applySourceMap=function($,K,_){var P=K;if(K==null){if($.file==null)throw Error(`SourceMapGenerator.prototype.applySourceMap requires either an explicit source file, or the source map's "file" property. Both were omitted.`);P=$.file}var O=this._sourceRoot;if(O!=null)P=i$.relative(O,P);var Y=new R1,H=new R1;this._mappings.unsortedForEach(function(v){if(v.source===P&&v.originalLine!=null){var X=$.originalPositionFor({line:v.originalLine,column:v.originalColumn});if(X.source!=null){if(v.source=X.source,_!=null)v.source=i$.join(_,v.source);if(O!=null)v.source=i$.relative(O,v.source);if(v.originalLine=X.line,v.originalColumn=X.column,X.name!=null)v.name=X.name}}var Z=v.source;if(Z!=null&&!Y.has(Z))Y.add(Z);var k=v.name;if(k!=null&&!H.has(k))H.add(k)},this),this._sources=Y,this._names=H,$.sources.forEach(function(v){var X=$.sourceContentFor(v);if(X!=null){if(_!=null)v=i$.join(_,v);if(O!=null)v=i$.relative(O,v);this.setSourceContent(v,X)}},this)};k6.prototype._validateMapping=function($,K,_,P){if(K&&typeof K.line!=="number"&&typeof K.column!=="number")throw Error("original.line and original.column are not numbers -- you probably meant to omit the original mapping entirely and only map the generated position. If so, pass null for the original mapping instead of an object with empty or null values.");if($&&"line"in $&&"column"in $&&$.line>0&&$.column>=0&&!K&&!_&&!P)return;else if($&&"line"in $&&"column"in $&&K&&"line"in K&&"column"in K&&$.line>0&&$.column>=0&&K.line>0&&K.column>=0&&_)return;else throw Error("Invalid mapping: "+JSON.stringify({generated:$,source:_,original:K,name:P}))};k6.prototype._serializeMappings=function(){var $=0,K=1,_=0,P=0,O=0,Y=0,H="",v,X,Z,k,G=this._mappings.toArray();for(var S=0,N=G.length;S<N;S++){if(X=G[S],v="",X.generatedLine!==K){$=0;while(X.generatedLine!==K)v+=";",K++}else if(S>0){if(!i$.compareByGeneratedPositionsInflated(X,G[S-1]))continue;v+=","}if(v+=kP.encode(X.generatedColumn-$),$=X.generatedColumn,X.source!=null){if(k=this._sources.indexOf(X.source),v+=kP.encode(k-Y),Y=k,v+=kP.encode(X.originalLine-1-P),P=X.originalLine-1,v+=kP.encode(X.originalColumn-_),_=X.originalColumn,X.name!=null)Z=this._names.indexOf(X.name),v+=kP.encode(Z-O),O=Z}H+=v}return H};k6.prototype._generateSourcesContent=function($,K){return $.map(function(_){if(!this._sourcesContents)return null;if(K!=null)_=i$.relative(K,_);var P=i$.toSetString(_);return Object.prototype.hasOwnProperty.call(this._sourcesContents,P)?this._sourcesContents[P]:null},this)};k6.prototype.toJSON=function(){var $={version:this._version,sources:this._sources.toArray(),names:this._names.toArray(),mappings:this._serializeMappings()};if(this._file!=null)$.file=this._file;if(this._sourceRoot!=null)$.sourceRoot=this._sourceRoot;if(this._sourcesContents)$.sourcesContent=this._generateSourcesContent($.sources,$.sourceRoot);return $};k6.prototype.toString=function(){return JSON.stringify(this.toJSON())};jh.SourceMapGenerator=k6});var pw=bq((Wh)=>{Wh.GREATEST_LOWER_BOUND=1;Wh.LEAST_UPPER_BOUND=2;function g2(q,$,K,_,P,O){var Y=Math.floor(($-q)/2)+q,H=P(K,_[Y],!0);if(H===0)return Y;else if(H>0){if($-Y>1)return g2(Y,$,K,_,P,O);if(O==Wh.LEAST_UPPER_BOUND)return $<_.length?$:-1;else return Y}else{if(Y-q>1)return g2(q,Y,K,_,P,O);if(O==Wh.LEAST_UPPER_BOUND)return Y;else return q<0?-1:q}}Wh.search=function($,K,_,P){if(K.length===0)return-1;var O=g2(-1,K.length,$,K,_,P||Wh.GREATEST_LOWER_BOUND);if(O<0)return-1;while(O-1>=0){if(_(K[O],K[O-1],!0)!==0)break;--O}return O}});var xw=bq((Jh)=>{function p2(q,$,K){var _=q[$];q[$]=q[K],q[K]=_}function zh(q,$){return Math.round(q+Math.random()*($-q))}function x2(q,$,K,_){if(K<_){var P=zh(K,_),O=K-1;p2(q,P,_);var Y=q[_];for(var H=K;H<_;H++)if($(q[H],Y)<=0)O+=1,p2(q,O,H);p2(q,O+1,H);var v=O+1;x2(q,$,K,v-1),x2(q,$,v+1,_)}}Jh.quickSort=function(q,$){x2(q,$,0,q.length-1)}});var mw=bq((Th)=>{var Qq=D4(),u2=pw(),I4=L2().ArraySet,wh=R2(),GP=xw().quickSort;function b$(q,$){var K=q;if(typeof q==="string")K=Qq.parseSourceMapInput(q);return K.sections!=null?new L6(K,$):new N8(K,$)}b$.fromSourceMap=function(q,$){return N8.fromSourceMap(q,$)};b$.prototype._version=3;b$.prototype.__generatedMappings=null;Object.defineProperty(b$.prototype,"_generatedMappings",{configurable:!0,enumerable:!0,get:function(){if(!this.__generatedMappings)this._parseMappings(this._mappings,this.sourceRoot);return this.__generatedMappings}});b$.prototype.__originalMappings=null;Object.defineProperty(b$.prototype,"_originalMappings",{configurable:!0,enumerable:!0,get:function(){if(!this.__originalMappings)this._parseMappings(this._mappings,this.sourceRoot);return this.__originalMappings}});b$.prototype._charIsMappingSeparator=function($,K){var _=$.charAt(K);return _===";"||_===","};b$.prototype._parseMappings=function($,K){throw Error("Subclasses must implement _parseMappings")};b$.GENERATED_ORDER=1;b$.ORIGINAL_ORDER=2;b$.GREATEST_LOWER_BOUND=1;b$.LEAST_UPPER_BOUND=2;b$.prototype.eachMapping=function($,K,_){var P=K||null,O=_||b$.GENERATED_ORDER,Y;switch(O){case b$.GENERATED_ORDER:Y=this._generatedMappings;break;case b$.ORIGINAL_ORDER:Y=this._originalMappings;break;default:throw Error("Unknown order of iteration.")}var H=this.sourceRoot;Y.map(function(v){var X=v.source===null?null:this._sources.at(v.source);return X=Qq.computeSourceURL(H,X,this._sourceMapURL),{source:X,generatedLine:v.generatedLine,generatedColumn:v.generatedColumn,originalLine:v.originalLine,originalColumn:v.originalColumn,name:v.name===null?null:this._names.at(v.name)}},this).forEach($,P)};b$.prototype.allGeneratedPositionsFor=function($){var K=Qq.getArg($,"line"),_={source:Qq.getArg($,"source"),originalLine:K,originalColumn:Qq.getArg($,"column",0)};if(_.source=this._findSourceIndex(_.source),_.source<0)return[];var P=[],O=this._findMapping(_,this._originalMappings,"originalLine","originalColumn",Qq.compareByOriginalPositions,u2.LEAST_UPPER_BOUND);if(O>=0){var Y=this._originalMappings[O];if($.column===void 0){var H=Y.originalLine;while(Y&&Y.originalLine===H)P.push({line:Qq.getArg(Y,"generatedLine",null),column:Qq.getArg(Y,"generatedColumn",null),lastColumn:Qq.getArg(Y,"lastGeneratedColumn",null)}),Y=this._originalMappings[++O]}else{var v=Y.originalColumn;while(Y&&Y.originalLine===K&&Y.originalColumn==v)P.push({line:Qq.getArg(Y,"generatedLine",null),column:Qq.getArg(Y,"generatedColumn",null),lastColumn:Qq.getArg(Y,"lastGeneratedColumn",null)}),Y=this._originalMappings[++O]}}return P};Th.SourceMapConsumer=b$;function N8(q,$){var K=q;if(typeof q==="string")K=Qq.parseSourceMapInput(q);var _=Qq.getArg(K,"version"),P=Qq.getArg(K,"sources"),O=Qq.getArg(K,"names",[]),Y=Qq.getArg(K,"sourceRoot",null),H=Qq.getArg(K,"sourcesContent",null),v=Qq.getArg(K,"mappings"),X=Qq.getArg(K,"file",null);if(_!=this._version)throw Error("Unsupported version: "+_);if(Y)Y=Qq.normalize(Y);P=P.map(String).map(Qq.normalize).map(function(Z){return Y&&Qq.isAbsolute(Y)&&Qq.isAbsolute(Z)?Qq.relative(Y,Z):Z}),this._names=I4.fromArray(O.map(String),!0),this._sources=I4.fromArray(P,!0),this._absoluteSources=this._sources.toArray().map(function(Z){return Qq.computeSourceURL(Y,Z,$)}),this.sourceRoot=Y,this.sourcesContent=H,this._mappings=v,this._sourceMapURL=$,this.file=X}N8.prototype=Object.create(b$.prototype);N8.prototype.consumer=b$;N8.prototype._findSourceIndex=function(q){var $=q;if(this.sourceRoot!=null)$=Qq.relative(this.sourceRoot,$);if(this._sources.has($))return this._sources.indexOf($);var K;for(K=0;K<this._absoluteSources.length;++K)if(this._absoluteSources[K]==q)return K;return-1};N8.fromSourceMap=function($,K){var _=Object.create(N8.prototype),P=_._names=I4.fromArray($._names.toArray(),!0),O=_._sources=I4.fromArray($._sources.toArray(),!0);_.sourceRoot=$._sourceRoot,_.sourcesContent=$._generateSourcesContent(_._sources.toArray(),_.sourceRoot),_.file=$._file,_._sourceMapURL=K,_._absoluteSources=_._sources.toArray().map(function(S){return Qq.computeSourceURL(_.sourceRoot,S,K)});var Y=$._mappings.toArray().slice(),H=_.__generatedMappings=[],v=_.__originalMappings=[];for(var X=0,Z=Y.length;X<Z;X++){var k=Y[X],G=new uw;if(G.generatedLine=k.generatedLine,G.generatedColumn=k.generatedColumn,k.source){if(G.source=O.indexOf(k.source),G.originalLine=k.originalLine,G.originalColumn=k.originalColumn,k.name)G.name=P.indexOf(k.name);v.push(G)}H.push(G)}return GP(_.__originalMappings,Qq.compareByOriginalPositions),_};N8.prototype._version=3;Object.defineProperty(N8.prototype,"sources",{get:function(){return this._absoluteSources.slice()}});function uw(){this.generatedLine=0,this.generatedColumn=0,this.source=null,this.originalLine=null,this.originalColumn=null,this.name=null}N8.prototype._parseMappings=function($,K){var _=1,P=0,O=0,Y=0,H=0,v=0,X=$.length,Z=0,k={},G={},S=[],N=[],E,h,D,I,g;while(Z<X)if($.charAt(Z)===";")_++,Z++,P=0;else if($.charAt(Z)===",")Z++;else{E=new uw,E.generatedLine=_;for(I=Z;I<X;I++)if(this._charIsMappingSeparator($,I))break;if(h=$.slice(Z,I),D=k[h],D)Z+=h.length;else{D=[];while(Z<I)wh.decode($,Z,G),g=G.value,Z=G.rest,D.push(g);if(D.length===2)throw Error("Found a source, but no line and column");if(D.length===3)throw Error("Found a source and line, but no column");k[h]=D}if(E.generatedColumn=P+D[0],P=E.generatedColumn,D.length>1){if(E.source=H+D[1],H+=D[1],E.originalLine=O+D[2],O=E.originalLine,E.originalLine+=1,E.originalColumn=Y+D[3],Y=E.originalColumn,D.length>4)E.name=v+D[4],v+=D[4]}if(N.push(E),typeof E.originalLine==="number")S.push(E)}GP(N,Qq.compareByGeneratedPositionsDeflated),this.__generatedMappings=N,GP(S,Qq.compareByOriginalPositions),this.__originalMappings=S};N8.prototype._findMapping=function($,K,_,P,O,Y){if($[_]<=0)throw TypeError("Line must be greater than or equal to 1, got "+$[_]);if($[P]<0)throw TypeError("Column must be greater than or equal to 0, got "+$[P]);return u2.search($,K,O,Y)};N8.prototype.computeColumnSpans=function(){for(var $=0;$<this._generatedMappings.length;++$){var K=this._generatedMappings[$];if($+1<this._generatedMappings.length){var _=this._generatedMappings[$+1];if(K.generatedLine===_.generatedLine){K.lastGeneratedColumn=_.generatedColumn-1;continue}}K.lastGeneratedColumn=1/0}};N8.prototype.originalPositionFor=function($){var K={generatedLine:Qq.getArg($,"line"),generatedColumn:Qq.getArg($,"column")},_=this._findMapping(K,this._generatedMappings,"generatedLine","generatedColumn",Qq.compareByGeneratedPositionsDeflated,Qq.getArg($,"bias",b$.GREATEST_LOWER_BOUND));if(_>=0){var P=this._generatedMappings[_];if(P.generatedLine===K.generatedLine){var O=Qq.getArg(P,"source",null);if(O!==null)O=this._sources.at(O),O=Qq.computeSourceURL(this.sourceRoot,O,this._sourceMapURL);var Y=Qq.getArg(P,"name",null);if(Y!==null)Y=this._names.at(Y);return{source:O,line:Qq.getArg(P,"originalLine",null),column:Qq.getArg(P,"originalColumn",null),name:Y}}}return{source:null,line:null,column:null,name:null}};N8.prototype.hasContentsOfAllSources=function(){if(!this.sourcesContent)return!1;return this.sourcesContent.length>=this._sources.size()&&!this.sourcesContent.some(function($){return $==null})};N8.prototype.sourceContentFor=function($,K){if(!this.sourcesContent)return null;var _=this._findSourceIndex($);if(_>=0)return this.sourcesContent[_];var P=$;if(this.sourceRoot!=null)P=Qq.relative(this.sourceRoot,P);var O;if(this.sourceRoot!=null&&(O=Qq.urlParse(this.sourceRoot))){var Y=P.replace(/^file:\/\//,"");if(O.scheme=="file"&&this._sources.has(Y))return this.sourcesContent[this._sources.indexOf(Y)];if((!O.path||O.path=="/")&&this._sources.has("/"+P))return this.sourcesContent[this._sources.indexOf("/"+P)]}if(K)return null;else throw Error('"'+P+'" is not in the SourceMap.')};N8.prototype.generatedPositionFor=function($){var K=Qq.getArg($,"source");if(K=this._findSourceIndex(K),K<0)return{line:null,column:null,lastColumn:null};var _={source:K,originalLine:Qq.getArg($,"line"),originalColumn:Qq.getArg($,"column")},P=this._findMapping(_,this._originalMappings,"originalLine","originalColumn",Qq.compareByOriginalPositions,Qq.getArg($,"bias",b$.GREATEST_LOWER_BOUND));if(P>=0){var O=this._originalMappings[P];if(O.source===_.source)return{line:Qq.getArg(O,"generatedLine",null),column:Qq.getArg(O,"generatedColumn",null),lastColumn:Qq.getArg(O,"lastGeneratedColumn",null)}}return{line:null,column:null,lastColumn:null}};Th.BasicSourceMapConsumer=N8;function L6(q,$){var K=q;if(typeof q==="string")K=Qq.parseSourceMapInput(q);var _=Qq.getArg(K,"version"),P=Qq.getArg(K,"sections");if(_!=this._version)throw Error("Unsupported version: "+_);this._sources=new I4,this._names=new I4;var O={line:-1,column:0};this._sections=P.map(function(Y){if(Y.url)throw Error("Support for url field in sections not implemented.");var H=Qq.getArg(Y,"offset"),v=Qq.getArg(H,"line"),X=Qq.getArg(H,"column");if(v<O.line||v===O.line&&X<O.column)throw Error("Section offsets must be ordered and non-overlapping.");return O=H,{generatedOffset:{generatedLine:v+1,generatedColumn:X+1},consumer:new b$(Qq.getArg(Y,"map"),$)}})}L6.prototype=Object.create(b$.prototype);L6.prototype.constructor=b$;L6.prototype._version=3;Object.defineProperty(L6.prototype,"sources",{get:function(){var q=[];for(var $=0;$<this._sections.length;$++)for(var K=0;K<this._sections[$].consumer.sources.length;K++)q.push(this._sections[$].consumer.sources[K]);return q}});L6.prototype.originalPositionFor=function($){var K={generatedLine:Qq.getArg($,"line"),generatedColumn:Qq.getArg($,"column")},_=u2.search(K,this._sections,function(O,Y){var H=O.generatedLine-Y.generatedOffset.generatedLine;if(H)return H;return O.generatedColumn-Y.generatedOffset.generatedColumn}),P=this._sections[_];if(!P)return{source:null,line:null,column:null,name:null};return P.consumer.originalPositionFor({line:K.generatedLine-(P.generatedOffset.generatedLine-1),column:K.generatedColumn-(P.generatedOffset.generatedLine===K.generatedLine?P.generatedOffset.generatedColumn-1:0),bias:$.bias})};L6.prototype.hasContentsOfAllSources=function(){return this._sections.every(function($){return $.consumer.hasContentsOfAllSources()})};L6.prototype.sourceContentFor=function($,K){for(var _=0;_<this._sections.length;_++){var P=this._sections[_],O=P.consumer.sourceContentFor($,!0);if(O)return O}if(K)return null;else throw Error('"'+$+'" is not in the SourceMap.')};L6.prototype.generatedPositionFor=function($){for(var K=0;K<this._sections.length;K++){var _=this._sections[K];if(_.consumer._findSourceIndex(Qq.getArg($,"source"))===-1)continue;var P=_.consumer.generatedPositionFor($);if(P){var O={line:P.line+(_.generatedOffset.generatedLine-1),column:P.column+(_.generatedOffset.generatedLine===P.line?_.generatedOffset.generatedColumn-1:0)};return O}}return{line:null,column:null}};L6.prototype._parseMappings=function($,K){this.__generatedMappings=[],this.__originalMappings=[];for(var _=0;_<this._sections.length;_++){var P=this._sections[_],O=P.consumer._generatedMappings;for(var Y=0;Y<O.length;Y++){var H=O[Y],v=P.consumer._sources.at(H.source);v=Qq.computeSourceURL(P.consumer.sourceRoot,v,this._sourceMapURL),this._sources.add(v),v=this._sources.indexOf(v);var X=null;if(H.name)X=P.consumer._names.at(H.name),this._names.add(X),X=this._names.indexOf(X);var Z={source:v,generatedLine:H.generatedLine+(P.generatedOffset.generatedLine-1),generatedColumn:H.generatedColumn+(P.generatedOffset.generatedLine===H.generatedLine?P.generatedOffset.generatedColumn-1:0),originalLine:H.originalLine,originalColumn:H.originalColumn,name:X};if(this.__generatedMappings.push(Z),typeof Z.originalLine==="number")this.__originalMappings.push(Z)}}GP(this.__generatedMappings,Qq.compareByGeneratedPositionsDeflated),GP(this.__originalMappings,Qq.compareByOriginalPositions)};Th.IndexedSourceMapConsumer=L6});var cw=bq((Vh)=>{var kh=b2().SourceMapGenerator,h1=D4(),Gh=/(\r?\n)/,Zh=10,L4="$$$isSourceNode$$$";function j6(q,$,K,_,P){if(this.children=[],this.sourceContents={},this.line=q==null?null:q,this.column=$==null?null:$,this.source=K==null?null:K,this.name=P==null?null:P,this[L4]=!0,_!=null)this.add(_)}j6.fromStringWithSourceMap=function($,K,_){var P=new j6,O=$.split(Gh),Y=0,H=function(){var G=N(),S=N()||"";return G+S;function N(){return Y<O.length?O[Y++]:void 0}},v=1,X=0,Z=null;if(K.eachMapping(function(G){if(Z!==null)if(v<G.generatedLine)k(Z,H()),v++,X=0;else{var S=O[Y]||"",N=S.substr(0,G.generatedColumn-X);O[Y]=S.substr(G.generatedColumn-X),X=G.generatedColumn,k(Z,N),Z=G;return}while(v<G.generatedLine)P.add(H()),v++;if(X<G.generatedColumn){var S=O[Y]||"";P.add(S.substr(0,G.generatedColumn)),O[Y]=S.substr(G.generatedColumn),X=G.generatedColumn}Z=G},this),Y<O.length){if(Z)k(Z,H());P.add(O.splice(Y).join(""))}return K.sources.forEach(function(G){var S=K.sourceContentFor(G);if(S!=null){if(_!=null)G=h1.join(_,G);P.setSourceContent(G,S)}}),P;function k(G,S){if(G===null||G.source===void 0)P.add(S);else{var N=_?h1.join(_,G.source):G.source;P.add(new j6(G.originalLine,G.originalColumn,N,S,G.name))}}};j6.prototype.add=function($){if(Array.isArray($))$.forEach(function(K){this.add(K)},this);else if($[L4]||typeof $==="string"){if($)this.children.push($)}else throw TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+$);return this};j6.prototype.prepend=function($){if(Array.isArray($))for(var K=$.length-1;K>=0;K--)this.prepend($[K]);else if($[L4]||typeof $==="string")this.children.unshift($);else throw TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+$);return this};j6.prototype.walk=function($){var K;for(var _=0,P=this.children.length;_<P;_++)if(K=this.children[_],K[L4])K.walk($);else if(K!=="")$(K,{source:this.source,line:this.line,column:this.column,name:this.name})};j6.prototype.join=function($){var K,_,P=this.children.length;if(P>0){K=[];for(_=0;_<P-1;_++)K.push(this.children[_]),K.push($);K.push(this.children[_]),this.children=K}return this};j6.prototype.replaceRight=function($,K){var _=this.children[this.children.length-1];if(_[L4])_.replaceRight($,K);else if(typeof _==="string")this.children[this.children.length-1]=_.replace($,K);else this.children.push("".replace($,K));return this};j6.prototype.setSourceContent=function($,K){this.sourceContents[h1.toSetString($)]=K};j6.prototype.walkSourceContents=function($){for(var K=0,_=this.children.length;K<_;K++)if(this.children[K][L4])this.children[K].walkSourceContents($);var P=Object.keys(this.sourceContents);for(var K=0,_=P.length;K<_;K++)$(h1.fromSetString(P[K]),this.sourceContents[P[K]])};j6.prototype.toString=function(){var $="";return this.walk(function(K){$+=K}),$};j6.prototype.toStringWithSourceMap=function($){var K={code:"",line:1,column:0},_=new kh($),P=!1,O=null,Y=null,H=null,v=null;return this.walk(function(X,Z){if(K.code+=X,Z.source!==null&&Z.line!==null&&Z.column!==null){if(O!==Z.source||Y!==Z.line||H!==Z.column||v!==Z.name)_.addMapping({source:Z.source,original:{line:Z.line,column:Z.column},generated:{line:K.line,column:K.column},name:Z.name});O=Z.source,Y=Z.line,H=Z.column,v=Z.name,P=!0}else if(P)_.addMapping({generated:{line:K.line,column:K.column}}),O=null,P=!1;for(var k=0,G=X.length;k<G;k++)if(X.charCodeAt(k)===Zh){if(K.line++,K.column=0,k+1===G)O=null,P=!1;else if(P)_.addMapping({source:Z.source,original:{line:Z.line,column:Z.column},generated:{line:K.line,column:K.column},name:Z.name})}else K.column++}),this.walkSourceContents(function(X,Z){_.setSourceContent(X,Z)}),{code:K.code,map:_}};Vh.SourceNode=j6});var lw=bq((Sh)=>{Sh.SourceMapGenerator=b2().SourceMapGenerator;Sh.SourceMapConsumer=mw().SourceMapConsumer;Sh.SourceNode=cw().SourceNode});var rw=bq((ow,nw)=>{ow.__esModule=!0;var c2=o8(),I_=void 0;try{if(typeof define!=="function"||!define.amd)l2=lw(),I_=l2.SourceNode}catch(q){}var l2;if(!I_)I_=function(q,$,K,_){if(this.src="",_)this.add(_)},I_.prototype={add:function($){if(c2.isArray($))$=$.join("");this.src+=$},prepend:function($){if(c2.isArray($))$=$.join("");this.src=$+this.src},toStringWithSourceMap:function(){return{code:this.toString()}},toString:function(){return this.src}};function m2(q,$,K){if(c2.isArray(q)){var _=[];for(var P=0,O=q.length;P<O;P++)_.push($.wrap(q[P],K));return _}else if(typeof q==="boolean"||typeof q==="number")return q+"";return q}function dw(q){this.srcFile=q,this.source=[]}dw.prototype={isEmpty:function(){return!this.source.length},prepend:function($,K){this.source.unshift(this.wrap($,K))},push:function($,K){this.source.push(this.wrap($,K))},merge:function(){var $=this.empty();return this.each(function(K){$.add(["  ",K,`
`])}),$},each:function($){for(var K=0,_=this.source.length;K<_;K++)$(this.source[K])},empty:function(){var $=this.currentLocation||{start:{}};return new I_($.start.line,$.start.column,this.srcFile)},wrap:function($){var K=arguments.length<=1||arguments[1]===void 0?this.currentLocation||{start:{}}:arguments[1];if($ instanceof I_)return $;return $=m2($,this,K),new I_(K.start.line,K.start.column,this.srcFile,$)},functionCall:function($,K,_){return _=this.generateList(_),this.wrap([$,K?"."+K+"(":"(",_,")"])},quotedString:function($){return'"'+($+"").replace(/\\/g,"\\\\").replace(/"/g,"\\\"").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")+'"'},objectLiteral:function($){var K=this,_=[];Object.keys($).forEach(function(O){var Y=m2($[O],K);if(Y!=="undefined")_.push([K.quotedString(O),":",Y])});var P=this.generateList(_);return P.prepend("{"),P.add("}"),P},generateList:function($){var K=this.empty();for(var _=0,P=$.length;_<P;_++){if(_)K.add(",");K.add(m2($[_],this))}return K},generateArray:function($){var K=this.generateList($);return K.prepend("["),K.add("]"),K}};ow.default=dw;nw.exports=ow.default});var Qw=bq((Fw,tw)=>{Fw.__esModule=!0;function Uw(q){return q&&q.__esModule?q:{default:q}}var Bw=Z1(),Dh=A6(),d2=Uw(Dh),Ih=o8(),Lh=rw(),iw=Uw(Lh);function b4(q){this.value=q}function g4(){}g4.prototype={nameLookup:function($,K){return this.internalNameLookup($,K)},depthedLookup:function($){return[this.aliasable("container.lookup"),"(depths, ",JSON.stringify($),")"]},compilerInfo:function(){var $=Bw.COMPILER_REVISION,K=Bw.REVISION_CHANGES[$];return[$,K]},appendToBuffer:function($,K,_){if(!Ih.isArray($))$=[$];if($=this.source.wrap($,K),this.environment.isSimple)return["return ",$,";"];else if(_)return["buffer += ",$,";"];else return $.appendToBuffer=!0,$},initializeBuffer:function(){return this.quotedString("")},internalNameLookup:function($,K){return this.lookupPropertyFunctionIsUsed=!0,["lookupProperty(",$,",",JSON.stringify(K),")"]},lookupPropertyFunctionIsUsed:!1,compile:function($,K,_,P){this.environment=$,this.options=K,this.stringParams=this.options.stringParams,this.trackIds=this.options.trackIds,this.precompile=!P,this.name=this.environment.name,this.isChild=!!_,this.context=_||{decorators:[],programs:[],environments:[]},this.preamble(),this.stackSlot=0,this.stackVars=[],this.aliases={},this.registers={list:[]},this.hashes=[],this.compileStack=[],this.inlineStack=[],this.blockParams=[],this.compileChildren($,K),this.useDepths=this.useDepths||$.useDepths||$.useDecorators||this.options.compat,this.useBlockParams=this.useBlockParams||$.useBlockParams;var O=$.opcodes,Y=void 0,H=void 0,v=void 0,X=void 0;for(v=0,X=O.length;v<X;v++)Y=O[v],this.source.currentLocation=Y.loc,H=H||Y.loc,this[Y.opcode].apply(this,Y.args);if(this.source.currentLocation=H,this.pushSource(""),this.stackSlot||this.inlineStack.length||this.compileStack.length)throw new d2.default("Compile completed with content left on stack");if(!this.decorators.isEmpty())if(this.useDecorators=!0,this.decorators.prepend(["var decorators = container.decorators, ",this.lookupPropertyFunctionVarDeclaration(),`;
`]),this.decorators.push("return fn;"),P)this.decorators=Function.apply(this,["fn","props","container","depth0","data","blockParams","depths",this.decorators.merge()]);else this.decorators.prepend(`function(fn, props, container, depth0, data, blockParams, depths) {
`),this.decorators.push(`}
`),this.decorators=this.decorators.merge();else this.decorators=void 0;var Z=this.createFunctionContext(P);if(!this.isChild){var k={compiler:this.compilerInfo(),main:Z};if(this.decorators)k.main_d=this.decorators,k.useDecorators=!0;var G=this.context,S=G.programs,N=G.decorators;for(v=0,X=S.length;v<X;v++)if(S[v]){if(k[v]=S[v],N[v])k[v+"_d"]=N[v],k.useDecorators=!0}if(this.environment.usePartial)k.usePartial=!0;if(this.options.data)k.useData=!0;if(this.useDepths)k.useDepths=!0;if(this.useBlockParams)k.useBlockParams=!0;if(this.options.compat)k.compat=!0;if(!P)if(k.compiler=JSON.stringify(k.compiler),this.source.currentLocation={start:{line:1,column:0}},k=this.objectLiteral(k),K.srcName)k=k.toStringWithSourceMap({file:K.destName}),k.map=k.map&&k.map.toString();else k=k.toString();else k.compilerOptions=this.options;return k}else return Z},preamble:function(){this.lastContext=0,this.source=new iw.default(this.options.srcName),this.decorators=new iw.default(this.options.srcName)},createFunctionContext:function($){var K=this,_="",P=this.stackVars.concat(this.registers.list);if(P.length>0)_+=", "+P.join(", ");var O=0;if(Object.keys(this.aliases).forEach(function(v){var X=K.aliases[v];if(X.children&&X.referenceCount>1)_+=", alias"+ ++O+"="+v,X.children[0]="alias"+O}),this.lookupPropertyFunctionIsUsed)_+=", "+this.lookupPropertyFunctionVarDeclaration();var Y=["container","depth0","helpers","partials","data"];if(this.useBlockParams||this.useDepths)Y.push("blockParams");if(this.useDepths)Y.push("depths");var H=this.mergeSource(_);if($)return Y.push(H),Function.apply(this,Y);else return this.source.wrap(["function(",Y.join(","),`) {
  `,H,"}"])},mergeSource:function($){var K=this.environment.isSimple,_=!this.forceBuffer,P=void 0,O=void 0,Y=void 0,H=void 0;if(this.source.each(function(v){if(v.appendToBuffer){if(Y)v.prepend("  + ");else Y=v;H=v}else{if(Y){if(!O)P=!0;else Y.prepend("buffer += ");H.add(";"),Y=H=void 0}if(O=!0,!K)_=!1}}),_){if(Y)Y.prepend("return "),H.add(";");else if(!O)this.source.push('return "";')}else if($+=", buffer = "+(P?"":this.initializeBuffer()),Y)Y.prepend("return buffer + "),H.add(";");else this.source.push("return buffer;");if($)this.source.prepend("var "+$.substring(2)+(P?"":`;
`));return this.source.merge()},lookupPropertyFunctionVarDeclaration:function(){return`
      lookupProperty = container.lookupProperty || function(parent, propertyName) {
        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {
          return parent[propertyName];
        }
        return undefined
    }
    `.trim()},blockValue:function($){var K=this.aliasable("container.hooks.blockHelperMissing"),_=[this.contextName(0)];this.setupHelperArgs($,0,_);var P=this.popStack();_.splice(1,0,P),this.push(this.source.functionCall(K,"call",_))},ambiguousBlockValue:function(){var $=this.aliasable("container.hooks.blockHelperMissing"),K=[this.contextName(0)];this.setupHelperArgs("",0,K,!0),this.flushInline();var _=this.topStack();K.splice(1,0,_),this.pushSource(["if (!",this.lastHelper,") { ",_," = ",this.source.functionCall($,"call",K),"}"])},appendContent:function($){if(this.pendingContent)$=this.pendingContent+$;else this.pendingLocation=this.source.currentLocation;this.pendingContent=$},append:function(){if(this.isInline())this.replaceStack(function(K){return[" != null ? ",K,' : ""']}),this.pushSource(this.appendToBuffer(this.popStack()));else{var $=this.popStack();if(this.pushSource(["if (",$," != null) { ",this.appendToBuffer($,void 0,!0)," }"]),this.environment.isSimple)this.pushSource(["else { ",this.appendToBuffer("''",void 0,!0)," }"])}},appendEscaped:function(){this.pushSource(this.appendToBuffer([this.aliasable("container.escapeExpression"),"(",this.popStack(),")"]))},getContext:function($){this.lastContext=$},pushContext:function(){this.pushStackLiteral(this.contextName(this.lastContext))},lookupOnContext:function($,K,_,P){var O=0;if(!P&&this.options.compat&&!this.lastContext)this.push(this.depthedLookup($[O++]));else this.pushContext();this.resolvePath("context",$,O,K,_)},lookupBlockParam:function($,K){this.useBlockParams=!0,this.push(["blockParams[",$[0],"][",$[1],"]"]),this.resolvePath("context",K,1)},lookupData:function($,K,_){if(!$)this.pushStackLiteral("data");else this.pushStackLiteral("container.data(data, "+$+")");this.resolvePath("data",K,0,!0,_)},resolvePath:function($,K,_,P,O){var Y=this;if(this.options.strict||this.options.assumeObjects){this.push(bh(this.options.strict&&O,this,K,_,$));return}var H=K.length;for(;_<H;_++)this.replaceStack(function(v){var X=Y.nameLookup(v,K[_],$);if(!P)return[" != null ? ",X," : ",v];else return[" && ",X]})},resolvePossibleLambda:function(){this.push([this.aliasable("container.lambda"),"(",this.popStack(),", ",this.contextName(0),")"])},pushStringParam:function($,K){if(this.pushContext(),this.pushString(K),K!=="SubExpression")if(typeof $==="string")this.pushString($);else this.pushStackLiteral($)},emptyHash:function($){if(this.trackIds)this.push("{}");if(this.stringParams)this.push("{}"),this.push("{}");this.pushStackLiteral($?"undefined":"{}")},pushHash:function(){if(this.hash)this.hashes.push(this.hash);this.hash={values:{},types:[],contexts:[],ids:[]}},popHash:function(){var $=this.hash;if(this.hash=this.hashes.pop(),this.trackIds)this.push(this.objectLiteral($.ids));if(this.stringParams)this.push(this.objectLiteral($.contexts)),this.push(this.objectLiteral($.types));this.push(this.objectLiteral($.values))},pushString:function($){this.pushStackLiteral(this.quotedString($))},pushLiteral:function($){this.pushStackLiteral($)},pushProgram:function($){if($!=null)this.pushStackLiteral(this.programExpression($));else this.pushStackLiteral(null)},registerDecorator:function($,K){var _=this.nameLookup("decorators",K,"decorator"),P=this.setupHelperArgs(K,$);this.decorators.push(["fn = ",this.decorators.functionCall(_,"",["fn","props","container",P])," || fn;"])},invokeHelper:function($,K,_){var P=this.popStack(),O=this.setupHelper($,K),Y=[];if(_)Y.push(O.name);if(Y.push(P),!this.options.strict)Y.push(this.aliasable("container.hooks.helperMissing"));var H=["(",this.itemsSeparatedBy(Y,"||"),")"],v=this.source.functionCall(H,"call",O.callParams);this.push(v)},itemsSeparatedBy:function($,K){var _=[];_.push($[0]);for(var P=1;P<$.length;P++)_.push(K,$[P]);return _},invokeKnownHelper:function($,K){var _=this.setupHelper($,K);this.push(this.source.functionCall(_.name,"call",_.callParams))},invokeAmbiguous:function($,K){this.useRegister("helper");var _=this.popStack();this.emptyHash();var P=this.setupHelper(0,$,K),O=this.lastHelper=this.nameLookup("helpers",$,"helper"),Y=["(","(helper = ",O," || ",_,")"];if(!this.options.strict)Y[0]="(helper = ",Y.push(" != null ? helper : ",this.aliasable("container.hooks.helperMissing"));this.push(["(",Y,P.paramsInit?["),(",P.paramsInit]:[],"),","(typeof helper === ",this.aliasable('"function"')," ? ",this.source.functionCall("helper","call",P.callParams)," : helper))"])},invokePartial:function($,K,_){var P=[],O=this.setupParams(K,1,P);if($)K=this.popStack(),delete O.name;if(_)O.indent=JSON.stringify(_);if(O.helpers="helpers",O.partials="partials",O.decorators="container.decorators",!$)P.unshift(this.nameLookup("partials",K,"partial"));else P.unshift(K);if(this.options.compat)O.depths="depths";O=this.objectLiteral(O),P.push(O),this.push(this.source.functionCall("container.invokePartial","",P))},assignToHash:function($){var K=this.popStack(),_=void 0,P=void 0,O=void 0;if(this.trackIds)O=this.popStack();if(this.stringParams)P=this.popStack(),_=this.popStack();var Y=this.hash;if(_)Y.contexts[$]=_;if(P)Y.types[$]=P;if(O)Y.ids[$]=O;Y.values[$]=K},pushId:function($,K,_){if($==="BlockParam")this.pushStackLiteral("blockParams["+K[0]+"].path["+K[1]+"]"+(_?" + "+JSON.stringify("."+_):""));else if($==="PathExpression")this.pushString(K);else if($==="SubExpression")this.pushStackLiteral("true");else this.pushStackLiteral("null")},compiler:g4,compileChildren:function($,K){var _=$.children,P=void 0,O=void 0;for(var Y=0,H=_.length;Y<H;Y++){P=_[Y],O=new this.compiler;var v=this.matchExistingProgram(P);if(v==null){this.context.programs.push("");var X=this.context.programs.length;P.index=X,P.name="program"+X,this.context.programs[X]=O.compile(P,K,this.context,!this.precompile),this.context.decorators[X]=O.decorators,this.context.environments[X]=P,this.useDepths=this.useDepths||O.useDepths,this.useBlockParams=this.useBlockParams||O.useBlockParams,P.useDepths=this.useDepths,P.useBlockParams=this.useBlockParams}else P.index=v.index,P.name="program"+v.index,this.useDepths=this.useDepths||v.useDepths,this.useBlockParams=this.useBlockParams||v.useBlockParams}},matchExistingProgram:function($){for(var K=0,_=this.context.environments.length;K<_;K++){var P=this.context.environments[K];if(P&&P.equals($))return P}},programExpression:function($){var K=this.environment.children[$],_=[K.index,"data",K.blockParams];if(this.useBlockParams||this.useDepths)_.push("blockParams");if(this.useDepths)_.push("depths");return"container.program("+_.join(", ")+")"},useRegister:function($){if(!this.registers[$])this.registers[$]=!0,this.registers.list.push($)},push:function($){if(!($ instanceof b4))$=this.source.wrap($);return this.inlineStack.push($),$},pushStackLiteral:function($){this.push(new b4($))},pushSource:function($){if(this.pendingContent)this.source.push(this.appendToBuffer(this.source.quotedString(this.pendingContent),this.pendingLocation)),this.pendingContent=void 0;if($)this.source.push($)},replaceStack:function($){var K=["("],_=void 0,P=void 0,O=void 0;if(!this.isInline())throw new d2.default("replaceStack on non-inline");var Y=this.popStack(!0);if(Y instanceof b4)_=[Y.value],K=["(",_],O=!0;else{P=!0;var H=this.incrStack();K=["((",this.push(H)," = ",Y,")"],_=this.topStack()}var v=$.call(this,_);if(!O)this.popStack();if(P)this.stackSlot--;this.push(K.concat(v,")"))},incrStack:function(){if(this.stackSlot++,this.stackSlot>this.stackVars.length)this.stackVars.push("stack"+this.stackSlot);return this.topStackName()},topStackName:function(){return"stack"+this.stackSlot},flushInline:function(){var $=this.inlineStack;this.inlineStack=[];for(var K=0,_=$.length;K<_;K++){var P=$[K];if(P instanceof b4)this.compileStack.push(P);else{var O=this.incrStack();this.pushSource([O," = ",P,";"]),this.compileStack.push(O)}}},isInline:function(){return this.inlineStack.length},popStack:function($){var K=this.isInline(),_=(K?this.inlineStack:this.compileStack).pop();if(!$&&_ instanceof b4)return _.value;else{if(!K){if(!this.stackSlot)throw new d2.default("Invalid stack pop");this.stackSlot--}return _}},topStack:function(){var $=this.isInline()?this.inlineStack:this.compileStack,K=$[$.length-1];if(K instanceof b4)return K.value;else return K},contextName:function($){if(this.useDepths&&$)return"depths["+$+"]";else return"depth"+$},quotedString:function($){return this.source.quotedString($)},objectLiteral:function($){return this.source.objectLiteral($)},aliasable:function($){var K=this.aliases[$];if(K)return K.referenceCount++,K;return K=this.aliases[$]=this.source.wrap($),K.aliasable=!0,K.referenceCount=1,K},setupHelper:function($,K,_){var P=[],O=this.setupHelperArgs(K,$,P,_),Y=this.nameLookup("helpers",K,"helper"),H=this.aliasable(this.contextName(0)+" != null ? "+this.contextName(0)+" : (container.nullContext || {})");return{params:P,paramsInit:O,name:Y,callParams:[H].concat(P)}},setupParams:function($,K,_){var P={},O=[],Y=[],H=[],v=!_,X=void 0;if(v)_=[];if(P.name=this.quotedString($),P.hash=this.popStack(),this.trackIds)P.hashIds=this.popStack();if(this.stringParams)P.hashTypes=this.popStack(),P.hashContexts=this.popStack();var Z=this.popStack(),k=this.popStack();if(k||Z)P.fn=k||"container.noop",P.inverse=Z||"container.noop";var G=K;while(G--){if(X=this.popStack(),_[G]=X,this.trackIds)H[G]=this.popStack();if(this.stringParams)Y[G]=this.popStack(),O[G]=this.popStack()}if(v)P.args=this.source.generateArray(_);if(this.trackIds)P.ids=this.source.generateArray(H);if(this.stringParams)P.types=this.source.generateArray(Y),P.contexts=this.source.generateArray(O);if(this.options.data)P.data="data";if(this.useBlockParams)P.blockParams="blockParams";return P},setupHelperArgs:function($,K,_,P){var O=this.setupParams($,K,_);if(O.loc=JSON.stringify(this.source.currentLocation),O=this.objectLiteral(O),P)return this.useRegister("options"),_.push("options"),["options=",O];else if(_)return _.push(O),"";else return O}};(function(){var q="break else new var case finally return void catch for switch while continue function this with default if throw delete in try do instanceof typeof abstract enum int short boolean export interface static byte extends long super char final native synchronized class float package throws const goto private transient debugger implements protected volatile double import public let yield await null true false".split(" "),$=g4.RESERVED_WORDS={};for(var K=0,_=q.length;K<_;K++)$[q[K]]=!0})();g4.isValidJavaScriptVariableName=function(q){return!g4.RESERVED_WORDS[q]&&/^[a-zA-Z_$][0-9a-zA-Z_$]*$/.test(q)};function bh(q,$,K,_,P){var O=$.popStack(),Y=K.length;if(q)Y--;for(;_<Y;_++)O=$.nameLookup(O,K[_],P);if(q)return[$.aliasable("container.strict"),"(",O,", ",$.quotedString(K[_]),", ",JSON.stringify($.source.currentLocation)," )"];else return O}Fw.default=g4;tw.exports=Fw.default});var qT=bq((ew,sw)=>{ew.__esModule=!0;function ZP(q){return q&&q.__esModule?q:{default:q}}var ph=sv(),xh=ZP(ph),uh=k2(),mh=ZP(uh),o2=fw(),n2=Zw(),ch=Qw(),lh=ZP(ch),dh=C1(),oh=ZP(dh),nh=T2(),rh=ZP(nh),Bh=xh.default.create;function aw(){var q=Bh();return q.compile=function($,K){return n2.compile($,K,q)},q.precompile=function($,K){return n2.precompile($,K,q)},q.AST=mh.default,q.Compiler=n2.Compiler,q.JavaScriptCompiler=lh.default,q.Parser=o2.parser,q.parse=o2.parse,q.parseWithoutProcessing=o2.parseWithoutProcessing,q}var y4=aw();y4.create=aw;rh.default(y4);y4.Visitor=oh.default;y4.default=y4;ew.default=y4;sw.exports=ew.default});var $T=bq((eh)=>{eh.__esModule=!0;eh.print=ah;eh.PrintVisitor=d$;function Fh(q){return q&&q.__esModule?q:{default:q}}var th=C1(),Qh=Fh(th);function ah(q){return new d$().accept(q)}function d$(){this.padding=0}d$.prototype=new Qh.default;d$.prototype.pad=function(q){var $="";for(var K=0,_=this.padding;K<_;K++)$+="  ";return $+=q+`
`,$};d$.prototype.Program=function(q){var $="",K=q.body,_=void 0,P=void 0;if(q.blockParams){var O="BLOCK PARAMS: [";for(_=0,P=q.blockParams.length;_<P;_++)O+=" "+q.blockParams[_];O+=" ]",$+=this.pad(O)}for(_=0,P=K.length;_<P;_++)$+=this.accept(K[_]);return this.padding--,$};d$.prototype.MustacheStatement=function(q){return this.pad("{{ "+this.SubExpression(q)+" }}")};d$.prototype.Decorator=function(q){return this.pad("{{ DIRECTIVE "+this.SubExpression(q)+" }}")};d$.prototype.BlockStatement=d$.prototype.DecoratorBlock=function(q){var $="";if($+=this.pad((q.type==="DecoratorBlock"?"DIRECTIVE ":"")+"BLOCK:"),this.padding++,$+=this.pad(this.SubExpression(q)),q.program)$+=this.pad("PROGRAM:"),this.padding++,$+=this.accept(q.program),this.padding--;if(q.inverse){if(q.program)this.padding++;if($+=this.pad("{{^}}"),this.padding++,$+=this.accept(q.inverse),this.padding--,q.program)this.padding--}return this.padding--,$};d$.prototype.PartialStatement=function(q){var $="PARTIAL:"+q.name.original;if(q.params[0])$+=" "+this.accept(q.params[0]);if(q.hash)$+=" "+this.accept(q.hash);return this.pad("{{> "+$+" }}")};d$.prototype.PartialBlockStatement=function(q){var $="PARTIAL BLOCK:"+q.name.original;if(q.params[0])$+=" "+this.accept(q.params[0]);if(q.hash)$+=" "+this.accept(q.hash);return $+=" "+this.pad("PROGRAM:"),this.padding++,$+=this.accept(q.program),this.padding--,this.pad("{{> "+$+" }}")};d$.prototype.ContentStatement=function(q){return this.pad("CONTENT[ '"+q.value+"' ]")};d$.prototype.CommentStatement=function(q){return this.pad("{{! '"+q.value+"' }}")};d$.prototype.SubExpression=function(q){var $=q.params,K=[],_=void 0;for(var P=0,O=$.length;P<O;P++)K.push(this.accept($[P]));return $="["+K.join(", ")+"]",_=q.hash?" "+this.accept(q.hash):"",this.accept(q.path)+" "+$+_};d$.prototype.PathExpression=function(q){var $=q.parts.join("/");return(q.data?"@":"")+"PATH:"+$};d$.prototype.StringLiteral=function(q){return'"'+q.value+'"'};d$.prototype.NumberLiteral=function(q){return"NUMBER{"+q.value+"}"};d$.prototype.BooleanLiteral=function(q){return"BOOLEAN{"+q.value+"}"};d$.prototype.UndefinedLiteral=function(){return"UNDEFINED"};d$.prototype.NullLiteral=function(){return"NULL"};d$.prototype.Hash=function(q){var $=q.pairs,K=[];for(var _=0,P=$.length;_<P;_++)K.push(this.accept($[_]));return"HASH{"+K.join(", ")+"}"};d$.prototype.HashPair=function(q){return q.key+"="+this.accept(q.value)}});var YT=bq((RU,PT)=>{var D1=qT().default,_T=$T();D1.PrintVisitor=_T.PrintVisitor;D1.print=_T.print;PT.exports=D1;function KT(q,$){var K=(()=>({})),_=K.readFileSync($,"utf8");q.exports=D1.compile(_)}if(B_.extensions)B_.extensions[".handlebars"]=KT,B_.extensions[".hbs"]=KT});var uT=bq((MF,s2)=>{var X$=String,xT=function(){return{isColorSupported:!1,reset:X$,bold:X$,dim:X$,italic:X$,underline:X$,inverse:X$,hidden:X$,strikethrough:X$,black:X$,red:X$,green:X$,yellow:X$,blue:X$,magenta:X$,cyan:X$,white:X$,gray:X$,bgBlack:X$,bgRed:X$,bgGreen:X$,bgYellow:X$,bgBlue:X$,bgMagenta:X$,bgCyan:X$,bgWhite:X$,blackBright:X$,redBright:X$,greenBright:X$,yellowBright:X$,blueBright:X$,magentaBright:X$,cyanBright:X$,whiteBright:X$,bgBlackBright:X$,bgRedBright:X$,bgGreenBright:X$,bgYellowBright:X$,bgBlueBright:X$,bgMagentaBright:X$,bgCyanBright:X$,bgWhiteBright:X$}};s2.exports=xT();s2.exports.createColors=xT});var eT={};yK(eT,{uptime:()=>gI,type:()=>uI,totalmem:()=>pI,tmpdir:()=>aT,tmpDir:()=>oI,release:()=>mI,platform:()=>dI,networkInterfaces:()=>cI,loadavg:()=>bI,hostname:()=>LI,homedir:()=>rI,getNetworkInterfaces:()=>QT,freemem:()=>yI,endianness:()=>II,cpus:()=>xI,arch:()=>lI,EOL:()=>nI});var II=function(){return"LE"},LI=function(){if(typeof location<"u")return location.hostname;else return""},bI=function(){return[]},gI=function(){return 0},yI=function(){return Number.MAX_VALUE},pI=function(){return Number.MAX_VALUE},xI=function(){return[]},uI=function(){return"Browser"},mI=function(){if(typeof navigator<"u")return navigator.appVersion;return""},QT=function(){return{}},cI,lI=function(){return"javascript"},dI=function(){return"browser"},aT=function(){return"/tmp"},oI,nI=`
`,rI=function(){return"/"};var sT=T7(()=>{cI=QT,oI=aT});var w8={};yK(w8,{transcode:()=>aL,resolveObjectURL:()=>FL,kStringMaxLength:()=>MX,kMaxLength:()=>cP,isUtf8:()=>tL,isAscii:()=>QL,default:()=>eL,constants:()=>ML,btoa:()=>kL,atob:()=>GL,INSPECT_MAX_BYTES:()=>VX,File:()=>ZL,Buffer:()=>zq,Blob:()=>VL});function wL(q){var $=q.length;if($%4>0)throw Error("Invalid string. Length must be a multiple of 4");var K=q.indexOf("=");if(K===-1)K=$;var _=K===$?0:4-K%4;return[K,_]}function TL(q,$){return(q+$)*3/4-$}function XL(q){var $,K=wL(q),_=K[0],P=K[1],O=new Uint8Array(TL(_,P)),Y=0,H=P>0?_-4:_,v;for(v=0;v<H;v+=4)$=G6[q.charCodeAt(v)]<<18|G6[q.charCodeAt(v+1)]<<12|G6[q.charCodeAt(v+2)]<<6|G6[q.charCodeAt(v+3)],O[Y++]=$>>16&255,O[Y++]=$>>8&255,O[Y++]=$&255;if(P===2)$=G6[q.charCodeAt(v)]<<2|G6[q.charCodeAt(v+1)]>>4,O[Y++]=$&255;if(P===1)$=G6[q.charCodeAt(v)]<<10|G6[q.charCodeAt(v+1)]<<4|G6[q.charCodeAt(v+2)]>>2,O[Y++]=$>>8&255,O[Y++]=$&255;return O}function fL(q){return PK[q>>18&63]+PK[q>>12&63]+PK[q>>6&63]+PK[q&63]}function AL(q,$,K){var _,P=[];for(var O=$;O<K;O+=3)_=(q[O]<<16&16711680)+(q[O+1]<<8&65280)+(q[O+2]&255),P.push(fL(_));return P.join("")}function XX(q){var $,K=q.length,_=K%3,P=[],O=16383;for(var Y=0,H=K-_;Y<H;Y+=O)P.push(AL(q,Y,Y+O>H?H:Y+O));if(_===1)$=q[K-1],P.push(PK[$>>2]+PK[$<<4&63]+"==");else if(_===2)$=(q[K-2]<<8)+q[K-1],P.push(PK[$>>10]+PK[$>>4&63]+PK[$<<2&63]+"=");return P.join("")}function Q1(q,$,K,_,P){var O,Y,H=P*8-_-1,v=(1<<H)-1,X=v>>1,Z=-7,k=K?P-1:0,G=K?-1:1,S=q[$+k];k+=G,O=S&(1<<-Z)-1,S>>=-Z,Z+=H;for(;Z>0;O=O*256+q[$+k],k+=G,Z-=8);Y=O&(1<<-Z)-1,O>>=-Z,Z+=_;for(;Z>0;Y=Y*256+q[$+k],k+=G,Z-=8);if(O===0)O=1-X;else if(O===v)return Y?NaN:(S?-1:1)*(1/0);else Y=Y+Math.pow(2,_),O=O-X;return(S?-1:1)*Y*Math.pow(2,O-_)}function ZX(q,$,K,_,P,O){var Y,H,v,X=O*8-P-1,Z=(1<<X)-1,k=Z>>1,G=P===23?Math.pow(2,-24)-Math.pow(2,-77):0,S=_?0:O-1,N=_?1:-1,E=$<0||$===0&&1/$<0?1:0;if($=Math.abs($),isNaN($)||$===1/0)H=isNaN($)?1:0,Y=Z;else{if(Y=Math.floor(Math.log($)/Math.LN2),$*(v=Math.pow(2,-Y))<1)Y--,v*=2;if(Y+k>=1)$+=G/v;else $+=G*Math.pow(2,1-k);if($*v>=2)Y++,v/=2;if(Y+k>=Z)H=0,Y=Z;else if(Y+k>=1)H=($*v-1)*Math.pow(2,P),Y=Y+k;else H=$*Math.pow(2,k-1)*Math.pow(2,P),Y=0}for(;P>=8;q[K+S]=H&255,S+=N,H/=256,P-=8);Y=Y<<P|H,X+=P;for(;X>0;q[K+S]=Y&255,S+=N,Y/=256,X-=8);q[K+S-N]|=E*128}function DK(q){if(q>cP)throw RangeError('The value "'+q+'" is invalid for option "size"');let $=new Uint8Array(q);return Object.setPrototypeOf($,zq.prototype),$}function L3(q,$,K){return class extends K{constructor(){super();Object.defineProperty(this,"message",{value:$.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${q}]`,this.stack,delete this.name}get code(){return q}set code(P){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:P,writable:!0})}toString(){return`${this.name} [${q}]: ${this.message}`}}}function zq(q,$,K){if(typeof q==="number"){if(typeof $==="string")throw TypeError('The "string" argument must be of type string. Received type number');return b3(q)}return SX(q,$,K)}function SX(q,$,K){if(typeof q==="string")return EL(q,$);if(ArrayBuffer.isView(q))return RL(q);if(q==null)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof q);if(YK(q,ArrayBuffer)||q&&YK(q.buffer,ArrayBuffer))return D3(q,$,K);if(typeof SharedArrayBuffer<"u"&&(YK(q,SharedArrayBuffer)||q&&YK(q.buffer,SharedArrayBuffer)))return D3(q,$,K);if(typeof q==="number")throw TypeError('The "value" argument must not be of type number. Received type number');let _=q.valueOf&&q.valueOf();if(_!=null&&_!==q)return zq.from(_,$,K);let P=hL(q);if(P)return P;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof q[Symbol.toPrimitive]==="function")return zq.from(q[Symbol.toPrimitive]("string"),$,K);throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof q)}function CX(q){if(typeof q!=="number")throw TypeError('"size" argument must be of type number');else if(q<0)throw RangeError('The value "'+q+'" is invalid for option "size"')}function NL(q,$,K){if(CX(q),q<=0)return DK(q);if($!==void 0)return typeof K==="string"?DK(q).fill($,K):DK(q).fill($);return DK(q)}function b3(q){return CX(q),DK(q<0?0:g3(q)|0)}function EL(q,$){if(typeof $!=="string"||$==="")$="utf8";if(!zq.isEncoding($))throw TypeError("Unknown encoding: "+$);let K=NX(q,$)|0,_=DK(K),P=_.write(q,$);if(P!==K)_=_.slice(0,P);return _}function h3(q){let $=q.length<0?0:g3(q.length)|0,K=DK($);for(let _=0;_<$;_+=1)K[_]=q[_]&255;return K}function RL(q){if(YK(q,Uint8Array)){let $=new Uint8Array(q);return D3($.buffer,$.byteOffset,$.byteLength)}return h3(q)}function D3(q,$,K){if($<0||q.byteLength<$)throw RangeError('"offset" is outside of buffer bounds');if(q.byteLength<$+(K||0))throw RangeError('"length" is outside of buffer bounds');let _;if($===void 0&&K===void 0)_=new Uint8Array(q);else if(K===void 0)_=new Uint8Array(q,$);else _=new Uint8Array(q,$,K);return Object.setPrototypeOf(_,zq.prototype),_}function hL(q){if(zq.isBuffer(q)){let $=g3(q.length)|0,K=DK($);if(K.length===0)return K;return q.copy(K,0,0,$),K}if(q.length!==void 0){if(typeof q.length!=="number"||Number.isNaN(q.length))return DK(0);return h3(q)}if(q.type==="Buffer"&&Array.isArray(q.data))return h3(q.data)}function g3(q){if(q>=cP)throw RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+cP.toString(16)+" bytes");return q|0}function NX(q,$){if(zq.isBuffer(q))return q.length;if(ArrayBuffer.isView(q)||YK(q,ArrayBuffer))return q.byteLength;if(typeof q!=="string")throw TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof q);let K=q.length,_=arguments.length>2&&arguments[2]===!0;if(!_&&K===0)return 0;let P=!1;for(;;)switch($){case"ascii":case"latin1":case"binary":return K;case"utf8":case"utf-8":return I3(q).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return K*2;case"hex":return K>>>1;case"base64":return yX(q).length;default:if(P)return _?-1:I3(q).length;$=(""+$).toLowerCase(),P=!0}}function DL(q,$,K){let _=!1;if($===void 0||$<0)$=0;if($>this.length)return"";if(K===void 0||K>this.length)K=this.length;if(K<=0)return"";if(K>>>=0,$>>>=0,K<=$)return"";if(!q)q="utf8";while(!0)switch(q){case"hex":return cL(this,$,K);case"utf8":case"utf-8":return RX(this,$,K);case"ascii":return uL(this,$,K);case"latin1":case"binary":return mL(this,$,K);case"base64":return pL(this,$,K);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return lL(this,$,K);default:if(_)throw TypeError("Unknown encoding: "+q);q=(q+"").toLowerCase(),_=!0}}function m_(q,$,K){let _=q[$];q[$]=q[K],q[K]=_}function EX(q,$,K,_,P){if(q.length===0)return-1;if(typeof K==="string")_=K,K=0;else if(K>2147483647)K=2147483647;else if(K<-2147483648)K=-2147483648;if(K=+K,Number.isNaN(K))K=P?0:q.length-1;if(K<0)K=q.length+K;if(K>=q.length)if(P)return-1;else K=q.length-1;else if(K<0)if(P)K=0;else return-1;if(typeof $==="string")$=zq.from($,_);if(zq.isBuffer($)){if($.length===0)return-1;return AX(q,$,K,_,P)}else if(typeof $==="number"){if($=$&255,typeof Uint8Array.prototype.indexOf==="function")if(P)return Uint8Array.prototype.indexOf.call(q,$,K);else return Uint8Array.prototype.lastIndexOf.call(q,$,K);return AX(q,[$],K,_,P)}throw TypeError("val must be string, number or Buffer")}function AX(q,$,K,_,P){let O=1,Y=q.length,H=$.length;if(_!==void 0){if(_=String(_).toLowerCase(),_==="ucs2"||_==="ucs-2"||_==="utf16le"||_==="utf-16le"){if(q.length<2||$.length<2)return-1;O=2,Y/=2,H/=2,K/=2}}function v(Z,k){if(O===1)return Z[k];else return Z.readUInt16BE(k*O)}let X;if(P){let Z=-1;for(X=K;X<Y;X++)if(v(q,X)===v($,Z===-1?0:X-Z)){if(Z===-1)Z=X;if(X-Z+1===H)return Z*O}else{if(Z!==-1)X-=X-Z;Z=-1}}else{if(K+H>Y)K=Y-H;for(X=K;X>=0;X--){let Z=!0;for(let k=0;k<H;k++)if(v(q,X+k)!==v($,k)){Z=!1;break}if(Z)return X}}return-1}function IL(q,$,K,_){K=Number(K)||0;let P=q.length-K;if(!_)_=P;else if(_=Number(_),_>P)_=P;let O=$.length;if(_>O/2)_=O/2;let Y;for(Y=0;Y<_;++Y){let H=parseInt($.substr(Y*2,2),16);if(Number.isNaN(H))return Y;q[K+Y]=H}return Y}function LL(q,$,K,_){return a1(I3($,q.length-K),q,K,_)}function bL(q,$,K,_){return a1(rL($),q,K,_)}function gL(q,$,K,_){return a1(yX($),q,K,_)}function yL(q,$,K,_){return a1(BL($,q.length-K),q,K,_)}function pL(q,$,K){if($===0&&K===q.length)return XX(q);else return XX(q.slice($,K))}function RX(q,$,K){K=Math.min(q.length,K);let _=[],P=$;while(P<K){let O=q[P],Y=null,H=O>239?4:O>223?3:O>191?2:1;if(P+H<=K){let v,X,Z,k;switch(H){case 1:if(O<128)Y=O;break;case 2:if(v=q[P+1],(v&192)===128){if(k=(O&31)<<6|v&63,k>127)Y=k}break;case 3:if(v=q[P+1],X=q[P+2],(v&192)===128&&(X&192)===128){if(k=(O&15)<<12|(v&63)<<6|X&63,k>2047&&(k<55296||k>57343))Y=k}break;case 4:if(v=q[P+1],X=q[P+2],Z=q[P+3],(v&192)===128&&(X&192)===128&&(Z&192)===128){if(k=(O&15)<<18|(v&63)<<12|(X&63)<<6|Z&63,k>65535&&k<1114112)Y=k}}}if(Y===null)Y=65533,H=1;else if(Y>65535)Y-=65536,_.push(Y>>>10&1023|55296),Y=56320|Y&1023;_.push(Y),P+=H}return xL(_)}function xL(q){let $=q.length;if($<=kX)return String.fromCharCode.apply(String,q);let K="",_=0;while(_<$)K+=String.fromCharCode.apply(String,q.slice(_,_+=kX));return K}function uL(q,$,K){let _="";K=Math.min(q.length,K);for(let P=$;P<K;++P)_+=String.fromCharCode(q[P]&127);return _}function mL(q,$,K){let _="";K=Math.min(q.length,K);for(let P=$;P<K;++P)_+=String.fromCharCode(q[P]);return _}function cL(q,$,K){let _=q.length;if(!$||$<0)$=0;if(!K||K<0||K>_)K=_;let P="";for(let O=$;O<K;++O)P+=iL[q[O]];return P}function lL(q,$,K){let _=q.slice($,K),P="";for(let O=0;O<_.length-1;O+=2)P+=String.fromCharCode(_[O]+_[O+1]*256);return P}function v8(q,$,K){if(q%1!==0||q<0)throw RangeError("offset is not uint");if(q+$>K)throw RangeError("Trying to access beyond buffer length")}function a8(q,$,K,_,P,O){if(!zq.isBuffer(q))throw TypeError('"buffer" argument must be a Buffer instance');if($>P||$<O)throw RangeError('"value" argument is out of bounds');if(K+_>q.length)throw RangeError("Index out of range")}function hX(q,$,K,_,P){gX($,_,P,q,K,7);let O=Number($&BigInt(4294967295));q[K++]=O,O=O>>8,q[K++]=O,O=O>>8,q[K++]=O,O=O>>8,q[K++]=O;let Y=Number($>>BigInt(32)&BigInt(4294967295));return q[K++]=Y,Y=Y>>8,q[K++]=Y,Y=Y>>8,q[K++]=Y,Y=Y>>8,q[K++]=Y,K}function DX(q,$,K,_,P){gX($,_,P,q,K,7);let O=Number($&BigInt(4294967295));q[K+7]=O,O=O>>8,q[K+6]=O,O=O>>8,q[K+5]=O,O=O>>8,q[K+4]=O;let Y=Number($>>BigInt(32)&BigInt(4294967295));return q[K+3]=Y,Y=Y>>8,q[K+2]=Y,Y=Y>>8,q[K+1]=Y,Y=Y>>8,q[K]=Y,K+8}function IX(q,$,K,_,P,O){if(K+_>q.length)throw RangeError("Index out of range");if(K<0)throw RangeError("Index out of range")}function LX(q,$,K,_,P){if($=+$,K=K>>>0,!P)IX(q,$,K,4,340282346638528860000000000000000000000,-340282346638528860000000000000000000000);return ZX(q,$,K,_,23,4),K+4}function bX(q,$,K,_,P){if($=+$,K=K>>>0,!P)IX(q,$,K,8,179769313486231570000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000,-179769313486231570000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000);return ZX(q,$,K,_,52,8),K+8}function GX(q){let $="",K=q.length,_=q[0]==="-"?1:0;for(;K>=_+4;K-=3)$=`_${q.slice(K-3,K)}${$}`;return`${q.slice(0,K)}${$}`}function dL(q,$,K){if(O7($,"offset"),q[$]===void 0||q[$+K]===void 0)lP($,q.length-(K+1))}function gX(q,$,K,_,P,O){if(q>K||q<$){let Y=typeof $==="bigint"?"n":"",H;if(O>3)if($===0||$===BigInt(0))H=`>= 0${Y} and < 2${Y} ** ${(O+1)*8}${Y}`;else H=`>= -(2${Y} ** ${(O+1)*8-1}${Y}) and < 2 ** ${(O+1)*8-1}${Y}`;else H=`>= ${$}${Y} and <= ${K}${Y}`;throw new R3("value",H,q)}dL(_,P,O)}function O7(q,$){if(typeof q!=="number")throw new CL($,"number",q)}function lP(q,$,K){if(Math.floor(q)!==q)throw O7(q,K),new R3(K||"offset","an integer",q);if($<0)throw new SL;throw new R3(K||"offset",`>= ${K?1:0} and <= ${$}`,q)}function nL(q){if(q=q.split("=")[0],q=q.trim().replace(oL,""),q.length<2)return"";while(q.length%4!==0)q=q+"=";return q}function I3(q,$){$=$||1/0;let K,_=q.length,P=null,O=[];for(let Y=0;Y<_;++Y){if(K=q.charCodeAt(Y),K>55295&&K<57344){if(!P){if(K>56319){if(($-=3)>-1)O.push(239,191,189);continue}else if(Y+1===_){if(($-=3)>-1)O.push(239,191,189);continue}P=K;continue}if(K<56320){if(($-=3)>-1)O.push(239,191,189);P=K;continue}K=(P-55296<<10|K-56320)+65536}else if(P){if(($-=3)>-1)O.push(239,191,189)}if(P=null,K<128){if(($-=1)<0)break;O.push(K)}else if(K<2048){if(($-=2)<0)break;O.push(K>>6|192,K&63|128)}else if(K<65536){if(($-=3)<0)break;O.push(K>>12|224,K>>6&63|128,K&63|128)}else if(K<1114112){if(($-=4)<0)break;O.push(K>>18|240,K>>12&63|128,K>>6&63|128,K&63|128)}else throw Error("Invalid code point")}return O}function rL(q){let $=[];for(let K=0;K<q.length;++K)$.push(q.charCodeAt(K)&255);return $}function BL(q,$){let K,_,P,O=[];for(let Y=0;Y<q.length;++Y){if(($-=2)<0)break;K=q.charCodeAt(Y),_=K>>8,P=K%256,O.push(P),O.push(_)}return O}function yX(q){return XL(nL(q))}function a1(q,$,K,_){let P;for(P=0;P<_;++P){if(P+K>=$.length||P>=q.length)break;$[P+K]=q[P]}return P}function YK(q,$){return q instanceof $||q!=null&&q.constructor!=null&&q.constructor.name!=null&&q.constructor.name===$.name}function $_(q){return typeof BigInt>"u"?UL:q}function UL(){throw Error("BigInt not supported")}function y3(q){return()=>{throw Error(q+" is not implemented for node:buffer browser polyfill")}}var PK,G6,E3="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",u_,TX,fX,VX=50,cP=2147483647,MX=536870888,kL,GL,ZL,VL,ML,SL,CL,R3,kX=4096,oL,iL,FL,tL,QL=(q)=>{for(let $ of q)if($.charCodeAt(0)>127)return!1;return!0},aL,eL;var T8=T7(()=>{PK=[],G6=[];for(u_=0,TX=E3.length;u_<TX;++u_)PK[u_]=E3[u_],G6[E3.charCodeAt(u_)]=u_;G6[45]=62;G6[95]=63;fX=typeof Symbol==="function"&&typeof Symbol.for==="function"?Symbol.for("nodejs.util.inspect.custom"):null,kL=globalThis.btoa,GL=globalThis.atob,ZL=globalThis.File,VL=globalThis.Blob,ML={MAX_LENGTH:cP,MAX_STRING_LENGTH:MX};SL=L3("ERR_BUFFER_OUT_OF_BOUNDS",function(q){if(q)return`${q} is outside of buffer bounds`;return"Attempt to access memory outside buffer bounds"},RangeError),CL=L3("ERR_INVALID_ARG_TYPE",function(q,$){return`The "${q}" argument must be of type number. Received type ${typeof $}`},TypeError),R3=L3("ERR_OUT_OF_RANGE",function(q,$,K){let _=`The value of "${q}" is out of range.`,P=K;if(Number.isInteger(K)&&Math.abs(K)>4294967296)P=GX(String(K));else if(typeof K==="bigint"){if(P=String(K),K>BigInt(2)**BigInt(32)||K<-(BigInt(2)**BigInt(32)))P=GX(P);P+="n"}return _+=` It must be ${$}. Received ${P}`,_},RangeError);Object.defineProperty(zq.prototype,"parent",{enumerable:!0,get:function(){if(!zq.isBuffer(this))return;return this.buffer}});Object.defineProperty(zq.prototype,"offset",{enumerable:!0,get:function(){if(!zq.isBuffer(this))return;return this.byteOffset}});zq.poolSize=8192;zq.from=function(q,$,K){return SX(q,$,K)};Object.setPrototypeOf(zq.prototype,Uint8Array.prototype);Object.setPrototypeOf(zq,Uint8Array);zq.alloc=function(q,$,K){return NL(q,$,K)};zq.allocUnsafe=function(q){return b3(q)};zq.allocUnsafeSlow=function(q){return b3(q)};zq.isBuffer=function($){return $!=null&&$._isBuffer===!0&&$!==zq.prototype};zq.compare=function($,K){if(YK($,Uint8Array))$=zq.from($,$.offset,$.byteLength);if(YK(K,Uint8Array))K=zq.from(K,K.offset,K.byteLength);if(!zq.isBuffer($)||!zq.isBuffer(K))throw TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if($===K)return 0;let _=$.length,P=K.length;for(let O=0,Y=Math.min(_,P);O<Y;++O)if($[O]!==K[O]){_=$[O],P=K[O];break}if(_<P)return-1;if(P<_)return 1;return 0};zq.isEncoding=function($){switch(String($).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}};zq.concat=function($,K){if(!Array.isArray($))throw TypeError('"list" argument must be an Array of Buffers');if($.length===0)return zq.alloc(0);let _;if(K===void 0){K=0;for(_=0;_<$.length;++_)K+=$[_].length}let P=zq.allocUnsafe(K),O=0;for(_=0;_<$.length;++_){let Y=$[_];if(YK(Y,Uint8Array))if(O+Y.length>P.length){if(!zq.isBuffer(Y))Y=zq.from(Y);Y.copy(P,O)}else Uint8Array.prototype.set.call(P,Y,O);else if(!zq.isBuffer(Y))throw TypeError('"list" argument must be an Array of Buffers');else Y.copy(P,O);O+=Y.length}return P};zq.byteLength=NX;zq.prototype._isBuffer=!0;zq.prototype.swap16=function(){let $=this.length;if($%2!==0)throw RangeError("Buffer size must be a multiple of 16-bits");for(let K=0;K<$;K+=2)m_(this,K,K+1);return this};zq.prototype.swap32=function(){let $=this.length;if($%4!==0)throw RangeError("Buffer size must be a multiple of 32-bits");for(let K=0;K<$;K+=4)m_(this,K,K+3),m_(this,K+1,K+2);return this};zq.prototype.swap64=function(){let $=this.length;if($%8!==0)throw RangeError("Buffer size must be a multiple of 64-bits");for(let K=0;K<$;K+=8)m_(this,K,K+7),m_(this,K+1,K+6),m_(this,K+2,K+5),m_(this,K+3,K+4);return this};zq.prototype.toString=function(){let $=this.length;if($===0)return"";if(arguments.length===0)return RX(this,0,$);return DL.apply(this,arguments)};zq.prototype.toLocaleString=zq.prototype.toString;zq.prototype.equals=function($){if(!zq.isBuffer($))throw TypeError("Argument must be a Buffer");if(this===$)return!0;return zq.compare(this,$)===0};zq.prototype.inspect=function(){let $="",K=VX;if($=this.toString("hex",0,K).replace(/(.{2})/g,"$1 ").trim(),this.length>K)$+=" ... ";return"<Buffer "+$+">"};if(fX)zq.prototype[fX]=zq.prototype.inspect;zq.prototype.compare=function($,K,_,P,O){if(YK($,Uint8Array))$=zq.from($,$.offset,$.byteLength);if(!zq.isBuffer($))throw TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof $);if(K===void 0)K=0;if(_===void 0)_=$?$.length:0;if(P===void 0)P=0;if(O===void 0)O=this.length;if(K<0||_>$.length||P<0||O>this.length)throw RangeError("out of range index");if(P>=O&&K>=_)return 0;if(P>=O)return-1;if(K>=_)return 1;if(K>>>=0,_>>>=0,P>>>=0,O>>>=0,this===$)return 0;let Y=O-P,H=_-K,v=Math.min(Y,H),X=this.slice(P,O),Z=$.slice(K,_);for(let k=0;k<v;++k)if(X[k]!==Z[k]){Y=X[k],H=Z[k];break}if(Y<H)return-1;if(H<Y)return 1;return 0};zq.prototype.includes=function($,K,_){return this.indexOf($,K,_)!==-1};zq.prototype.indexOf=function($,K,_){return EX(this,$,K,_,!0)};zq.prototype.lastIndexOf=function($,K,_){return EX(this,$,K,_,!1)};zq.prototype.write=function($,K,_,P){if(K===void 0)P="utf8",_=this.length,K=0;else if(_===void 0&&typeof K==="string")P=K,_=this.length,K=0;else if(isFinite(K))if(K=K>>>0,isFinite(_)){if(_=_>>>0,P===void 0)P="utf8"}else P=_,_=void 0;else throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let O=this.length-K;if(_===void 0||_>O)_=O;if($.length>0&&(_<0||K<0)||K>this.length)throw RangeError("Attempt to write outside buffer bounds");if(!P)P="utf8";let Y=!1;for(;;)switch(P){case"hex":return IL(this,$,K,_);case"utf8":case"utf-8":return LL(this,$,K,_);case"ascii":case"latin1":case"binary":return bL(this,$,K,_);case"base64":return gL(this,$,K,_);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return yL(this,$,K,_);default:if(Y)throw TypeError("Unknown encoding: "+P);P=(""+P).toLowerCase(),Y=!0}};zq.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};zq.prototype.slice=function($,K){let _=this.length;if($=~~$,K=K===void 0?_:~~K,$<0){if($+=_,$<0)$=0}else if($>_)$=_;if(K<0){if(K+=_,K<0)K=0}else if(K>_)K=_;if(K<$)K=$;let P=this.subarray($,K);return Object.setPrototypeOf(P,zq.prototype),P};zq.prototype.readUintLE=zq.prototype.readUIntLE=function($,K,_){if($=$>>>0,K=K>>>0,!_)v8($,K,this.length);let P=this[$],O=1,Y=0;while(++Y<K&&(O*=256))P+=this[$+Y]*O;return P};zq.prototype.readUintBE=zq.prototype.readUIntBE=function($,K,_){if($=$>>>0,K=K>>>0,!_)v8($,K,this.length);let P=this[$+--K],O=1;while(K>0&&(O*=256))P+=this[$+--K]*O;return P};zq.prototype.readUint8=zq.prototype.readUInt8=function($,K){if($=$>>>0,!K)v8($,1,this.length);return this[$]};zq.prototype.readUint16LE=zq.prototype.readUInt16LE=function($,K){if($=$>>>0,!K)v8($,2,this.length);return this[$]|this[$+1]<<8};zq.prototype.readUint16BE=zq.prototype.readUInt16BE=function($,K){if($=$>>>0,!K)v8($,2,this.length);return this[$]<<8|this[$+1]};zq.prototype.readUint32LE=zq.prototype.readUInt32LE=function($,K){if($=$>>>0,!K)v8($,4,this.length);return(this[$]|this[$+1]<<8|this[$+2]<<16)+this[$+3]*16777216};zq.prototype.readUint32BE=zq.prototype.readUInt32BE=function($,K){if($=$>>>0,!K)v8($,4,this.length);return this[$]*16777216+(this[$+1]<<16|this[$+2]<<8|this[$+3])};zq.prototype.readBigUInt64LE=$_(function($){$=$>>>0,O7($,"offset");let K=this[$],_=this[$+7];if(K===void 0||_===void 0)lP($,this.length-8);let P=K+this[++$]*256+this[++$]*65536+this[++$]*16777216,O=this[++$]+this[++$]*256+this[++$]*65536+_*16777216;return BigInt(P)+(BigInt(O)<<BigInt(32))});zq.prototype.readBigUInt64BE=$_(function($){$=$>>>0,O7($,"offset");let K=this[$],_=this[$+7];if(K===void 0||_===void 0)lP($,this.length-8);let P=K*16777216+this[++$]*65536+this[++$]*256+this[++$],O=this[++$]*16777216+this[++$]*65536+this[++$]*256+_;return(BigInt(P)<<BigInt(32))+BigInt(O)});zq.prototype.readIntLE=function($,K,_){if($=$>>>0,K=K>>>0,!_)v8($,K,this.length);let P=this[$],O=1,Y=0;while(++Y<K&&(O*=256))P+=this[$+Y]*O;if(O*=128,P>=O)P-=Math.pow(2,8*K);return P};zq.prototype.readIntBE=function($,K,_){if($=$>>>0,K=K>>>0,!_)v8($,K,this.length);let P=K,O=1,Y=this[$+--P];while(P>0&&(O*=256))Y+=this[$+--P]*O;if(O*=128,Y>=O)Y-=Math.pow(2,8*K);return Y};zq.prototype.readInt8=function($,K){if($=$>>>0,!K)v8($,1,this.length);if(!(this[$]&128))return this[$];return(255-this[$]+1)*-1};zq.prototype.readInt16LE=function($,K){if($=$>>>0,!K)v8($,2,this.length);let _=this[$]|this[$+1]<<8;return _&32768?_|4294901760:_};zq.prototype.readInt16BE=function($,K){if($=$>>>0,!K)v8($,2,this.length);let _=this[$+1]|this[$]<<8;return _&32768?_|4294901760:_};zq.prototype.readInt32LE=function($,K){if($=$>>>0,!K)v8($,4,this.length);return this[$]|this[$+1]<<8|this[$+2]<<16|this[$+3]<<24};zq.prototype.readInt32BE=function($,K){if($=$>>>0,!K)v8($,4,this.length);return this[$]<<24|this[$+1]<<16|this[$+2]<<8|this[$+3]};zq.prototype.readBigInt64LE=$_(function($){$=$>>>0,O7($,"offset");let K=this[$],_=this[$+7];if(K===void 0||_===void 0)lP($,this.length-8);let P=this[$+4]+this[$+5]*256+this[$+6]*65536+(_<<24);return(BigInt(P)<<BigInt(32))+BigInt(K+this[++$]*256+this[++$]*65536+this[++$]*16777216)});zq.prototype.readBigInt64BE=$_(function($){$=$>>>0,O7($,"offset");let K=this[$],_=this[$+7];if(K===void 0||_===void 0)lP($,this.length-8);let P=(K<<24)+this[++$]*65536+this[++$]*256+this[++$];return(BigInt(P)<<BigInt(32))+BigInt(this[++$]*16777216+this[++$]*65536+this[++$]*256+_)});zq.prototype.readFloatLE=function($,K){if($=$>>>0,!K)v8($,4,this.length);return Q1(this,$,!0,23,4)};zq.prototype.readFloatBE=function($,K){if($=$>>>0,!K)v8($,4,this.length);return Q1(this,$,!1,23,4)};zq.prototype.readDoubleLE=function($,K){if($=$>>>0,!K)v8($,8,this.length);return Q1(this,$,!0,52,8)};zq.prototype.readDoubleBE=function($,K){if($=$>>>0,!K)v8($,8,this.length);return Q1(this,$,!1,52,8)};zq.prototype.writeUintLE=zq.prototype.writeUIntLE=function($,K,_,P){if($=+$,K=K>>>0,_=_>>>0,!P){let H=Math.pow(2,8*_)-1;a8(this,$,K,_,H,0)}let O=1,Y=0;this[K]=$&255;while(++Y<_&&(O*=256))this[K+Y]=$/O&255;return K+_};zq.prototype.writeUintBE=zq.prototype.writeUIntBE=function($,K,_,P){if($=+$,K=K>>>0,_=_>>>0,!P){let H=Math.pow(2,8*_)-1;a8(this,$,K,_,H,0)}let O=_-1,Y=1;this[K+O]=$&255;while(--O>=0&&(Y*=256))this[K+O]=$/Y&255;return K+_};zq.prototype.writeUint8=zq.prototype.writeUInt8=function($,K,_){if($=+$,K=K>>>0,!_)a8(this,$,K,1,255,0);return this[K]=$&255,K+1};zq.prototype.writeUint16LE=zq.prototype.writeUInt16LE=function($,K,_){if($=+$,K=K>>>0,!_)a8(this,$,K,2,65535,0);return this[K]=$&255,this[K+1]=$>>>8,K+2};zq.prototype.writeUint16BE=zq.prototype.writeUInt16BE=function($,K,_){if($=+$,K=K>>>0,!_)a8(this,$,K,2,65535,0);return this[K]=$>>>8,this[K+1]=$&255,K+2};zq.prototype.writeUint32LE=zq.prototype.writeUInt32LE=function($,K,_){if($=+$,K=K>>>0,!_)a8(this,$,K,4,4294967295,0);return this[K+3]=$>>>24,this[K+2]=$>>>16,this[K+1]=$>>>8,this[K]=$&255,K+4};zq.prototype.writeUint32BE=zq.prototype.writeUInt32BE=function($,K,_){if($=+$,K=K>>>0,!_)a8(this,$,K,4,4294967295,0);return this[K]=$>>>24,this[K+1]=$>>>16,this[K+2]=$>>>8,this[K+3]=$&255,K+4};zq.prototype.writeBigUInt64LE=$_(function($,K=0){return hX(this,$,K,BigInt(0),BigInt("0xffffffffffffffff"))});zq.prototype.writeBigUInt64BE=$_(function($,K=0){return DX(this,$,K,BigInt(0),BigInt("0xffffffffffffffff"))});zq.prototype.writeIntLE=function($,K,_,P){if($=+$,K=K>>>0,!P){let v=Math.pow(2,8*_-1);a8(this,$,K,_,v-1,-v)}let O=0,Y=1,H=0;this[K]=$&255;while(++O<_&&(Y*=256)){if($<0&&H===0&&this[K+O-1]!==0)H=1;this[K+O]=($/Y>>0)-H&255}return K+_};zq.prototype.writeIntBE=function($,K,_,P){if($=+$,K=K>>>0,!P){let v=Math.pow(2,8*_-1);a8(this,$,K,_,v-1,-v)}let O=_-1,Y=1,H=0;this[K+O]=$&255;while(--O>=0&&(Y*=256)){if($<0&&H===0&&this[K+O+1]!==0)H=1;this[K+O]=($/Y>>0)-H&255}return K+_};zq.prototype.writeInt8=function($,K,_){if($=+$,K=K>>>0,!_)a8(this,$,K,1,127,-128);if($<0)$=255+$+1;return this[K]=$&255,K+1};zq.prototype.writeInt16LE=function($,K,_){if($=+$,K=K>>>0,!_)a8(this,$,K,2,32767,-32768);return this[K]=$&255,this[K+1]=$>>>8,K+2};zq.prototype.writeInt16BE=function($,K,_){if($=+$,K=K>>>0,!_)a8(this,$,K,2,32767,-32768);return this[K]=$>>>8,this[K+1]=$&255,K+2};zq.prototype.writeInt32LE=function($,K,_){if($=+$,K=K>>>0,!_)a8(this,$,K,4,2147483647,-2147483648);return this[K]=$&255,this[K+1]=$>>>8,this[K+2]=$>>>16,this[K+3]=$>>>24,K+4};zq.prototype.writeInt32BE=function($,K,_){if($=+$,K=K>>>0,!_)a8(this,$,K,4,2147483647,-2147483648);if($<0)$=4294967295+$+1;return this[K]=$>>>24,this[K+1]=$>>>16,this[K+2]=$>>>8,this[K+3]=$&255,K+4};zq.prototype.writeBigInt64LE=$_(function($,K=0){return hX(this,$,K,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});zq.prototype.writeBigInt64BE=$_(function($,K=0){return DX(this,$,K,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});zq.prototype.writeFloatLE=function($,K,_){return LX(this,$,K,!0,_)};zq.prototype.writeFloatBE=function($,K,_){return LX(this,$,K,!1,_)};zq.prototype.writeDoubleLE=function($,K,_){return bX(this,$,K,!0,_)};zq.prototype.writeDoubleBE=function($,K,_){return bX(this,$,K,!1,_)};zq.prototype.copy=function($,K,_,P){if(!zq.isBuffer($))throw TypeError("argument should be a Buffer");if(!_)_=0;if(!P&&P!==0)P=this.length;if(K>=$.length)K=$.length;if(!K)K=0;if(P>0&&P<_)P=_;if(P===_)return 0;if($.length===0||this.length===0)return 0;if(K<0)throw RangeError("targetStart out of bounds");if(_<0||_>=this.length)throw RangeError("Index out of range");if(P<0)throw RangeError("sourceEnd out of bounds");if(P>this.length)P=this.length;if($.length-K<P-_)P=$.length-K+_;let O=P-_;if(this===$&&typeof Uint8Array.prototype.copyWithin==="function")this.copyWithin(K,_,P);else Uint8Array.prototype.set.call($,this.subarray(_,P),K);return O};zq.prototype.fill=function($,K,_,P){if(typeof $==="string"){if(typeof K==="string")P=K,K=0,_=this.length;else if(typeof _==="string")P=_,_=this.length;if(P!==void 0&&typeof P!=="string")throw TypeError("encoding must be a string");if(typeof P==="string"&&!zq.isEncoding(P))throw TypeError("Unknown encoding: "+P);if($.length===1){let Y=$.charCodeAt(0);if(P==="utf8"&&Y<128||P==="latin1")$=Y}}else if(typeof $==="number")$=$&255;else if(typeof $==="boolean")$=Number($);if(K<0||this.length<K||this.length<_)throw RangeError("Out of range index");if(_<=K)return this;if(K=K>>>0,_=_===void 0?this.length:_>>>0,!$)$=0;let O;if(typeof $==="number")for(O=K;O<_;++O)this[O]=$;else{let Y=zq.isBuffer($)?$:zq.from($,P),H=Y.length;if(H===0)throw TypeError('The value "'+$+'" is invalid for argument "value"');for(O=0;O<_-K;++O)this[O+K]=Y[O%H]}return this};oL=/[^+/0-9A-Za-z-_]/g;iL=function(){let q=Array(256);for(let $=0;$<16;++$){let K=$*16;for(let _=0;_<16;++_)q[K+_]="0123456789abcdef"[$]+"0123456789abcdef"[_]}return q}();FL=y3("resolveObjectURL"),tL=y3("isUtf8"),aL=y3("transcode"),eL=zq});var rX={};yK(rX,{types:()=>Wb,promisify:()=>lX,log:()=>uX,isUndefined:()=>W7,isSymbol:()=>zb,isString:()=>_5,isRegExp:()=>e1,isPrimitive:()=>Jb,isObject:()=>H7,isNumber:()=>xX,isNullOrUndefined:()=>Hb,isNull:()=>K5,isFunction:()=>q5,isError:()=>s1,isDate:()=>m3,isBuffer:()=>vb,isBoolean:()=>l3,isArray:()=>pX,inspect:()=>c_,inherits:()=>mX,format:()=>c3,deprecate:()=>qb,default:()=>Xb,debuglog:()=>$b,callbackifyOnRejected:()=>n3,callbackify:()=>dX,_extend:()=>o3,TextEncoder:()=>oX,TextDecoder:()=>nX});function c3(q,...$){if(!_5(q)){var K=[q];for(var _=0;_<$.length;_++)K.push(c_($[_]));return K.join(" ")}var _=0,P=$.length,O=String(q).replace(sL,function(H){if(H==="%%")return"%";if(_>=P)return H;switch(H){case"%s":return String($[_++]);case"%d":return Number($[_++]);case"%j":try{return JSON.stringify($[_++])}catch(v){return"[Circular]"}default:return H}});for(var Y=$[_];_<P;Y=$[++_])if(K5(Y)||!H7(Y))O+=" "+Y;else O+=" "+c_(Y);return O}function qb(q,$){if(typeof process>"u"||process?.noDeprecation===!0)return q;var K=!1;function _(...P){if(!K){if(process.throwDeprecation)throw Error($);else if(process.traceDeprecation)console.trace($);else console.error($);K=!0}return q.apply(this,...P)}return _}function Kb(q,$){var K=c_.styles[$];if(K)return"\x1B["+c_.colors[K][0]+"m"+q+"\x1B["+c_.colors[K][1]+"m";else return q}function _b(q,$){return q}function Pb(q){var $={};return q.forEach(function(K,_){$[K]=!0}),$}function $5(q,$,K){if(q.customInspect&&$&&q5($.inspect)&&$.inspect!==c_&&!($.constructor&&$.constructor.prototype===$)){var _=$.inspect(K,q);if(!_5(_))_=$5(q,_,K);return _}var P=Yb(q,$);if(P)return P;var O=Object.keys($),Y=Pb(O);if(q.showHidden)O=Object.getOwnPropertyNames($);if(s1($)&&(O.indexOf("message")>=0||O.indexOf("description")>=0))return p3($);if(O.length===0){if(q5($)){var H=$.name?": "+$.name:"";return q.stylize("[Function"+H+"]","special")}if(e1($))return q.stylize(RegExp.prototype.toString.call($),"regexp");if(m3($))return q.stylize(Date.prototype.toString.call($),"date");if(s1($))return p3($)}var v="",X=!1,Z=["{","}"];if(pX($))X=!0,Z=["[","]"];if(q5($)){var k=$.name?": "+$.name:"";v=" [Function"+k+"]"}if(e1($))v=" "+RegExp.prototype.toString.call($);if(m3($))v=" "+Date.prototype.toUTCString.call($);if(s1($))v=" "+p3($);if(O.length===0&&(!X||$.length==0))return Z[0]+v+Z[1];if(K<0)if(e1($))return q.stylize(RegExp.prototype.toString.call($),"regexp");else return q.stylize("[Object]","special");q.seen.push($);var G;if(X)G=jb(q,$,K,Y,O);else G=O.map(function(S){return u3(q,$,K,Y,S,X)});return q.seen.pop(),Ob(G,v,Z)}function Yb(q,$){if(W7($))return q.stylize("undefined","undefined");if(_5($)){var K="'"+JSON.stringify($).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return q.stylize(K,"string")}if(xX($))return q.stylize(""+$,"number");if(l3($))return q.stylize(""+$,"boolean");if(K5($))return q.stylize("null","null")}function p3(q){return"["+Error.prototype.toString.call(q)+"]"}function jb(q,$,K,_,P){var O=[];for(var Y=0,H=$.length;Y<H;++Y)if(cX($,String(Y)))O.push(u3(q,$,K,_,String(Y),!0));else O.push("");return P.forEach(function(v){if(!v.match(/^\d+$/))O.push(u3(q,$,K,_,v,!0))}),O}function u3(q,$,K,_,P,O){var Y,H,v;if(v=Object.getOwnPropertyDescriptor($,P)||{value:$[P]},v.get)if(v.set)H=q.stylize("[Getter/Setter]","special");else H=q.stylize("[Getter]","special");else if(v.set)H=q.stylize("[Setter]","special");if(!cX(_,P))Y="["+P+"]";if(!H)if(q.seen.indexOf(v.value)<0){if(K5(K))H=$5(q,v.value,null);else H=$5(q,v.value,K-1);if(H.indexOf(`
`)>-1)if(O)H=H.split(`
`).map(function(X){return"  "+X}).join(`
`).slice(2);else H=`
`+H.split(`
`).map(function(X){return"   "+X}).join(`
`)}else H=q.stylize("[Circular]","special");if(W7(Y)){if(O&&P.match(/^\d+$/))return H;if(Y=JSON.stringify(""+P),Y.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/))Y=Y.slice(1,-1),Y=q.stylize(Y,"name");else Y=Y.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),Y=q.stylize(Y,"string")}return Y+": "+H}function Ob(q,$,K){var _=0,P=q.reduce(function(O,Y){if(_++,Y.indexOf(`
`)>=0)_++;return O+Y.replace(/\u001b\[\d\d?m/g,"").length+1},0);if(P>60)return K[0]+($===""?"":$+`
 `)+" "+q.join(`,
  `)+" "+K[1];return K[0]+$+" "+q.join(", ")+" "+K[1]}function pX(q){return Array.isArray(q)}function l3(q){return typeof q==="boolean"}function K5(q){return q===null}function Hb(q){return q==null}function xX(q){return typeof q==="number"}function _5(q){return typeof q==="string"}function zb(q){return typeof q==="symbol"}function W7(q){return q===void 0}function e1(q){return H7(q)&&d3(q)==="[object RegExp]"}function H7(q){return typeof q==="object"&&q!==null}function m3(q){return H7(q)&&d3(q)==="[object Date]"}function s1(q){return H7(q)&&(d3(q)==="[object Error]"||q instanceof Error)}function q5(q){return typeof q==="function"}function Jb(q){return q===null||typeof q==="boolean"||typeof q==="number"||typeof q==="string"||typeof q==="symbol"||typeof q>"u"}function vb(q){return q instanceof Buffer}function d3(q){return Object.prototype.toString.call(q)}function x3(q){return q<10?"0"+q.toString(10):q.toString(10)}function Tb(){var q=new Date,$=[x3(q.getHours()),x3(q.getMinutes()),x3(q.getSeconds())].join(":");return[q.getDate(),wb[q.getMonth()],$].join(" ")}function uX(...q){console.log("%s - %s",Tb(),c3.apply(null,q))}function mX(q,$){if($)q.super_=$,q.prototype=Object.create($.prototype,{constructor:{value:q,enumerable:!1,writable:!0,configurable:!0}})}function o3(q,$){if(!$||!H7($))return q;var K=Object.keys($),_=K.length;while(_--)q[K[_]]=$[K[_]];return q}function cX(q,$){return Object.prototype.hasOwnProperty.call(q,$)}function n3(q,$){if(!q){var K=Error("Promise was rejected with a falsy value");K.reason=q,q=K}return $(q)}function dX(q){if(typeof q!=="function")throw TypeError('The "original" argument must be of type Function');function $(...K){var _=K.pop();if(typeof _!=="function")throw TypeError("The last argument must be of type Function");var P=this,O=function(...Y){return _.apply(P,...Y)};q.apply(this,K).then(function(Y){process.nextTick(O.bind(null,null,Y))},function(Y){process.nextTick(n3.bind(null,Y,O))})}return Object.setPrototypeOf($,Object.getPrototypeOf(q)),Object.defineProperties($,Object.getOwnPropertyDescriptors(q)),$}var sL,$b,c_,Wb=()=>{},wb,lX,oX,nX,Xb;var BX=T7(()=>{sL=/%[sdj%]/g;$b=((q={},$={},K)=>((K=typeof process<"u"&&!1)&&(K=K.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase()),$=new RegExp("^"+K+"$","i"),(_)=>{if(_=_.toUpperCase(),!q[_])if($.test(_))q[_]=function(...P){console.error("%s: %s",_,pid,c3.apply(null,...P))};else q[_]=function(){};return q[_]}))(),c_=((q)=>(q.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},q.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},q.custom=Symbol.for("nodejs.util.inspect.custom"),q))(function($,K,..._){var P={seen:[],stylize:_b};if(_.length>=1)P.depth=_[0];if(_.length>=2)P.colors=_[1];if(l3(K))P.showHidden=K;else if(K)o3(P,K);if(W7(P.showHidden))P.showHidden=!1;if(W7(P.depth))P.depth=2;if(W7(P.colors))P.colors=!1;if(P.colors)P.stylize=Kb;return $5(P,$,P.depth)});wb=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];lX=((q)=>(q.custom=Symbol.for("nodejs.util.promisify.custom"),q))(function($){if(typeof $!=="function")throw TypeError('The "original" argument must be of type Function');if(kCustomPromisifiedSymbol&&$[kCustomPromisifiedSymbol]){var K=$[kCustomPromisifiedSymbol];if(typeof K!=="function")throw TypeError('The "nodejs.util.promisify.custom" argument must be of type Function');return Object.defineProperty(K,kCustomPromisifiedSymbol,{value:K,enumerable:!1,writable:!1,configurable:!0}),K}function K(..._){var P,O,Y=new Promise(function(H,v){P=H,O=v});_.push(function(H,v){if(H)O(H);else P(v)});try{$.apply(this,_)}catch(H){O(H)}return Y}if(Object.setPrototypeOf(K,Object.getPrototypeOf($)),kCustomPromisifiedSymbol)Object.defineProperty(K,kCustomPromisifiedSymbol,{value:K,enumerable:!1,writable:!1,configurable:!0});return Object.defineProperties(K,Object.getOwnPropertyDescriptors($))});({TextEncoder:oX,TextDecoder:nX}=globalThis),Xb={TextEncoder:oX,TextDecoder:nX,promisify:lX,log:uX,inherits:mX,_extend:o3,callbackifyOnRejected:n3,callbackify:dX}});var oP={};yK(oP,{setMaxListeners:()=>Kf,once:()=>qf,listenerCount:()=>_f,init:()=>K_,getMaxListeners:()=>Yf,getEventListeners:()=>$f,default:()=>Cb,captureRejectionSymbol:()=>QX,addAbortListener:()=>jf,EventEmitter:()=>K_});function aX(q,$){var{_events:K}=q;if($[0]??=Error("Unhandled error."),!K)throw $[0];var _=K[tX];if(_)for(var P of UX.call(_))P.apply(q,$);var O=K.error;if(!O)throw $[0];for(var P of UX.call(O))P.apply(q,$);return!0}function kb(q,$,K,_){$.then(void 0,function(P){queueMicrotask(()=>Gb(q,P,K,_))})}function Gb(q,$,K,_){if(typeof q[iX]==="function")q[iX]($,K,..._);else try{q[l_]=!1,q.emit("error",$)}finally{q[l_]=!0}}function eX(q,$,K){K.warned=!0;let _=Error(`Possible EventEmitter memory leak detected. ${K.length} ${String($)} listeners added to [${q.constructor.name}]. Use emitter.setMaxListeners() to increase limit`);_.name="MaxListenersExceededWarning",_.emitter=q,_.type=$,_.count=K.length,console.warn(_)}function sX(q,$,...K){this.removeListener(q,$),$.apply(this,K)}function qf(q,$,K){var _=K?.signal;if(Pf(_,"options.signal"),_?.aborted)throw new r3(void 0,{cause:_?.reason});let{resolve:P,reject:O,promise:Y}=$newPromiseCapability(Promise),H=(Z)=>{if(q.removeListener($,v),_!=null)P5(_,"abort",X);O(Z)},v=(...Z)=>{if(typeof q.removeListener==="function")q.removeListener("error",H);if(_!=null)P5(_,"abort",X);P(Z)};if(FX(q,$,v,{once:!0}),$!=="error"&&typeof q.once==="function")q.once("error",H);function X(){P5(q,$,v),P5(q,"error",H),O(new r3(void 0,{cause:_?.reason}))}if(_!=null)FX(_,"abort",X,{once:!0});return Y}function $f(q,$){return q.listeners($)}function Kf(q,...$){i3(q,"setMaxListeners",0);var K;if($&&(K=$.length))for(let _=0;_<K;_++)$[_].setMaxListeners(q);else d_=q}function _f(q,$){return q.listenerCount($)}function P5(q,$,K,_){if(typeof q.removeListener==="function")q.removeListener($,K);else q.removeEventListener($,K,_)}function FX(q,$,K,_){if(typeof q.on==="function")if(_.once)q.once($,K);else q.on($,K);else q.addEventListener($,K,_)}function z7(q,$,K){let _=TypeError(`The "${q}" argument must be of type ${$}. Received ${K}`);return _.code="ERR_INVALID_ARG_TYPE",_}function Mb(q,$,K){let _=RangeError(`The "${q}" argument is out of range. It must be ${$}. Received ${K}`);return _.code="ERR_OUT_OF_RANGE",_}function Pf(q,$){if(q!==void 0&&(q===null||typeof q!=="object"||!("aborted"in q)))throw z7($,"AbortSignal",q)}function i3(q,$,K,_){if(typeof q!=="number")throw z7($,"number",q);if(K!=null&&q<K||_!=null&&q>_||(K!=null||_!=null)&&Number.isNaN(q))throw Mb($,`${K!=null?`>= ${K}`:""}${K!=null&&_!=null?" && ":""}${_!=null?`<= ${_}`:""}`,q)}function dP(q){if(typeof q!=="function")throw TypeError("The listener must be a function")}function Sb(q,$){if(typeof q!=="boolean")throw z7($,"boolean",q)}function Yf(q){return q?._maxListeners??d_}function jf(q,$){if(q===void 0)throw z7("signal","AbortSignal",q);if(Pf(q,"signal"),typeof $!=="function")throw z7("listener","function",$);let K;if(q.aborted)queueMicrotask(()=>$());else q.addEventListener("abort",$,{__proto__:null,once:!0}),K=()=>{q.removeEventListener("abort",$)};return{__proto__:null,[Symbol.dispose](){K?.()}}}var B3,l_,tX,fb,Ab,iX,QX,UX,d_=10,K_=function($){if(this._events===void 0||this._events===this.__proto__._events)this._events={__proto__:null},this._eventsCount=0;if(this._maxListeners??=void 0,this[l_]=$?.captureRejections?Boolean($?.captureRejections):g$[l_])this.emit=Vb},g$,Zb=function($,...K){if($==="error")return aX(this,K);var{_events:_}=this;if(_===void 0)return!1;var P=_[$];if(P===void 0)return!1;let O=P.length>1?P.slice():P;for(let Y=0,{length:H}=O;Y<H;Y++){let v=O[Y];switch(K.length){case 0:v.call(this);break;case 1:v.call(this,K[0]);break;case 2:v.call(this,K[0],K[1]);break;case 3:v.call(this,K[0],K[1],K[2]);break;default:v.apply(this,K);break}}return!0},Vb=function($,...K){if($==="error")return aX(this,K);var{_events:_}=this;if(_===void 0)return!1;var P=_[$];if(P===void 0)return!1;let O=P.length>1?P.slice():P;for(let Y=0,{length:H}=O;Y<H;Y++){let v=O[Y],X;switch(K.length){case 0:X=v.call(this);break;case 1:X=v.call(this,K[0]);break;case 2:X=v.call(this,K[0],K[1]);break;case 3:X=v.call(this,K[0],K[1],K[2]);break;default:X=v.apply(this,K);break}if(X!==void 0&&typeof X?.then==="function"&&X.then===Promise.prototype.then)kb(this,X,$,K)}return!0},r3,Cb;var nP=T7(()=>{B3=Symbol.for,l_=Symbol("kCapture"),tX=B3("events.errorMonitor"),fb=Symbol("events.maxEventTargetListeners"),Ab=Symbol("events.maxEventTargetListenersWarned"),iX=B3("nodejs.rejection"),QX=B3("nodejs.rejection"),UX=Array.prototype.slice,g$=K_.prototype={};g$._events=void 0;g$._eventsCount=0;g$._maxListeners=void 0;g$.setMaxListeners=function($){return i3($,"setMaxListeners",0),this._maxListeners=$,this};g$.constructor=K_;g$.getMaxListeners=function(){return this?._maxListeners??d_};g$.emit=Zb;g$.addListener=function($,K){dP(K);var _=this._events;if(!_)_=this._events={__proto__:null},this._eventsCount=0;else if(_.newListener)this.emit("newListener",$,K.listener??K);var P=_[$];if(!P)_[$]=[K],this._eventsCount++;else{P.push(K);var O=this._maxListeners??d_;if(O>0&&P.length>O&&!P.warned)eX(this,$,P)}return this};g$.on=g$.addListener;g$.prependListener=function($,K){dP(K);var _=this._events;if(!_)_=this._events={__proto__:null},this._eventsCount=0;else if(_.newListener)this.emit("newListener",$,K.listener??K);var P=_[$];if(!P)_[$]=[K],this._eventsCount++;else{P.unshift(K);var O=this._maxListeners??d_;if(O>0&&P.length>O&&!P.warned)eX(this,$,P)}return this};g$.once=function($,K){dP(K);let _=sX.bind(this,$,K);return _.listener=K,this.addListener($,_),this};g$.prependOnceListener=function($,K){dP(K);let _=sX.bind(this,$,K);return _.listener=K,this.prependListener($,_),this};g$.removeListener=function($,K){dP(K);var{_events:_}=this;if(!_)return this;var P=_[$];if(!P)return this;var O=P.length;let Y=-1;for(let H=O-1;H>=0;H--)if(P[H]===K||P[H].listener===K){Y=H;break}if(Y<0)return this;if(Y===0)P.shift();else P.splice(Y,1);if(P.length===0)delete _[$],this._eventsCount--;return this};g$.off=g$.removeListener;g$.removeAllListeners=function($){var{_events:K}=this;if($&&K){if(K[$])delete K[$],this._eventsCount--}else this._events={__proto__:null};return this};g$.listeners=function($){var{_events:K}=this;if(!K)return[];var _=K[$];if(!_)return[];return _.map((P)=>P.listener??P)};g$.rawListeners=function($){var{_events:K}=this;if(!K)return[];var _=K[$];if(!_)return[];return _.slice()};g$.listenerCount=function($){var{_events:K}=this;if(!K)return 0;return K[$]?.length??0};g$.eventNames=function(){return this._eventsCount>0?Reflect.ownKeys(this._events):[]};g$[l_]=!1;r3=class r3 extends Error{constructor(q="The operation was aborted",$=void 0){if($!==void 0&&typeof $!=="object")throw z7("options","Object",$);super(q,$);this.code="ABORT_ERR",this.name="AbortError"}};Object.defineProperties(K_,{captureRejections:{get(){return g$[l_]},set(q){Sb(q,"EventEmitter.captureRejections"),g$[l_]=q},enumerable:!0},defaultMaxListeners:{enumerable:!0,get:()=>{return d_},set:(q)=>{i3(q,"defaultMaxListeners",0),d_=q}},kMaxEventTargetListeners:{value:fb,enumerable:!1,configurable:!1,writable:!1},kMaxEventTargetListenersWarned:{value:Ab,enumerable:!1,configurable:!1,writable:!1}});Object.assign(K_,{once:qf,getEventListeners:$f,getMaxListeners:Yf,setMaxListeners:Kf,EventEmitter:K_,usingDomains:!1,captureRejectionSymbol:QX,errorMonitor:tX,addAbortListener:jf,init:K_,listenerCount:_f});Cb=K_});var Q3=bq((yQ,Tf)=>{var R$=(q,$)=>()=>($||q(($={exports:{}}).exports,$),$.exports),u$=R$((q,$)=>{class K extends Error{constructor(_){if(!Array.isArray(_))throw TypeError(`Expected input to be an Array, got ${typeof _}`);let P="";for(let O=0;O<_.length;O++)P+=`    ${_[O].stack}
`;super(P);this.name="AggregateError",this.errors=_}}$.exports={AggregateError:K,ArrayIsArray(_){return Array.isArray(_)},ArrayPrototypeIncludes(_,P){return _.includes(P)},ArrayPrototypeIndexOf(_,P){return _.indexOf(P)},ArrayPrototypeJoin(_,P){return _.join(P)},ArrayPrototypeMap(_,P){return _.map(P)},ArrayPrototypePop(_,P){return _.pop(P)},ArrayPrototypePush(_,P){return _.push(P)},ArrayPrototypeSlice(_,P,O){return _.slice(P,O)},Error,FunctionPrototypeCall(_,P,...O){return _.call(P,...O)},FunctionPrototypeSymbolHasInstance(_,P){return Function.prototype[Symbol.hasInstance].call(_,P)},MathFloor:Math.floor,Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,NumberParseInt:Number.parseInt,ObjectDefineProperties(_,P){return Object.defineProperties(_,P)},ObjectDefineProperty(_,P,O){return Object.defineProperty(_,P,O)},ObjectGetOwnPropertyDescriptor(_,P){return Object.getOwnPropertyDescriptor(_,P)},ObjectKeys(_){return Object.keys(_)},ObjectSetPrototypeOf(_,P){return Object.setPrototypeOf(_,P)},Promise,PromisePrototypeCatch(_,P){return _.catch(P)},PromisePrototypeThen(_,P,O){return _.then(P,O)},PromiseReject(_){return Promise.reject(_)},PromiseResolve(_){return Promise.resolve(_)},ReflectApply:Reflect.apply,RegExpPrototypeTest(_,P){return _.test(P)},SafeSet:Set,String,StringPrototypeSlice(_,P,O){return _.slice(P,O)},StringPrototypeToLowerCase(_){return _.toLowerCase()},StringPrototypeToUpperCase(_){return _.toUpperCase()},StringPrototypeTrim(_){return _.trim()},Symbol,SymbolFor:Symbol.for,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,SymbolDispose:Symbol.dispose||Symbol("Symbol.dispose"),SymbolAsyncDispose:Symbol.asyncDispose||Symbol("Symbol.asyncDispose"),TypedArrayPrototypeSet(_,P,O){return _.set(P,O)},Boolean,Uint8Array}}),Of=R$((q,$)=>{$.exports={format(K,..._){return K.replace(/%([sdifj])/g,function(...[P,O]){let Y=_.shift();if(O==="f")return Y.toFixed(6);else if(O==="j")return JSON.stringify(Y);else if(O==="s"&&typeof Y==="object")return`${Y.constructor!==Object?Y.constructor.name:""} {}`.trim();else return Y.toString()})},inspect(K){switch(typeof K){case"string":if(K.includes("'")){if(!K.includes('"'))return`"${K}"`;else if(!K.includes("`")&&!K.includes("${"))return`\`${K}\``}return`'${K}'`;case"number":if(isNaN(K))return"NaN";else if(Object.is(K,-0))return String(K);return K;case"bigint":return`${String(K)}n`;case"boolean":case"undefined":return String(K);case"object":return"{}"}}}}),n8=R$((q,$)=>{var{format:K,inspect:_}=Of(),{AggregateError:P}=u$(),O=globalThis.AggregateError||P,Y=Symbol("kIsNodeError"),H=["string","function","number","object","Function","Object","boolean","bigint","symbol"],v=/^([A-Z][a-z0-9]*)+$/,X={};function Z(D,I){if(!D)throw new X.ERR_INTERNAL_ASSERTION(I)}function k(D){let I="",g=D.length,y=D[0]==="-"?1:0;for(;g>=y+4;g-=3)I=`_${D.slice(g-3,g)}${I}`;return`${D.slice(0,g)}${I}`}function G(D,I,g){if(typeof I==="function")return Z(I.length<=g.length,`Code: ${D}; The provided arguments length (${g.length}) does not match the required ones (${I.length}).`),I(...g);let y=(I.match(/%[dfijoOs]/g)||[]).length;if(Z(y===g.length,`Code: ${D}; The provided arguments length (${g.length}) does not match the required ones (${y}).`),g.length===0)return I;return K(I,...g)}function S(D,I,g){if(!g)g=Error;class y extends g{constructor(...p){super(G(D,I,p))}toString(){return`${this.name} [${D}]: ${this.message}`}}Object.defineProperties(y.prototype,{name:{value:g.name,writable:!0,enumerable:!1,configurable:!0},toString:{value(){return`${this.name} [${D}]: ${this.message}`},writable:!0,enumerable:!1,configurable:!0}}),y.prototype.code=D,y.prototype[Y]=!0,X[D]=y}function N(D){let I="__node_internal_"+D.name;return Object.defineProperty(D,"name",{value:I}),D}function E(D,I){if(D&&I&&D!==I){if(Array.isArray(I.errors))return I.errors.push(D),I;let g=new O([I,D],I.message);return g.code=I.code,g}return D||I}class h extends Error{constructor(D="The operation was aborted",I=void 0){if(I!==void 0&&typeof I!=="object")throw new X.ERR_INVALID_ARG_TYPE("options","Object",I);super(D,I);this.code="ABORT_ERR",this.name="AbortError"}}S("ERR_ASSERTION","%s",Error),S("ERR_INVALID_ARG_TYPE",(D,I,g)=>{if(Z(typeof D==="string","'name' must be a string"),!Array.isArray(I))I=[I];let y="The ";if(D.endsWith(" argument"))y+=`${D} `;else y+=`"${D}" ${D.includes(".")?"property":"argument"} `;y+="must be ";let p=[],m=[],c=[];for(let e of I)if(Z(typeof e==="string","All expected entries have to be of type string"),H.includes(e))p.push(e.toLowerCase());else if(v.test(e))m.push(e);else Z(e!=="object",'The value "object" should be written as "Object"'),c.push(e);if(m.length>0){let e=p.indexOf("object");if(e!==-1)p.splice(p,e,1),m.push("Object")}if(p.length>0){switch(p.length){case 1:y+=`of type ${p[0]}`;break;case 2:y+=`one of type ${p[0]} or ${p[1]}`;break;default:{let e=p.pop();y+=`one of type ${p.join(", ")}, or ${e}`}}if(m.length>0||c.length>0)y+=" or "}if(m.length>0){switch(m.length){case 1:y+=`an instance of ${m[0]}`;break;case 2:y+=`an instance of ${m[0]} or ${m[1]}`;break;default:{let e=m.pop();y+=`an instance of ${m.join(", ")}, or ${e}`}}if(c.length>0)y+=" or "}switch(c.length){case 0:break;case 1:if(c[0].toLowerCase()!==c[0])y+="an ";y+=`${c[0]}`;break;case 2:y+=`one of ${c[0]} or ${c[1]}`;break;default:{let e=c.pop();y+=`one of ${c.join(", ")}, or ${e}`}}if(g==null)y+=`. Received ${g}`;else if(typeof g==="function"&&g.name)y+=`. Received function ${g.name}`;else if(typeof g==="object"){var $q;if(($q=g.constructor)!==null&&$q!==void 0&&$q.name)y+=`. Received an instance of ${g.constructor.name}`;else{let e=_(g,{depth:-1});y+=`. Received ${e}`}}else{let e=_(g,{colors:!1});if(e.length>25)e=`${e.slice(0,25)}...`;y+=`. Received type ${typeof g} (${e})`}return y},TypeError),S("ERR_INVALID_ARG_VALUE",(D,I,g="is invalid")=>{let y=_(I);if(y.length>128)y=y.slice(0,128)+"...";return`The ${D.includes(".")?"property":"argument"} '${D}' ${g}. Received ${y}`},TypeError),S("ERR_INVALID_RETURN_VALUE",(D,I,g)=>{var y;let p=g!==null&&g!==void 0&&(y=g.constructor)!==null&&y!==void 0&&y.name?`instance of ${g.constructor.name}`:`type ${typeof g}`;return`Expected ${D} to be returned from the "${I}" function but got ${p}.`},TypeError),S("ERR_MISSING_ARGS",(...D)=>{Z(D.length>0,"At least one arg needs to be specified");let I,g=D.length;switch(D=(Array.isArray(D)?D:[D]).map((y)=>`"${y}"`).join(" or "),g){case 1:I+=`The ${D[0]} argument`;break;case 2:I+=`The ${D[0]} and ${D[1]} arguments`;break;default:{let y=D.pop();I+=`The ${D.join(", ")}, and ${y} arguments`}break}return`${I} must be specified`},TypeError),S("ERR_OUT_OF_RANGE",(D,I,g)=>{Z(I,'Missing "range" argument');let y;if(Number.isInteger(g)&&Math.abs(g)>4294967296)y=k(String(g));else if(typeof g==="bigint"){y=String(g);let p=BigInt(2)**BigInt(32);if(g>p||g<-p)y=k(y);y+="n"}else y=_(g);return`The value of "${D}" is out of range. It must be ${I}. Received ${y}`},RangeError),S("ERR_MULTIPLE_CALLBACK","Callback called multiple times",Error),S("ERR_METHOD_NOT_IMPLEMENTED","The %s method is not implemented",Error),S("ERR_STREAM_ALREADY_FINISHED","Cannot call %s after a stream was finished",Error),S("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable",Error),S("ERR_STREAM_DESTROYED","Cannot call %s after a stream was destroyed",Error),S("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),S("ERR_STREAM_PREMATURE_CLOSE","Premature close",Error),S("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF",Error),S("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event",Error),S("ERR_STREAM_WRITE_AFTER_END","write after end",Error),S("ERR_UNKNOWN_ENCODING","Unknown encoding: %s",TypeError),$.exports={AbortError:h,aggregateTwoErrors:N(E),hideStackFrames:N,codes:X}}),Nb=R$((q,$)=>{Object.defineProperty(q,"__esModule",{value:!0});var K=new WeakMap,_=new WeakMap;function P(d){let n=K.get(d);return console.assert(n!=null,"'this' is expected an Event object, but got",d),n}function O(d){if(d.passiveListener!=null){if(typeof console<"u"&&typeof console.error==="function")console.error("Unable to preventDefault inside passive event listener invocation.",d.passiveListener);return}if(!d.event.cancelable)return;if(d.canceled=!0,typeof d.event.preventDefault==="function")d.event.preventDefault()}function Y(d,n){K.set(this,{eventTarget:d,event:n,eventPhase:2,currentTarget:d,canceled:!1,stopped:!1,immediateStopped:!1,passiveListener:null,timeStamp:n.timeStamp||Date.now()}),Object.defineProperty(this,"isTrusted",{value:!1,enumerable:!0});let M=Object.keys(n);for(let j=0;j<M.length;++j){let J=M[j];if(!(J in this))Object.defineProperty(this,J,H(J))}}if(Y.prototype={get type(){return P(this).event.type},get target(){return P(this).eventTarget},get currentTarget(){return P(this).currentTarget},composedPath(){let d=P(this).currentTarget;if(d==null)return[];return[d]},get NONE(){return 0},get CAPTURING_PHASE(){return 1},get AT_TARGET(){return 2},get BUBBLING_PHASE(){return 3},get eventPhase(){return P(this).eventPhase},stopPropagation(){let d=P(this);if(d.stopped=!0,typeof d.event.stopPropagation==="function")d.event.stopPropagation()},stopImmediatePropagation(){let d=P(this);if(d.stopped=!0,d.immediateStopped=!0,typeof d.event.stopImmediatePropagation==="function")d.event.stopImmediatePropagation()},get bubbles(){return Boolean(P(this).event.bubbles)},get cancelable(){return Boolean(P(this).event.cancelable)},preventDefault(){O(P(this))},get defaultPrevented(){return P(this).canceled},get composed(){return Boolean(P(this).event.composed)},get timeStamp(){return P(this).timeStamp},get srcElement(){return P(this).eventTarget},get cancelBubble(){return P(this).stopped},set cancelBubble(d){if(!d)return;let n=P(this);if(n.stopped=!0,typeof n.event.cancelBubble==="boolean")n.event.cancelBubble=!0},get returnValue(){return!P(this).canceled},set returnValue(d){if(!d)O(P(this))},initEvent(){}},Object.defineProperty(Y.prototype,"constructor",{value:Y,configurable:!0,writable:!0}),typeof window<"u"&&typeof window.Event<"u")Object.setPrototypeOf(Y.prototype,window.Event.prototype),_.set(window.Event.prototype,Y);function H(d){return{get(){return P(this).event[d]},set(n){P(this).event[d]=n},configurable:!0,enumerable:!0}}function v(d){return{value(){let n=P(this).event;return n[d].apply(n,arguments)},configurable:!0,enumerable:!0}}function X(d,n){let M=Object.keys(n);if(M.length===0)return d;function j(J,w){d.call(this,J,w)}j.prototype=Object.create(d.prototype,{constructor:{value:j,configurable:!0,writable:!0}});for(let J=0;J<M.length;++J){let w=M[J];if(!(w in d.prototype)){let z=typeof Object.getOwnPropertyDescriptor(n,w).value==="function";Object.defineProperty(j.prototype,w,z?v(w):H(w))}}return j}function Z(d){if(d==null||d===Object.prototype)return Y;let n=_.get(d);if(n==null)n=X(Z(Object.getPrototypeOf(d)),d),_.set(d,n);return n}function k(d,n){return new(Z(Object.getPrototypeOf(n)))(d,n)}function G(d){return P(d).immediateStopped}function S(d,n){P(d).eventPhase=n}function N(d,n){P(d).currentTarget=n}function E(d,n){P(d).passiveListener=n}var h=new WeakMap,D=1,I=2,g=3;function y(d){return d!==null&&typeof d==="object"}function p(d){let n=h.get(d);if(n==null)throw TypeError("'this' is expected an EventTarget object, but got another value.");return n}function m(d){return{get(){let n=p(this).get(d);while(n!=null){if(n.listenerType===g)return n.listener;n=n.next}return null},set(n){if(typeof n!=="function"&&!y(n))n=null;let M=p(this),j=null,J=M.get(d);while(J!=null){if(J.listenerType===g)if(j!==null)j.next=J.next;else if(J.next!==null)M.set(d,J.next);else M.delete(d);else j=J;J=J.next}if(n!==null){let w={listener:n,listenerType:g,passive:!1,once:!1,next:null};if(j===null)M.set(d,w);else j.next=w}},configurable:!0,enumerable:!0}}function c(d,n){Object.defineProperty(d,`on${n}`,m(n))}function $q(d){function n(){e.call(this)}n.prototype=Object.create(e.prototype,{constructor:{value:n,configurable:!0,writable:!0}});for(let M=0;M<d.length;++M)c(n.prototype,d[M]);return n}function e(){if(this instanceof e){h.set(this,new Map);return}if(arguments.length===1&&Array.isArray(arguments[0]))return $q(arguments[0]);if(arguments.length>0){let d=Array(arguments.length);for(let n=0;n<arguments.length;++n)d[n]=arguments[n];return $q(d)}throw TypeError("Cannot call a class as a function")}if(e.prototype={addEventListener(d,n,M){if(n==null)return;if(typeof n!=="function"&&!y(n))throw TypeError("'listener' should be a function or an object.");let j=p(this),J=y(M),w=(J?Boolean(M.capture):Boolean(M))?D:I,z={listener:n,listenerType:w,passive:J&&Boolean(M.passive),once:J&&Boolean(M.once),next:null},T=j.get(d);if(T===void 0){j.set(d,z);return}let V=null;while(T!=null){if(T.listener===n&&T.listenerType===w)return;V=T,T=T.next}V.next=z},removeEventListener(d,n,M){if(n==null)return;let j=p(this),J=(y(M)?Boolean(M.capture):Boolean(M))?D:I,w=null,z=j.get(d);while(z!=null){if(z.listener===n&&z.listenerType===J){if(w!==null)w.next=z.next;else if(z.next!==null)j.set(d,z.next);else j.delete(d);return}w=z,z=z.next}},dispatchEvent(d){if(d==null||typeof d.type!=="string")throw TypeError('"event.type" should be a string.');let n=p(this),M=d.type,j=n.get(M);if(j==null)return!0;let J=k(this,d),w=null;while(j!=null){if(j.once)if(w!==null)w.next=j.next;else if(j.next!==null)n.set(M,j.next);else n.delete(M);else w=j;if(E(J,j.passive?j.listener:null),typeof j.listener==="function")try{j.listener.call(this,J)}catch(z){if(typeof console<"u"&&typeof console.error==="function")console.error(z)}else if(j.listenerType!==g&&typeof j.listener.handleEvent==="function")j.listener.handleEvent(J);if(G(J))break;j=j.next}return E(J,null),S(J,0),N(J,null),!J.defaultPrevented}},Object.defineProperty(e.prototype,"constructor",{value:e,configurable:!0,writable:!0}),typeof window<"u"&&typeof window.EventTarget<"u")Object.setPrototypeOf(e.prototype,window.EventTarget.prototype);q.defineEventAttribute=c,q.EventTarget=e,q.default=e,$.exports=e,$.exports.EventTarget=$.exports.default=e,$.exports.defineEventAttribute=c}),rP=R$((q,$)=>{Object.defineProperty(q,"__esModule",{value:!0});var K=Nb();class _ extends K.EventTarget{constructor(){super();throw TypeError("AbortSignal cannot be constructed directly")}get aborted(){let Z=Y.get(this);if(typeof Z!=="boolean")throw TypeError(`Expected 'this' to be an 'AbortSignal' object, but got ${this===null?"null":typeof this}`);return Z}}K.defineEventAttribute(_.prototype,"abort");function P(){let Z=Object.create(_.prototype);return K.EventTarget.call(Z),Y.set(Z,!1),Z}function O(Z){if(Y.get(Z)!==!1)return;Y.set(Z,!0),Z.dispatchEvent({type:"abort"})}var Y=new WeakMap;if(Object.defineProperties(_.prototype,{aborted:{enumerable:!0}}),typeof Symbol==="function"&&typeof Symbol.toStringTag==="symbol")Object.defineProperty(_.prototype,Symbol.toStringTag,{configurable:!0,value:"AbortSignal"});class H{constructor(){v.set(this,P())}get signal(){return X(this)}abort(){O(X(this))}}var v=new WeakMap;function X(Z){let k=v.get(Z);if(k==null)throw TypeError(`Expected 'this' to be an 'AbortController' object, but got ${Z===null?"null":typeof Z}`);return k}if(Object.defineProperties(H.prototype,{signal:{enumerable:!0},abort:{enumerable:!0}}),typeof Symbol==="function"&&typeof Symbol.toStringTag==="symbol")Object.defineProperty(H.prototype,Symbol.toStringTag,{configurable:!0,value:"AbortController"});q.AbortController=H,q.AbortSignal=_,q.default=H,$.exports=H,$.exports.AbortController=$.exports.default=H,$.exports.AbortSignal=_}),e8=R$((q,$)=>{var K=(T8(),M$(w8)),{format:_,inspect:P}=Of(),{codes:{ERR_INVALID_ARG_TYPE:O}}=n8(),{kResistStopPropagation:Y,AggregateError:H,SymbolDispose:v}=u$(),X=globalThis.AbortSignal||rP().AbortSignal,Z=globalThis.AbortController||rP().AbortController,k=Object.getPrototypeOf(async function(){}).constructor,G=globalThis.Blob||K.Blob,S=typeof G<"u"?function(D){return D instanceof G}:function(D){return!1},N=(h,D)=>{if(h!==void 0&&(h===null||typeof h!=="object"||!("aborted"in h)))throw new O(D,"AbortSignal",h)},E=(h,D)=>{if(typeof h!=="function")throw new O(D,"Function",h)};$.exports={AggregateError:H,kEmptyObject:Object.freeze({}),once(h){let D=!1;return function(...I){if(D)return;D=!0,h.apply(this,I)}},createDeferredPromise:function(){let h,D;return{promise:new Promise((I,g)=>{h=I,D=g}),resolve:h,reject:D}},promisify(h){return new Promise((D,I)=>{h((g,...y)=>{if(g)return I(g);return D(...y)})})},debuglog(){return function(){}},format:_,inspect:P,types:{isAsyncFunction(h){return h instanceof k},isArrayBufferView(h){return ArrayBuffer.isView(h)}},isBlob:S,deprecate(h,D){return h},addAbortListener:(nP(),M$(oP)).addAbortListener||function(D,I){if(D===void 0)throw new O("signal","AbortSignal",D);N(D,"signal"),E(I,"listener");let g;if(D.aborted)queueMicrotask(()=>I());else D.addEventListener("abort",I,{__proto__:null,once:!0,[Y]:!0}),g=()=>{D.removeEventListener("abort",I)};return{__proto__:null,[v](){var y;(y=g)===null||y===void 0||y()}}},AbortSignalAny:X.any||function(D){if(D.length===1)return D[0];let I=new Z,g=()=>I.abort();return D.forEach((y)=>{N(y,"signals"),y.addEventListener("abort",g,{once:!0})}),I.signal.addEventListener("abort",()=>{D.forEach((y)=>y.removeEventListener("abort",g))},{once:!0}),I.signal}},$.exports.promisify.custom=Symbol.for("nodejs.util.promisify.custom")}),BP=R$((q,$)=>{var{ArrayIsArray:K,ArrayPrototypeIncludes:_,ArrayPrototypeJoin:P,ArrayPrototypeMap:O,NumberIsInteger:Y,NumberIsNaN:H,NumberMAX_SAFE_INTEGER:v,NumberMIN_SAFE_INTEGER:X,NumberParseInt:Z,ObjectPrototypeHasOwnProperty:k,RegExpPrototypeExec:G,String:S,StringPrototypeToUpperCase:N,StringPrototypeTrim:E}=u$(),{hideStackFrames:h,codes:{ERR_SOCKET_BAD_PORT:D,ERR_INVALID_ARG_TYPE:I,ERR_INVALID_ARG_VALUE:g,ERR_OUT_OF_RANGE:y,ERR_UNKNOWN_SIGNAL:p}}=n8(),{normalizeEncoding:m}=e8(),{isAsyncFunction:c,isArrayBufferView:$q}=e8().types,e={};function d(a){return a===(a|0)}function n(a){return a===a>>>0}var M=/^[0-7]+$/,j="must be a 32-bit unsigned integer or an octal string";function J(a,F,_q){if(typeof a>"u")a=_q;if(typeof a==="string"){if(G(M,a)===null)throw new g(F,a,j);a=Z(a,8)}return T(a,F),a}var w=h((a,F,_q=X,Tq=v)=>{if(typeof a!=="number")throw new I(F,"number",a);if(!Y(a))throw new y(F,"an integer",a);if(a<_q||a>Tq)throw new y(F,`>= ${_q} && <= ${Tq}`,a)}),z=h((a,F,_q=-2147483648,Tq=2147483647)=>{if(typeof a!=="number")throw new I(F,"number",a);if(!Y(a))throw new y(F,"an integer",a);if(a<_q||a>Tq)throw new y(F,`>= ${_q} && <= ${Tq}`,a)}),T=h((a,F,_q=!1)=>{if(typeof a!=="number")throw new I(F,"number",a);if(!Y(a))throw new y(F,"an integer",a);let Tq=_q?1:0,Yq=4294967295;if(a<Tq||a>Yq)throw new y(F,`>= ${Tq} && <= ${Yq}`,a)});function V(a,F){if(typeof a!=="string")throw new I(F,"string",a)}function C(a,F,_q=void 0,Tq){if(typeof a!=="number")throw new I(F,"number",a);if(_q!=null&&a<_q||Tq!=null&&a>Tq||(_q!=null||Tq!=null)&&H(a))throw new y(F,`${_q!=null?`>= ${_q}`:""}${_q!=null&&Tq!=null?" && ":""}${Tq!=null?`<= ${Tq}`:""}`,a)}var f=h((a,F,_q)=>{if(!_(_q,a)){let Tq="must be one of: "+P(O(_q,(Yq)=>typeof Yq==="string"?`'${Yq}'`:S(Yq)),", ");throw new g(F,a,Tq)}});function W(a,F){if(typeof a!=="boolean")throw new I(F,"boolean",a)}function A(a,F,_q){return a==null||!k(a,F)?_q:a[F]}var L=h((a,F,_q=null)=>{let Tq=A(_q,"allowArray",!1),Yq=A(_q,"allowFunction",!1);if(!A(_q,"nullable",!1)&&a===null||!Tq&&K(a)||typeof a!=="object"&&(!Yq||typeof a!=="function"))throw new I(F,"Object",a)}),R=h((a,F)=>{if(a!=null&&typeof a!=="object"&&typeof a!=="function")throw new I(F,"a dictionary",a)}),b=h((a,F,_q=0)=>{if(!K(a))throw new I(F,"Array",a);if(a.length<_q){let Tq=`must be longer than ${_q}`;throw new g(F,a,Tq)}});function l(a,F){b(a,F);for(let _q=0;_q<a.length;_q++)V(a[_q],`${F}[${_q}]`)}function B(a,F){b(a,F);for(let _q=0;_q<a.length;_q++)W(a[_q],`${F}[${_q}]`)}function t(a,F){b(a,F);for(let _q=0;_q<a.length;_q++){let Tq=a[_q],Yq=`${F}[${_q}]`;if(Tq==null)throw new I(Yq,"AbortSignal",Tq);jq(Tq,Yq)}}function Wq(a,F="signal"){if(V(a,F),e[a]===void 0){if(e[N(a)]!==void 0)throw new p(a+" (signals must use all capital letters)");throw new p(a)}}var r=h((a,F="buffer")=>{if(!$q(a))throw new I(F,["Buffer","TypedArray","DataView"],a)});function i(a,F){let _q=m(F),Tq=a.length;if(_q==="hex"&&Tq%2!==0)throw new g("encoding",F,`is invalid for data of length ${Tq}`)}function gq(a,F="Port",_q=!0){if(typeof a!=="number"&&typeof a!=="string"||typeof a==="string"&&E(a).length===0||+a!==+a>>>0||a>65535||a===0&&!_q)throw new D(F,a,_q);return a|0}var jq=h((a,F)=>{if(a!==void 0&&(a===null||typeof a!=="object"||!("aborted"in a)))throw new I(F,"AbortSignal",a)}),Oq=h((a,F)=>{if(typeof a!=="function")throw new I(F,"Function",a)}),Q=h((a,F)=>{if(typeof a!=="function"||c(a))throw new I(F,"Function",a)}),o=h((a,F)=>{if(a!==void 0)throw new I(F,"undefined",a)});function U(a,F,_q){if(!_(_q,a))throw new I(F,`('${P(_q,"|")}')`,a)}var yq=/^(?:<[^>]*>)(?:\s*;\s*[^;"\s]+(?:=(")?[^;"\s]*\1)?)*$/;function qq(a,F){if(typeof a>"u"||!G(yq,a))throw new g(F,a,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}function s(a){if(typeof a==="string")return qq(a,"hints"),a;else if(K(a)){let F=a.length,_q="";if(F===0)return _q;for(let Tq=0;Tq<F;Tq++){let Yq=a[Tq];if(qq(Yq,"hints"),_q+=Yq,Tq!==F-1)_q+=", "}return _q}throw new g("hints",a,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}$.exports={isInt32:d,isUint32:n,parseFileMode:J,validateArray:b,validateStringArray:l,validateBooleanArray:B,validateAbortSignalArray:t,validateBoolean:W,validateBuffer:r,validateDictionary:R,validateEncoding:i,validateFunction:Oq,validateInt32:z,validateInteger:w,validateNumber:C,validateObject:L,validateOneOf:f,validatePlainFunction:Q,validatePort:gq,validateSignalName:Wq,validateString:V,validateUint32:T,validateUndefined:o,validateUnion:U,validateAbortSignal:jq,validateLinkHeaderValue:s}}),o_=R$((q,$)=>{$.exports=globalThis.process}),LK=R$((q,$)=>{var{SymbolAsyncIterator:K,SymbolIterator:_,SymbolFor:P}=u$(),O=P("nodejs.stream.destroyed"),Y=P("nodejs.stream.errored"),H=P("nodejs.stream.readable"),v=P("nodejs.stream.writable"),X=P("nodejs.stream.disturbed"),Z=P("nodejs.webstream.isClosedPromise"),k=P("nodejs.webstream.controllerErrorFunction");function G(A,L=!1){var R;return!!(A&&typeof A.pipe==="function"&&typeof A.on==="function"&&(!L||typeof A.pause==="function"&&typeof A.resume==="function")&&(!A._writableState||((R=A._readableState)===null||R===void 0?void 0:R.readable)!==!1)&&(!A._writableState||A._readableState))}function S(A){var L;return!!(A&&typeof A.write==="function"&&typeof A.on==="function"&&(!A._readableState||((L=A._writableState)===null||L===void 0?void 0:L.writable)!==!1))}function N(A){return!!(A&&typeof A.pipe==="function"&&A._readableState&&typeof A.on==="function"&&typeof A.write==="function")}function E(A){return A&&(A._readableState||A._writableState||typeof A.write==="function"&&typeof A.on==="function"||typeof A.pipe==="function"&&typeof A.on==="function")}function h(A){return!!(A&&!E(A)&&typeof A.pipeThrough==="function"&&typeof A.getReader==="function"&&typeof A.cancel==="function")}function D(A){return!!(A&&!E(A)&&typeof A.getWriter==="function"&&typeof A.abort==="function")}function I(A){return!!(A&&!E(A)&&typeof A.readable==="object"&&typeof A.writable==="object")}function g(A){return h(A)||D(A)||I(A)}function y(A,L){if(A==null)return!1;if(L===!0)return typeof A[K]==="function";if(L===!1)return typeof A[_]==="function";return typeof A[K]==="function"||typeof A[_]==="function"}function p(A){if(!E(A))return null;let{_writableState:L,_readableState:R}=A,b=L||R;return!!(A.destroyed||A[O]||b!==null&&b!==void 0&&b.destroyed)}function m(A){if(!S(A))return null;if(A.writableEnded===!0)return!0;let L=A._writableState;if(L!==null&&L!==void 0&&L.errored)return!1;if(typeof(L===null||L===void 0?void 0:L.ended)!=="boolean")return null;return L.ended}function c(A,L){if(!S(A))return null;if(A.writableFinished===!0)return!0;let R=A._writableState;if(R!==null&&R!==void 0&&R.errored)return!1;if(typeof(R===null||R===void 0?void 0:R.finished)!=="boolean")return null;return!!(R.finished||L===!1&&R.ended===!0&&R.length===0)}function $q(A){if(!G(A))return null;if(A.readableEnded===!0)return!0;let L=A._readableState;if(!L||L.errored)return!1;if(typeof(L===null||L===void 0?void 0:L.ended)!=="boolean")return null;return L.ended}function e(A,L){if(!G(A))return null;let R=A._readableState;if(R!==null&&R!==void 0&&R.errored)return!1;if(typeof(R===null||R===void 0?void 0:R.endEmitted)!=="boolean")return null;return!!(R.endEmitted||L===!1&&R.ended===!0&&R.length===0)}function d(A){if(A&&A[H]!=null)return A[H];if(typeof(A===null||A===void 0?void 0:A.readable)!=="boolean")return null;if(p(A))return!1;return G(A)&&A.readable&&!e(A)}function n(A){if(A&&A[v]!=null)return A[v];if(typeof(A===null||A===void 0?void 0:A.writable)!=="boolean")return null;if(p(A))return!1;return S(A)&&A.writable&&!m(A)}function M(A,L){if(!E(A))return null;if(p(A))return!0;if((L===null||L===void 0?void 0:L.readable)!==!1&&d(A))return!1;if((L===null||L===void 0?void 0:L.writable)!==!1&&n(A))return!1;return!0}function j(A){var L,R;if(!E(A))return null;if(A.writableErrored)return A.writableErrored;return(L=(R=A._writableState)===null||R===void 0?void 0:R.errored)!==null&&L!==void 0?L:null}function J(A){var L,R;if(!E(A))return null;if(A.readableErrored)return A.readableErrored;return(L=(R=A._readableState)===null||R===void 0?void 0:R.errored)!==null&&L!==void 0?L:null}function w(A){if(!E(A))return null;if(typeof A.closed==="boolean")return A.closed;let{_writableState:L,_readableState:R}=A;if(typeof(L===null||L===void 0?void 0:L.closed)==="boolean"||typeof(R===null||R===void 0?void 0:R.closed)==="boolean")return(L===null||L===void 0?void 0:L.closed)||(R===null||R===void 0?void 0:R.closed);if(typeof A._closed==="boolean"&&z(A))return A._closed;return null}function z(A){return typeof A._closed==="boolean"&&typeof A._defaultKeepAlive==="boolean"&&typeof A._removedConnection==="boolean"&&typeof A._removedContLen==="boolean"}function T(A){return typeof A._sent100==="boolean"&&z(A)}function V(A){var L;return typeof A._consuming==="boolean"&&typeof A._dumped==="boolean"&&((L=A.req)===null||L===void 0?void 0:L.upgradeOrConnect)===void 0}function C(A){if(!E(A))return null;let{_writableState:L,_readableState:R}=A,b=L||R;return!b&&T(A)||!!(b&&b.autoDestroy&&b.emitClose&&b.closed===!1)}function f(A){var L;return!!(A&&((L=A[X])!==null&&L!==void 0?L:A.readableDidRead||A.readableAborted))}function W(A){var L,R,b,l,B,t,Wq,r,i,gq;return!!(A&&((L=(R=(b=(l=(B=(t=A[Y])!==null&&t!==void 0?t:A.readableErrored)!==null&&B!==void 0?B:A.writableErrored)!==null&&l!==void 0?l:(Wq=A._readableState)===null||Wq===void 0?void 0:Wq.errorEmitted)!==null&&b!==void 0?b:(r=A._writableState)===null||r===void 0?void 0:r.errorEmitted)!==null&&R!==void 0?R:(i=A._readableState)===null||i===void 0?void 0:i.errored)!==null&&L!==void 0?L:(gq=A._writableState)===null||gq===void 0?void 0:gq.errored))}$.exports={isDestroyed:p,kIsDestroyed:O,isDisturbed:f,kIsDisturbed:X,isErrored:W,kIsErrored:Y,isReadable:d,kIsReadable:H,kIsClosedPromise:Z,kControllerErrorFunction:k,kIsWritable:v,isClosed:w,isDuplexNodeStream:N,isFinished:M,isIterable:y,isReadableNodeStream:G,isReadableStream:h,isReadableEnded:$q,isReadableFinished:e,isReadableErrored:J,isNodeStream:E,isWebStream:g,isWritable:n,isWritableNodeStream:S,isWritableStream:D,isWritableEnded:m,isWritableFinished:c,isWritableErrored:j,isServerRequest:V,isServerResponse:T,willEmitClose:C,isTransformStream:I}}),__=R$((q,$)=>{var K=o_(),{AbortError:_,codes:P}=n8(),{ERR_INVALID_ARG_TYPE:O,ERR_STREAM_PREMATURE_CLOSE:Y}=P,{kEmptyObject:H,once:v}=e8(),{validateAbortSignal:X,validateFunction:Z,validateObject:k,validateBoolean:G}=BP(),{Promise:S,PromisePrototypeThen:N,SymbolDispose:E}=u$(),{isClosed:h,isReadable:D,isReadableNodeStream:I,isReadableStream:g,isReadableFinished:y,isReadableErrored:p,isWritable:m,isWritableNodeStream:c,isWritableStream:$q,isWritableFinished:e,isWritableErrored:d,isNodeStream:n,willEmitClose:M,kIsClosedPromise:j}=LK(),J;function w(f){return f.setHeader&&typeof f.abort==="function"}var z=()=>{};function T(f,W,A){var L,R;if(arguments.length===2)A=W,W=H;else if(W==null)W=H;else k(W,"options");if(Z(A,"callback"),X(W.signal,"options.signal"),A=v(A),g(f)||$q(f))return V(f,W,A);if(!n(f))throw new O("stream",["ReadableStream","WritableStream","Stream"],f);let b=(L=W.readable)!==null&&L!==void 0?L:I(f),l=(R=W.writable)!==null&&R!==void 0?R:c(f),B=f._writableState,t=f._readableState,Wq=()=>{if(!f.writable)gq()},r=M(f)&&I(f)===b&&c(f)===l,i=e(f,!1),gq=()=>{if(i=!0,f.destroyed)r=!1;if(r&&(!f.readable||b))return;if(!b||jq)A.call(f)},jq=y(f,!1),Oq=()=>{if(jq=!0,f.destroyed)r=!1;if(r&&(!f.writable||l))return;if(!l||i)A.call(f)},Q=(a)=>{A.call(f,a)},o=h(f),U=()=>{o=!0;let a=d(f)||p(f);if(a&&typeof a!=="boolean")return A.call(f,a);if(b&&!jq&&I(f,!0)){if(!y(f,!1))return A.call(f,new Y)}if(l&&!i){if(!e(f,!1))return A.call(f,new Y)}A.call(f)},yq=()=>{o=!0;let a=d(f)||p(f);if(a&&typeof a!=="boolean")return A.call(f,a);A.call(f)},qq=()=>{f.req.on("finish",gq)};if(w(f)){if(f.on("complete",gq),!r)f.on("abort",U);if(f.req)qq();else f.on("request",qq)}else if(l&&!B)f.on("end",Wq),f.on("close",Wq);if(!r&&typeof f.aborted==="boolean")f.on("aborted",U);if(f.on("end",Oq),f.on("finish",gq),W.error!==!1)f.on("error",Q);if(f.on("close",U),o)K.nextTick(U);else if(B!==null&&B!==void 0&&B.errorEmitted||t!==null&&t!==void 0&&t.errorEmitted){if(!r)K.nextTick(yq)}else if(!b&&(!r||D(f))&&(i||m(f)===!1))K.nextTick(yq);else if(!l&&(!r||m(f))&&(jq||D(f)===!1))K.nextTick(yq);else if(t&&f.req&&f.aborted)K.nextTick(yq);let s=()=>{if(A=z,f.removeListener("aborted",U),f.removeListener("complete",gq),f.removeListener("abort",U),f.removeListener("request",qq),f.req)f.req.removeListener("finish",gq);f.removeListener("end",Wq),f.removeListener("close",Wq),f.removeListener("finish",gq),f.removeListener("end",Oq),f.removeListener("error",Q),f.removeListener("close",U)};if(W.signal&&!o){let a=()=>{let F=A;s(),F.call(f,new _(void 0,{cause:W.signal.reason}))};if(W.signal.aborted)K.nextTick(a);else{J=J||e8().addAbortListener;let F=J(W.signal,a),_q=A;A=v((...Tq)=>{F[E](),_q.apply(f,Tq)})}}return s}function V(f,W,A){let L=!1,R=z;if(W.signal)if(R=()=>{L=!0,A.call(f,new _(void 0,{cause:W.signal.reason}))},W.signal.aborted)K.nextTick(R);else{J=J||e8().addAbortListener;let l=J(W.signal,R),B=A;A=v((...t)=>{l[E](),B.apply(f,t)})}let b=(...l)=>{if(!L)K.nextTick(()=>A.apply(f,l))};return N(f[j].promise,b,b),z}function C(f,W){var A;let L=!1;if(W===null)W=H;if((A=W)!==null&&A!==void 0&&A.cleanup)G(W.cleanup,"cleanup"),L=W.cleanup;return new S((R,b)=>{let l=T(f,W,(B)=>{if(L)l();if(B)b(B);else R()})})}$.exports=T,$.exports.finished=C}),J7=R$((q,$)=>{var K=o_(),{aggregateTwoErrors:_,codes:{ERR_MULTIPLE_CALLBACK:P},AbortError:O}=n8(),{Symbol:Y}=u$(),{kIsDestroyed:H,isDestroyed:v,isFinished:X,isServerRequest:Z}=LK(),k=Y("kDestroy"),G=Y("kConstruct");function S(M,j,J){if(M){if(M.stack,j&&!j.errored)j.errored=M;if(J&&!J.errored)J.errored=M}}function N(M,j){let J=this._readableState,w=this._writableState,z=w||J;if(w!==null&&w!==void 0&&w.destroyed||J!==null&&J!==void 0&&J.destroyed){if(typeof j==="function")j();return this}if(S(M,w,J),w)w.destroyed=!0;if(J)J.destroyed=!0;if(!z.constructed)this.once(k,function(T){E(this,_(T,M),j)});else E(this,M,j);return this}function E(M,j,J){let w=!1;function z(T){if(w)return;w=!0;let{_readableState:V,_writableState:C}=M;if(S(T,C,V),C)C.closed=!0;if(V)V.closed=!0;if(typeof J==="function")J(T);if(T)K.nextTick(h,M,T);else K.nextTick(D,M)}try{M._destroy(j||null,z)}catch(T){z(T)}}function h(M,j){I(M,j),D(M)}function D(M){let{_readableState:j,_writableState:J}=M;if(J)J.closeEmitted=!0;if(j)j.closeEmitted=!0;if(J!==null&&J!==void 0&&J.emitClose||j!==null&&j!==void 0&&j.emitClose)M.emit("close")}function I(M,j){let{_readableState:J,_writableState:w}=M;if(w!==null&&w!==void 0&&w.errorEmitted||J!==null&&J!==void 0&&J.errorEmitted)return;if(w)w.errorEmitted=!0;if(J)J.errorEmitted=!0;M.emit("error",j)}function g(){let M=this._readableState,j=this._writableState;if(M)M.constructed=!0,M.closed=!1,M.closeEmitted=!1,M.destroyed=!1,M.errored=null,M.errorEmitted=!1,M.reading=!1,M.ended=M.readable===!1,M.endEmitted=M.readable===!1;if(j)j.constructed=!0,j.destroyed=!1,j.closed=!1,j.closeEmitted=!1,j.errored=null,j.errorEmitted=!1,j.finalCalled=!1,j.prefinished=!1,j.ended=j.writable===!1,j.ending=j.writable===!1,j.finished=j.writable===!1}function y(M,j,J){let{_readableState:w,_writableState:z}=M;if(z!==null&&z!==void 0&&z.destroyed||w!==null&&w!==void 0&&w.destroyed)return this;if(w!==null&&w!==void 0&&w.autoDestroy||z!==null&&z!==void 0&&z.autoDestroy)M.destroy(j);else if(j){if(j.stack,z&&!z.errored)z.errored=j;if(w&&!w.errored)w.errored=j;if(J)K.nextTick(I,M,j);else I(M,j)}}function p(M,j){if(typeof M._construct!=="function")return;let{_readableState:J,_writableState:w}=M;if(J)J.constructed=!1;if(w)w.constructed=!1;if(M.once(G,j),M.listenerCount(G)>1)return;K.nextTick(m,M)}function m(M){let j=!1;function J(w){if(j){y(M,w!==null&&w!==void 0?w:new P);return}j=!0;let{_readableState:z,_writableState:T}=M,V=T||z;if(z)z.constructed=!0;if(T)T.constructed=!0;if(V.destroyed)M.emit(k,w);else if(w)y(M,w,!0);else K.nextTick(c,M)}try{M._construct((w)=>{K.nextTick(J,w)})}catch(w){K.nextTick(J,w)}}function c(M){M.emit(G)}function $q(M){return(M===null||M===void 0?void 0:M.setHeader)&&typeof M.abort==="function"}function e(M){M.emit("close")}function d(M,j){M.emit("error",j),K.nextTick(e,M)}function n(M,j){if(!M||v(M))return;if(!j&&!X(M))j=new O;if(Z(M))M.socket=null,M.destroy(j);else if($q(M))M.abort();else if($q(M.req))M.req.abort();else if(typeof M.destroy==="function")M.destroy(j);else if(typeof M.close==="function")M.close();else if(j)K.nextTick(d,M,j);else K.nextTick(e,M);if(!M.destroyed)M[H]=!0}$.exports={construct:p,destroyer:n,destroy:N,undestroy:g,errorOrDestroy:y}}),U3=R$((q,$)=>{var{ArrayIsArray:K,ObjectSetPrototypeOf:_}=u$(),{EventEmitter:P}=(nP(),M$(oP));function O(H){P.call(this,H)}_(O.prototype,P.prototype),_(O,P),O.prototype.pipe=function(H,v){let X=this;function Z(D){if(H.writable&&H.write(D)===!1&&X.pause)X.pause()}X.on("data",Z);function k(){if(X.readable&&X.resume)X.resume()}if(H.on("drain",k),!H._isStdio&&(!v||v.end!==!1))X.on("end",S),X.on("close",N);let G=!1;function S(){if(G)return;G=!0,H.end()}function N(){if(G)return;if(G=!0,typeof H.destroy==="function")H.destroy()}function E(D){if(h(),P.listenerCount(this,"error")===0)this.emit("error",D)}Y(X,"error",E),Y(H,"error",E);function h(){X.removeListener("data",Z),H.removeListener("drain",k),X.removeListener("end",S),X.removeListener("close",N),X.removeListener("error",E),H.removeListener("error",E),X.removeListener("end",h),X.removeListener("close",h),H.removeListener("close",h)}return X.on("end",h),X.on("close",h),H.on("close",h),H.emit("pipe",X),H};function Y(H,v,X){if(typeof H.prependListener==="function")return H.prependListener(v,X);if(!H._events||!H._events[v])H.on(v,X);else if(K(H._events[v]))H._events[v].unshift(X);else H._events[v]=[X,H._events[v]]}$.exports={Stream:O,prependListener:Y}}),Y5=R$((q,$)=>{var{SymbolDispose:K}=u$(),{AbortError:_,codes:P}=n8(),{isNodeStream:O,isWebStream:Y,kControllerErrorFunction:H}=LK(),v=__(),{ERR_INVALID_ARG_TYPE:X}=P,Z,k=(G,S)=>{if(typeof G!=="object"||!("aborted"in G))throw new X(S,"AbortSignal",G)};$.exports.addAbortSignal=function(S,N){if(k(S,"signal"),!O(N)&&!Y(N))throw new X("stream",["ReadableStream","WritableStream","Stream"],N);return $.exports.addAbortSignalNoValidate(S,N)},$.exports.addAbortSignalNoValidate=function(G,S){if(typeof G!=="object"||!("aborted"in G))return S;let N=O(S)?()=>{S.destroy(new _(void 0,{cause:G.reason}))}:()=>{S[H](new _(void 0,{cause:G.reason}))};if(G.aborted)N();else{Z=Z||e8().addAbortListener;let E=Z(G,N);v(S,E[K])}return S}}),Eb=R$((q,$)=>{var{StringPrototypeSlice:K,SymbolIterator:_,TypedArrayPrototypeSet:P,Uint8Array:O}=u$(),{Buffer:Y}=(T8(),M$(w8)),{inspect:H}=e8();$.exports=class{constructor(){this.head=null,this.tail=null,this.length=0}push(X){let Z={data:X,next:null};if(this.length>0)this.tail.next=Z;else this.head=Z;this.tail=Z,++this.length}unshift(X){let Z={data:X,next:this.head};if(this.length===0)this.tail=Z;this.head=Z,++this.length}shift(){if(this.length===0)return;let X=this.head.data;if(this.length===1)this.head=this.tail=null;else this.head=this.head.next;return--this.length,X}clear(){this.head=this.tail=null,this.length=0}join(X){if(this.length===0)return"";let Z=this.head,k=""+Z.data;while((Z=Z.next)!==null)k+=X+Z.data;return k}concat(X){if(this.length===0)return Y.alloc(0);let Z=Y.allocUnsafe(X>>>0),k=this.head,G=0;while(k)P(Z,k.data,G),G+=k.data.length,k=k.next;return Z}consume(X,Z){let k=this.head.data;if(X<k.length){let G=k.slice(0,X);return this.head.data=k.slice(X),G}if(X===k.length)return this.shift();return Z?this._getString(X):this._getBuffer(X)}first(){return this.head.data}*[_](){for(let X=this.head;X;X=X.next)yield X.data}_getString(X){let Z="",k=this.head,G=0;do{let S=k.data;if(X>S.length)Z+=S,X-=S.length;else{if(X===S.length)if(Z+=S,++G,k.next)this.head=k.next;else this.head=this.tail=null;else Z+=K(S,0,X),this.head=k,k.data=K(S,X);break}++G}while((k=k.next)!==null);return this.length-=G,Z}_getBuffer(X){let Z=Y.allocUnsafe(X),k=X,G=this.head,S=0;do{let N=G.data;if(X>N.length)P(Z,N,k-X),X-=N.length;else{if(X===N.length)if(P(Z,N,k-X),++S,G.next)this.head=G.next;else this.head=this.tail=null;else P(Z,new O(N.buffer,N.byteOffset,X),k-X),this.head=G,G.data=N.slice(X);break}++S}while((G=G.next)!==null);return this.length-=S,Z}[Symbol.for("nodejs.util.inspect.custom")](X,Z){return H(this,{...Z,depth:0,customInspect:!1})}}}),j5=R$((q,$)=>{var{MathFloor:K,NumberIsInteger:_}=u$(),{validateInteger:P}=BP(),{ERR_INVALID_ARG_VALUE:O}=n8().codes,Y=16384,H=16;function v(G,S,N){return G.highWaterMark!=null?G.highWaterMark:S?G[N]:null}function X(G){return G?H:Y}function Z(G,S){if(P(S,"value",0),G)H=S;else Y=S}function k(G,S,N,E){let h=v(S,E,N);if(h!=null){if(!_(h)||h<0){let D=E?`options.${N}`:"options.highWaterMark";throw new O(D,h)}return K(h)}return X(G.objectMode)}$.exports={getHighWaterMark:k,getDefaultHighWaterMark:X,setDefaultHighWaterMark:Z}}),Rb=R$((q,$)=>{/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var K=(T8(),M$(w8)),_=K.Buffer;function P(Y,H){for(var v in Y)H[v]=Y[v]}if(_.from&&_.alloc&&_.allocUnsafe&&_.allocUnsafeSlow)$.exports=K;else P(K,q),q.Buffer=O;function O(Y,H,v){return _(Y,H,v)}O.prototype=Object.create(_.prototype),P(_,O),O.from=function(Y,H,v){if(typeof Y==="number")throw TypeError("Argument must not be a number");return _(Y,H,v)},O.alloc=function(Y,H,v){if(typeof Y!=="number")throw TypeError("Argument must be a number");var X=_(Y);if(H!==void 0)if(typeof v==="string")X.fill(H,v);else X.fill(H);else X.fill(0);return X},O.allocUnsafe=function(Y){if(typeof Y!=="number")throw TypeError("Argument must be a number");return _(Y)},O.allocUnsafeSlow=function(Y){if(typeof Y!=="number")throw TypeError("Argument must be a number");return K.SlowBuffer(Y)}}),hb=R$((q)=>{var $=Rb().Buffer,K=$.isEncoding||function(I){switch(I=""+I,I&&I.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function _(I){if(!I)return"utf8";var g;while(!0)switch(I){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return I;default:if(g)return;I=(""+I).toLowerCase(),g=!0}}function P(I){var g=_(I);if(typeof g!=="string"&&($.isEncoding===K||!K(I)))throw Error("Unknown encoding: "+I);return g||I}q.StringDecoder=O;function O(I){this.encoding=P(I);var g;switch(this.encoding){case"utf16le":this.text=G,this.end=S,g=4;break;case"utf8":this.fillLast=X,g=4;break;case"base64":this.text=N,this.end=E,g=3;break;default:this.write=h,this.end=D;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=$.allocUnsafe(g)}O.prototype.write=function(I){if(I.length===0)return"";var g,y;if(this.lastNeed){if(g=this.fillLast(I),g===void 0)return"";y=this.lastNeed,this.lastNeed=0}else y=0;if(y<I.length)return g?g+this.text(I,y):this.text(I,y);return g||""},O.prototype.end=k,O.prototype.text=Z,O.prototype.fillLast=function(I){if(this.lastNeed<=I.length)return I.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);I.copy(this.lastChar,this.lastTotal-this.lastNeed,0,I.length),this.lastNeed-=I.length};function Y(I){if(I<=127)return 0;else if(I>>5===6)return 2;else if(I>>4===14)return 3;else if(I>>3===30)return 4;return I>>6===2?-1:-2}function H(I,g,y){var p=g.length-1;if(p<y)return 0;var m=Y(g[p]);if(m>=0){if(m>0)I.lastNeed=m-1;return m}if(--p<y||m===-2)return 0;if(m=Y(g[p]),m>=0){if(m>0)I.lastNeed=m-2;return m}if(--p<y||m===-2)return 0;if(m=Y(g[p]),m>=0){if(m>0)if(m===2)m=0;else I.lastNeed=m-3;return m}return 0}function v(I,g,y){if((g[0]&192)!==128)return I.lastNeed=0,"";if(I.lastNeed>1&&g.length>1){if((g[1]&192)!==128)return I.lastNeed=1,"";if(I.lastNeed>2&&g.length>2){if((g[2]&192)!==128)return I.lastNeed=2,""}}}function X(I){var g=this.lastTotal-this.lastNeed,y=v(this,I,g);if(y!==void 0)return y;if(this.lastNeed<=I.length)return I.copy(this.lastChar,g,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);I.copy(this.lastChar,g,0,I.length),this.lastNeed-=I.length}function Z(I,g){var y=H(this,I,g);if(!this.lastNeed)return I.toString("utf8",g);this.lastTotal=y;var p=I.length-(y-this.lastNeed);return I.copy(this.lastChar,0,p),I.toString("utf8",g,p)}function k(I){var g=I&&I.length?this.write(I):"";if(this.lastNeed)return g+"";return g}function G(I,g){if((I.length-g)%2===0){var y=I.toString("utf16le",g);if(y){var p=y.charCodeAt(y.length-1);if(p>=55296&&p<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=I[I.length-2],this.lastChar[1]=I[I.length-1],y.slice(0,-1)}return y}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=I[I.length-1],I.toString("utf16le",g,I.length-1)}function S(I){var g=I&&I.length?this.write(I):"";if(this.lastNeed){var y=this.lastTotal-this.lastNeed;return g+this.lastChar.toString("utf16le",0,y)}return g}function N(I,g){var y=(I.length-g)%3;if(y===0)return I.toString("base64",g);if(this.lastNeed=3-y,this.lastTotal=3,y===1)this.lastChar[0]=I[I.length-1];else this.lastChar[0]=I[I.length-2],this.lastChar[1]=I[I.length-1];return I.toString("base64",g,I.length-y)}function E(I){var g=I&&I.length?this.write(I):"";if(this.lastNeed)return g+this.lastChar.toString("base64",0,3-this.lastNeed);return g}function h(I){return I.toString(this.encoding)}function D(I){return I&&I.length?this.write(I):""}}),Wf=R$((q,$)=>{var K=o_(),{PromisePrototypeThen:_,SymbolAsyncIterator:P,SymbolIterator:O}=u$(),{Buffer:Y}=(T8(),M$(w8)),{ERR_INVALID_ARG_TYPE:H,ERR_STREAM_NULL_VALUES:v}=n8().codes;function X(Z,k,G){let S;if(typeof k==="string"||k instanceof Y)return new Z({objectMode:!0,...G,read(){this.push(k),this.push(null)}});let N;if(k&&k[P])N=!0,S=k[P]();else if(k&&k[O])N=!1,S=k[O]();else throw new H("iterable",["Iterable"],k);let E=new Z({objectMode:!0,highWaterMark:1,...G}),h=!1;E._read=function(){if(!h)h=!0,I()},E._destroy=function(g,y){_(D(g),()=>K.nextTick(y,g),(p)=>K.nextTick(y,p||g))};async function D(g){let y=g!==void 0&&g!==null,p=typeof S.throw==="function";if(y&&p){let{value:m,done:c}=await S.throw(g);if(await m,c)return}if(typeof S.return==="function"){let{value:m}=await S.return();await m}}async function I(){for(;;){try{let{value:g,done:y}=N?await S.next():S.next();if(y)E.push(null);else{let p=g&&typeof g.then==="function"?await g:g;if(p===null)throw h=!1,new v;else if(E.push(p))continue;else h=!1}}catch(g){E.destroy(g)}break}}return E}$.exports=X}),O5=R$((q,$)=>{var K=o_(),{ArrayPrototypeIndexOf:_,NumberIsInteger:P,NumberIsNaN:O,NumberParseInt:Y,ObjectDefineProperties:H,ObjectKeys:v,ObjectSetPrototypeOf:X,Promise:Z,SafeSet:k,SymbolAsyncDispose:G,SymbolAsyncIterator:S,Symbol:N}=u$();$.exports=Tq,Tq.ReadableState=_q;var{EventEmitter:E}=(nP(),M$(oP)),{Stream:h,prependListener:D}=U3(),{Buffer:I}=(T8(),M$(w8)),{addAbortSignal:g}=Y5(),y=__(),p=e8().debuglog("stream",(x)=>{p=x}),m=Eb(),c=J7(),{getHighWaterMark:$q,getDefaultHighWaterMark:e}=j5(),{aggregateTwoErrors:d,codes:{ERR_INVALID_ARG_TYPE:n,ERR_METHOD_NOT_IMPLEMENTED:M,ERR_OUT_OF_RANGE:j,ERR_STREAM_PUSH_AFTER_EOF:J,ERR_STREAM_UNSHIFT_AFTER_END_EVENT:w},AbortError:z}=n8(),{validateObject:T}=BP(),V=N("kPaused"),{StringDecoder:C}=hb(),f=Wf();X(Tq.prototype,h.prototype),X(Tq,h);var W=()=>{},{errorOrDestroy:A}=c,L=1,R=2,b=4,l=8,B=16,t=32,Wq=64,r=128,i=256,gq=512,jq=1024,Oq=2048,Q=4096,o=8192,U=16384,yq=32768,qq=65536,s=131072,a=262144;function F(x){return{enumerable:!1,get(){return(this.state&x)!==0},set(u){if(u)this.state|=x;else this.state&=~x}}}H(_q.prototype,{objectMode:F(L),ended:F(R),endEmitted:F(b),reading:F(l),constructed:F(B),sync:F(t),needReadable:F(Wq),emittedReadable:F(r),readableListening:F(i),resumeScheduled:F(gq),errorEmitted:F(jq),emitClose:F(Oq),autoDestroy:F(Q),destroyed:F(o),closed:F(U),closeEmitted:F(yq),multiAwaitDrain:F(qq),readingMore:F(s),dataEmitted:F(a)});function _q(x,u,pq){if(typeof pq!=="boolean")pq=u instanceof IK();if(this.state=Oq|Q|B|t,x&&x.objectMode)this.state|=L;if(pq&&x&&x.readableObjectMode)this.state|=L;if(this.highWaterMark=x?$q(this,x,"readableHighWaterMark",pq):e(!1),this.buffer=new m,this.length=0,this.pipes=[],this.flowing=null,this[V]=null,x&&x.emitClose===!1)this.state&=~Oq;if(x&&x.autoDestroy===!1)this.state&=~Q;if(this.errored=null,this.defaultEncoding=x&&x.defaultEncoding||"utf8",this.awaitDrainWriters=null,this.decoder=null,this.encoding=null,x&&x.encoding)this.decoder=new C(x.encoding),this.encoding=x.encoding}function Tq(x){if(!(this instanceof Tq))return new Tq(x);let u=this instanceof IK();if(this._readableState=new _q(x,this,u),x){if(typeof x.read==="function")this._read=x.read;if(typeof x.destroy==="function")this._destroy=x.destroy;if(typeof x.construct==="function")this._construct=x.construct;if(x.signal&&!u)g(x.signal,this)}h.call(this,x),c.construct(this,()=>{if(this._readableState.needReadable)o$(this,this._readableState)})}Tq.prototype.destroy=c.destroy,Tq.prototype._undestroy=c.undestroy,Tq.prototype._destroy=function(x,u){u(x)},Tq.prototype[E.captureRejectionSymbol]=function(x){this.destroy(x)},Tq.prototype[G]=function(){let x;if(!this.destroyed)x=this.readableEnded?null:new z,this.destroy(x);return new Z((u,pq)=>y(this,(Kq)=>Kq&&Kq!==x?pq(Kq):u(null)))},Tq.prototype.push=function(x,u){return Yq(this,x,u,!1)},Tq.prototype.unshift=function(x,u){return Yq(this,x,u,!0)};function Yq(x,u,pq,Kq){p("readableAddChunk",u);let Pq=x._readableState,E$;if((Pq.state&L)===0){if(typeof u==="string"){if(pq=pq||Pq.defaultEncoding,Pq.encoding!==pq)if(Kq&&Pq.encoding)u=I.from(u,pq).toString(Pq.encoding);else u=I.from(u,pq),pq=""}else if(u instanceof I)pq="";else if(h._isUint8Array(u))u=h._uint8ArrayToBuffer(u),pq="";else if(u!=null)E$=new n("chunk",["string","Buffer","Uint8Array"],u)}if(E$)A(x,E$);else if(u===null)Pq.state&=~l,N$(x,Pq);else if((Pq.state&L)!==0||u&&u.length>0)if(Kq)if((Pq.state&b)!==0)A(x,new w);else if(Pq.destroyed||Pq.errored)return!1;else Jq(x,Pq,u,!0);else if(Pq.ended)A(x,new J);else if(Pq.destroyed||Pq.errored)return!1;else if(Pq.state&=~l,Pq.decoder&&!pq)if(u=Pq.decoder.write(u),Pq.objectMode||u.length!==0)Jq(x,Pq,u,!1);else o$(x,Pq);else Jq(x,Pq,u,!1);else if(!Kq)Pq.state&=~l,o$(x,Pq);return!Pq.ended&&(Pq.length<Pq.highWaterMark||Pq.length===0)}function Jq(x,u,pq,Kq){if(u.flowing&&u.length===0&&!u.sync&&x.listenerCount("data")>0){if((u.state&qq)!==0)u.awaitDrainWriters.clear();else u.awaitDrainWriters=null;u.dataEmitted=!0,x.emit("data",pq)}else{if(u.length+=u.objectMode?1:pq.length,Kq)u.buffer.unshift(pq);else u.buffer.push(pq);if((u.state&Wq)!==0)vq(x)}o$(x,u)}Tq.prototype.isPaused=function(){let x=this._readableState;return x[V]===!0||x.flowing===!1},Tq.prototype.setEncoding=function(x){let u=new C(x);this._readableState.decoder=u,this._readableState.encoding=this._readableState.decoder.encoding;let pq=this._readableState.buffer,Kq="";for(let Pq of pq)Kq+=u.write(Pq);if(pq.clear(),Kq!=="")pq.push(Kq);return this._readableState.length=Kq.length,this};var z$=1073741824;function Hq(x){if(x>z$)throw new j("size","<= 1GiB",x);else x--,x|=x>>>1,x|=x>>>2,x|=x>>>4,x|=x>>>8,x|=x>>>16,x++;return x}function Xq(x,u){if(x<=0||u.length===0&&u.ended)return 0;if((u.state&L)!==0)return 1;if(O(x)){if(u.flowing&&u.length)return u.buffer.first().length;return u.length}if(x<=u.length)return x;return u.ended?u.length:0}Tq.prototype.read=function(x){if(p("read",x),x===void 0)x=NaN;else if(!P(x))x=Y(x,10);let u=this._readableState,pq=x;if(x>u.highWaterMark)u.highWaterMark=Hq(x);if(x!==0)u.state&=~r;if(x===0&&u.needReadable&&((u.highWaterMark!==0?u.length>=u.highWaterMark:u.length>0)||u.ended)){if(p("read: emitReadable",u.length,u.ended),u.length===0&&u.ended)Gq(this);else vq(this);return null}if(x=Xq(x,u),x===0&&u.ended){if(u.length===0)Gq(this);return null}let Kq=(u.state&Wq)!==0;if(p("need readable",Kq),u.length===0||u.length-x<u.highWaterMark)Kq=!0,p("length less than watermark",Kq);if(u.ended||u.reading||u.destroyed||u.errored||!u.constructed)Kq=!1,p("reading, ended or constructing",Kq);else if(Kq){if(p("do read"),u.state|=l|t,u.length===0)u.state|=Wq;try{this._read(u.highWaterMark)}catch(E$){A(this,E$)}if(u.state&=~t,!u.reading)x=Xq(pq,u)}let Pq;if(x>0)Pq=Nq(x,u);else Pq=null;if(Pq===null)u.needReadable=u.length<=u.highWaterMark,x=0;else if(u.length-=x,u.multiAwaitDrain)u.awaitDrainWriters.clear();else u.awaitDrainWriters=null;if(u.length===0){if(!u.ended)u.needReadable=!0;if(pq!==x&&u.ended)Gq(this)}if(Pq!==null&&!u.errorEmitted&&!u.closeEmitted)u.dataEmitted=!0,this.emit("data",Pq);return Pq};function N$(x,u){if(p("onEofChunk"),u.ended)return;if(u.decoder){let pq=u.decoder.end();if(pq&&pq.length)u.buffer.push(pq),u.length+=u.objectMode?1:pq.length}if(u.ended=!0,u.sync)vq(x);else u.needReadable=!1,u.emittedReadable=!0,kq(x)}function vq(x){let u=x._readableState;if(p("emitReadable",u.needReadable,u.emittedReadable),u.needReadable=!1,!u.emittedReadable)p("emitReadable",u.flowing),u.emittedReadable=!0,K.nextTick(kq,x)}function kq(x){let u=x._readableState;if(p("emitReadable_",u.destroyed,u.length,u.ended),!u.destroyed&&!u.errored&&(u.length||u.ended))x.emit("readable"),u.emittedReadable=!1;u.needReadable=!u.flowing&&!u.ended&&u.length<=u.highWaterMark,Sq(x)}function o$(x,u){if(!u.readingMore&&u.constructed)u.readingMore=!0,K.nextTick(fq,x,u)}function fq(x,u){while(!u.reading&&!u.ended&&(u.length<u.highWaterMark||u.flowing&&u.length===0)){let pq=u.length;if(p("maybeReadMore read 0"),x.read(0),pq===u.length)break}u.readingMore=!1}Tq.prototype._read=function(x){throw new M("_read()")},Tq.prototype.pipe=function(x,u){let pq=this,Kq=this._readableState;if(Kq.pipes.length===1){if(!Kq.multiAwaitDrain)Kq.multiAwaitDrain=!0,Kq.awaitDrainWriters=new k(Kq.awaitDrainWriters?[Kq.awaitDrainWriters]:[])}Kq.pipes.push(x),p("pipe count=%d opts=%j",Kq.pipes.length,u);let Pq=(!u||u.end!==!1)&&x!==K.stdout&&x!==K.stderr?wq:J$;if(Kq.endEmitted)K.nextTick(Pq);else pq.once("end",Pq);x.on("unpipe",E$);function E$(O$,h$){if(p("onunpipe"),O$===pq){if(h$&&h$.hasUnpiped===!1)h$.hasUnpiped=!0,Lq()}}function wq(){p("onend"),x.end()}let Aq,A8=!1;function Lq(){if(p("cleanup"),x.removeListener("close",Mq),x.removeListener("finish",m$),Aq)x.removeListener("drain",Aq);if(x.removeListener("error",Vq),x.removeListener("unpipe",E$),pq.removeListener("end",wq),pq.removeListener("end",J$),pq.removeListener("data",k8),A8=!0,Aq&&Kq.awaitDrainWriters&&(!x._writableState||x._writableState.needDrain))Aq()}function Eq(){if(!A8){if(Kq.pipes.length===1&&Kq.pipes[0]===x)p("false write response, pause",0),Kq.awaitDrainWriters=x,Kq.multiAwaitDrain=!1;else if(Kq.pipes.length>1&&Kq.pipes.includes(x))p("false write response, pause",Kq.awaitDrainWriters.size),Kq.awaitDrainWriters.add(x);pq.pause()}if(!Aq)Aq=Rq(pq,x),x.on("drain",Aq)}pq.on("data",k8);function k8(O$){p("ondata");let h$=x.write(O$);if(p("dest.write",h$),h$===!1)Eq()}function Vq(O$){if(p("onerror",O$),J$(),x.removeListener("error",Vq),x.listenerCount("error")===0){let h$=x._writableState||x._readableState;if(h$&&!h$.errorEmitted)A(x,O$);else x.emit("error",O$)}}D(x,"error",Vq);function Mq(){x.removeListener("finish",m$),J$()}x.once("close",Mq);function m$(){p("onfinish"),x.removeListener("close",Mq),J$()}x.once("finish",m$);function J$(){p("unpipe"),pq.unpipe(x)}if(x.emit("pipe",pq),x.writableNeedDrain===!0)Eq();else if(!Kq.flowing)p("pipe resume"),pq.resume();return x};function Rq(x,u){return function(){let Kq=x._readableState;if(Kq.awaitDrainWriters===u)p("pipeOnDrain",1),Kq.awaitDrainWriters=null;else if(Kq.multiAwaitDrain)p("pipeOnDrain",Kq.awaitDrainWriters.size),Kq.awaitDrainWriters.delete(u);if((!Kq.awaitDrainWriters||Kq.awaitDrainWriters.size===0)&&x.listenerCount("data"))x.resume()}}Tq.prototype.unpipe=function(x){let u=this._readableState,pq={hasUnpiped:!1};if(u.pipes.length===0)return this;if(!x){let Pq=u.pipes;u.pipes=[],this.pause();for(let E$=0;E$<Pq.length;E$++)Pq[E$].emit("unpipe",this,{hasUnpiped:!1});return this}let Kq=_(u.pipes,x);if(Kq===-1)return this;if(u.pipes.splice(Kq,1),u.pipes.length===0)this.pause();return x.emit("unpipe",this,pq),this},Tq.prototype.on=function(x,u){let pq=h.prototype.on.call(this,x,u),Kq=this._readableState;if(x==="data"){if(Kq.readableListening=this.listenerCount("readable")>0,Kq.flowing!==!1)this.resume()}else if(x==="readable"){if(!Kq.endEmitted&&!Kq.readableListening){if(Kq.readableListening=Kq.needReadable=!0,Kq.flowing=!1,Kq.emittedReadable=!1,p("on readable",Kq.length,Kq.reading),Kq.length)vq(this);else if(!Kq.reading)K.nextTick(hq,this)}}return pq},Tq.prototype.addListener=Tq.prototype.on,Tq.prototype.removeListener=function(x,u){let pq=h.prototype.removeListener.call(this,x,u);if(x==="readable")K.nextTick(X8,this);return pq},Tq.prototype.off=Tq.prototype.removeListener,Tq.prototype.removeAllListeners=function(x){let u=h.prototype.removeAllListeners.apply(this,arguments);if(x==="readable"||x===void 0)K.nextTick(X8,this);return u};function X8(x){let u=x._readableState;if(u.readableListening=x.listenerCount("readable")>0,u.resumeScheduled&&u[V]===!1)u.flowing=!0;else if(x.listenerCount("data")>0)x.resume();else if(!u.readableListening)u.flowing=null}function hq(x){p("readable nexttick read 0"),x.read(0)}Tq.prototype.resume=function(){let x=this._readableState;if(!x.flowing)p("resume"),x.flowing=!x.readableListening,Dq(this,x);return x[V]=!1,this};function Dq(x,u){if(!u.resumeScheduled)u.resumeScheduled=!0,K.nextTick(h8,x,u)}function h8(x,u){if(p("resume",u.reading),!u.reading)x.read(0);if(u.resumeScheduled=!1,x.emit("resume"),Sq(x),u.flowing&&!u.reading)x.read(0)}Tq.prototype.pause=function(){if(p("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1)p("pause"),this._readableState.flowing=!1,this.emit("pause");return this._readableState[V]=!0,this};function Sq(x){let u=x._readableState;p("flow",u.flowing);while(u.flowing&&x.read()!==null);}Tq.prototype.wrap=function(x){let u=!1;x.on("data",(Kq)=>{if(!this.push(Kq)&&x.pause)u=!0,x.pause()}),x.on("end",()=>{this.push(null)}),x.on("error",(Kq)=>{A(this,Kq)}),x.on("close",()=>{this.destroy()}),x.on("destroy",()=>{this.destroy()}),this._read=()=>{if(u&&x.resume)u=!1,x.resume()};let pq=v(x);for(let Kq=1;Kq<pq.length;Kq++){let Pq=pq[Kq];if(this[Pq]===void 0&&typeof x[Pq]==="function")this[Pq]=x[Pq].bind(x)}return this},Tq.prototype[S]=function(){return Cq(this)},Tq.prototype.iterator=function(x){if(x!==void 0)T(x,"options");return Cq(this,x)};function Cq(x,u){if(typeof x.read!=="function")x=Tq.wrap(x,{objectMode:!0});let pq=D8(x,u);return pq.stream=x,pq}async function*D8(x,u){let pq=W;function Kq(wq){if(this===x)pq(),pq=W;else pq=wq}x.on("readable",Kq);let Pq,E$=y(x,{writable:!1},(wq)=>{Pq=wq?d(Pq,wq):null,pq(),pq=W});try{while(!0){let wq=x.destroyed?null:x.read();if(wq!==null)yield wq;else if(Pq)throw Pq;else if(Pq===null)return;else await new Z(Kq)}}catch(wq){throw Pq=d(Pq,wq),Pq}finally{if((Pq||(u===null||u===void 0?void 0:u.destroyOnReturn)!==!1)&&(Pq===void 0||x._readableState.autoDestroy))c.destroyer(x,null);else x.off("readable",Kq),E$()}}H(Tq.prototype,{readable:{__proto__:null,get(){let x=this._readableState;return!!x&&x.readable!==!1&&!x.destroyed&&!x.errorEmitted&&!x.endEmitted},set(x){if(this._readableState)this._readableState.readable=!!x}},readableDidRead:{__proto__:null,enumerable:!1,get:function(){return this._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._readableState.readable!==!1&&(this._readableState.destroyed||this._readableState.errored)&&!this._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:!1,get:function(){return this._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:!1,get:function(){return this._readableState.flowing},set:function(x){if(this._readableState)this._readableState.flowing=x}},readableLength:{__proto__:null,enumerable:!1,get(){return this._readableState.length}},readableObjectMode:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.objectMode:!1}},readableEncoding:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.encoding:null}},errored:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.errored:null}},closed:{__proto__:null,get(){return this._readableState?this._readableState.closed:!1}},destroyed:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.destroyed:!1},set(x){if(!this._readableState)return;this._readableState.destroyed=x}},readableEnded:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.endEmitted:!1}}}),H(_q.prototype,{pipesCount:{__proto__:null,get(){return this.pipes.length}},paused:{__proto__:null,get(){return this[V]!==!1},set(x){this[V]=!!x}}}),Tq._fromList=Nq;function Nq(x,u){if(u.length===0)return null;let pq;if(u.objectMode)pq=u.buffer.shift();else if(!x||x>=u.length){if(u.decoder)pq=u.buffer.join("");else if(u.buffer.length===1)pq=u.buffer.first();else pq=u.buffer.concat(u.length);u.buffer.clear()}else pq=u.buffer.consume(x,u.decoder);return pq}function Gq(x){let u=x._readableState;if(p("endReadable",u.endEmitted),!u.endEmitted)u.ended=!0,K.nextTick(I8,u,x)}function I8(x,u){if(p("endReadableNT",x.endEmitted,x.length),!x.errored&&!x.closeEmitted&&!x.endEmitted&&x.length===0){if(x.endEmitted=!0,u.emit("end"),u.writable&&u.allowHalfOpen===!1)K.nextTick(Iq,u);else if(x.autoDestroy){let pq=u._writableState;if(!pq||pq.autoDestroy&&(pq.finished||pq.writable===!1))u.destroy()}}}function Iq(x){if(x.writable&&!x.writableEnded&&!x.destroyed)x.end()}Tq.from=function(x,u){return f(Tq,x,u)};var Zq;function f8(){if(Zq===void 0)Zq={};return Zq}Tq.fromWeb=function(x,u){return f8().newStreamReadableFromReadableStream(x,u)},Tq.toWeb=function(x,u){return f8().newReadableStreamFromStreamReadable(x,u)},Tq.wrap=function(x,u){var pq,Kq;return new Tq({objectMode:(pq=(Kq=x.readableObjectMode)!==null&&Kq!==void 0?Kq:x.objectMode)!==null&&pq!==void 0?pq:!0,...u,destroy(Pq,E$){c.destroyer(x,Pq),E$(Pq)}}).wrap(x)}}),F3=R$((q,$)=>{var K=o_(),{ArrayPrototypeSlice:_,Error:P,FunctionPrototypeSymbolHasInstance:O,ObjectDefineProperty:Y,ObjectDefineProperties:H,ObjectSetPrototypeOf:v,StringPrototypeToLowerCase:X,Symbol:Z,SymbolHasInstance:k}=u$();$.exports=T,T.WritableState=w;var{EventEmitter:G}=(nP(),M$(oP)),S=U3().Stream,{Buffer:N}=(T8(),M$(w8)),E=J7(),{addAbortSignal:h}=Y5(),{getHighWaterMark:D,getDefaultHighWaterMark:I}=j5(),{ERR_INVALID_ARG_TYPE:g,ERR_METHOD_NOT_IMPLEMENTED:y,ERR_MULTIPLE_CALLBACK:p,ERR_STREAM_CANNOT_PIPE:m,ERR_STREAM_DESTROYED:c,ERR_STREAM_ALREADY_FINISHED:$q,ERR_STREAM_NULL_VALUES:e,ERR_STREAM_WRITE_AFTER_END:d,ERR_UNKNOWN_ENCODING:n}=n8().codes,{errorOrDestroy:M}=E;v(T.prototype,S.prototype),v(T,S);function j(){}var J=Z("kOnFinished");function w(Q,o,U){if(typeof U!=="boolean")U=o instanceof IK();if(this.objectMode=!!(Q&&Q.objectMode),U)this.objectMode=this.objectMode||!!(Q&&Q.writableObjectMode);this.highWaterMark=Q?D(this,Q,"writableHighWaterMark",U):I(!1),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;let yq=!!(Q&&Q.decodeStrings===!1);this.decodeStrings=!yq,this.defaultEncoding=Q&&Q.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=A.bind(void 0,o),this.writecb=null,this.writelen=0,this.afterWriteTickInfo=null,z(this),this.pendingcb=0,this.constructed=!0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!Q||Q.emitClose!==!1,this.autoDestroy=!Q||Q.autoDestroy!==!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this[J]=[]}function z(Q){Q.buffered=[],Q.bufferedIndex=0,Q.allBuffers=!0,Q.allNoop=!0}w.prototype.getBuffer=function(){return _(this.buffered,this.bufferedIndex)},Y(w.prototype,"bufferedRequestCount",{__proto__:null,get(){return this.buffered.length-this.bufferedIndex}});function T(Q){let o=this instanceof IK();if(!o&&!O(T,this))return new T(Q);if(this._writableState=new w(Q,this,o),Q){if(typeof Q.write==="function")this._write=Q.write;if(typeof Q.writev==="function")this._writev=Q.writev;if(typeof Q.destroy==="function")this._destroy=Q.destroy;if(typeof Q.final==="function")this._final=Q.final;if(typeof Q.construct==="function")this._construct=Q.construct;if(Q.signal)h(Q.signal,this)}S.call(this,Q),E.construct(this,()=>{let U=this._writableState;if(!U.writing)l(this,U);r(this,U)})}Y(T,k,{__proto__:null,value:function(Q){if(O(this,Q))return!0;if(this!==T)return!1;return Q&&Q._writableState instanceof w}}),T.prototype.pipe=function(){M(this,new m)};function V(Q,o,U,yq){let qq=Q._writableState;if(typeof U==="function")yq=U,U=qq.defaultEncoding;else{if(!U)U=qq.defaultEncoding;else if(U!=="buffer"&&!N.isEncoding(U))throw new n(U);if(typeof yq!=="function")yq=j}if(o===null)throw new e;else if(!qq.objectMode)if(typeof o==="string"){if(qq.decodeStrings!==!1)o=N.from(o,U),U="buffer"}else if(o instanceof N)U="buffer";else if(S._isUint8Array(o))o=S._uint8ArrayToBuffer(o),U="buffer";else throw new g("chunk",["string","Buffer","Uint8Array"],o);let s;if(qq.ending)s=new d;else if(qq.destroyed)s=new c("write");if(s)return K.nextTick(yq,s),M(Q,s,!0),s;return qq.pendingcb++,C(Q,qq,o,U,yq)}T.prototype.write=function(Q,o,U){return V(this,Q,o,U)===!0},T.prototype.cork=function(){this._writableState.corked++},T.prototype.uncork=function(){let Q=this._writableState;if(Q.corked){if(Q.corked--,!Q.writing)l(this,Q)}},T.prototype.setDefaultEncoding=function(o){if(typeof o==="string")o=X(o);if(!N.isEncoding(o))throw new n(o);return this._writableState.defaultEncoding=o,this};function C(Q,o,U,yq,qq){let s=o.objectMode?1:U.length;o.length+=s;let a=o.length<o.highWaterMark;if(!a)o.needDrain=!0;if(o.writing||o.corked||o.errored||!o.constructed){if(o.buffered.push({chunk:U,encoding:yq,callback:qq}),o.allBuffers&&yq!=="buffer")o.allBuffers=!1;if(o.allNoop&&qq!==j)o.allNoop=!1}else o.writelen=s,o.writecb=qq,o.writing=!0,o.sync=!0,Q._write(U,yq,o.onwrite),o.sync=!1;return a&&!o.errored&&!o.destroyed}function f(Q,o,U,yq,qq,s,a){if(o.writelen=yq,o.writecb=a,o.writing=!0,o.sync=!0,o.destroyed)o.onwrite(new c("write"));else if(U)Q._writev(qq,o.onwrite);else Q._write(qq,s,o.onwrite);o.sync=!1}function W(Q,o,U,yq){--o.pendingcb,yq(U),b(o),M(Q,U)}function A(Q,o){let U=Q._writableState,yq=U.sync,qq=U.writecb;if(typeof qq!=="function"){M(Q,new p);return}if(U.writing=!1,U.writecb=null,U.length-=U.writelen,U.writelen=0,o){if(o.stack,!U.errored)U.errored=o;if(Q._readableState&&!Q._readableState.errored)Q._readableState.errored=o;if(yq)K.nextTick(W,Q,U,o,qq);else W(Q,U,o,qq)}else{if(U.buffered.length>U.bufferedIndex)l(Q,U);if(yq)if(U.afterWriteTickInfo!==null&&U.afterWriteTickInfo.cb===qq)U.afterWriteTickInfo.count++;else U.afterWriteTickInfo={count:1,cb:qq,stream:Q,state:U},K.nextTick(L,U.afterWriteTickInfo);else R(Q,U,1,qq)}}function L({stream:Q,state:o,count:U,cb:yq}){return o.afterWriteTickInfo=null,R(Q,o,U,yq)}function R(Q,o,U,yq){if(!o.ending&&!Q.destroyed&&o.length===0&&o.needDrain)o.needDrain=!1,Q.emit("drain");while(U-- >0)o.pendingcb--,yq();if(o.destroyed)b(o);r(Q,o)}function b(Q){if(Q.writing)return;for(let qq=Q.bufferedIndex;qq<Q.buffered.length;++qq){var o;let{chunk:s,callback:a}=Q.buffered[qq],F=Q.objectMode?1:s.length;Q.length-=F,a((o=Q.errored)!==null&&o!==void 0?o:new c("write"))}let U=Q[J].splice(0);for(let qq=0;qq<U.length;qq++){var yq;U[qq]((yq=Q.errored)!==null&&yq!==void 0?yq:new c("end"))}z(Q)}function l(Q,o){if(o.corked||o.bufferProcessing||o.destroyed||!o.constructed)return;let{buffered:U,bufferedIndex:yq,objectMode:qq}=o,s=U.length-yq;if(!s)return;let a=yq;if(o.bufferProcessing=!0,s>1&&Q._writev){o.pendingcb-=s-1;let F=o.allNoop?j:(Tq)=>{for(let Yq=a;Yq<U.length;++Yq)U[Yq].callback(Tq)},_q=o.allNoop&&a===0?U:_(U,a);_q.allBuffers=o.allBuffers,f(Q,o,!0,o.length,_q,"",F),z(o)}else{do{let{chunk:F,encoding:_q,callback:Tq}=U[a];U[a++]=null;let Yq=qq?1:F.length;f(Q,o,!1,Yq,F,_q,Tq)}while(a<U.length&&!o.writing);if(a===U.length)z(o);else if(a>256)U.splice(0,a),o.bufferedIndex=0;else o.bufferedIndex=a}o.bufferProcessing=!1}T.prototype._write=function(Q,o,U){if(this._writev)this._writev([{chunk:Q,encoding:o}],U);else throw new y("_write()")},T.prototype._writev=null,T.prototype.end=function(Q,o,U){let yq=this._writableState;if(typeof Q==="function")U=Q,Q=null,o=null;else if(typeof o==="function")U=o,o=null;let qq;if(Q!==null&&Q!==void 0){let s=V(this,Q,o);if(s instanceof P)qq=s}if(yq.corked)yq.corked=1,this.uncork();if(qq);else if(!yq.errored&&!yq.ending)yq.ending=!0,r(this,yq,!0),yq.ended=!0;else if(yq.finished)qq=new $q("end");else if(yq.destroyed)qq=new c("end");if(typeof U==="function")if(qq||yq.finished)K.nextTick(U,qq);else yq[J].push(U);return this};function B(Q){return Q.ending&&!Q.destroyed&&Q.constructed&&Q.length===0&&!Q.errored&&Q.buffered.length===0&&!Q.finished&&!Q.writing&&!Q.errorEmitted&&!Q.closeEmitted}function t(Q,o){let U=!1;function yq(qq){if(U){M(Q,qq!==null&&qq!==void 0?qq:p());return}if(U=!0,o.pendingcb--,qq){let s=o[J].splice(0);for(let a=0;a<s.length;a++)s[a](qq);M(Q,qq,o.sync)}else if(B(o))o.prefinished=!0,Q.emit("prefinish"),o.pendingcb++,K.nextTick(i,Q,o)}o.sync=!0,o.pendingcb++;try{Q._final(yq)}catch(qq){yq(qq)}o.sync=!1}function Wq(Q,o){if(!o.prefinished&&!o.finalCalled)if(typeof Q._final==="function"&&!o.destroyed)o.finalCalled=!0,t(Q,o);else o.prefinished=!0,Q.emit("prefinish")}function r(Q,o,U){if(B(o)){if(Wq(Q,o),o.pendingcb===0){if(U)o.pendingcb++,K.nextTick((yq,qq)=>{if(B(qq))i(yq,qq);else qq.pendingcb--},Q,o);else if(B(o))o.pendingcb++,i(Q,o)}}}function i(Q,o){o.pendingcb--,o.finished=!0;let U=o[J].splice(0);for(let yq=0;yq<U.length;yq++)U[yq]();if(Q.emit("finish"),o.autoDestroy){let yq=Q._readableState;if(!yq||yq.autoDestroy&&(yq.endEmitted||yq.readable===!1))Q.destroy()}}H(T.prototype,{closed:{__proto__:null,get(){return this._writableState?this._writableState.closed:!1}},destroyed:{__proto__:null,get(){return this._writableState?this._writableState.destroyed:!1},set(Q){if(this._writableState)this._writableState.destroyed=Q}},writable:{__proto__:null,get(){let Q=this._writableState;return!!Q&&Q.writable!==!1&&!Q.destroyed&&!Q.errored&&!Q.ending&&!Q.ended},set(Q){if(this._writableState)this._writableState.writable=!!Q}},writableFinished:{__proto__:null,get(){return this._writableState?this._writableState.finished:!1}},writableObjectMode:{__proto__:null,get(){return this._writableState?this._writableState.objectMode:!1}},writableBuffer:{__proto__:null,get(){return this._writableState&&this._writableState.getBuffer()}},writableEnded:{__proto__:null,get(){return this._writableState?this._writableState.ending:!1}},writableNeedDrain:{__proto__:null,get(){let Q=this._writableState;if(!Q)return!1;return!Q.destroyed&&!Q.ending&&Q.needDrain}},writableHighWaterMark:{__proto__:null,get(){return this._writableState&&this._writableState.highWaterMark}},writableCorked:{__proto__:null,get(){return this._writableState?this._writableState.corked:0}},writableLength:{__proto__:null,get(){return this._writableState&&this._writableState.length}},errored:{__proto__:null,enumerable:!1,get(){return this._writableState?this._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._writableState.writable!==!1&&(this._writableState.destroyed||this._writableState.errored)&&!this._writableState.finished)}}});var gq=E.destroy;T.prototype.destroy=function(Q,o){let U=this._writableState;if(!U.destroyed&&(U.bufferedIndex<U.buffered.length||U[J].length))K.nextTick(b,U);return gq.call(this,Q,o),this},T.prototype._undestroy=E.undestroy,T.prototype._destroy=function(Q,o){o(Q)},T.prototype[G.captureRejectionSymbol]=function(Q){this.destroy(Q)};var jq;function Oq(){if(jq===void 0)jq={};return jq}T.fromWeb=function(Q,o){return Oq().newStreamWritableFromWritableStream(Q,o)},T.toWeb=function(Q){return Oq().newWritableStreamFromStreamWritable(Q)}}),Db=R$((q,$)=>{var K=o_(),_=(T8(),M$(w8)),{isReadable:P,isWritable:O,isIterable:Y,isNodeStream:H,isReadableNodeStream:v,isWritableNodeStream:X,isDuplexNodeStream:Z,isReadableStream:k,isWritableStream:G}=LK(),S=__(),{AbortError:N,codes:{ERR_INVALID_ARG_TYPE:E,ERR_INVALID_RETURN_VALUE:h}}=n8(),{destroyer:D}=J7(),I=IK(),g=O5(),y=F3(),{createDeferredPromise:p}=e8(),m=Wf(),c=globalThis.Blob||_.Blob,$q=typeof c<"u"?function(w){return w instanceof c}:function(w){return!1},e=globalThis.AbortController||rP().AbortController,{FunctionPrototypeCall:d}=u$();class n extends I{constructor(J){super(J);if((J===null||J===void 0?void 0:J.readable)===!1)this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0;if((J===null||J===void 0?void 0:J.writable)===!1)this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0}}$.exports=function J(w,z){if(Z(w))return w;if(v(w))return j({readable:w});if(X(w))return j({writable:w});if(H(w))return j({writable:!1,readable:!1});if(k(w))return j({readable:g.fromWeb(w)});if(G(w))return j({writable:y.fromWeb(w)});if(typeof w==="function"){let{value:V,write:C,final:f,destroy:W}=M(w);if(Y(V))return m(n,V,{objectMode:!0,write:C,final:f,destroy:W});let A=V===null||V===void 0?void 0:V.then;if(typeof A==="function"){let L,R=d(A,V,(b)=>{if(b!=null)throw new h("nully","body",b)},(b)=>{D(L,b)});return L=new n({objectMode:!0,readable:!1,write:C,final(b){f(async()=>{try{await R,K.nextTick(b,null)}catch(l){K.nextTick(b,l)}})},destroy:W})}throw new h("Iterable, AsyncIterable or AsyncFunction",z,V)}if($q(w))return J(w.arrayBuffer());if(Y(w))return m(n,w,{objectMode:!0,writable:!1});if(k(w===null||w===void 0?void 0:w.readable)&&G(w===null||w===void 0?void 0:w.writable))return n.fromWeb(w);if(typeof(w===null||w===void 0?void 0:w.writable)==="object"||typeof(w===null||w===void 0?void 0:w.readable)==="object"){let V=w!==null&&w!==void 0&&w.readable?v(w===null||w===void 0?void 0:w.readable)?w===null||w===void 0?void 0:w.readable:J(w.readable):void 0,C=w!==null&&w!==void 0&&w.writable?X(w===null||w===void 0?void 0:w.writable)?w===null||w===void 0?void 0:w.writable:J(w.writable):void 0;return j({readable:V,writable:C})}let T=w===null||w===void 0?void 0:w.then;if(typeof T==="function"){let V;return d(T,w,(C)=>{if(C!=null)V.push(C);V.push(null)},(C)=>{D(V,C)}),V=new n({objectMode:!0,writable:!1,read(){}})}throw new E(z,["Blob","ReadableStream","WritableStream","Stream","Iterable","AsyncIterable","Function","{ readable, writable } pair","Promise"],w)};function M(J){let{promise:w,resolve:z}=p(),T=new e,V=T.signal;return{value:J(async function*(){while(!0){let C=w;w=null;let{chunk:f,done:W,cb:A}=await C;if(K.nextTick(A),W)return;if(V.aborted)throw new N(void 0,{cause:V.reason});({promise:w,resolve:z}=p()),yield f}}(),{signal:V}),write(C,f,W){let A=z;z=null,A({chunk:C,done:!1,cb:W})},final(C){let f=z;z=null,f({done:!0,cb:C})},destroy(C,f){T.abort(),f(C)}}}function j(J){let w=J.readable&&typeof J.readable.read!=="function"?g.wrap(J.readable):J.readable,z=J.writable,T=!!P(w),V=!!O(z),C,f,W,A,L;function R(b){let l=A;if(A=null,l)l(b);else if(b)L.destroy(b)}if(L=new n({readableObjectMode:!!(w!==null&&w!==void 0&&w.readableObjectMode),writableObjectMode:!!(z!==null&&z!==void 0&&z.writableObjectMode),readable:T,writable:V}),V)S(z,(b)=>{if(V=!1,b)D(w,b);R(b)}),L._write=function(b,l,B){if(z.write(b,l))B();else C=B},L._final=function(b){z.end(),f=b},z.on("drain",function(){if(C){let b=C;C=null,b()}}),z.on("finish",function(){if(f){let b=f;f=null,b()}});if(T)S(w,(b)=>{if(T=!1,b)D(w,b);R(b)}),w.on("readable",function(){if(W){let b=W;W=null,b()}}),w.on("end",function(){L.push(null)}),L._read=function(){while(!0){let b=w.read();if(b===null){W=L._read;return}if(!L.push(b))return}};return L._destroy=function(b,l){if(!b&&A!==null)b=new N;if(W=null,C=null,f=null,A===null)l(b);else A=l,D(z,b),D(w,b)},L}}),IK=R$((q,$)=>{var{ObjectDefineProperties:K,ObjectGetOwnPropertyDescriptor:_,ObjectKeys:P,ObjectSetPrototypeOf:O}=u$();$.exports=v;var Y=O5(),H=F3();O(v.prototype,Y.prototype),O(v,Y);{let G=P(H.prototype);for(let S=0;S<G.length;S++){let N=G[S];if(!v.prototype[N])v.prototype[N]=H.prototype[N]}}function v(G){if(!(this instanceof v))return new v(G);if(Y.call(this,G),H.call(this,G),G){if(this.allowHalfOpen=G.allowHalfOpen!==!1,G.readable===!1)this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0;if(G.writable===!1)this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0}else this.allowHalfOpen=!0}K(v.prototype,{writable:{__proto__:null,..._(H.prototype,"writable")},writableHighWaterMark:{__proto__:null,..._(H.prototype,"writableHighWaterMark")},writableObjectMode:{__proto__:null,..._(H.prototype,"writableObjectMode")},writableBuffer:{__proto__:null,..._(H.prototype,"writableBuffer")},writableLength:{__proto__:null,..._(H.prototype,"writableLength")},writableFinished:{__proto__:null,..._(H.prototype,"writableFinished")},writableCorked:{__proto__:null,..._(H.prototype,"writableCorked")},writableEnded:{__proto__:null,..._(H.prototype,"writableEnded")},writableNeedDrain:{__proto__:null,..._(H.prototype,"writableNeedDrain")},destroyed:{__proto__:null,get(){if(this._readableState===void 0||this._writableState===void 0)return!1;return this._readableState.destroyed&&this._writableState.destroyed},set(G){if(this._readableState&&this._writableState)this._readableState.destroyed=G,this._writableState.destroyed=G}}});var X;function Z(){if(X===void 0)X={};return X}v.fromWeb=function(G,S){return Z().newStreamDuplexFromReadableWritablePair(G,S)},v.toWeb=function(G){return Z().newReadableWritablePairFromDuplex(G)};var k;v.from=function(G){if(!k)k=Db();return k(G,"body")}}),Hf=R$((q,$)=>{var{ObjectSetPrototypeOf:K,Symbol:_}=u$();$.exports=v;var{ERR_METHOD_NOT_IMPLEMENTED:P}=n8().codes,O=IK(),{getHighWaterMark:Y}=j5();K(v.prototype,O.prototype),K(v,O);var H=_("kCallback");function v(k){if(!(this instanceof v))return new v(k);let G=k?Y(this,k,"readableHighWaterMark",!0):null;if(G===0)k={...k,highWaterMark:null,readableHighWaterMark:G,writableHighWaterMark:k.writableHighWaterMark||0};if(O.call(this,k),this._readableState.sync=!1,this[H]=null,k){if(typeof k.transform==="function")this._transform=k.transform;if(typeof k.flush==="function")this._flush=k.flush}this.on("prefinish",Z)}function X(k){if(typeof this._flush==="function"&&!this.destroyed)this._flush((G,S)=>{if(G){if(k)k(G);else this.destroy(G);return}if(S!=null)this.push(S);if(this.push(null),k)k()});else if(this.push(null),k)k()}function Z(){if(this._final!==X)X.call(this)}v.prototype._final=X,v.prototype._transform=function(k,G,S){throw new P("_transform()")},v.prototype._write=function(k,G,S){let N=this._readableState,E=this._writableState,h=N.length;this._transform(k,G,(D,I)=>{if(D){S(D);return}if(I!=null)this.push(I);if(E.ended||h===N.length||N.length<N.highWaterMark)S();else this[H]=S})},v.prototype._read=function(){if(this[H]){let k=this[H];this[H]=null,k()}}}),zf=R$((q,$)=>{var{ObjectSetPrototypeOf:K}=u$();$.exports=P;var _=Hf();K(P.prototype,_.prototype),K(P,_);function P(O){if(!(this instanceof P))return new P(O);_.call(this,O)}P.prototype._transform=function(O,Y,H){H(null,O)}}),t3=R$((q,$)=>{var K=o_(),{ArrayIsArray:_,Promise:P,SymbolAsyncIterator:O,SymbolDispose:Y}=u$(),H=__(),{once:v}=e8(),X=J7(),Z=IK(),{aggregateTwoErrors:k,codes:{ERR_INVALID_ARG_TYPE:G,ERR_INVALID_RETURN_VALUE:S,ERR_MISSING_ARGS:N,ERR_STREAM_DESTROYED:E,ERR_STREAM_PREMATURE_CLOSE:h},AbortError:D}=n8(),{validateFunction:I,validateAbortSignal:g}=BP(),{isIterable:y,isReadable:p,isReadableNodeStream:m,isNodeStream:c,isTransformStream:$q,isWebStream:e,isReadableStream:d,isReadableFinished:n}=LK(),M=globalThis.AbortController||rP().AbortController,j,J,w;function z(b,l,B){let t=!1;b.on("close",()=>{t=!0});let Wq=H(b,{readable:l,writable:B},(r)=>{t=!r});return{destroy:(r)=>{if(t)return;t=!0,X.destroyer(b,r||new E("pipe"))},cleanup:Wq}}function T(b){return I(b[b.length-1],"streams[stream.length - 1]"),b.pop()}function V(b){if(y(b))return b;else if(m(b))return C(b);throw new G("val",["Readable","Iterable","AsyncIterable"],b)}async function*C(b){if(!J)J=O5();yield*J.prototype[O].call(b)}async function f(b,l,B,{end:t}){let Wq,r=null,i=(Oq)=>{if(Oq)Wq=Oq;if(r){let Q=r;r=null,Q()}},gq=()=>new P((Oq,Q)=>{if(Wq)Q(Wq);else r=()=>{if(Wq)Q(Wq);else Oq()}});l.on("drain",i);let jq=H(l,{readable:!1},i);try{if(l.writableNeedDrain)await gq();for await(let Oq of b)if(!l.write(Oq))await gq();if(t)l.end(),await gq();B()}catch(Oq){B(Wq!==Oq?k(Wq,Oq):Oq)}finally{jq(),l.off("drain",i)}}async function W(b,l,B,{end:t}){if($q(l))l=l.writable;let Wq=l.getWriter();try{for await(let r of b)await Wq.ready,Wq.write(r).catch(()=>{});if(await Wq.ready,t)await Wq.close();B()}catch(r){try{await Wq.abort(r),B(r)}catch(i){B(i)}}}function A(...b){return L(b,v(T(b)))}function L(b,l,B){if(b.length===1&&_(b[0]))b=b[0];if(b.length<2)throw new N("streams");let t=new M,Wq=t.signal,r=B===null||B===void 0?void 0:B.signal,i=[];g(r,"options.signal");function gq(){qq(new D)}w=w||e8().addAbortListener;let jq;if(r)jq=w(r,gq);let Oq,Q,o=[],U=0;function yq(Tq){qq(Tq,--U===0)}function qq(Tq,Yq){var Jq;if(Tq&&(!Oq||Oq.code==="ERR_STREAM_PREMATURE_CLOSE"))Oq=Tq;if(!Oq&&!Yq)return;while(o.length)o.shift()(Oq);if((Jq=jq)===null||Jq===void 0||Jq[Y](),t.abort(),Yq){if(!Oq)i.forEach((z$)=>z$());K.nextTick(l,Oq,Q)}}let s;for(let Tq=0;Tq<b.length;Tq++){let Yq=b[Tq],Jq=Tq<b.length-1,z$=Tq>0,Hq=Jq||(B===null||B===void 0?void 0:B.end)!==!1,Xq=Tq===b.length-1;if(c(Yq)){let N$=function(vq){if(vq&&vq.name!=="AbortError"&&vq.code!=="ERR_STREAM_PREMATURE_CLOSE")yq(vq)};var a=N$;if(Hq){let{destroy:vq,cleanup:kq}=z(Yq,Jq,z$);if(o.push(vq),p(Yq)&&Xq)i.push(kq)}if(Yq.on("error",N$),p(Yq)&&Xq)i.push(()=>{Yq.removeListener("error",N$)})}if(Tq===0)if(typeof Yq==="function"){if(s=Yq({signal:Wq}),!y(s))throw new S("Iterable, AsyncIterable or Stream","source",s)}else if(y(Yq)||m(Yq)||$q(Yq))s=Yq;else s=Z.from(Yq);else if(typeof Yq==="function"){if($q(s)){var F;s=V((F=s)===null||F===void 0?void 0:F.readable)}else s=V(s);if(s=Yq(s,{signal:Wq}),Jq){if(!y(s,!0))throw new S("AsyncIterable",`transform[${Tq-1}]`,s)}else{var _q;if(!j)j=zf();let N$=new j({objectMode:!0}),vq=(_q=s)===null||_q===void 0?void 0:_q.then;if(typeof vq==="function")U++,vq.call(s,(fq)=>{if(Q=fq,fq!=null)N$.write(fq);if(Hq)N$.end();K.nextTick(yq)},(fq)=>{N$.destroy(fq),K.nextTick(yq,fq)});else if(y(s,!0))U++,f(s,N$,yq,{end:Hq});else if(d(s)||$q(s)){let fq=s.readable||s;U++,f(fq,N$,yq,{end:Hq})}else throw new S("AsyncIterable or Promise","destination",s);s=N$;let{destroy:kq,cleanup:o$}=z(s,!1,!0);if(o.push(kq),Xq)i.push(o$)}}else if(c(Yq)){if(m(s)){U+=2;let N$=R(s,Yq,yq,{end:Hq});if(p(Yq)&&Xq)i.push(N$)}else if($q(s)||d(s)){let N$=s.readable||s;U++,f(N$,Yq,yq,{end:Hq})}else if(y(s))U++,f(s,Yq,yq,{end:Hq});else throw new G("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],s);s=Yq}else if(e(Yq)){if(m(s))U++,W(V(s),Yq,yq,{end:Hq});else if(d(s)||y(s))U++,W(s,Yq,yq,{end:Hq});else if($q(s))U++,W(s.readable,Yq,yq,{end:Hq});else throw new G("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],s);s=Yq}else s=Z.from(Yq)}if(Wq!==null&&Wq!==void 0&&Wq.aborted||r!==null&&r!==void 0&&r.aborted)K.nextTick(gq);return s}function R(b,l,B,{end:t}){let Wq=!1;if(l.on("close",()=>{if(!Wq)B(new h)}),b.pipe(l,{end:!1}),t){let i=function(){Wq=!0,l.end()};var r=i;if(n(b))K.nextTick(i);else b.once("end",i)}else B();return H(b,{readable:!0,writable:!1},(i)=>{let gq=b._readableState;if(i&&i.code==="ERR_STREAM_PREMATURE_CLOSE"&&gq&&gq.ended&&!gq.errored&&!gq.errorEmitted)b.once("end",B).once("error",B);else B(i)}),H(l,{readable:!1,writable:!0},B)}$.exports={pipelineImpl:L,pipeline:A}}),Jf=R$((q,$)=>{var{pipeline:K}=t3(),_=IK(),{destroyer:P}=J7(),{isNodeStream:O,isReadable:Y,isWritable:H,isWebStream:v,isTransformStream:X,isWritableStream:Z,isReadableStream:k}=LK(),{AbortError:G,codes:{ERR_INVALID_ARG_VALUE:S,ERR_MISSING_ARGS:N}}=n8(),E=__();$.exports=function(...D){if(D.length===0)throw new N("streams");if(D.length===1)return _.from(D[0]);let I=[...D];if(typeof D[0]==="function")D[0]=_.from(D[0]);if(typeof D[D.length-1]==="function"){let j=D.length-1;D[j]=_.from(D[j])}for(let j=0;j<D.length;++j){if(!O(D[j])&&!v(D[j]))continue;if(j<D.length-1&&!(Y(D[j])||k(D[j])||X(D[j])))throw new S(`streams[${j}]`,I[j],"must be readable");if(j>0&&!(H(D[j])||Z(D[j])||X(D[j])))throw new S(`streams[${j}]`,I[j],"must be writable")}let g,y,p,m,c;function $q(j){let J=m;if(m=null,J)J(j);else if(j)c.destroy(j);else if(!M&&!n)c.destroy()}let e=D[0],d=K(D,$q),n=!!(H(e)||Z(e)||X(e)),M=!!(Y(d)||k(d)||X(d));if(c=new _({writableObjectMode:!!(e!==null&&e!==void 0&&e.writableObjectMode),readableObjectMode:!!(d!==null&&d!==void 0&&d.readableObjectMode),writable:n,readable:M}),n){if(O(e))c._write=function(J,w,z){if(e.write(J,w))z();else g=z},c._final=function(J){e.end(),y=J},e.on("drain",function(){if(g){let J=g;g=null,J()}});else if(v(e)){let J=(X(e)?e.writable:e).getWriter();c._write=async function(w,z,T){try{await J.ready,J.write(w).catch(()=>{}),T()}catch(V){T(V)}},c._final=async function(w){try{await J.ready,J.close().catch(()=>{}),y=w}catch(z){w(z)}}}let j=X(d)?d.readable:d;E(j,()=>{if(y){let J=y;y=null,J()}})}if(M){if(O(d))d.on("readable",function(){if(p){let j=p;p=null,j()}}),d.on("end",function(){c.push(null)}),c._read=function(){while(!0){let j=d.read();if(j===null){p=c._read;return}if(!c.push(j))return}};else if(v(d)){let j=(X(d)?d.readable:d).getReader();c._read=async function(){while(!0)try{let{value:J,done:w}=await j.read();if(!c.push(J))return;if(w){c.push(null);return}}catch{return}}}}return c._destroy=function(j,J){if(!j&&m!==null)j=new G;if(p=null,g=null,y=null,m===null)J(j);else if(m=J,O(d))P(d,j)},c}}),Ib=R$((q,$)=>{var K=globalThis.AbortController||rP().AbortController,{codes:{ERR_INVALID_ARG_VALUE:_,ERR_INVALID_ARG_TYPE:P,ERR_MISSING_ARGS:O,ERR_OUT_OF_RANGE:Y},AbortError:H}=n8(),{validateAbortSignal:v,validateInteger:X,validateObject:Z}=BP(),k=u$().Symbol("kWeak"),G=u$().Symbol("kResistStopPropagation"),{finished:S}=__(),N=Jf(),{addAbortSignalNoValidate:E}=Y5(),{isWritable:h,isNodeStream:D}=LK(),{deprecate:I}=e8(),{ArrayPrototypePush:g,Boolean:y,MathFloor:p,Number:m,NumberIsNaN:c,Promise:$q,PromiseReject:e,PromiseResolve:d,PromisePrototypeThen:n,Symbol:M}=u$(),j=M("kEmpty"),J=M("kEof");function w(r,i){if(i!=null)Z(i,"options");if((i===null||i===void 0?void 0:i.signal)!=null)v(i.signal,"options.signal");if(D(r)&&!h(r))throw new _("stream",r,"must be writable");let gq=N(this,r);if(i!==null&&i!==void 0&&i.signal)E(i.signal,gq);return gq}function z(r,i){if(typeof r!=="function")throw new P("fn",["Function","AsyncFunction"],r);if(i!=null)Z(i,"options");if((i===null||i===void 0?void 0:i.signal)!=null)v(i.signal,"options.signal");let gq=1;if((i===null||i===void 0?void 0:i.concurrency)!=null)gq=p(i.concurrency);let jq=gq-1;if((i===null||i===void 0?void 0:i.highWaterMark)!=null)jq=p(i.highWaterMark);return X(gq,"options.concurrency",1),X(jq,"options.highWaterMark",0),jq+=gq,async function*(){let Q=e8().AbortSignalAny([i===null||i===void 0?void 0:i.signal].filter(y)),o=this,U=[],yq={signal:Q},qq,s,a=!1,F=0;function _q(){a=!0,Tq()}function Tq(){F-=1,Yq()}function Yq(){if(s&&!a&&F<gq&&U.length<jq)s(),s=null}async function Jq(){try{for await(let z$ of o){if(a)return;if(Q.aborted)throw new H;try{if(z$=r(z$,yq),z$===j)continue;z$=d(z$)}catch(Hq){z$=e(Hq)}if(F+=1,n(z$,Tq,_q),U.push(z$),qq)qq(),qq=null;if(!a&&(U.length>=jq||F>=gq))await new $q((Hq)=>{s=Hq})}U.push(J)}catch(z$){let Hq=e(z$);n(Hq,Tq,_q),U.push(Hq)}finally{if(a=!0,qq)qq(),qq=null}}Jq();try{while(!0){while(U.length>0){let z$=await U[0];if(z$===J)return;if(Q.aborted)throw new H;if(z$!==j)yield z$;U.shift(),Yq()}await new $q((z$)=>{qq=z$})}}finally{if(a=!0,s)s(),s=null}}.call(this)}function T(r=void 0){if(r!=null)Z(r,"options");if((r===null||r===void 0?void 0:r.signal)!=null)v(r.signal,"options.signal");return async function*(){let gq=0;for await(let Oq of this){var jq;if(r!==null&&r!==void 0&&(jq=r.signal)!==null&&jq!==void 0&&jq.aborted)throw new H({cause:r.signal.reason});yield[gq++,Oq]}}.call(this)}async function V(r,i=void 0){for await(let gq of A.call(this,r,i))return!0;return!1}async function C(r,i=void 0){if(typeof r!=="function")throw new P("fn",["Function","AsyncFunction"],r);return!await V.call(this,async(...gq)=>{return!await r(...gq)},i)}async function f(r,i){for await(let gq of A.call(this,r,i))return gq;return}async function W(r,i){if(typeof r!=="function")throw new P("fn",["Function","AsyncFunction"],r);async function gq(jq,Oq){return await r(jq,Oq),j}for await(let jq of z.call(this,gq,i));}function A(r,i){if(typeof r!=="function")throw new P("fn",["Function","AsyncFunction"],r);async function gq(jq,Oq){if(await r(jq,Oq))return jq;return j}return z.call(this,gq,i)}class L extends O{constructor(){super("reduce");this.message="Reduce of an empty stream requires an initial value"}}async function R(r,i,gq){var jq;if(typeof r!=="function")throw new P("reducer",["Function","AsyncFunction"],r);if(gq!=null)Z(gq,"options");if((gq===null||gq===void 0?void 0:gq.signal)!=null)v(gq.signal,"options.signal");let Oq=arguments.length>1;if(gq!==null&&gq!==void 0&&(jq=gq.signal)!==null&&jq!==void 0&&jq.aborted){let qq=new H(void 0,{cause:gq.signal.reason});throw this.once("error",()=>{}),await S(this.destroy(qq)),qq}let Q=new K,o=Q.signal;if(gq!==null&&gq!==void 0&&gq.signal){let qq={once:!0,[k]:this,[G]:!0};gq.signal.addEventListener("abort",()=>Q.abort(),qq)}let U=!1;try{for await(let qq of this){var yq;if(U=!0,gq!==null&&gq!==void 0&&(yq=gq.signal)!==null&&yq!==void 0&&yq.aborted)throw new H;if(!Oq)i=qq,Oq=!0;else i=await r(i,qq,{signal:o})}if(!U&&!Oq)throw new L}finally{Q.abort()}return i}async function b(r){if(r!=null)Z(r,"options");if((r===null||r===void 0?void 0:r.signal)!=null)v(r.signal,"options.signal");let i=[];for await(let jq of this){var gq;if(r!==null&&r!==void 0&&(gq=r.signal)!==null&&gq!==void 0&&gq.aborted)throw new H(void 0,{cause:r.signal.reason});g(i,jq)}return i}function l(r,i){let gq=z.call(this,r,i);return async function*(){for await(let Oq of gq)yield*Oq}.call(this)}function B(r){if(r=m(r),c(r))return 0;if(r<0)throw new Y("number",">= 0",r);return r}function t(r,i=void 0){if(i!=null)Z(i,"options");if((i===null||i===void 0?void 0:i.signal)!=null)v(i.signal,"options.signal");return r=B(r),async function*(){var jq;if(i!==null&&i!==void 0&&(jq=i.signal)!==null&&jq!==void 0&&jq.aborted)throw new H;for await(let Q of this){var Oq;if(i!==null&&i!==void 0&&(Oq=i.signal)!==null&&Oq!==void 0&&Oq.aborted)throw new H;if(r--<=0)yield Q}}.call(this)}function Wq(r,i=void 0){if(i!=null)Z(i,"options");if((i===null||i===void 0?void 0:i.signal)!=null)v(i.signal,"options.signal");return r=B(r),async function*(){var jq;if(i!==null&&i!==void 0&&(jq=i.signal)!==null&&jq!==void 0&&jq.aborted)throw new H;for await(let Q of this){var Oq;if(i!==null&&i!==void 0&&(Oq=i.signal)!==null&&Oq!==void 0&&Oq.aborted)throw new H;if(r-- >0)yield Q;if(r<=0)return}}.call(this)}$.exports.streamReturningOperators={asIndexedPairs:I(T,"readable.asIndexedPairs will be removed in a future version."),drop:t,filter:A,flatMap:l,map:z,take:Wq,compose:w},$.exports.promiseReturningOperators={every:C,forEach:W,reduce:R,toArray:b,some:V,find:f}}),vf=R$((q,$)=>{var{ArrayPrototypePop:K,Promise:_}=u$(),{isIterable:P,isNodeStream:O,isWebStream:Y}=LK(),{pipelineImpl:H}=t3(),{finished:v}=__();wf();function X(...Z){return new _((k,G)=>{let S,N,E=Z[Z.length-1];if(E&&typeof E==="object"&&!O(E)&&!P(E)&&!Y(E)){let h=K(Z);S=h.signal,N=h.end}H(Z,(h,D)=>{if(h)G(h);else k(D)},{signal:S,end:N})})}$.exports={finished:v,pipeline:X}}),wf=R$((q,$)=>{var{Buffer:K}=(T8(),M$(w8)),{ObjectDefineProperty:_,ObjectKeys:P,ReflectApply:O}=u$(),{promisify:{custom:Y}}=e8(),{streamReturningOperators:H,promiseReturningOperators:v}=Ib(),{codes:{ERR_ILLEGAL_CONSTRUCTOR:X}}=n8(),Z=Jf(),{setDefaultHighWaterMark:k,getDefaultHighWaterMark:G}=j5(),{pipeline:S}=t3(),{destroyer:N}=J7(),E=__(),h=vf(),D=LK(),I=$.exports=U3().Stream;I.isDestroyed=D.isDestroyed,I.isDisturbed=D.isDisturbed,I.isErrored=D.isErrored,I.isReadable=D.isReadable,I.isWritable=D.isWritable,I.Readable=O5();for(let y of P(H)){let p=function(...c){if(new.target)throw X();return I.Readable.from(O(m,this,c))},m=H[y];_(p,"name",{__proto__:null,value:m.name}),_(p,"length",{__proto__:null,value:m.length}),_(I.Readable.prototype,y,{__proto__:null,value:p,enumerable:!1,configurable:!0,writable:!0})}for(let y of P(v)){let p=function(...c){if(new.target)throw X();return O(m,this,c)},m=v[y];_(p,"name",{__proto__:null,value:m.name}),_(p,"length",{__proto__:null,value:m.length}),_(I.Readable.prototype,y,{__proto__:null,value:p,enumerable:!1,configurable:!0,writable:!0})}I.Writable=F3(),I.Duplex=IK(),I.Transform=Hf(),I.PassThrough=zf(),I.pipeline=S;var{addAbortSignal:g}=Y5();I.addAbortSignal=g,I.finished=E,I.destroy=N,I.compose=Z,I.setDefaultHighWaterMark=k,I.getDefaultHighWaterMark=G,_(I,"promises",{__proto__:null,configurable:!0,enumerable:!0,get(){return h}}),_(S,Y,{__proto__:null,enumerable:!0,get(){return h.pipeline}}),_(E,Y,{__proto__:null,enumerable:!0,get(){return h.finished}}),I.Stream=I,I._isUint8Array=function(p){return p instanceof Uint8Array},I._uint8ArrayToBuffer=function(p){return K.from(p.buffer,p.byteOffset,p.byteLength)}}),Lb=R$((q,$)=>{var K=Q3();{let _=wf(),P=vf(),O=_.Readable.destroy;$.exports=_.Readable,$.exports._uint8ArrayToBuffer=_._uint8ArrayToBuffer,$.exports._isUint8Array=_._isUint8Array,$.exports.isDisturbed=_.isDisturbed,$.exports.isErrored=_.isErrored,$.exports.isReadable=_.isReadable,$.exports.Readable=_.Readable,$.exports.Writable=_.Writable,$.exports.Duplex=_.Duplex,$.exports.Transform=_.Transform,$.exports.PassThrough=_.PassThrough,$.exports.addAbortSignal=_.addAbortSignal,$.exports.finished=_.finished,$.exports.destroy=_.destroy,$.exports.destroy=O,$.exports.pipeline=_.pipeline,$.exports.compose=_.compose,Object.defineProperty(_,"promises",{configurable:!0,enumerable:!0,get(){return P}}),$.exports.Stream=_.Stream}$.exports.default=$.exports});Tf.exports=Lb()});var q6={};yK(q6,{webcrypto:()=>Cy,rng:()=>xg,randomUUID:()=>Vy,randomFillSync:()=>fy,randomFill:()=>Xy,randomBytes:()=>ug,publicEncrypt:()=>Jy,publicDecrypt:()=>wy,pseudoRandomBytes:()=>pg,prng:()=>yg,privateEncrypt:()=>vy,privateDecrypt:()=>Ty,pbkdf2Sync:()=>rg,pbkdf2:()=>ng,listCiphers:()=>qy,getRandomValues:()=>Zy,getHashes:()=>og,getDiffieHellman:()=>_y,getCurves:()=>Sy,getCiphers:()=>sg,default:()=>Ny,createVerify:()=>Wy,createSign:()=>jy,createHmac:()=>dg,createHash:()=>cg,createECDH:()=>zy,createDiffieHellmanGroup:()=>Ky,createDiffieHellman:()=>Py,createDecipheriv:()=>eg,createDecipher:()=>Qg,createCredentials:()=>Ay,createCipheriv:()=>Fg,createCipher:()=>ig,constants:()=>ky,Verify:()=>Hy,Sign:()=>Oy,Hmac:()=>lg,Hash:()=>mg,DiffieHellmanGroup:()=>$y,DiffieHellman:()=>Yy,Decipheriv:()=>ag,Decipher:()=>tg,DEFAULT_ENCODING:()=>Gy,Cipheriv:()=>Ug,Cipher:()=>Bg});function Sy(){return My}var bb,gb,Xf,yb,pb,xb=(q,$,K)=>{K=q!=null?bb(gb(q)):{};let _=$||!q||!q.__esModule?Xf(K,"default",{value:q,enumerable:!0}):K;for(let P of yb(q))if(!pb.call(_,P))Xf(_,P,{get:()=>q[P],enumerable:!0});return _},lq=(q,$)=>()=>($||q(($={exports:{}}).exports,$),$.exports),W5,H5,Af,ub,e3,s3,s8,qj,kf,mb,Gf,cb,lb,db,ob,bK,P_,Zf,Z6,Vf,z5,nb,W6,rb,Bb,ib,Mf,jK,UP,Sf,Ub,Cf,Fb,Nf,tb,Qb,ab,eb,$j,sb,Kj,qg,$g,Kg,_g,Pg,Yg,jg,Og,Wg,Hg,zg,Jg,vg,wg,ff,Tg,iP,Xg,Ef,Rf,fg,Ag,hf,kg,Gg,FP,Zg,Vg,Mg,Sg,Cg,Ng,Df,Eg,If,Lf,bf,_j,gf,Rg,yf,hg,Dg,a3,Ig,Lg,bg,gg,k$,yg,pg,xg,ug,mg,cg,lg,dg,og,ng,rg,Bg,ig,Ug,Fg,tg,Qg,ag,eg,sg,qy,$y,Ky,_y,Py,Yy,jy,Oy,Wy,Hy,zy,Jy,vy,wy,Ty,Xy,fy,Ay,ky,Gy="buffer",Zy=(q)=>{return crypto.getRandomValues(q)},Vy=()=>{return crypto.randomUUID()},My,Cy,Ny;var $6=T7(()=>{bb=Object.create,{getPrototypeOf:gb,defineProperty:Xf,getOwnPropertyNames:yb}=Object,pb=Object.prototype.hasOwnProperty,W5=lq((q,$)=>{$.exports=($6(),M$(q6)).randomBytes}),H5=lq((q,$)=>{$.exports=($6(),M$(q6)).createHash}),Af=lq((q,$)=>{$.exports=($6(),M$(q6)).createHmac}),ub=lq((q,$)=>{$.exports={sha224WithRSAEncryption:{sign:"rsa",hash:"sha224",id:"302d300d06096086480165030402040500041c"},"RSA-SHA224":{sign:"ecdsa/rsa",hash:"sha224",id:"302d300d06096086480165030402040500041c"},sha256WithRSAEncryption:{sign:"rsa",hash:"sha256",id:"3031300d060960864801650304020105000420"},"RSA-SHA256":{sign:"ecdsa/rsa",hash:"sha256",id:"3031300d060960864801650304020105000420"},sha384WithRSAEncryption:{sign:"rsa",hash:"sha384",id:"3041300d060960864801650304020205000430"},"RSA-SHA384":{sign:"ecdsa/rsa",hash:"sha384",id:"3041300d060960864801650304020205000430"},sha512WithRSAEncryption:{sign:"rsa",hash:"sha512",id:"3051300d060960864801650304020305000440"},"RSA-SHA512":{sign:"ecdsa/rsa",hash:"sha512",id:"3051300d060960864801650304020305000440"},"RSA-SHA1":{sign:"rsa",hash:"sha1",id:"3021300906052b0e03021a05000414"},"ecdsa-with-SHA1":{sign:"ecdsa",hash:"sha1",id:""},sha256:{sign:"ecdsa",hash:"sha256",id:""},sha224:{sign:"ecdsa",hash:"sha224",id:""},sha384:{sign:"ecdsa",hash:"sha384",id:""},sha512:{sign:"ecdsa",hash:"sha512",id:""},"DSA-SHA":{sign:"dsa",hash:"sha1",id:""},"DSA-SHA1":{sign:"dsa",hash:"sha1",id:""},DSA:{sign:"dsa",hash:"sha1",id:""},"DSA-WITH-SHA224":{sign:"dsa",hash:"sha224",id:""},"DSA-SHA224":{sign:"dsa",hash:"sha224",id:""},"DSA-WITH-SHA256":{sign:"dsa",hash:"sha256",id:""},"DSA-SHA256":{sign:"dsa",hash:"sha256",id:""},"DSA-WITH-SHA384":{sign:"dsa",hash:"sha384",id:""},"DSA-SHA384":{sign:"dsa",hash:"sha384",id:""},"DSA-WITH-SHA512":{sign:"dsa",hash:"sha512",id:""},"DSA-SHA512":{sign:"dsa",hash:"sha512",id:""},"DSA-RIPEMD160":{sign:"dsa",hash:"rmd160",id:""},ripemd160WithRSA:{sign:"rsa",hash:"rmd160",id:"3021300906052b2403020105000414"},"RSA-RIPEMD160":{sign:"rsa",hash:"rmd160",id:"3021300906052b2403020105000414"},md5WithRSAEncryption:{sign:"rsa",hash:"md5",id:"3020300c06082a864886f70d020505000410"},"RSA-MD5":{sign:"rsa",hash:"md5",id:"3020300c06082a864886f70d020505000410"}}}),e3=lq((q,$)=>{var K=Math.pow(2,30)-1;$.exports=function(_,P){if(typeof _!=="number")throw TypeError("Iterations not a number");if(_<0)throw TypeError("Bad iterations");if(typeof P!=="number")throw TypeError("Key length not a number");if(P<0||P>K||P!==P)throw TypeError("Bad key length")}}),s3=lq((q,$)=>{var K;if(globalThis.process&&globalThis.process.browser)K="utf-8";else if(globalThis.process&&globalThis.process.version)_=parseInt(process.version.split(".")[0].slice(1),10),K=_>=6?"utf-8":"binary";else K="utf-8";var _;$.exports=K}),s8=lq((q,$)=>{/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var K=(T8(),M$(w8)),_=K.Buffer;function P(Y,H){for(var v in Y)H[v]=Y[v]}if(_.from&&_.alloc&&_.allocUnsafe&&_.allocUnsafeSlow)$.exports=K;else P(K,q),q.Buffer=O;function O(Y,H,v){return _(Y,H,v)}O.prototype=Object.create(_.prototype),P(_,O),O.from=function(Y,H,v){if(typeof Y==="number")throw TypeError("Argument must not be a number");return _(Y,H,v)},O.alloc=function(Y,H,v){if(typeof Y!=="number")throw TypeError("Argument must be a number");var X=_(Y);if(H!==void 0)if(typeof v==="string")X.fill(H,v);else X.fill(H);else X.fill(0);return X},O.allocUnsafe=function(Y){if(typeof Y!=="number")throw TypeError("Argument must be a number");return _(Y)},O.allocUnsafeSlow=function(Y){if(typeof Y!=="number")throw TypeError("Argument must be a number");return K.SlowBuffer(Y)}}),qj=lq((q,$)=>{var K=s8().Buffer;$.exports=function(_,P,O){if(K.isBuffer(_))return _;else if(typeof _==="string")return K.from(_,P);else if(ArrayBuffer.isView(_))return K.from(_.buffer);else throw TypeError(O+" must be a string, a Buffer, a typed array or a DataView")}}),kf=lq((q,$)=>{var K={md5:16,sha1:20,sha224:28,sha256:32,sha384:48,sha512:64,rmd160:20,ripemd160:20},_=Af(),P=s8().Buffer,O=e3(),Y=s3(),H=qj();function v(X,Z,k,G,S){O(k,G),X=H(X,Y,"Password"),Z=H(Z,Y,"Salt"),S=S||"sha1";var N=P.allocUnsafe(G),E=P.allocUnsafe(Z.length+4);Z.copy(E,0,0,Z.length);var h=0,D=K[S],I=Math.ceil(G/D);for(var g=1;g<=I;g++){E.writeUInt32BE(g,Z.length);var y=_(S,X).update(E).digest(),p=y;for(var m=1;m<k;m++){p=_(S,X).update(p).digest();for(var c=0;c<D;c++)y[c]^=p[c]}y.copy(N,h),h+=D}return N}$.exports=v}),mb=lq((q,$)=>{var K=s8().Buffer,_=e3(),P=s3(),O=kf(),Y=qj(),H,v=globalThis.crypto&&globalThis.crypto.subtle,X={sha:"SHA-1","sha-1":"SHA-1",sha1:"SHA-1",sha256:"SHA-256","sha-256":"SHA-256",sha384:"SHA-384","sha-384":"SHA-384","sha-512":"SHA-512",sha512:"SHA-512"},Z=[];function k(h){if(globalThis.process&&!globalThis.process.browser)return Promise.resolve(!1);if(!v||!v.importKey||!v.deriveBits)return Promise.resolve(!1);if(Z[h]!==void 0)return Z[h];H=H||K.alloc(8);var D=N(H,H,10,128,h).then(function(){return!0}).catch(function(){return!1});return Z[h]=D,D}var G;function S(){if(G)return G;if(globalThis.process&&globalThis.process.nextTick)G=globalThis.process.nextTick;else if(globalThis.queueMicrotask)G=globalThis.queueMicrotask;else if(globalThis.setImmediate)G=globalThis.setImmediate;else G=globalThis.setTimeout;return G}function N(h,D,I,g,y){return v.importKey("raw",h,{name:"PBKDF2"},!1,["deriveBits"]).then(function(p){return v.deriveBits({name:"PBKDF2",salt:D,iterations:I,hash:{name:y}},p,g<<3)}).then(function(p){return K.from(p)})}function E(h,D){h.then(function(I){S()(function(){D(null,I)})},function(I){S()(function(){D(I)})})}$.exports=function(h,D,I,g,y,p){if(typeof y==="function")p=y,y=void 0;y=y||"sha1";var m=X[y.toLowerCase()];if(!m||typeof globalThis.Promise!=="function"){S()(function(){var c;try{c=O(h,D,I,g,y)}catch($q){return p($q)}p(null,c)});return}if(_(I,g),h=Y(h,P,"Password"),D=Y(D,P,"Salt"),typeof p!=="function")throw Error("No callback provided to pbkdf2");E(k(m).then(function(c){if(c)return N(h,D,I,g,m);return O(h,D,I,g,y)}),p)}}),Gf=lq((q)=>{var $=($6(),M$(q6)),K=e3(),_=s3(),P=qj();function O(H,v,X,Z,k,G){if(K(X,Z),H=P(H,_,"Password"),v=P(v,_,"Salt"),typeof k==="function")G=k,k="sha1";if(typeof G!=="function")throw Error("No callback provided to pbkdf2");return $.pbkdf2(H,v,X,Z,k,G)}function Y(H,v,X,Z,k){return K(X,Z),H=P(H,_,"Password"),v=P(v,_,"Salt"),k=k||"sha1",$.pbkdf2Sync(H,v,X,Z,k)}if(!$.pbkdf2Sync||$.pbkdf2Sync.toString().indexOf("keylen, digest")===-1)q.pbkdf2Sync=kf(),q.pbkdf2=mb();else q.pbkdf2Sync=Y,q.pbkdf2=O}),cb=lq((q)=>{var $=($6(),M$(q6));q.createCipher=q.Cipher=$.createCipher,q.createCipheriv=q.Cipheriv=$.createCipheriv,q.createDecipher=q.Decipher=$.createDecipher,q.createDecipheriv=q.Decipheriv=$.createDecipheriv,q.listCiphers=q.getCiphers=$.getCiphers}),lb=lq((q)=>{var $=($6(),M$(q6));q.DiffieHellmanGroup=$.DiffieHellmanGroup,q.createDiffieHellmanGroup=$.createDiffieHellmanGroup,q.getDiffieHellman=$.getDiffieHellman,q.createDiffieHellman=$.createDiffieHellman,q.DiffieHellman=$.DiffieHellman}),db=lq((q)=>{var $=($6(),M$(q6));q.createSign=$.createSign,q.Sign=$.Sign,q.createVerify=$.createVerify,q.Verify=$.Verify}),ob=lq((q,$)=>{$.exports={name:"elliptic",version:"6.6.1",description:"EC cryptography",main:"lib/elliptic.js",files:["lib"],scripts:{lint:"eslint lib test","lint:fix":"npm run lint -- --fix",unit:"istanbul test _mocha --reporter=spec test/index.js",test:"npm run lint && npm run unit",version:"grunt dist && git add dist/"},repository:{type:"git",url:"git@github.com:indutny/elliptic"},keywords:["EC","Elliptic","curve","Cryptography"],author:"Fedor Indutny <fedor@indutny.com>",license:"MIT",bugs:{url:"https://github.com/indutny/elliptic/issues"},homepage:"https://github.com/indutny/elliptic",devDependencies:{brfs:"^2.0.2",coveralls:"^3.1.0",eslint:"^7.6.0",grunt:"^1.2.1","grunt-browserify":"^5.3.0","grunt-cli":"^1.3.2","grunt-contrib-connect":"^3.0.0","grunt-contrib-copy":"^1.0.0","grunt-contrib-uglify":"^5.0.0","grunt-mocha-istanbul":"^5.0.2","grunt-saucelabs":"^9.0.1",istanbul:"^0.4.5",mocha:"^8.0.1"},dependencies:{"bn.js":"^4.11.9",brorand:"^1.1.0","hash.js":"^1.0.0","hmac-drbg":"^1.0.1",inherits:"^2.0.4","minimalistic-assert":"^1.0.1","minimalistic-crypto-utils":"^1.0.1"}}}),bK=lq((q,$)=>{(function(K,_){function P(M,j){if(!M)throw Error(j||"Assertion failed")}function O(M,j){M.super_=j;var J=function(){};J.prototype=j.prototype,M.prototype=new J,M.prototype.constructor=M}function Y(M,j,J){if(Y.isBN(M))return M;if(this.negative=0,this.words=null,this.length=0,this.red=null,M!==null){if(j==="le"||j==="be")J=j,j=10;this._init(M||0,j||10,J||"be")}}if(typeof K==="object")K.exports=Y;else _.BN=Y;Y.BN=Y,Y.wordSize=26;var H;try{if(typeof window<"u"&&typeof window.Buffer<"u")H=window.Buffer;else H=(T8(),M$(w8)).Buffer}catch(M){}Y.isBN=function(j){if(j instanceof Y)return!0;return j!==null&&typeof j==="object"&&j.constructor.wordSize===Y.wordSize&&Array.isArray(j.words)},Y.max=function(j,J){if(j.cmp(J)>0)return j;return J},Y.min=function(j,J){if(j.cmp(J)<0)return j;return J},Y.prototype._init=function(j,J,w){if(typeof j==="number")return this._initNumber(j,J,w);if(typeof j==="object")return this._initArray(j,J,w);if(J==="hex")J=16;P(J===(J|0)&&J>=2&&J<=36),j=j.toString().replace(/\s+/g,"");var z=0;if(j[0]==="-")z++,this.negative=1;if(z<j.length){if(J===16)this._parseHex(j,z,w);else if(this._parseBase(j,J,z),w==="le")this._initArray(this.toArray(),J,w)}},Y.prototype._initNumber=function(j,J,w){if(j<0)this.negative=1,j=-j;if(j<67108864)this.words=[j&67108863],this.length=1;else if(j<4503599627370496)this.words=[j&67108863,j/67108864&67108863],this.length=2;else P(j<9007199254740992),this.words=[j&67108863,j/67108864&67108863,1],this.length=3;if(w!=="le")return;this._initArray(this.toArray(),J,w)},Y.prototype._initArray=function(j,J,w){if(P(typeof j.length==="number"),j.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(j.length/3),this.words=Array(this.length);for(var z=0;z<this.length;z++)this.words[z]=0;var T,V,C=0;if(w==="be"){for(z=j.length-1,T=0;z>=0;z-=3)if(V=j[z]|j[z-1]<<8|j[z-2]<<16,this.words[T]|=V<<C&67108863,this.words[T+1]=V>>>26-C&67108863,C+=24,C>=26)C-=26,T++}else if(w==="le"){for(z=0,T=0;z<j.length;z+=3)if(V=j[z]|j[z+1]<<8|j[z+2]<<16,this.words[T]|=V<<C&67108863,this.words[T+1]=V>>>26-C&67108863,C+=24,C>=26)C-=26,T++}return this.strip()};function v(M,j){var J=M.charCodeAt(j);if(J>=65&&J<=70)return J-55;else if(J>=97&&J<=102)return J-87;else return J-48&15}function X(M,j,J){var w=v(M,J);if(J-1>=j)w|=v(M,J-1)<<4;return w}Y.prototype._parseHex=function(j,J,w){this.length=Math.ceil((j.length-J)/6),this.words=Array(this.length);for(var z=0;z<this.length;z++)this.words[z]=0;var T=0,V=0,C;if(w==="be")for(z=j.length-1;z>=J;z-=2)if(C=X(j,J,z)<<T,this.words[V]|=C&67108863,T>=18)T-=18,V+=1,this.words[V]|=C>>>26;else T+=8;else{var f=j.length-J;for(z=f%2===0?J+1:J;z<j.length;z+=2)if(C=X(j,J,z)<<T,this.words[V]|=C&67108863,T>=18)T-=18,V+=1,this.words[V]|=C>>>26;else T+=8}this.strip()};function Z(M,j,J,w){var z=0,T=Math.min(M.length,J);for(var V=j;V<T;V++){var C=M.charCodeAt(V)-48;if(z*=w,C>=49)z+=C-49+10;else if(C>=17)z+=C-17+10;else z+=C}return z}Y.prototype._parseBase=function(j,J,w){this.words=[0],this.length=1;for(var z=0,T=1;T<=67108863;T*=J)z++;z--,T=T/J|0;var V=j.length-w,C=V%z,f=Math.min(V,V-C)+w,W=0;for(var A=w;A<f;A+=z)if(W=Z(j,A,A+z,J),this.imuln(T),this.words[0]+W<67108864)this.words[0]+=W;else this._iaddn(W);if(C!==0){var L=1;W=Z(j,A,j.length,J);for(A=0;A<C;A++)L*=J;if(this.imuln(L),this.words[0]+W<67108864)this.words[0]+=W;else this._iaddn(W)}this.strip()},Y.prototype.copy=function(j){j.words=Array(this.length);for(var J=0;J<this.length;J++)j.words[J]=this.words[J];j.length=this.length,j.negative=this.negative,j.red=this.red},Y.prototype.clone=function(){var j=new Y(null);return this.copy(j),j},Y.prototype._expand=function(j){while(this.length<j)this.words[this.length++]=0;return this},Y.prototype.strip=function(){while(this.length>1&&this.words[this.length-1]===0)this.length--;return this._normSign()},Y.prototype._normSign=function(){if(this.length===1&&this.words[0]===0)this.negative=0;return this},Y.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var k=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],G=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],S=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64000000,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,24300000,28629151,33554432,39135393,45435424,52521875,60466176];if(Y.prototype.toString=function(j,J){j=j||10,J=J|0||1;var w;if(j===16||j==="hex"){w="";var z=0,T=0;for(var V=0;V<this.length;V++){var C=this.words[V],f=((C<<z|T)&16777215).toString(16);if(T=C>>>24-z&16777215,z+=2,z>=26)z-=26,V--;if(T!==0||V!==this.length-1)w=k[6-f.length]+f+w;else w=f+w}if(T!==0)w=T.toString(16)+w;while(w.length%J!==0)w="0"+w;if(this.negative!==0)w="-"+w;return w}if(j===(j|0)&&j>=2&&j<=36){var W=G[j],A=S[j];w="";var L=this.clone();L.negative=0;while(!L.isZero()){var R=L.modn(A).toString(j);if(L=L.idivn(A),!L.isZero())w=k[W-R.length]+R+w;else w=R+w}if(this.isZero())w="0"+w;while(w.length%J!==0)w="0"+w;if(this.negative!==0)w="-"+w;return w}P(!1,"Base should be between 2 and 36")},Y.prototype.toNumber=function(){var j=this.words[0];if(this.length===2)j+=this.words[1]*67108864;else if(this.length===3&&this.words[2]===1)j+=4503599627370496+this.words[1]*67108864;else if(this.length>2)P(!1,"Number can only safely store up to 53 bits");return this.negative!==0?-j:j},Y.prototype.toJSON=function(){return this.toString(16)},Y.prototype.toBuffer=function(j,J){return P(typeof H<"u"),this.toArrayLike(H,j,J)},Y.prototype.toArray=function(j,J){return this.toArrayLike(Array,j,J)},Y.prototype.toArrayLike=function(j,J,w){var z=this.byteLength(),T=w||Math.max(1,z);P(z<=T,"byte array longer than desired length"),P(T>0,"Requested array length <= 0"),this.strip();var V=J==="le",C=new j(T),f,W,A=this.clone();if(!V){for(W=0;W<T-z;W++)C[W]=0;for(W=0;!A.isZero();W++)f=A.andln(255),A.iushrn(8),C[T-W-1]=f}else{for(W=0;!A.isZero();W++)f=A.andln(255),A.iushrn(8),C[W]=f;for(;W<T;W++)C[W]=0}return C},Math.clz32)Y.prototype._countBits=function(j){return 32-Math.clz32(j)};else Y.prototype._countBits=function(j){var J=j,w=0;if(J>=4096)w+=13,J>>>=13;if(J>=64)w+=7,J>>>=7;if(J>=8)w+=4,J>>>=4;if(J>=2)w+=2,J>>>=2;return w+J};Y.prototype._zeroBits=function(j){if(j===0)return 26;var J=j,w=0;if((J&8191)===0)w+=13,J>>>=13;if((J&127)===0)w+=7,J>>>=7;if((J&15)===0)w+=4,J>>>=4;if((J&3)===0)w+=2,J>>>=2;if((J&1)===0)w++;return w},Y.prototype.bitLength=function(){var j=this.words[this.length-1],J=this._countBits(j);return(this.length-1)*26+J};function N(M){var j=Array(M.bitLength());for(var J=0;J<j.length;J++){var w=J/26|0,z=J%26;j[J]=(M.words[w]&1<<z)>>>z}return j}Y.prototype.zeroBits=function(){if(this.isZero())return 0;var j=0;for(var J=0;J<this.length;J++){var w=this._zeroBits(this.words[J]);if(j+=w,w!==26)break}return j},Y.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},Y.prototype.toTwos=function(j){if(this.negative!==0)return this.abs().inotn(j).iaddn(1);return this.clone()},Y.prototype.fromTwos=function(j){if(this.testn(j-1))return this.notn(j).iaddn(1).ineg();return this.clone()},Y.prototype.isNeg=function(){return this.negative!==0},Y.prototype.neg=function(){return this.clone().ineg()},Y.prototype.ineg=function(){if(!this.isZero())this.negative^=1;return this},Y.prototype.iuor=function(j){while(this.length<j.length)this.words[this.length++]=0;for(var J=0;J<j.length;J++)this.words[J]=this.words[J]|j.words[J];return this.strip()},Y.prototype.ior=function(j){return P((this.negative|j.negative)===0),this.iuor(j)},Y.prototype.or=function(j){if(this.length>j.length)return this.clone().ior(j);return j.clone().ior(this)},Y.prototype.uor=function(j){if(this.length>j.length)return this.clone().iuor(j);return j.clone().iuor(this)},Y.prototype.iuand=function(j){var J;if(this.length>j.length)J=j;else J=this;for(var w=0;w<J.length;w++)this.words[w]=this.words[w]&j.words[w];return this.length=J.length,this.strip()},Y.prototype.iand=function(j){return P((this.negative|j.negative)===0),this.iuand(j)},Y.prototype.and=function(j){if(this.length>j.length)return this.clone().iand(j);return j.clone().iand(this)},Y.prototype.uand=function(j){if(this.length>j.length)return this.clone().iuand(j);return j.clone().iuand(this)},Y.prototype.iuxor=function(j){var J,w;if(this.length>j.length)J=this,w=j;else J=j,w=this;for(var z=0;z<w.length;z++)this.words[z]=J.words[z]^w.words[z];if(this!==J)for(;z<J.length;z++)this.words[z]=J.words[z];return this.length=J.length,this.strip()},Y.prototype.ixor=function(j){return P((this.negative|j.negative)===0),this.iuxor(j)},Y.prototype.xor=function(j){if(this.length>j.length)return this.clone().ixor(j);return j.clone().ixor(this)},Y.prototype.uxor=function(j){if(this.length>j.length)return this.clone().iuxor(j);return j.clone().iuxor(this)},Y.prototype.inotn=function(j){P(typeof j==="number"&&j>=0);var J=Math.ceil(j/26)|0,w=j%26;if(this._expand(J),w>0)J--;for(var z=0;z<J;z++)this.words[z]=~this.words[z]&67108863;if(w>0)this.words[z]=~this.words[z]&67108863>>26-w;return this.strip()},Y.prototype.notn=function(j){return this.clone().inotn(j)},Y.prototype.setn=function(j,J){P(typeof j==="number"&&j>=0);var w=j/26|0,z=j%26;if(this._expand(w+1),J)this.words[w]=this.words[w]|1<<z;else this.words[w]=this.words[w]&~(1<<z);return this.strip()},Y.prototype.iadd=function(j){var J;if(this.negative!==0&&j.negative===0)return this.negative=0,J=this.isub(j),this.negative^=1,this._normSign();else if(this.negative===0&&j.negative!==0)return j.negative=0,J=this.isub(j),j.negative=1,J._normSign();var w,z;if(this.length>j.length)w=this,z=j;else w=j,z=this;var T=0;for(var V=0;V<z.length;V++)J=(w.words[V]|0)+(z.words[V]|0)+T,this.words[V]=J&67108863,T=J>>>26;for(;T!==0&&V<w.length;V++)J=(w.words[V]|0)+T,this.words[V]=J&67108863,T=J>>>26;if(this.length=w.length,T!==0)this.words[this.length]=T,this.length++;else if(w!==this)for(;V<w.length;V++)this.words[V]=w.words[V];return this},Y.prototype.add=function(j){var J;if(j.negative!==0&&this.negative===0)return j.negative=0,J=this.sub(j),j.negative^=1,J;else if(j.negative===0&&this.negative!==0)return this.negative=0,J=j.sub(this),this.negative=1,J;if(this.length>j.length)return this.clone().iadd(j);return j.clone().iadd(this)},Y.prototype.isub=function(j){if(j.negative!==0){j.negative=0;var J=this.iadd(j);return j.negative=1,J._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(j),this.negative=1,this._normSign();var w=this.cmp(j);if(w===0)return this.negative=0,this.length=1,this.words[0]=0,this;var z,T;if(w>0)z=this,T=j;else z=j,T=this;var V=0;for(var C=0;C<T.length;C++)J=(z.words[C]|0)-(T.words[C]|0)+V,V=J>>26,this.words[C]=J&67108863;for(;V!==0&&C<z.length;C++)J=(z.words[C]|0)+V,V=J>>26,this.words[C]=J&67108863;if(V===0&&C<z.length&&z!==this)for(;C<z.length;C++)this.words[C]=z.words[C];if(this.length=Math.max(this.length,C),z!==this)this.negative=1;return this.strip()},Y.prototype.sub=function(j){return this.clone().isub(j)};function E(M,j,J){J.negative=j.negative^M.negative;var w=M.length+j.length|0;J.length=w,w=w-1|0;var z=M.words[0]|0,T=j.words[0]|0,V=z*T,C=V&67108863,f=V/67108864|0;J.words[0]=C;for(var W=1;W<w;W++){var A=f>>>26,L=f&67108863,R=Math.min(W,j.length-1);for(var b=Math.max(0,W-M.length+1);b<=R;b++){var l=W-b|0;z=M.words[l]|0,T=j.words[b]|0,V=z*T+L,A+=V/67108864|0,L=V&67108863}J.words[W]=L|0,f=A|0}if(f!==0)J.words[W]=f|0;else J.length--;return J.strip()}var h=function(j,J,w){var z=j.words,T=J.words,V=w.words,C=0,f,W,A,L=z[0]|0,R=L&8191,b=L>>>13,l=z[1]|0,B=l&8191,t=l>>>13,Wq=z[2]|0,r=Wq&8191,i=Wq>>>13,gq=z[3]|0,jq=gq&8191,Oq=gq>>>13,Q=z[4]|0,o=Q&8191,U=Q>>>13,yq=z[5]|0,qq=yq&8191,s=yq>>>13,a=z[6]|0,F=a&8191,_q=a>>>13,Tq=z[7]|0,Yq=Tq&8191,Jq=Tq>>>13,z$=z[8]|0,Hq=z$&8191,Xq=z$>>>13,N$=z[9]|0,vq=N$&8191,kq=N$>>>13,o$=T[0]|0,fq=o$&8191,Rq=o$>>>13,X8=T[1]|0,hq=X8&8191,Dq=X8>>>13,h8=T[2]|0,Sq=h8&8191,Cq=h8>>>13,D8=T[3]|0,Nq=D8&8191,Gq=D8>>>13,I8=T[4]|0,Iq=I8&8191,Zq=I8>>>13,f8=T[5]|0,x=f8&8191,u=f8>>>13,pq=T[6]|0,Kq=pq&8191,Pq=pq>>>13,E$=T[7]|0,wq=E$&8191,Aq=E$>>>13,A8=T[8]|0,Lq=A8&8191,Eq=A8>>>13,k8=T[9]|0,Vq=k8&8191,Mq=k8>>>13;w.negative=j.negative^J.negative,w.length=19,f=Math.imul(R,fq),W=Math.imul(R,Rq),W=W+Math.imul(b,fq)|0,A=Math.imul(b,Rq);var m$=(C+f|0)+((W&8191)<<13)|0;C=(A+(W>>>13)|0)+(m$>>>26)|0,m$&=67108863,f=Math.imul(B,fq),W=Math.imul(B,Rq),W=W+Math.imul(t,fq)|0,A=Math.imul(t,Rq),f=f+Math.imul(R,hq)|0,W=W+Math.imul(R,Dq)|0,W=W+Math.imul(b,hq)|0,A=A+Math.imul(b,Dq)|0;var J$=(C+f|0)+((W&8191)<<13)|0;C=(A+(W>>>13)|0)+(J$>>>26)|0,J$&=67108863,f=Math.imul(r,fq),W=Math.imul(r,Rq),W=W+Math.imul(i,fq)|0,A=Math.imul(i,Rq),f=f+Math.imul(B,hq)|0,W=W+Math.imul(B,Dq)|0,W=W+Math.imul(t,hq)|0,A=A+Math.imul(t,Dq)|0,f=f+Math.imul(R,Sq)|0,W=W+Math.imul(R,Cq)|0,W=W+Math.imul(b,Sq)|0,A=A+Math.imul(b,Cq)|0;var O$=(C+f|0)+((W&8191)<<13)|0;C=(A+(W>>>13)|0)+(O$>>>26)|0,O$&=67108863,f=Math.imul(jq,fq),W=Math.imul(jq,Rq),W=W+Math.imul(Oq,fq)|0,A=Math.imul(Oq,Rq),f=f+Math.imul(r,hq)|0,W=W+Math.imul(r,Dq)|0,W=W+Math.imul(i,hq)|0,A=A+Math.imul(i,Dq)|0,f=f+Math.imul(B,Sq)|0,W=W+Math.imul(B,Cq)|0,W=W+Math.imul(t,Sq)|0,A=A+Math.imul(t,Cq)|0,f=f+Math.imul(R,Nq)|0,W=W+Math.imul(R,Gq)|0,W=W+Math.imul(b,Nq)|0,A=A+Math.imul(b,Gq)|0;var h$=(C+f|0)+((W&8191)<<13)|0;C=(A+(W>>>13)|0)+(h$>>>26)|0,h$&=67108863,f=Math.imul(o,fq),W=Math.imul(o,Rq),W=W+Math.imul(U,fq)|0,A=Math.imul(U,Rq),f=f+Math.imul(jq,hq)|0,W=W+Math.imul(jq,Dq)|0,W=W+Math.imul(Oq,hq)|0,A=A+Math.imul(Oq,Dq)|0,f=f+Math.imul(r,Sq)|0,W=W+Math.imul(r,Cq)|0,W=W+Math.imul(i,Sq)|0,A=A+Math.imul(i,Cq)|0,f=f+Math.imul(B,Nq)|0,W=W+Math.imul(B,Gq)|0,W=W+Math.imul(t,Nq)|0,A=A+Math.imul(t,Gq)|0,f=f+Math.imul(R,Iq)|0,W=W+Math.imul(R,Zq)|0,W=W+Math.imul(b,Iq)|0,A=A+Math.imul(b,Zq)|0;var F$=(C+f|0)+((W&8191)<<13)|0;C=(A+(W>>>13)|0)+(F$>>>26)|0,F$&=67108863,f=Math.imul(qq,fq),W=Math.imul(qq,Rq),W=W+Math.imul(s,fq)|0,A=Math.imul(s,Rq),f=f+Math.imul(o,hq)|0,W=W+Math.imul(o,Dq)|0,W=W+Math.imul(U,hq)|0,A=A+Math.imul(U,Dq)|0,f=f+Math.imul(jq,Sq)|0,W=W+Math.imul(jq,Cq)|0,W=W+Math.imul(Oq,Sq)|0,A=A+Math.imul(Oq,Cq)|0,f=f+Math.imul(r,Nq)|0,W=W+Math.imul(r,Gq)|0,W=W+Math.imul(i,Nq)|0,A=A+Math.imul(i,Gq)|0,f=f+Math.imul(B,Iq)|0,W=W+Math.imul(B,Zq)|0,W=W+Math.imul(t,Iq)|0,A=A+Math.imul(t,Zq)|0,f=f+Math.imul(R,x)|0,W=W+Math.imul(R,u)|0,W=W+Math.imul(b,x)|0,A=A+Math.imul(b,u)|0;var t$=(C+f|0)+((W&8191)<<13)|0;C=(A+(W>>>13)|0)+(t$>>>26)|0,t$&=67108863,f=Math.imul(F,fq),W=Math.imul(F,Rq),W=W+Math.imul(_q,fq)|0,A=Math.imul(_q,Rq),f=f+Math.imul(qq,hq)|0,W=W+Math.imul(qq,Dq)|0,W=W+Math.imul(s,hq)|0,A=A+Math.imul(s,Dq)|0,f=f+Math.imul(o,Sq)|0,W=W+Math.imul(o,Cq)|0,W=W+Math.imul(U,Sq)|0,A=A+Math.imul(U,Cq)|0,f=f+Math.imul(jq,Nq)|0,W=W+Math.imul(jq,Gq)|0,W=W+Math.imul(Oq,Nq)|0,A=A+Math.imul(Oq,Gq)|0,f=f+Math.imul(r,Iq)|0,W=W+Math.imul(r,Zq)|0,W=W+Math.imul(i,Iq)|0,A=A+Math.imul(i,Zq)|0,f=f+Math.imul(B,x)|0,W=W+Math.imul(B,u)|0,W=W+Math.imul(t,x)|0,A=A+Math.imul(t,u)|0,f=f+Math.imul(R,Kq)|0,W=W+Math.imul(R,Pq)|0,W=W+Math.imul(b,Kq)|0,A=A+Math.imul(b,Pq)|0;var Q$=(C+f|0)+((W&8191)<<13)|0;C=(A+(W>>>13)|0)+(Q$>>>26)|0,Q$&=67108863,f=Math.imul(Yq,fq),W=Math.imul(Yq,Rq),W=W+Math.imul(Jq,fq)|0,A=Math.imul(Jq,Rq),f=f+Math.imul(F,hq)|0,W=W+Math.imul(F,Dq)|0,W=W+Math.imul(_q,hq)|0,A=A+Math.imul(_q,Dq)|0,f=f+Math.imul(qq,Sq)|0,W=W+Math.imul(qq,Cq)|0,W=W+Math.imul(s,Sq)|0,A=A+Math.imul(s,Cq)|0,f=f+Math.imul(o,Nq)|0,W=W+Math.imul(o,Gq)|0,W=W+Math.imul(U,Nq)|0,A=A+Math.imul(U,Gq)|0,f=f+Math.imul(jq,Iq)|0,W=W+Math.imul(jq,Zq)|0,W=W+Math.imul(Oq,Iq)|0,A=A+Math.imul(Oq,Zq)|0,f=f+Math.imul(r,x)|0,W=W+Math.imul(r,u)|0,W=W+Math.imul(i,x)|0,A=A+Math.imul(i,u)|0,f=f+Math.imul(B,Kq)|0,W=W+Math.imul(B,Pq)|0,W=W+Math.imul(t,Kq)|0,A=A+Math.imul(t,Pq)|0,f=f+Math.imul(R,wq)|0,W=W+Math.imul(R,Aq)|0,W=W+Math.imul(b,wq)|0,A=A+Math.imul(b,Aq)|0;var a$=(C+f|0)+((W&8191)<<13)|0;C=(A+(W>>>13)|0)+(a$>>>26)|0,a$&=67108863,f=Math.imul(Hq,fq),W=Math.imul(Hq,Rq),W=W+Math.imul(Xq,fq)|0,A=Math.imul(Xq,Rq),f=f+Math.imul(Yq,hq)|0,W=W+Math.imul(Yq,Dq)|0,W=W+Math.imul(Jq,hq)|0,A=A+Math.imul(Jq,Dq)|0,f=f+Math.imul(F,Sq)|0,W=W+Math.imul(F,Cq)|0,W=W+Math.imul(_q,Sq)|0,A=A+Math.imul(_q,Cq)|0,f=f+Math.imul(qq,Nq)|0,W=W+Math.imul(qq,Gq)|0,W=W+Math.imul(s,Nq)|0,A=A+Math.imul(s,Gq)|0,f=f+Math.imul(o,Iq)|0,W=W+Math.imul(o,Zq)|0,W=W+Math.imul(U,Iq)|0,A=A+Math.imul(U,Zq)|0,f=f+Math.imul(jq,x)|0,W=W+Math.imul(jq,u)|0,W=W+Math.imul(Oq,x)|0,A=A+Math.imul(Oq,u)|0,f=f+Math.imul(r,Kq)|0,W=W+Math.imul(r,Pq)|0,W=W+Math.imul(i,Kq)|0,A=A+Math.imul(i,Pq)|0,f=f+Math.imul(B,wq)|0,W=W+Math.imul(B,Aq)|0,W=W+Math.imul(t,wq)|0,A=A+Math.imul(t,Aq)|0,f=f+Math.imul(R,Lq)|0,W=W+Math.imul(R,Eq)|0,W=W+Math.imul(b,Lq)|0,A=A+Math.imul(b,Eq)|0;var e$=(C+f|0)+((W&8191)<<13)|0;C=(A+(W>>>13)|0)+(e$>>>26)|0,e$&=67108863,f=Math.imul(vq,fq),W=Math.imul(vq,Rq),W=W+Math.imul(kq,fq)|0,A=Math.imul(kq,Rq),f=f+Math.imul(Hq,hq)|0,W=W+Math.imul(Hq,Dq)|0,W=W+Math.imul(Xq,hq)|0,A=A+Math.imul(Xq,Dq)|0,f=f+Math.imul(Yq,Sq)|0,W=W+Math.imul(Yq,Cq)|0,W=W+Math.imul(Jq,Sq)|0,A=A+Math.imul(Jq,Cq)|0,f=f+Math.imul(F,Nq)|0,W=W+Math.imul(F,Gq)|0,W=W+Math.imul(_q,Nq)|0,A=A+Math.imul(_q,Gq)|0,f=f+Math.imul(qq,Iq)|0,W=W+Math.imul(qq,Zq)|0,W=W+Math.imul(s,Iq)|0,A=A+Math.imul(s,Zq)|0,f=f+Math.imul(o,x)|0,W=W+Math.imul(o,u)|0,W=W+Math.imul(U,x)|0,A=A+Math.imul(U,u)|0,f=f+Math.imul(jq,Kq)|0,W=W+Math.imul(jq,Pq)|0,W=W+Math.imul(Oq,Kq)|0,A=A+Math.imul(Oq,Pq)|0,f=f+Math.imul(r,wq)|0,W=W+Math.imul(r,Aq)|0,W=W+Math.imul(i,wq)|0,A=A+Math.imul(i,Aq)|0,f=f+Math.imul(B,Lq)|0,W=W+Math.imul(B,Eq)|0,W=W+Math.imul(t,Lq)|0,A=A+Math.imul(t,Eq)|0,f=f+Math.imul(R,Vq)|0,W=W+Math.imul(R,Mq)|0,W=W+Math.imul(b,Vq)|0,A=A+Math.imul(b,Mq)|0;var s$=(C+f|0)+((W&8191)<<13)|0;C=(A+(W>>>13)|0)+(s$>>>26)|0,s$&=67108863,f=Math.imul(vq,hq),W=Math.imul(vq,Dq),W=W+Math.imul(kq,hq)|0,A=Math.imul(kq,Dq),f=f+Math.imul(Hq,Sq)|0,W=W+Math.imul(Hq,Cq)|0,W=W+Math.imul(Xq,Sq)|0,A=A+Math.imul(Xq,Cq)|0,f=f+Math.imul(Yq,Nq)|0,W=W+Math.imul(Yq,Gq)|0,W=W+Math.imul(Jq,Nq)|0,A=A+Math.imul(Jq,Gq)|0,f=f+Math.imul(F,Iq)|0,W=W+Math.imul(F,Zq)|0,W=W+Math.imul(_q,Iq)|0,A=A+Math.imul(_q,Zq)|0,f=f+Math.imul(qq,x)|0,W=W+Math.imul(qq,u)|0,W=W+Math.imul(s,x)|0,A=A+Math.imul(s,u)|0,f=f+Math.imul(o,Kq)|0,W=W+Math.imul(o,Pq)|0,W=W+Math.imul(U,Kq)|0,A=A+Math.imul(U,Pq)|0,f=f+Math.imul(jq,wq)|0,W=W+Math.imul(jq,Aq)|0,W=W+Math.imul(Oq,wq)|0,A=A+Math.imul(Oq,Aq)|0,f=f+Math.imul(r,Lq)|0,W=W+Math.imul(r,Eq)|0,W=W+Math.imul(i,Lq)|0,A=A+Math.imul(i,Eq)|0,f=f+Math.imul(B,Vq)|0,W=W+Math.imul(B,Mq)|0,W=W+Math.imul(t,Vq)|0,A=A+Math.imul(t,Mq)|0;var q8=(C+f|0)+((W&8191)<<13)|0;C=(A+(W>>>13)|0)+(q8>>>26)|0,q8&=67108863,f=Math.imul(vq,Sq),W=Math.imul(vq,Cq),W=W+Math.imul(kq,Sq)|0,A=Math.imul(kq,Cq),f=f+Math.imul(Hq,Nq)|0,W=W+Math.imul(Hq,Gq)|0,W=W+Math.imul(Xq,Nq)|0,A=A+Math.imul(Xq,Gq)|0,f=f+Math.imul(Yq,Iq)|0,W=W+Math.imul(Yq,Zq)|0,W=W+Math.imul(Jq,Iq)|0,A=A+Math.imul(Jq,Zq)|0,f=f+Math.imul(F,x)|0,W=W+Math.imul(F,u)|0,W=W+Math.imul(_q,x)|0,A=A+Math.imul(_q,u)|0,f=f+Math.imul(qq,Kq)|0,W=W+Math.imul(qq,Pq)|0,W=W+Math.imul(s,Kq)|0,A=A+Math.imul(s,Pq)|0,f=f+Math.imul(o,wq)|0,W=W+Math.imul(o,Aq)|0,W=W+Math.imul(U,wq)|0,A=A+Math.imul(U,Aq)|0,f=f+Math.imul(jq,Lq)|0,W=W+Math.imul(jq,Eq)|0,W=W+Math.imul(Oq,Lq)|0,A=A+Math.imul(Oq,Eq)|0,f=f+Math.imul(r,Vq)|0,W=W+Math.imul(r,Mq)|0,W=W+Math.imul(i,Vq)|0,A=A+Math.imul(i,Mq)|0;var $8=(C+f|0)+((W&8191)<<13)|0;C=(A+(W>>>13)|0)+($8>>>26)|0,$8&=67108863,f=Math.imul(vq,Nq),W=Math.imul(vq,Gq),W=W+Math.imul(kq,Nq)|0,A=Math.imul(kq,Gq),f=f+Math.imul(Hq,Iq)|0,W=W+Math.imul(Hq,Zq)|0,W=W+Math.imul(Xq,Iq)|0,A=A+Math.imul(Xq,Zq)|0,f=f+Math.imul(Yq,x)|0,W=W+Math.imul(Yq,u)|0,W=W+Math.imul(Jq,x)|0,A=A+Math.imul(Jq,u)|0,f=f+Math.imul(F,Kq)|0,W=W+Math.imul(F,Pq)|0,W=W+Math.imul(_q,Kq)|0,A=A+Math.imul(_q,Pq)|0,f=f+Math.imul(qq,wq)|0,W=W+Math.imul(qq,Aq)|0,W=W+Math.imul(s,wq)|0,A=A+Math.imul(s,Aq)|0,f=f+Math.imul(o,Lq)|0,W=W+Math.imul(o,Eq)|0,W=W+Math.imul(U,Lq)|0,A=A+Math.imul(U,Eq)|0,f=f+Math.imul(jq,Vq)|0,W=W+Math.imul(jq,Mq)|0,W=W+Math.imul(Oq,Vq)|0,A=A+Math.imul(Oq,Mq)|0;var K8=(C+f|0)+((W&8191)<<13)|0;C=(A+(W>>>13)|0)+(K8>>>26)|0,K8&=67108863,f=Math.imul(vq,Iq),W=Math.imul(vq,Zq),W=W+Math.imul(kq,Iq)|0,A=Math.imul(kq,Zq),f=f+Math.imul(Hq,x)|0,W=W+Math.imul(Hq,u)|0,W=W+Math.imul(Xq,x)|0,A=A+Math.imul(Xq,u)|0,f=f+Math.imul(Yq,Kq)|0,W=W+Math.imul(Yq,Pq)|0,W=W+Math.imul(Jq,Kq)|0,A=A+Math.imul(Jq,Pq)|0,f=f+Math.imul(F,wq)|0,W=W+Math.imul(F,Aq)|0,W=W+Math.imul(_q,wq)|0,A=A+Math.imul(_q,Aq)|0,f=f+Math.imul(qq,Lq)|0,W=W+Math.imul(qq,Eq)|0,W=W+Math.imul(s,Lq)|0,A=A+Math.imul(s,Eq)|0,f=f+Math.imul(o,Vq)|0,W=W+Math.imul(o,Mq)|0,W=W+Math.imul(U,Vq)|0,A=A+Math.imul(U,Mq)|0;var _8=(C+f|0)+((W&8191)<<13)|0;C=(A+(W>>>13)|0)+(_8>>>26)|0,_8&=67108863,f=Math.imul(vq,x),W=Math.imul(vq,u),W=W+Math.imul(kq,x)|0,A=Math.imul(kq,u),f=f+Math.imul(Hq,Kq)|0,W=W+Math.imul(Hq,Pq)|0,W=W+Math.imul(Xq,Kq)|0,A=A+Math.imul(Xq,Pq)|0,f=f+Math.imul(Yq,wq)|0,W=W+Math.imul(Yq,Aq)|0,W=W+Math.imul(Jq,wq)|0,A=A+Math.imul(Jq,Aq)|0,f=f+Math.imul(F,Lq)|0,W=W+Math.imul(F,Eq)|0,W=W+Math.imul(_q,Lq)|0,A=A+Math.imul(_q,Eq)|0,f=f+Math.imul(qq,Vq)|0,W=W+Math.imul(qq,Mq)|0,W=W+Math.imul(s,Vq)|0,A=A+Math.imul(s,Mq)|0;var P8=(C+f|0)+((W&8191)<<13)|0;C=(A+(W>>>13)|0)+(P8>>>26)|0,P8&=67108863,f=Math.imul(vq,Kq),W=Math.imul(vq,Pq),W=W+Math.imul(kq,Kq)|0,A=Math.imul(kq,Pq),f=f+Math.imul(Hq,wq)|0,W=W+Math.imul(Hq,Aq)|0,W=W+Math.imul(Xq,wq)|0,A=A+Math.imul(Xq,Aq)|0,f=f+Math.imul(Yq,Lq)|0,W=W+Math.imul(Yq,Eq)|0,W=W+Math.imul(Jq,Lq)|0,A=A+Math.imul(Jq,Eq)|0,f=f+Math.imul(F,Vq)|0,W=W+Math.imul(F,Mq)|0,W=W+Math.imul(_q,Vq)|0,A=A+Math.imul(_q,Mq)|0;var Y8=(C+f|0)+((W&8191)<<13)|0;C=(A+(W>>>13)|0)+(Y8>>>26)|0,Y8&=67108863,f=Math.imul(vq,wq),W=Math.imul(vq,Aq),W=W+Math.imul(kq,wq)|0,A=Math.imul(kq,Aq),f=f+Math.imul(Hq,Lq)|0,W=W+Math.imul(Hq,Eq)|0,W=W+Math.imul(Xq,Lq)|0,A=A+Math.imul(Xq,Eq)|0,f=f+Math.imul(Yq,Vq)|0,W=W+Math.imul(Yq,Mq)|0,W=W+Math.imul(Jq,Vq)|0,A=A+Math.imul(Jq,Mq)|0;var j8=(C+f|0)+((W&8191)<<13)|0;C=(A+(W>>>13)|0)+(j8>>>26)|0,j8&=67108863,f=Math.imul(vq,Lq),W=Math.imul(vq,Eq),W=W+Math.imul(kq,Lq)|0,A=Math.imul(kq,Eq),f=f+Math.imul(Hq,Vq)|0,W=W+Math.imul(Hq,Mq)|0,W=W+Math.imul(Xq,Vq)|0,A=A+Math.imul(Xq,Mq)|0;var O8=(C+f|0)+((W&8191)<<13)|0;C=(A+(W>>>13)|0)+(O8>>>26)|0,O8&=67108863,f=Math.imul(vq,Vq),W=Math.imul(vq,Mq),W=W+Math.imul(kq,Vq)|0,A=Math.imul(kq,Mq);var W8=(C+f|0)+((W&8191)<<13)|0;if(C=(A+(W>>>13)|0)+(W8>>>26)|0,W8&=67108863,V[0]=m$,V[1]=J$,V[2]=O$,V[3]=h$,V[4]=F$,V[5]=t$,V[6]=Q$,V[7]=a$,V[8]=e$,V[9]=s$,V[10]=q8,V[11]=$8,V[12]=K8,V[13]=_8,V[14]=P8,V[15]=Y8,V[16]=j8,V[17]=O8,V[18]=W8,C!==0)V[19]=C,w.length++;return w};if(!Math.imul)h=E;function D(M,j,J){J.negative=j.negative^M.negative,J.length=M.length+j.length;var w=0,z=0;for(var T=0;T<J.length-1;T++){var V=z;z=0;var C=w&67108863,f=Math.min(T,j.length-1);for(var W=Math.max(0,T-M.length+1);W<=f;W++){var A=T-W,L=M.words[A]|0,R=j.words[W]|0,b=L*R,l=b&67108863;V=V+(b/67108864|0)|0,l=l+C|0,C=l&67108863,V=V+(l>>>26)|0,z+=V>>>26,V&=67108863}J.words[T]=C,w=V,V=z}if(w!==0)J.words[T]=w;else J.length--;return J.strip()}function I(M,j,J){var w=new g;return w.mulp(M,j,J)}Y.prototype.mulTo=function(j,J){var w,z=this.length+j.length;if(this.length===10&&j.length===10)w=h(this,j,J);else if(z<63)w=E(this,j,J);else if(z<1024)w=D(this,j,J);else w=I(this,j,J);return w};function g(M,j){this.x=M,this.y=j}g.prototype.makeRBT=function(j){var J=Array(j),w=Y.prototype._countBits(j)-1;for(var z=0;z<j;z++)J[z]=this.revBin(z,w,j);return J},g.prototype.revBin=function(j,J,w){if(j===0||j===w-1)return j;var z=0;for(var T=0;T<J;T++)z|=(j&1)<<J-T-1,j>>=1;return z},g.prototype.permute=function(j,J,w,z,T,V){for(var C=0;C<V;C++)z[C]=J[j[C]],T[C]=w[j[C]]},g.prototype.transform=function(j,J,w,z,T,V){this.permute(V,j,J,w,z,T);for(var C=1;C<T;C<<=1){var f=C<<1,W=Math.cos(2*Math.PI/f),A=Math.sin(2*Math.PI/f);for(var L=0;L<T;L+=f){var R=W,b=A;for(var l=0;l<C;l++){var B=w[L+l],t=z[L+l],Wq=w[L+l+C],r=z[L+l+C],i=R*Wq-b*r;if(r=R*r+b*Wq,Wq=i,w[L+l]=B+Wq,z[L+l]=t+r,w[L+l+C]=B-Wq,z[L+l+C]=t-r,l!==f)i=W*R-A*b,b=W*b+A*R,R=i}}}},g.prototype.guessLen13b=function(j,J){var w=Math.max(J,j)|1,z=w&1,T=0;for(w=w/2|0;w;w=w>>>1)T++;return 1<<T+1+z},g.prototype.conjugate=function(j,J,w){if(w<=1)return;for(var z=0;z<w/2;z++){var T=j[z];j[z]=j[w-z-1],j[w-z-1]=T,T=J[z],J[z]=-J[w-z-1],J[w-z-1]=-T}},g.prototype.normalize13b=function(j,J){var w=0;for(var z=0;z<J/2;z++){var T=Math.round(j[2*z+1]/J)*8192+Math.round(j[2*z]/J)+w;if(j[z]=T&67108863,T<67108864)w=0;else w=T/67108864|0}return j},g.prototype.convert13b=function(j,J,w,z){var T=0;for(var V=0;V<J;V++)T=T+(j[V]|0),w[2*V]=T&8191,T=T>>>13,w[2*V+1]=T&8191,T=T>>>13;for(V=2*J;V<z;++V)w[V]=0;P(T===0),P((T&-8192)===0)},g.prototype.stub=function(j){var J=Array(j);for(var w=0;w<j;w++)J[w]=0;return J},g.prototype.mulp=function(j,J,w){var z=2*this.guessLen13b(j.length,J.length),T=this.makeRBT(z),V=this.stub(z),C=Array(z),f=Array(z),W=Array(z),A=Array(z),L=Array(z),R=Array(z),b=w.words;b.length=z,this.convert13b(j.words,j.length,C,z),this.convert13b(J.words,J.length,A,z),this.transform(C,V,f,W,z,T),this.transform(A,V,L,R,z,T);for(var l=0;l<z;l++){var B=f[l]*L[l]-W[l]*R[l];W[l]=f[l]*R[l]+W[l]*L[l],f[l]=B}return this.conjugate(f,W,z),this.transform(f,W,b,V,z,T),this.conjugate(b,V,z),this.normalize13b(b,z),w.negative=j.negative^J.negative,w.length=j.length+J.length,w.strip()},Y.prototype.mul=function(j){var J=new Y(null);return J.words=Array(this.length+j.length),this.mulTo(j,J)},Y.prototype.mulf=function(j){var J=new Y(null);return J.words=Array(this.length+j.length),I(this,j,J)},Y.prototype.imul=function(j){return this.clone().mulTo(j,this)},Y.prototype.imuln=function(j){P(typeof j==="number"),P(j<67108864);var J=0;for(var w=0;w<this.length;w++){var z=(this.words[w]|0)*j,T=(z&67108863)+(J&67108863);J>>=26,J+=z/67108864|0,J+=T>>>26,this.words[w]=T&67108863}if(J!==0)this.words[w]=J,this.length++;return this.length=j===0?1:this.length,this},Y.prototype.muln=function(j){return this.clone().imuln(j)},Y.prototype.sqr=function(){return this.mul(this)},Y.prototype.isqr=function(){return this.imul(this.clone())},Y.prototype.pow=function(j){var J=N(j);if(J.length===0)return new Y(1);var w=this;for(var z=0;z<J.length;z++,w=w.sqr())if(J[z]!==0)break;if(++z<J.length)for(var T=w.sqr();z<J.length;z++,T=T.sqr()){if(J[z]===0)continue;w=w.mul(T)}return w},Y.prototype.iushln=function(j){P(typeof j==="number"&&j>=0);var J=j%26,w=(j-J)/26,z=67108863>>>26-J<<26-J,T;if(J!==0){var V=0;for(T=0;T<this.length;T++){var C=this.words[T]&z,f=(this.words[T]|0)-C<<J;this.words[T]=f|V,V=C>>>26-J}if(V)this.words[T]=V,this.length++}if(w!==0){for(T=this.length-1;T>=0;T--)this.words[T+w]=this.words[T];for(T=0;T<w;T++)this.words[T]=0;this.length+=w}return this.strip()},Y.prototype.ishln=function(j){return P(this.negative===0),this.iushln(j)},Y.prototype.iushrn=function(j,J,w){P(typeof j==="number"&&j>=0);var z;if(J)z=(J-J%26)/26;else z=0;var T=j%26,V=Math.min((j-T)/26,this.length),C=67108863^67108863>>>T<<T,f=w;if(z-=V,z=Math.max(0,z),f){for(var W=0;W<V;W++)f.words[W]=this.words[W];f.length=V}if(V===0);else if(this.length>V){this.length-=V;for(W=0;W<this.length;W++)this.words[W]=this.words[W+V]}else this.words[0]=0,this.length=1;var A=0;for(W=this.length-1;W>=0&&(A!==0||W>=z);W--){var L=this.words[W]|0;this.words[W]=A<<26-T|L>>>T,A=L&C}if(f&&A!==0)f.words[f.length++]=A;if(this.length===0)this.words[0]=0,this.length=1;return this.strip()},Y.prototype.ishrn=function(j,J,w){return P(this.negative===0),this.iushrn(j,J,w)},Y.prototype.shln=function(j){return this.clone().ishln(j)},Y.prototype.ushln=function(j){return this.clone().iushln(j)},Y.prototype.shrn=function(j){return this.clone().ishrn(j)},Y.prototype.ushrn=function(j){return this.clone().iushrn(j)},Y.prototype.testn=function(j){P(typeof j==="number"&&j>=0);var J=j%26,w=(j-J)/26,z=1<<J;if(this.length<=w)return!1;var T=this.words[w];return!!(T&z)},Y.prototype.imaskn=function(j){P(typeof j==="number"&&j>=0);var J=j%26,w=(j-J)/26;if(P(this.negative===0,"imaskn works only with positive numbers"),this.length<=w)return this;if(J!==0)w++;if(this.length=Math.min(w,this.length),J!==0){var z=67108863^67108863>>>J<<J;this.words[this.length-1]&=z}return this.strip()},Y.prototype.maskn=function(j){return this.clone().imaskn(j)},Y.prototype.iaddn=function(j){if(P(typeof j==="number"),P(j<67108864),j<0)return this.isubn(-j);if(this.negative!==0){if(this.length===1&&(this.words[0]|0)<j)return this.words[0]=j-(this.words[0]|0),this.negative=0,this;return this.negative=0,this.isubn(j),this.negative=1,this}return this._iaddn(j)},Y.prototype._iaddn=function(j){this.words[0]+=j;for(var J=0;J<this.length&&this.words[J]>=67108864;J++)if(this.words[J]-=67108864,J===this.length-1)this.words[J+1]=1;else this.words[J+1]++;return this.length=Math.max(this.length,J+1),this},Y.prototype.isubn=function(j){if(P(typeof j==="number"),P(j<67108864),j<0)return this.iaddn(-j);if(this.negative!==0)return this.negative=0,this.iaddn(j),this.negative=1,this;if(this.words[0]-=j,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var J=0;J<this.length&&this.words[J]<0;J++)this.words[J]+=67108864,this.words[J+1]-=1;return this.strip()},Y.prototype.addn=function(j){return this.clone().iaddn(j)},Y.prototype.subn=function(j){return this.clone().isubn(j)},Y.prototype.iabs=function(){return this.negative=0,this},Y.prototype.abs=function(){return this.clone().iabs()},Y.prototype._ishlnsubmul=function(j,J,w){var z=j.length+w,T;this._expand(z);var V,C=0;for(T=0;T<j.length;T++){V=(this.words[T+w]|0)+C;var f=(j.words[T]|0)*J;V-=f&67108863,C=(V>>26)-(f/67108864|0),this.words[T+w]=V&67108863}for(;T<this.length-w;T++)V=(this.words[T+w]|0)+C,C=V>>26,this.words[T+w]=V&67108863;if(C===0)return this.strip();P(C===-1),C=0;for(T=0;T<this.length;T++)V=-(this.words[T]|0)+C,C=V>>26,this.words[T]=V&67108863;return this.negative=1,this.strip()},Y.prototype._wordDiv=function(j,J){var w=this.length-j.length,z=this.clone(),T=j,V=T.words[T.length-1]|0,C=this._countBits(V);if(w=26-C,w!==0)T=T.ushln(w),z.iushln(w),V=T.words[T.length-1]|0;var f=z.length-T.length,W;if(J!=="mod"){W=new Y(null),W.length=f+1,W.words=Array(W.length);for(var A=0;A<W.length;A++)W.words[A]=0}var L=z.clone()._ishlnsubmul(T,1,f);if(L.negative===0){if(z=L,W)W.words[f]=1}for(var R=f-1;R>=0;R--){var b=(z.words[T.length+R]|0)*67108864+(z.words[T.length+R-1]|0);b=Math.min(b/V|0,67108863),z._ishlnsubmul(T,b,R);while(z.negative!==0)if(b--,z.negative=0,z._ishlnsubmul(T,1,R),!z.isZero())z.negative^=1;if(W)W.words[R]=b}if(W)W.strip();if(z.strip(),J!=="div"&&w!==0)z.iushrn(w);return{div:W||null,mod:z}},Y.prototype.divmod=function(j,J,w){if(P(!j.isZero()),this.isZero())return{div:new Y(0),mod:new Y(0)};var z,T,V;if(this.negative!==0&&j.negative===0){if(V=this.neg().divmod(j,J),J!=="mod")z=V.div.neg();if(J!=="div"){if(T=V.mod.neg(),w&&T.negative!==0)T.iadd(j)}return{div:z,mod:T}}if(this.negative===0&&j.negative!==0){if(V=this.divmod(j.neg(),J),J!=="mod")z=V.div.neg();return{div:z,mod:V.mod}}if((this.negative&j.negative)!==0){if(V=this.neg().divmod(j.neg(),J),J!=="div"){if(T=V.mod.neg(),w&&T.negative!==0)T.isub(j)}return{div:V.div,mod:T}}if(j.length>this.length||this.cmp(j)<0)return{div:new Y(0),mod:this};if(j.length===1){if(J==="div")return{div:this.divn(j.words[0]),mod:null};if(J==="mod")return{div:null,mod:new Y(this.modn(j.words[0]))};return{div:this.divn(j.words[0]),mod:new Y(this.modn(j.words[0]))}}return this._wordDiv(j,J)},Y.prototype.div=function(j){return this.divmod(j,"div",!1).div},Y.prototype.mod=function(j){return this.divmod(j,"mod",!1).mod},Y.prototype.umod=function(j){return this.divmod(j,"mod",!0).mod},Y.prototype.divRound=function(j){var J=this.divmod(j);if(J.mod.isZero())return J.div;var w=J.div.negative!==0?J.mod.isub(j):J.mod,z=j.ushrn(1),T=j.andln(1),V=w.cmp(z);if(V<0||T===1&&V===0)return J.div;return J.div.negative!==0?J.div.isubn(1):J.div.iaddn(1)},Y.prototype.modn=function(j){P(j<=67108863);var J=67108864%j,w=0;for(var z=this.length-1;z>=0;z--)w=(J*w+(this.words[z]|0))%j;return w},Y.prototype.idivn=function(j){P(j<=67108863);var J=0;for(var w=this.length-1;w>=0;w--){var z=(this.words[w]|0)+J*67108864;this.words[w]=z/j|0,J=z%j}return this.strip()},Y.prototype.divn=function(j){return this.clone().idivn(j)},Y.prototype.egcd=function(j){P(j.negative===0),P(!j.isZero());var J=this,w=j.clone();if(J.negative!==0)J=J.umod(j);else J=J.clone();var z=new Y(1),T=new Y(0),V=new Y(0),C=new Y(1),f=0;while(J.isEven()&&w.isEven())J.iushrn(1),w.iushrn(1),++f;var W=w.clone(),A=J.clone();while(!J.isZero()){for(var L=0,R=1;(J.words[0]&R)===0&&L<26;++L,R<<=1);if(L>0){J.iushrn(L);while(L-- >0){if(z.isOdd()||T.isOdd())z.iadd(W),T.isub(A);z.iushrn(1),T.iushrn(1)}}for(var b=0,l=1;(w.words[0]&l)===0&&b<26;++b,l<<=1);if(b>0){w.iushrn(b);while(b-- >0){if(V.isOdd()||C.isOdd())V.iadd(W),C.isub(A);V.iushrn(1),C.iushrn(1)}}if(J.cmp(w)>=0)J.isub(w),z.isub(V),T.isub(C);else w.isub(J),V.isub(z),C.isub(T)}return{a:V,b:C,gcd:w.iushln(f)}},Y.prototype._invmp=function(j){P(j.negative===0),P(!j.isZero());var J=this,w=j.clone();if(J.negative!==0)J=J.umod(j);else J=J.clone();var z=new Y(1),T=new Y(0),V=w.clone();while(J.cmpn(1)>0&&w.cmpn(1)>0){for(var C=0,f=1;(J.words[0]&f)===0&&C<26;++C,f<<=1);if(C>0){J.iushrn(C);while(C-- >0){if(z.isOdd())z.iadd(V);z.iushrn(1)}}for(var W=0,A=1;(w.words[0]&A)===0&&W<26;++W,A<<=1);if(W>0){w.iushrn(W);while(W-- >0){if(T.isOdd())T.iadd(V);T.iushrn(1)}}if(J.cmp(w)>=0)J.isub(w),z.isub(T);else w.isub(J),T.isub(z)}var L;if(J.cmpn(1)===0)L=z;else L=T;if(L.cmpn(0)<0)L.iadd(j);return L},Y.prototype.gcd=function(j){if(this.isZero())return j.abs();if(j.isZero())return this.abs();var J=this.clone(),w=j.clone();J.negative=0,w.negative=0;for(var z=0;J.isEven()&&w.isEven();z++)J.iushrn(1),w.iushrn(1);do{while(J.isEven())J.iushrn(1);while(w.isEven())w.iushrn(1);var T=J.cmp(w);if(T<0){var V=J;J=w,w=V}else if(T===0||w.cmpn(1)===0)break;J.isub(w)}while(!0);return w.iushln(z)},Y.prototype.invm=function(j){return this.egcd(j).a.umod(j)},Y.prototype.isEven=function(){return(this.words[0]&1)===0},Y.prototype.isOdd=function(){return(this.words[0]&1)===1},Y.prototype.andln=function(j){return this.words[0]&j},Y.prototype.bincn=function(j){P(typeof j==="number");var J=j%26,w=(j-J)/26,z=1<<J;if(this.length<=w)return this._expand(w+1),this.words[w]|=z,this;var T=z;for(var V=w;T!==0&&V<this.length;V++){var C=this.words[V]|0;C+=T,T=C>>>26,C&=67108863,this.words[V]=C}if(T!==0)this.words[V]=T,this.length++;return this},Y.prototype.isZero=function(){return this.length===1&&this.words[0]===0},Y.prototype.cmpn=function(j){var J=j<0;if(this.negative!==0&&!J)return-1;if(this.negative===0&&J)return 1;this.strip();var w;if(this.length>1)w=1;else{if(J)j=-j;P(j<=67108863,"Number is too big");var z=this.words[0]|0;w=z===j?0:z<j?-1:1}if(this.negative!==0)return-w|0;return w},Y.prototype.cmp=function(j){if(this.negative!==0&&j.negative===0)return-1;if(this.negative===0&&j.negative!==0)return 1;var J=this.ucmp(j);if(this.negative!==0)return-J|0;return J},Y.prototype.ucmp=function(j){if(this.length>j.length)return 1;if(this.length<j.length)return-1;var J=0;for(var w=this.length-1;w>=0;w--){var z=this.words[w]|0,T=j.words[w]|0;if(z===T)continue;if(z<T)J=-1;else if(z>T)J=1;break}return J},Y.prototype.gtn=function(j){return this.cmpn(j)===1},Y.prototype.gt=function(j){return this.cmp(j)===1},Y.prototype.gten=function(j){return this.cmpn(j)>=0},Y.prototype.gte=function(j){return this.cmp(j)>=0},Y.prototype.ltn=function(j){return this.cmpn(j)===-1},Y.prototype.lt=function(j){return this.cmp(j)===-1},Y.prototype.lten=function(j){return this.cmpn(j)<=0},Y.prototype.lte=function(j){return this.cmp(j)<=0},Y.prototype.eqn=function(j){return this.cmpn(j)===0},Y.prototype.eq=function(j){return this.cmp(j)===0},Y.red=function(j){return new d(j)},Y.prototype.toRed=function(j){return P(!this.red,"Already a number in reduction context"),P(this.negative===0,"red works only with positives"),j.convertTo(this)._forceRed(j)},Y.prototype.fromRed=function(){return P(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},Y.prototype._forceRed=function(j){return this.red=j,this},Y.prototype.forceRed=function(j){return P(!this.red,"Already a number in reduction context"),this._forceRed(j)},Y.prototype.redAdd=function(j){return P(this.red,"redAdd works only with red numbers"),this.red.add(this,j)},Y.prototype.redIAdd=function(j){return P(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,j)},Y.prototype.redSub=function(j){return P(this.red,"redSub works only with red numbers"),this.red.sub(this,j)},Y.prototype.redISub=function(j){return P(this.red,"redISub works only with red numbers"),this.red.isub(this,j)},Y.prototype.redShl=function(j){return P(this.red,"redShl works only with red numbers"),this.red.shl(this,j)},Y.prototype.redMul=function(j){return P(this.red,"redMul works only with red numbers"),this.red._verify2(this,j),this.red.mul(this,j)},Y.prototype.redIMul=function(j){return P(this.red,"redMul works only with red numbers"),this.red._verify2(this,j),this.red.imul(this,j)},Y.prototype.redSqr=function(){return P(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},Y.prototype.redISqr=function(){return P(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},Y.prototype.redSqrt=function(){return P(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},Y.prototype.redInvm=function(){return P(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},Y.prototype.redNeg=function(){return P(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},Y.prototype.redPow=function(j){return P(this.red&&!j.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,j)};var y={k256:null,p224:null,p192:null,p25519:null};function p(M,j){this.name=M,this.p=new Y(j,16),this.n=this.p.bitLength(),this.k=new Y(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}p.prototype._tmp=function(){var j=new Y(null);return j.words=Array(Math.ceil(this.n/13)),j},p.prototype.ireduce=function(j){var J=j,w;do this.split(J,this.tmp),J=this.imulK(J),J=J.iadd(this.tmp),w=J.bitLength();while(w>this.n);var z=w<this.n?-1:J.ucmp(this.p);if(z===0)J.words[0]=0,J.length=1;else if(z>0)J.isub(this.p);else if(J.strip!==void 0)J.strip();else J._strip();return J},p.prototype.split=function(j,J){j.iushrn(this.n,0,J)},p.prototype.imulK=function(j){return j.imul(this.k)};function m(){p.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}O(m,p),m.prototype.split=function(j,J){var w=4194303,z=Math.min(j.length,9);for(var T=0;T<z;T++)J.words[T]=j.words[T];if(J.length=z,j.length<=9){j.words[0]=0,j.length=1;return}var V=j.words[9];J.words[J.length++]=V&w;for(T=10;T<j.length;T++){var C=j.words[T]|0;j.words[T-10]=(C&w)<<4|V>>>22,V=C}if(V>>>=22,j.words[T-10]=V,V===0&&j.length>10)j.length-=10;else j.length-=9},m.prototype.imulK=function(j){j.words[j.length]=0,j.words[j.length+1]=0,j.length+=2;var J=0;for(var w=0;w<j.length;w++){var z=j.words[w]|0;J+=z*977,j.words[w]=J&67108863,J=z*64+(J/67108864|0)}if(j.words[j.length-1]===0){if(j.length--,j.words[j.length-1]===0)j.length--}return j};function c(){p.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}O(c,p);function $q(){p.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}O($q,p);function e(){p.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}O(e,p),e.prototype.imulK=function(j){var J=0;for(var w=0;w<j.length;w++){var z=(j.words[w]|0)*19+J,T=z&67108863;z>>>=26,j.words[w]=T,J=z}if(J!==0)j.words[j.length++]=J;return j},Y._prime=function(j){if(y[j])return y[j];var J;if(j==="k256")J=new m;else if(j==="p224")J=new c;else if(j==="p192")J=new $q;else if(j==="p25519")J=new e;else throw Error("Unknown prime "+j);return y[j]=J,J};function d(M){if(typeof M==="string"){var j=Y._prime(M);this.m=j.p,this.prime=j}else P(M.gtn(1),"modulus must be greater than 1"),this.m=M,this.prime=null}d.prototype._verify1=function(j){P(j.negative===0,"red works only with positives"),P(j.red,"red works only with red numbers")},d.prototype._verify2=function(j,J){P((j.negative|J.negative)===0,"red works only with positives"),P(j.red&&j.red===J.red,"red works only with red numbers")},d.prototype.imod=function(j){if(this.prime)return this.prime.ireduce(j)._forceRed(this);return j.umod(this.m)._forceRed(this)},d.prototype.neg=function(j){if(j.isZero())return j.clone();return this.m.sub(j)._forceRed(this)},d.prototype.add=function(j,J){this._verify2(j,J);var w=j.add(J);if(w.cmp(this.m)>=0)w.isub(this.m);return w._forceRed(this)},d.prototype.iadd=function(j,J){this._verify2(j,J);var w=j.iadd(J);if(w.cmp(this.m)>=0)w.isub(this.m);return w},d.prototype.sub=function(j,J){this._verify2(j,J);var w=j.sub(J);if(w.cmpn(0)<0)w.iadd(this.m);return w._forceRed(this)},d.prototype.isub=function(j,J){this._verify2(j,J);var w=j.isub(J);if(w.cmpn(0)<0)w.iadd(this.m);return w},d.prototype.shl=function(j,J){return this._verify1(j),this.imod(j.ushln(J))},d.prototype.imul=function(j,J){return this._verify2(j,J),this.imod(j.imul(J))},d.prototype.mul=function(j,J){return this._verify2(j,J),this.imod(j.mul(J))},d.prototype.isqr=function(j){return this.imul(j,j.clone())},d.prototype.sqr=function(j){return this.mul(j,j)},d.prototype.sqrt=function(j){if(j.isZero())return j.clone();var J=this.m.andln(3);if(P(J%2===1),J===3){var w=this.m.add(new Y(1)).iushrn(2);return this.pow(j,w)}var z=this.m.subn(1),T=0;while(!z.isZero()&&z.andln(1)===0)T++,z.iushrn(1);P(!z.isZero());var V=new Y(1).toRed(this),C=V.redNeg(),f=this.m.subn(1).iushrn(1),W=this.m.bitLength();W=new Y(2*W*W).toRed(this);while(this.pow(W,f).cmp(C)!==0)W.redIAdd(C);var A=this.pow(W,z),L=this.pow(j,z.addn(1).iushrn(1)),R=this.pow(j,z),b=T;while(R.cmp(V)!==0){var l=R;for(var B=0;l.cmp(V)!==0;B++)l=l.redSqr();P(B<b);var t=this.pow(A,new Y(1).iushln(b-B-1));L=L.redMul(t),A=t.redSqr(),R=R.redMul(A),b=B}return L},d.prototype.invm=function(j){var J=j._invmp(this.m);if(J.negative!==0)return J.negative=0,this.imod(J).redNeg();else return this.imod(J)},d.prototype.pow=function(j,J){if(J.isZero())return new Y(1).toRed(this);if(J.cmpn(1)===0)return j.clone();var w=4,z=Array(1<<w);z[0]=new Y(1).toRed(this),z[1]=j;for(var T=2;T<z.length;T++)z[T]=this.mul(z[T-1],j);var V=z[0],C=0,f=0,W=J.bitLength()%26;if(W===0)W=26;for(T=J.length-1;T>=0;T--){var A=J.words[T];for(var L=W-1;L>=0;L--){var R=A>>L&1;if(V!==z[0])V=this.sqr(V);if(R===0&&C===0){f=0;continue}if(C<<=1,C|=R,f++,f!==w&&(T!==0||L!==0))continue;V=this.mul(V,z[C]),f=0,C=0}W=26}return V},d.prototype.convertTo=function(j){var J=j.umod(this.m);return J===j?J.clone():J},d.prototype.convertFrom=function(j){var J=j.clone();return J.red=null,J},Y.mont=function(j){return new n(j)};function n(M){if(d.call(this,M),this.shift=this.m.bitLength(),this.shift%26!==0)this.shift+=26-this.shift%26;this.r=new Y(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}O(n,d),n.prototype.convertTo=function(j){return this.imod(j.ushln(this.shift))},n.prototype.convertFrom=function(j){var J=this.imod(j.mul(this.rinv));return J.red=null,J},n.prototype.imul=function(j,J){if(j.isZero()||J.isZero())return j.words[0]=0,j.length=1,j;var w=j.imul(J),z=w.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),T=w.isub(z).iushrn(this.shift),V=T;if(T.cmp(this.m)>=0)V=T.isub(this.m);else if(T.cmpn(0)<0)V=T.iadd(this.m);return V._forceRed(this)},n.prototype.mul=function(j,J){if(j.isZero()||J.isZero())return new Y(0)._forceRed(this);var w=j.mul(J),z=w.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),T=w.isub(z).iushrn(this.shift),V=T;if(T.cmp(this.m)>=0)V=T.isub(this.m);else if(T.cmpn(0)<0)V=T.iadd(this.m);return V._forceRed(this)},n.prototype.invm=function(j){var J=this.imod(j._invmp(this.m).mul(this.r2));return J._forceRed(this)}})(typeof $>"u"||$,q)}),P_=lq((q,$)=>{$.exports=K;function K(_,P){if(!_)throw Error(P||"Assertion failed")}K.equal=function(P,O,Y){if(P!=O)throw Error(Y||"Assertion failed: "+P+" != "+O)}}),Zf=lq((q)=>{var $=q;function K(O,Y){if(Array.isArray(O))return O.slice();if(!O)return[];var H=[];if(typeof O!=="string"){for(var v=0;v<O.length;v++)H[v]=O[v]|0;return H}if(Y==="hex"){if(O=O.replace(/[^a-z0-9]+/ig,""),O.length%2!==0)O="0"+O;for(var v=0;v<O.length;v+=2)H.push(parseInt(O[v]+O[v+1],16))}else for(var v=0;v<O.length;v++){var X=O.charCodeAt(v),Z=X>>8,k=X&255;if(Z)H.push(Z,k);else H.push(k)}return H}$.toArray=K;function _(O){if(O.length===1)return"0"+O;else return O}$.zero2=_;function P(O){var Y="";for(var H=0;H<O.length;H++)Y+=_(O[H].toString(16));return Y}$.toHex=P,$.encode=function(Y,H){if(H==="hex")return P(Y);else return Y}}),Z6=lq((q)=>{var $=q,K=bK(),_=P_(),P=Zf();$.assert=_,$.toArray=P.toArray,$.zero2=P.zero2,$.toHex=P.toHex,$.encode=P.encode;function O(Z,k,G){var S=Array(Math.max(Z.bitLength(),G)+1),N;for(N=0;N<S.length;N+=1)S[N]=0;var E=1<<k+1,h=Z.clone();for(N=0;N<S.length;N++){var D,I=h.andln(E-1);if(h.isOdd()){if(I>(E>>1)-1)D=(E>>1)-I;else D=I;h.isubn(D)}else D=0;S[N]=D,h.iushrn(1)}return S}$.getNAF=O;function Y(Z,k){var G=[[],[]];Z=Z.clone(),k=k.clone();var S=0,N=0,E;while(Z.cmpn(-S)>0||k.cmpn(-N)>0){var h=Z.andln(3)+S&3,D=k.andln(3)+N&3;if(h===3)h=-1;if(D===3)D=-1;var I;if((h&1)===0)I=0;else if(E=Z.andln(7)+S&7,(E===3||E===5)&&D===2)I=-h;else I=h;G[0].push(I);var g;if((D&1)===0)g=0;else if(E=k.andln(7)+N&7,(E===3||E===5)&&h===2)g=-D;else g=D;if(G[1].push(g),2*S===I+1)S=1-S;if(2*N===g+1)N=1-N;Z.iushrn(1),k.iushrn(1)}return G}$.getJSF=Y;function H(Z,k,G){var S="_"+k;Z.prototype[k]=function(){return this[S]!==void 0?this[S]:this[S]=G.call(this)}}$.cachedProperty=H;function v(Z){return typeof Z==="string"?$.toArray(Z,"hex"):Z}$.parseBytes=v;function X(Z){return new K(Z,"hex","le")}$.intFromLE=X}),Vf=lq((q,$)=>{var K;$.exports=function(Y){if(!K)K=new _(null);return K.generate(Y)};function _(O){this.rand=O}if($.exports.Rand=_,_.prototype.generate=function(Y){return this._rand(Y)},_.prototype._rand=function(Y){if(this.rand.getBytes)return this.rand.getBytes(Y);var H=new Uint8Array(Y);for(var v=0;v<H.length;v++)H[v]=this.rand.getByte();return H},typeof self==="object"){if(self.crypto&&self.crypto.getRandomValues)_.prototype._rand=function(Y){var H=new Uint8Array(Y);return self.crypto.getRandomValues(H),H};else if(self.msCrypto&&self.msCrypto.getRandomValues)_.prototype._rand=function(Y){var H=new Uint8Array(Y);return self.msCrypto.getRandomValues(H),H};else if(typeof window==="object")_.prototype._rand=function(){throw Error("Not implemented yet")}}else try{if(P=($6(),M$(q6)),typeof P.randomBytes!=="function")throw Error("Not supported");_.prototype._rand=function(Y){return P.randomBytes(Y)}}catch(O){}var P}),z5=lq((q,$)=>{var K=bK(),_=Z6(),P=_.getNAF,O=_.getJSF,Y=_.assert;function H(X,Z){this.type=X,this.p=new K(Z.p,16),this.red=Z.prime?K.red(Z.prime):K.mont(this.p),this.zero=new K(0).toRed(this.red),this.one=new K(1).toRed(this.red),this.two=new K(2).toRed(this.red),this.n=Z.n&&new K(Z.n,16),this.g=Z.g&&this.pointFromJSON(Z.g,Z.gRed),this._wnafT1=[,,,,],this._wnafT2=[,,,,],this._wnafT3=[,,,,],this._wnafT4=[,,,,],this._bitLength=this.n?this.n.bitLength():0;var k=this.n&&this.p.div(this.n);if(!k||k.cmpn(100)>0)this.redN=null;else this._maxwellTrick=!0,this.redN=this.n.toRed(this.red)}$.exports=H,H.prototype.point=function(){throw Error("Not implemented")},H.prototype.validate=function(){throw Error("Not implemented")},H.prototype._fixedNafMul=function(Z,k){Y(Z.precomputed);var G=Z._getDoubles(),S=P(k,1,this._bitLength),N=(1<<G.step+1)-(G.step%2===0?2:1);N/=3;var E=[],h,D;for(h=0;h<S.length;h+=G.step){D=0;for(var I=h+G.step-1;I>=h;I--)D=(D<<1)+S[I];E.push(D)}var g=this.jpoint(null,null,null),y=this.jpoint(null,null,null);for(var p=N;p>0;p--){for(h=0;h<E.length;h++)if(D=E[h],D===p)y=y.mixedAdd(G.points[h]);else if(D===-p)y=y.mixedAdd(G.points[h].neg());g=g.add(y)}return g.toP()},H.prototype._wnafMul=function(Z,k){var G=4,S=Z._getNAFPoints(G);G=S.wnd;var N=S.points,E=P(k,G,this._bitLength),h=this.jpoint(null,null,null);for(var D=E.length-1;D>=0;D--){for(var I=0;D>=0&&E[D]===0;D--)I++;if(D>=0)I++;if(h=h.dblp(I),D<0)break;var g=E[D];if(Y(g!==0),Z.type==="affine")if(g>0)h=h.mixedAdd(N[g-1>>1]);else h=h.mixedAdd(N[-g-1>>1].neg());else if(g>0)h=h.add(N[g-1>>1]);else h=h.add(N[-g-1>>1].neg())}return Z.type==="affine"?h.toP():h},H.prototype._wnafMulAdd=function(Z,k,G,S,N){var E=this._wnafT1,h=this._wnafT2,D=this._wnafT3,I=0,g,y,p;for(g=0;g<S;g++){p=k[g];var m=p._getNAFPoints(Z);E[g]=m.wnd,h[g]=m.points}for(g=S-1;g>=1;g-=2){var c=g-1,$q=g;if(E[c]!==1||E[$q]!==1){D[c]=P(G[c],E[c],this._bitLength),D[$q]=P(G[$q],E[$q],this._bitLength),I=Math.max(D[c].length,I),I=Math.max(D[$q].length,I);continue}var e=[k[c],null,null,k[$q]];if(k[c].y.cmp(k[$q].y)===0)e[1]=k[c].add(k[$q]),e[2]=k[c].toJ().mixedAdd(k[$q].neg());else if(k[c].y.cmp(k[$q].y.redNeg())===0)e[1]=k[c].toJ().mixedAdd(k[$q]),e[2]=k[c].add(k[$q].neg());else e[1]=k[c].toJ().mixedAdd(k[$q]),e[2]=k[c].toJ().mixedAdd(k[$q].neg());var d=[-3,-1,-5,-7,0,7,5,1,3],n=O(G[c],G[$q]);I=Math.max(n[0].length,I),D[c]=Array(I),D[$q]=Array(I);for(y=0;y<I;y++){var M=n[0][y]|0,j=n[1][y]|0;D[c][y]=d[(M+1)*3+(j+1)],D[$q][y]=0,h[c]=e}}var J=this.jpoint(null,null,null),w=this._wnafT4;for(g=I;g>=0;g--){var z=0;while(g>=0){var T=!0;for(y=0;y<S;y++)if(w[y]=D[y][g]|0,w[y]!==0)T=!1;if(!T)break;z++,g--}if(g>=0)z++;if(J=J.dblp(z),g<0)break;for(y=0;y<S;y++){var V=w[y];if(V===0)continue;else if(V>0)p=h[y][V-1>>1];else if(V<0)p=h[y][-V-1>>1].neg();if(p.type==="affine")J=J.mixedAdd(p);else J=J.add(p)}}for(g=0;g<S;g++)h[g]=null;if(N)return J;else return J.toP()};function v(X,Z){this.curve=X,this.type=Z,this.precomputed=null}H.BasePoint=v,v.prototype.eq=function(){throw Error("Not implemented")},v.prototype.validate=function(){return this.curve.validate(this)},H.prototype.decodePoint=function(Z,k){Z=_.toArray(Z,k);var G=this.p.byteLength();if((Z[0]===4||Z[0]===6||Z[0]===7)&&Z.length-1===2*G){if(Z[0]===6)Y(Z[Z.length-1]%2===0);else if(Z[0]===7)Y(Z[Z.length-1]%2===1);var S=this.point(Z.slice(1,1+G),Z.slice(1+G,1+2*G));return S}else if((Z[0]===2||Z[0]===3)&&Z.length-1===G)return this.pointFromX(Z.slice(1,1+G),Z[0]===3);throw Error("Unknown point format")},v.prototype.encodeCompressed=function(Z){return this.encode(Z,!0)},v.prototype._encode=function(Z){var k=this.curve.p.byteLength(),G=this.getX().toArray("be",k);if(Z)return[this.getY().isEven()?2:3].concat(G);return[4].concat(G,this.getY().toArray("be",k))},v.prototype.encode=function(Z,k){return _.encode(this._encode(k),Z)},v.prototype.precompute=function(Z){if(this.precomputed)return this;var k={doubles:null,naf:null,beta:null};return k.naf=this._getNAFPoints(8),k.doubles=this._getDoubles(4,Z),k.beta=this._getBeta(),this.precomputed=k,this},v.prototype._hasDoubles=function(Z){if(!this.precomputed)return!1;var k=this.precomputed.doubles;if(!k)return!1;return k.points.length>=Math.ceil((Z.bitLength()+1)/k.step)},v.prototype._getDoubles=function(Z,k){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;var G=[this],S=this;for(var N=0;N<k;N+=Z){for(var E=0;E<Z;E++)S=S.dbl();G.push(S)}return{step:Z,points:G}},v.prototype._getNAFPoints=function(Z){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;var k=[this],G=(1<<Z)-1,S=G===1?null:this.dbl();for(var N=1;N<G;N++)k[N]=k[N-1].add(S);return{wnd:Z,points:k}},v.prototype._getBeta=function(){return null},v.prototype.dblp=function(Z){var k=this;for(var G=0;G<Z;G++)k=k.dbl();return k}}),nb=lq((q,$)=>{if(typeof Object.create==="function")$.exports=function(_,P){if(P)_.super_=P,_.prototype=Object.create(P.prototype,{constructor:{value:_,enumerable:!1,writable:!0,configurable:!0}})};else $.exports=function(_,P){if(P){_.super_=P;var O=function(){};O.prototype=P.prototype,_.prototype=new O,_.prototype.constructor=_}}}),W6=lq((q,$)=>{try{if(K=(BX(),M$(rX)),typeof K.inherits!=="function")throw"";$.exports=K.inherits}catch(_){$.exports=nb()}var K}),rb=lq((q,$)=>{var K=Z6(),_=bK(),P=W6(),O=z5(),Y=K.assert;function H(Z){O.call(this,"short",Z),this.a=new _(Z.a,16).toRed(this.red),this.b=new _(Z.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=this.a.fromRed().cmpn(0)===0,this.threeA=this.a.fromRed().sub(this.p).cmpn(-3)===0,this.endo=this._getEndomorphism(Z),this._endoWnafT1=[,,,,],this._endoWnafT2=[,,,,]}P(H,O),$.exports=H,H.prototype._getEndomorphism=function(k){if(!this.zeroA||!this.g||!this.n||this.p.modn(3)!==1)return;var G,S;if(k.beta)G=new _(k.beta,16).toRed(this.red);else{var N=this._getEndoRoots(this.p);G=N[0].cmp(N[1])<0?N[0]:N[1],G=G.toRed(this.red)}if(k.lambda)S=new _(k.lambda,16);else{var E=this._getEndoRoots(this.n);if(this.g.mul(E[0]).x.cmp(this.g.x.redMul(G))===0)S=E[0];else S=E[1],Y(this.g.mul(S).x.cmp(this.g.x.redMul(G))===0)}var h;if(k.basis)h=k.basis.map(function(D){return{a:new _(D.a,16),b:new _(D.b,16)}});else h=this._getEndoBasis(S);return{beta:G,lambda:S,basis:h}},H.prototype._getEndoRoots=function(k){var G=k===this.p?this.red:_.mont(k),S=new _(2).toRed(G).redInvm(),N=S.redNeg(),E=new _(3).toRed(G).redNeg().redSqrt().redMul(S),h=N.redAdd(E).fromRed(),D=N.redSub(E).fromRed();return[h,D]},H.prototype._getEndoBasis=function(k){var G=this.n.ushrn(Math.floor(this.n.bitLength()/2)),S=k,N=this.n.clone(),E=new _(1),h=new _(0),D=new _(0),I=new _(1),g,y,p,m,c,$q,e,d=0,n,M;while(S.cmpn(0)!==0){var j=N.div(S);n=N.sub(j.mul(S)),M=D.sub(j.mul(E));var J=I.sub(j.mul(h));if(!p&&n.cmp(G)<0)g=e.neg(),y=E,p=n.neg(),m=M;else if(p&&++d===2)break;e=n,N=S,S=n,D=E,E=M,I=h,h=J}c=n.neg(),$q=M;var w=p.sqr().add(m.sqr()),z=c.sqr().add($q.sqr());if(z.cmp(w)>=0)c=g,$q=y;if(p.negative)p=p.neg(),m=m.neg();if(c.negative)c=c.neg(),$q=$q.neg();return[{a:p,b:m},{a:c,b:$q}]},H.prototype._endoSplit=function(k){var G=this.endo.basis,S=G[0],N=G[1],E=N.b.mul(k).divRound(this.n),h=S.b.neg().mul(k).divRound(this.n),D=E.mul(S.a),I=h.mul(N.a),g=E.mul(S.b),y=h.mul(N.b),p=k.sub(D).sub(I),m=g.add(y).neg();return{k1:p,k2:m}},H.prototype.pointFromX=function(k,G){if(k=new _(k,16),!k.red)k=k.toRed(this.red);var S=k.redSqr().redMul(k).redIAdd(k.redMul(this.a)).redIAdd(this.b),N=S.redSqrt();if(N.redSqr().redSub(S).cmp(this.zero)!==0)throw Error("invalid point");var E=N.fromRed().isOdd();if(G&&!E||!G&&E)N=N.redNeg();return this.point(k,N)},H.prototype.validate=function(k){if(k.inf)return!0;var{x:G,y:S}=k,N=this.a.redMul(G),E=G.redSqr().redMul(G).redIAdd(N).redIAdd(this.b);return S.redSqr().redISub(E).cmpn(0)===0},H.prototype._endoWnafMulAdd=function(k,G,S){var N=this._endoWnafT1,E=this._endoWnafT2;for(var h=0;h<k.length;h++){var D=this._endoSplit(G[h]),I=k[h],g=I._getBeta();if(D.k1.negative)D.k1.ineg(),I=I.neg(!0);if(D.k2.negative)D.k2.ineg(),g=g.neg(!0);N[h*2]=I,N[h*2+1]=g,E[h*2]=D.k1,E[h*2+1]=D.k2}var y=this._wnafMulAdd(1,N,E,h*2,S);for(var p=0;p<h*2;p++)N[p]=null,E[p]=null;return y};function v(Z,k,G,S){if(O.BasePoint.call(this,Z,"affine"),k===null&&G===null)this.x=null,this.y=null,this.inf=!0;else{if(this.x=new _(k,16),this.y=new _(G,16),S)this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red);if(!this.x.red)this.x=this.x.toRed(this.curve.red);if(!this.y.red)this.y=this.y.toRed(this.curve.red);this.inf=!1}}P(v,O.BasePoint),H.prototype.point=function(k,G,S){return new v(this,k,G,S)},H.prototype.pointFromJSON=function(k,G){return v.fromJSON(this,k,G)},v.prototype._getBeta=function(){if(!this.curve.endo)return;var k=this.precomputed;if(k&&k.beta)return k.beta;var G=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(k){var S=this.curve,N=function(E){return S.point(E.x.redMul(S.endo.beta),E.y)};k.beta=G,G.precomputed={beta:null,naf:k.naf&&{wnd:k.naf.wnd,points:k.naf.points.map(N)},doubles:k.doubles&&{step:k.doubles.step,points:k.doubles.points.map(N)}}}return G},v.prototype.toJSON=function(){if(!this.precomputed)return[this.x,this.y];return[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]},v.fromJSON=function(k,G,S){if(typeof G==="string")G=JSON.parse(G);var N=k.point(G[0],G[1],S);if(!G[2])return N;function E(D){return k.point(D[0],D[1],S)}var h=G[2];return N.precomputed={beta:null,doubles:h.doubles&&{step:h.doubles.step,points:[N].concat(h.doubles.points.map(E))},naf:h.naf&&{wnd:h.naf.wnd,points:[N].concat(h.naf.points.map(E))}},N},v.prototype.inspect=function(){if(this.isInfinity())return"<EC Point Infinity>";return"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"},v.prototype.isInfinity=function(){return this.inf},v.prototype.add=function(k){if(this.inf)return k;if(k.inf)return this;if(this.eq(k))return this.dbl();if(this.neg().eq(k))return this.curve.point(null,null);if(this.x.cmp(k.x)===0)return this.curve.point(null,null);var G=this.y.redSub(k.y);if(G.cmpn(0)!==0)G=G.redMul(this.x.redSub(k.x).redInvm());var S=G.redSqr().redISub(this.x).redISub(k.x),N=G.redMul(this.x.redSub(S)).redISub(this.y);return this.curve.point(S,N)},v.prototype.dbl=function(){if(this.inf)return this;var k=this.y.redAdd(this.y);if(k.cmpn(0)===0)return this.curve.point(null,null);var G=this.curve.a,S=this.x.redSqr(),N=k.redInvm(),E=S.redAdd(S).redIAdd(S).redIAdd(G).redMul(N),h=E.redSqr().redISub(this.x.redAdd(this.x)),D=E.redMul(this.x.redSub(h)).redISub(this.y);return this.curve.point(h,D)},v.prototype.getX=function(){return this.x.fromRed()},v.prototype.getY=function(){return this.y.fromRed()},v.prototype.mul=function(k){if(k=new _(k,16),this.isInfinity())return this;else if(this._hasDoubles(k))return this.curve._fixedNafMul(this,k);else if(this.curve.endo)return this.curve._endoWnafMulAdd([this],[k]);else return this.curve._wnafMul(this,k)},v.prototype.mulAdd=function(k,G,S){var N=[this,G],E=[k,S];if(this.curve.endo)return this.curve._endoWnafMulAdd(N,E);else return this.curve._wnafMulAdd(1,N,E,2)},v.prototype.jmulAdd=function(k,G,S){var N=[this,G],E=[k,S];if(this.curve.endo)return this.curve._endoWnafMulAdd(N,E,!0);else return this.curve._wnafMulAdd(1,N,E,2,!0)},v.prototype.eq=function(k){return this===k||this.inf===k.inf&&(this.inf||this.x.cmp(k.x)===0&&this.y.cmp(k.y)===0)},v.prototype.neg=function(k){if(this.inf)return this;var G=this.curve.point(this.x,this.y.redNeg());if(k&&this.precomputed){var S=this.precomputed,N=function(E){return E.neg()};G.precomputed={naf:S.naf&&{wnd:S.naf.wnd,points:S.naf.points.map(N)},doubles:S.doubles&&{step:S.doubles.step,points:S.doubles.points.map(N)}}}return G},v.prototype.toJ=function(){if(this.inf)return this.curve.jpoint(null,null,null);var k=this.curve.jpoint(this.x,this.y,this.curve.one);return k};function X(Z,k,G,S){if(O.BasePoint.call(this,Z,"jacobian"),k===null&&G===null&&S===null)this.x=this.curve.one,this.y=this.curve.one,this.z=new _(0);else this.x=new _(k,16),this.y=new _(G,16),this.z=new _(S,16);if(!this.x.red)this.x=this.x.toRed(this.curve.red);if(!this.y.red)this.y=this.y.toRed(this.curve.red);if(!this.z.red)this.z=this.z.toRed(this.curve.red);this.zOne=this.z===this.curve.one}P(X,O.BasePoint),H.prototype.jpoint=function(k,G,S){return new X(this,k,G,S)},X.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var k=this.z.redInvm(),G=k.redSqr(),S=this.x.redMul(G),N=this.y.redMul(G).redMul(k);return this.curve.point(S,N)},X.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)},X.prototype.add=function(k){if(this.isInfinity())return k;if(k.isInfinity())return this;var G=k.z.redSqr(),S=this.z.redSqr(),N=this.x.redMul(G),E=k.x.redMul(S),h=this.y.redMul(G.redMul(k.z)),D=k.y.redMul(S.redMul(this.z)),I=N.redSub(E),g=h.redSub(D);if(I.cmpn(0)===0)if(g.cmpn(0)!==0)return this.curve.jpoint(null,null,null);else return this.dbl();var y=I.redSqr(),p=y.redMul(I),m=N.redMul(y),c=g.redSqr().redIAdd(p).redISub(m).redISub(m),$q=g.redMul(m.redISub(c)).redISub(h.redMul(p)),e=this.z.redMul(k.z).redMul(I);return this.curve.jpoint(c,$q,e)},X.prototype.mixedAdd=function(k){if(this.isInfinity())return k.toJ();if(k.isInfinity())return this;var G=this.z.redSqr(),S=this.x,N=k.x.redMul(G),E=this.y,h=k.y.redMul(G).redMul(this.z),D=S.redSub(N),I=E.redSub(h);if(D.cmpn(0)===0)if(I.cmpn(0)!==0)return this.curve.jpoint(null,null,null);else return this.dbl();var g=D.redSqr(),y=g.redMul(D),p=S.redMul(g),m=I.redSqr().redIAdd(y).redISub(p).redISub(p),c=I.redMul(p.redISub(m)).redISub(E.redMul(y)),$q=this.z.redMul(D);return this.curve.jpoint(m,c,$q)},X.prototype.dblp=function(k){if(k===0)return this;if(this.isInfinity())return this;if(!k)return this.dbl();var G;if(this.curve.zeroA||this.curve.threeA){var S=this;for(G=0;G<k;G++)S=S.dbl();return S}var N=this.curve.a,E=this.curve.tinv,h=this.x,D=this.y,I=this.z,g=I.redSqr().redSqr(),y=D.redAdd(D);for(G=0;G<k;G++){var p=h.redSqr(),m=y.redSqr(),c=m.redSqr(),$q=p.redAdd(p).redIAdd(p).redIAdd(N.redMul(g)),e=h.redMul(m),d=$q.redSqr().redISub(e.redAdd(e)),n=e.redISub(d),M=$q.redMul(n);M=M.redIAdd(M).redISub(c);var j=y.redMul(I);if(G+1<k)g=g.redMul(c);h=d,I=j,y=M}return this.curve.jpoint(h,y.redMul(E),I)},X.prototype.dbl=function(){if(this.isInfinity())return this;if(this.curve.zeroA)return this._zeroDbl();else if(this.curve.threeA)return this._threeDbl();else return this._dbl()},X.prototype._zeroDbl=function(){var k,G,S;if(this.zOne){var N=this.x.redSqr(),E=this.y.redSqr(),h=E.redSqr(),D=this.x.redAdd(E).redSqr().redISub(N).redISub(h);D=D.redIAdd(D);var I=N.redAdd(N).redIAdd(N),g=I.redSqr().redISub(D).redISub(D),y=h.redIAdd(h);y=y.redIAdd(y),y=y.redIAdd(y),k=g,G=I.redMul(D.redISub(g)).redISub(y),S=this.y.redAdd(this.y)}else{var p=this.x.redSqr(),m=this.y.redSqr(),c=m.redSqr(),$q=this.x.redAdd(m).redSqr().redISub(p).redISub(c);$q=$q.redIAdd($q);var e=p.redAdd(p).redIAdd(p),d=e.redSqr(),n=c.redIAdd(c);n=n.redIAdd(n),n=n.redIAdd(n),k=d.redISub($q).redISub($q),G=e.redMul($q.redISub(k)).redISub(n),S=this.y.redMul(this.z),S=S.redIAdd(S)}return this.curve.jpoint(k,G,S)},X.prototype._threeDbl=function(){var k,G,S;if(this.zOne){var N=this.x.redSqr(),E=this.y.redSqr(),h=E.redSqr(),D=this.x.redAdd(E).redSqr().redISub(N).redISub(h);D=D.redIAdd(D);var I=N.redAdd(N).redIAdd(N).redIAdd(this.curve.a),g=I.redSqr().redISub(D).redISub(D);k=g;var y=h.redIAdd(h);y=y.redIAdd(y),y=y.redIAdd(y),G=I.redMul(D.redISub(g)).redISub(y),S=this.y.redAdd(this.y)}else{var p=this.z.redSqr(),m=this.y.redSqr(),c=this.x.redMul(m),$q=this.x.redSub(p).redMul(this.x.redAdd(p));$q=$q.redAdd($q).redIAdd($q);var e=c.redIAdd(c);e=e.redIAdd(e);var d=e.redAdd(e);k=$q.redSqr().redISub(d),S=this.y.redAdd(this.z).redSqr().redISub(m).redISub(p);var n=m.redSqr();n=n.redIAdd(n),n=n.redIAdd(n),n=n.redIAdd(n),G=$q.redMul(e.redISub(k)).redISub(n)}return this.curve.jpoint(k,G,S)},X.prototype._dbl=function(){var k=this.curve.a,G=this.x,S=this.y,N=this.z,E=N.redSqr().redSqr(),h=G.redSqr(),D=S.redSqr(),I=h.redAdd(h).redIAdd(h).redIAdd(k.redMul(E)),g=G.redAdd(G);g=g.redIAdd(g);var y=g.redMul(D),p=I.redSqr().redISub(y.redAdd(y)),m=y.redISub(p),c=D.redSqr();c=c.redIAdd(c),c=c.redIAdd(c),c=c.redIAdd(c);var $q=I.redMul(m).redISub(c),e=S.redAdd(S).redMul(N);return this.curve.jpoint(p,$q,e)},X.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var k=this.x.redSqr(),G=this.y.redSqr(),S=this.z.redSqr(),N=G.redSqr(),E=k.redAdd(k).redIAdd(k),h=E.redSqr(),D=this.x.redAdd(G).redSqr().redISub(k).redISub(N);D=D.redIAdd(D),D=D.redAdd(D).redIAdd(D),D=D.redISub(h);var I=D.redSqr(),g=N.redIAdd(N);g=g.redIAdd(g),g=g.redIAdd(g),g=g.redIAdd(g);var y=E.redIAdd(D).redSqr().redISub(h).redISub(I).redISub(g),p=G.redMul(y);p=p.redIAdd(p),p=p.redIAdd(p);var m=this.x.redMul(I).redISub(p);m=m.redIAdd(m),m=m.redIAdd(m);var c=this.y.redMul(y.redMul(g.redISub(y)).redISub(D.redMul(I)));c=c.redIAdd(c),c=c.redIAdd(c),c=c.redIAdd(c);var $q=this.z.redAdd(D).redSqr().redISub(S).redISub(I);return this.curve.jpoint(m,c,$q)},X.prototype.mul=function(k,G){return k=new _(k,G),this.curve._wnafMul(this,k)},X.prototype.eq=function(k){if(k.type==="affine")return this.eq(k.toJ());if(this===k)return!0;var G=this.z.redSqr(),S=k.z.redSqr();if(this.x.redMul(S).redISub(k.x.redMul(G)).cmpn(0)!==0)return!1;var N=G.redMul(this.z),E=S.redMul(k.z);return this.y.redMul(E).redISub(k.y.redMul(N)).cmpn(0)===0},X.prototype.eqXToP=function(k){var G=this.z.redSqr(),S=k.toRed(this.curve.red).redMul(G);if(this.x.cmp(S)===0)return!0;var N=k.clone(),E=this.curve.redN.redMul(G);for(;;){if(N.iadd(this.curve.n),N.cmp(this.curve.p)>=0)return!1;if(S.redIAdd(E),this.x.cmp(S)===0)return!0}},X.prototype.inspect=function(){if(this.isInfinity())return"<EC JPoint Infinity>";return"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"},X.prototype.isInfinity=function(){return this.z.cmpn(0)===0}}),Bb=lq((q,$)=>{var K=bK(),_=W6(),P=z5(),O=Z6();function Y(v){P.call(this,"mont",v),this.a=new K(v.a,16).toRed(this.red),this.b=new K(v.b,16).toRed(this.red),this.i4=new K(4).toRed(this.red).redInvm(),this.two=new K(2).toRed(this.red),this.a24=this.i4.redMul(this.a.redAdd(this.two))}_(Y,P),$.exports=Y,Y.prototype.validate=function(X){var Z=X.normalize().x,k=Z.redSqr(),G=k.redMul(Z).redAdd(k.redMul(this.a)).redAdd(Z),S=G.redSqrt();return S.redSqr().cmp(G)===0};function H(v,X,Z){if(P.BasePoint.call(this,v,"projective"),X===null&&Z===null)this.x=this.curve.one,this.z=this.curve.zero;else{if(this.x=new K(X,16),this.z=new K(Z,16),!this.x.red)this.x=this.x.toRed(this.curve.red);if(!this.z.red)this.z=this.z.toRed(this.curve.red)}}_(H,P.BasePoint),Y.prototype.decodePoint=function(X,Z){return this.point(O.toArray(X,Z),1)},Y.prototype.point=function(X,Z){return new H(this,X,Z)},Y.prototype.pointFromJSON=function(X){return H.fromJSON(this,X)},H.prototype.precompute=function(){},H.prototype._encode=function(){return this.getX().toArray("be",this.curve.p.byteLength())},H.fromJSON=function(X,Z){return new H(X,Z[0],Z[1]||X.one)},H.prototype.inspect=function(){if(this.isInfinity())return"<EC Point Infinity>";return"<EC Point x: "+this.x.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},H.prototype.isInfinity=function(){return this.z.cmpn(0)===0},H.prototype.dbl=function(){var X=this.x.redAdd(this.z),Z=X.redSqr(),k=this.x.redSub(this.z),G=k.redSqr(),S=Z.redSub(G),N=Z.redMul(G),E=S.redMul(G.redAdd(this.curve.a24.redMul(S)));return this.curve.point(N,E)},H.prototype.add=function(){throw Error("Not supported on Montgomery curve")},H.prototype.diffAdd=function(X,Z){var k=this.x.redAdd(this.z),G=this.x.redSub(this.z),S=X.x.redAdd(X.z),N=X.x.redSub(X.z),E=N.redMul(k),h=S.redMul(G),D=Z.z.redMul(E.redAdd(h).redSqr()),I=Z.x.redMul(E.redISub(h).redSqr());return this.curve.point(D,I)},H.prototype.mul=function(X){var Z=X.clone(),k=this,G=this.curve.point(null,null),S=this;for(var N=[];Z.cmpn(0)!==0;Z.iushrn(1))N.push(Z.andln(1));for(var E=N.length-1;E>=0;E--)if(N[E]===0)k=k.diffAdd(G,S),G=G.dbl();else G=k.diffAdd(G,S),k=k.dbl();return G},H.prototype.mulAdd=function(){throw Error("Not supported on Montgomery curve")},H.prototype.jumlAdd=function(){throw Error("Not supported on Montgomery curve")},H.prototype.eq=function(X){return this.getX().cmp(X.getX())===0},H.prototype.normalize=function(){return this.x=this.x.redMul(this.z.redInvm()),this.z=this.curve.one,this},H.prototype.getX=function(){return this.normalize(),this.x.fromRed()}}),ib=lq((q,$)=>{var K=Z6(),_=bK(),P=W6(),O=z5(),Y=K.assert;function H(X){this.twisted=(X.a|0)!==1,this.mOneA=this.twisted&&(X.a|0)===-1,this.extended=this.mOneA,O.call(this,"edwards",X),this.a=new _(X.a,16).umod(this.red.m),this.a=this.a.toRed(this.red),this.c=new _(X.c,16).toRed(this.red),this.c2=this.c.redSqr(),this.d=new _(X.d,16).toRed(this.red),this.dd=this.d.redAdd(this.d),Y(!this.twisted||this.c.fromRed().cmpn(1)===0),this.oneC=(X.c|0)===1}P(H,O),$.exports=H,H.prototype._mulA=function(Z){if(this.mOneA)return Z.redNeg();else return this.a.redMul(Z)},H.prototype._mulC=function(Z){if(this.oneC)return Z;else return this.c.redMul(Z)},H.prototype.jpoint=function(Z,k,G,S){return this.point(Z,k,G,S)},H.prototype.pointFromX=function(Z,k){if(Z=new _(Z,16),!Z.red)Z=Z.toRed(this.red);var G=Z.redSqr(),S=this.c2.redSub(this.a.redMul(G)),N=this.one.redSub(this.c2.redMul(this.d).redMul(G)),E=S.redMul(N.redInvm()),h=E.redSqrt();if(h.redSqr().redSub(E).cmp(this.zero)!==0)throw Error("invalid point");var D=h.fromRed().isOdd();if(k&&!D||!k&&D)h=h.redNeg();return this.point(Z,h)},H.prototype.pointFromY=function(Z,k){if(Z=new _(Z,16),!Z.red)Z=Z.toRed(this.red);var G=Z.redSqr(),S=G.redSub(this.c2),N=G.redMul(this.d).redMul(this.c2).redSub(this.a),E=S.redMul(N.redInvm());if(E.cmp(this.zero)===0)if(k)throw Error("invalid point");else return this.point(this.zero,Z);var h=E.redSqrt();if(h.redSqr().redSub(E).cmp(this.zero)!==0)throw Error("invalid point");if(h.fromRed().isOdd()!==k)h=h.redNeg();return this.point(h,Z)},H.prototype.validate=function(Z){if(Z.isInfinity())return!0;Z.normalize();var k=Z.x.redSqr(),G=Z.y.redSqr(),S=k.redMul(this.a).redAdd(G),N=this.c2.redMul(this.one.redAdd(this.d.redMul(k).redMul(G)));return S.cmp(N)===0};function v(X,Z,k,G,S){if(O.BasePoint.call(this,X,"projective"),Z===null&&k===null&&G===null)this.x=this.curve.zero,this.y=this.curve.one,this.z=this.curve.one,this.t=this.curve.zero,this.zOne=!0;else{if(this.x=new _(Z,16),this.y=new _(k,16),this.z=G?new _(G,16):this.curve.one,this.t=S&&new _(S,16),!this.x.red)this.x=this.x.toRed(this.curve.red);if(!this.y.red)this.y=this.y.toRed(this.curve.red);if(!this.z.red)this.z=this.z.toRed(this.curve.red);if(this.t&&!this.t.red)this.t=this.t.toRed(this.curve.red);if(this.zOne=this.z===this.curve.one,this.curve.extended&&!this.t){if(this.t=this.x.redMul(this.y),!this.zOne)this.t=this.t.redMul(this.z.redInvm())}}}P(v,O.BasePoint),H.prototype.pointFromJSON=function(Z){return v.fromJSON(this,Z)},H.prototype.point=function(Z,k,G,S){return new v(this,Z,k,G,S)},v.fromJSON=function(Z,k){return new v(Z,k[0],k[1],k[2])},v.prototype.inspect=function(){if(this.isInfinity())return"<EC Point Infinity>";return"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},v.prototype.isInfinity=function(){return this.x.cmpn(0)===0&&(this.y.cmp(this.z)===0||this.zOne&&this.y.cmp(this.curve.c)===0)},v.prototype._extDbl=function(){var Z=this.x.redSqr(),k=this.y.redSqr(),G=this.z.redSqr();G=G.redIAdd(G);var S=this.curve._mulA(Z),N=this.x.redAdd(this.y).redSqr().redISub(Z).redISub(k),E=S.redAdd(k),h=E.redSub(G),D=S.redSub(k),I=N.redMul(h),g=E.redMul(D),y=N.redMul(D),p=h.redMul(E);return this.curve.point(I,g,p,y)},v.prototype._projDbl=function(){var Z=this.x.redAdd(this.y).redSqr(),k=this.x.redSqr(),G=this.y.redSqr(),S,N,E,h,D,I;if(this.curve.twisted){h=this.curve._mulA(k);var g=h.redAdd(G);if(this.zOne)S=Z.redSub(k).redSub(G).redMul(g.redSub(this.curve.two)),N=g.redMul(h.redSub(G)),E=g.redSqr().redSub(g).redSub(g);else D=this.z.redSqr(),I=g.redSub(D).redISub(D),S=Z.redSub(k).redISub(G).redMul(I),N=g.redMul(h.redSub(G)),E=g.redMul(I)}else h=k.redAdd(G),D=this.curve._mulC(this.z).redSqr(),I=h.redSub(D).redSub(D),S=this.curve._mulC(Z.redISub(h)).redMul(I),N=this.curve._mulC(h).redMul(k.redISub(G)),E=h.redMul(I);return this.curve.point(S,N,E)},v.prototype.dbl=function(){if(this.isInfinity())return this;if(this.curve.extended)return this._extDbl();else return this._projDbl()},v.prototype._extAdd=function(Z){var k=this.y.redSub(this.x).redMul(Z.y.redSub(Z.x)),G=this.y.redAdd(this.x).redMul(Z.y.redAdd(Z.x)),S=this.t.redMul(this.curve.dd).redMul(Z.t),N=this.z.redMul(Z.z.redAdd(Z.z)),E=G.redSub(k),h=N.redSub(S),D=N.redAdd(S),I=G.redAdd(k),g=E.redMul(h),y=D.redMul(I),p=E.redMul(I),m=h.redMul(D);return this.curve.point(g,y,m,p)},v.prototype._projAdd=function(Z){var k=this.z.redMul(Z.z),G=k.redSqr(),S=this.x.redMul(Z.x),N=this.y.redMul(Z.y),E=this.curve.d.redMul(S).redMul(N),h=G.redSub(E),D=G.redAdd(E),I=this.x.redAdd(this.y).redMul(Z.x.redAdd(Z.y)).redISub(S).redISub(N),g=k.redMul(h).redMul(I),y,p;if(this.curve.twisted)y=k.redMul(D).redMul(N.redSub(this.curve._mulA(S))),p=h.redMul(D);else y=k.redMul(D).redMul(N.redSub(S)),p=this.curve._mulC(h).redMul(D);return this.curve.point(g,y,p)},v.prototype.add=function(Z){if(this.isInfinity())return Z;if(Z.isInfinity())return this;if(this.curve.extended)return this._extAdd(Z);else return this._projAdd(Z)},v.prototype.mul=function(Z){if(this._hasDoubles(Z))return this.curve._fixedNafMul(this,Z);else return this.curve._wnafMul(this,Z)},v.prototype.mulAdd=function(Z,k,G){return this.curve._wnafMulAdd(1,[this,k],[Z,G],2,!1)},v.prototype.jmulAdd=function(Z,k,G){return this.curve._wnafMulAdd(1,[this,k],[Z,G],2,!0)},v.prototype.normalize=function(){if(this.zOne)return this;var Z=this.z.redInvm();if(this.x=this.x.redMul(Z),this.y=this.y.redMul(Z),this.t)this.t=this.t.redMul(Z);return this.z=this.curve.one,this.zOne=!0,this},v.prototype.neg=function(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())},v.prototype.getX=function(){return this.normalize(),this.x.fromRed()},v.prototype.getY=function(){return this.normalize(),this.y.fromRed()},v.prototype.eq=function(Z){return this===Z||this.getX().cmp(Z.getX())===0&&this.getY().cmp(Z.getY())===0},v.prototype.eqXToP=function(Z){var k=Z.toRed(this.curve.red).redMul(this.z);if(this.x.cmp(k)===0)return!0;var G=Z.clone(),S=this.curve.redN.redMul(this.z);for(;;){if(G.iadd(this.curve.n),G.cmp(this.curve.p)>=0)return!1;if(k.redIAdd(S),this.x.cmp(k)===0)return!0}},v.prototype.toP=v.prototype.normalize,v.prototype.mixedAdd=v.prototype.add}),Mf=lq((q)=>{var $=q;$.base=z5(),$.short=rb(),$.mont=Bb(),$.edwards=ib()}),jK=lq((q)=>{var $=P_(),K=W6();q.inherits=K;function _(j,J){if((j.charCodeAt(J)&64512)!==55296)return!1;if(J<0||J+1>=j.length)return!1;return(j.charCodeAt(J+1)&64512)===56320}function P(j,J){if(Array.isArray(j))return j.slice();if(!j)return[];var w=[];if(typeof j==="string"){if(!J){var z=0;for(var T=0;T<j.length;T++){var V=j.charCodeAt(T);if(V<128)w[z++]=V;else if(V<2048)w[z++]=V>>6|192,w[z++]=V&63|128;else if(_(j,T))V=65536+((V&1023)<<10)+(j.charCodeAt(++T)&1023),w[z++]=V>>18|240,w[z++]=V>>12&63|128,w[z++]=V>>6&63|128,w[z++]=V&63|128;else w[z++]=V>>12|224,w[z++]=V>>6&63|128,w[z++]=V&63|128}}else if(J==="hex"){if(j=j.replace(/[^a-z0-9]+/ig,""),j.length%2!==0)j="0"+j;for(T=0;T<j.length;T+=2)w.push(parseInt(j[T]+j[T+1],16))}}else for(T=0;T<j.length;T++)w[T]=j[T]|0;return w}q.toArray=P;function O(j){var J="";for(var w=0;w<j.length;w++)J+=v(j[w].toString(16));return J}q.toHex=O;function Y(j){var J=j>>>24|j>>>8&65280|j<<8&16711680|(j&255)<<24;return J>>>0}q.htonl=Y;function H(j,J){var w="";for(var z=0;z<j.length;z++){var T=j[z];if(J==="little")T=Y(T);w+=X(T.toString(16))}return w}q.toHex32=H;function v(j){if(j.length===1)return"0"+j;else return j}q.zero2=v;function X(j){if(j.length===7)return"0"+j;else if(j.length===6)return"00"+j;else if(j.length===5)return"000"+j;else if(j.length===4)return"0000"+j;else if(j.length===3)return"00000"+j;else if(j.length===2)return"000000"+j;else if(j.length===1)return"0000000"+j;else return j}q.zero8=X;function Z(j,J,w,z){var T=w-J;$(T%4===0);var V=Array(T/4);for(var C=0,f=J;C<V.length;C++,f+=4){var W;if(z==="big")W=j[f]<<24|j[f+1]<<16|j[f+2]<<8|j[f+3];else W=j[f+3]<<24|j[f+2]<<16|j[f+1]<<8|j[f];V[C]=W>>>0}return V}q.join32=Z;function k(j,J){var w=Array(j.length*4);for(var z=0,T=0;z<j.length;z++,T+=4){var V=j[z];if(J==="big")w[T]=V>>>24,w[T+1]=V>>>16&255,w[T+2]=V>>>8&255,w[T+3]=V&255;else w[T+3]=V>>>24,w[T+2]=V>>>16&255,w[T+1]=V>>>8&255,w[T]=V&255}return w}q.split32=k;function G(j,J){return j>>>J|j<<32-J}q.rotr32=G;function S(j,J){return j<<J|j>>>32-J}q.rotl32=S;function N(j,J){return j+J>>>0}q.sum32=N;function E(j,J,w){return j+J+w>>>0}q.sum32_3=E;function h(j,J,w,z){return j+J+w+z>>>0}q.sum32_4=h;function D(j,J,w,z,T){return j+J+w+z+T>>>0}q.sum32_5=D;function I(j,J,w,z){var T=j[J],V=j[J+1],C=z+V>>>0,f=(C<z?1:0)+w+T;j[J]=f>>>0,j[J+1]=C}q.sum64=I;function g(j,J,w,z){var T=J+z>>>0,V=(T<J?1:0)+j+w;return V>>>0}q.sum64_hi=g;function y(j,J,w,z){var T=J+z;return T>>>0}q.sum64_lo=y;function p(j,J,w,z,T,V,C,f){var W=0,A=J;A=A+z>>>0,W+=A<J?1:0,A=A+V>>>0,W+=A<V?1:0,A=A+f>>>0,W+=A<f?1:0;var L=j+w+T+C+W;return L>>>0}q.sum64_4_hi=p;function m(j,J,w,z,T,V,C,f){var W=J+z+V+f;return W>>>0}q.sum64_4_lo=m;function c(j,J,w,z,T,V,C,f,W,A){var L=0,R=J;R=R+z>>>0,L+=R<J?1:0,R=R+V>>>0,L+=R<V?1:0,R=R+f>>>0,L+=R<f?1:0,R=R+A>>>0,L+=R<A?1:0;var b=j+w+T+C+W+L;return b>>>0}q.sum64_5_hi=c;function $q(j,J,w,z,T,V,C,f,W,A){var L=J+z+V+f+A;return L>>>0}q.sum64_5_lo=$q;function e(j,J,w){var z=J<<32-w|j>>>w;return z>>>0}q.rotr64_hi=e;function d(j,J,w){var z=j<<32-w|J>>>w;return z>>>0}q.rotr64_lo=d;function n(j,J,w){return j>>>w}q.shr64_hi=n;function M(j,J,w){var z=j<<32-w|J>>>w;return z>>>0}q.shr64_lo=M}),UP=lq((q)=>{var $=jK(),K=P_();function _(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}q.BlockHash=_,_.prototype.update=function(O,Y){if(O=$.toArray(O,Y),!this.pending)this.pending=O;else this.pending=this.pending.concat(O);if(this.pendingTotal+=O.length,this.pending.length>=this._delta8){O=this.pending;var H=O.length%this._delta8;if(this.pending=O.slice(O.length-H,O.length),this.pending.length===0)this.pending=null;O=$.join32(O,0,O.length-H,this.endian);for(var v=0;v<O.length;v+=this._delta32)this._update(O,v,v+this._delta32)}return this},_.prototype.digest=function(O){return this.update(this._pad()),K(this.pending===null),this._digest(O)},_.prototype._pad=function(){var O=this.pendingTotal,Y=this._delta8,H=Y-(O+this.padLength)%Y,v=Array(H+this.padLength);v[0]=128;for(var X=1;X<H;X++)v[X]=0;if(O<<=3,this.endian==="big"){for(var Z=8;Z<this.padLength;Z++)v[X++]=0;v[X++]=0,v[X++]=0,v[X++]=0,v[X++]=0,v[X++]=O>>>24&255,v[X++]=O>>>16&255,v[X++]=O>>>8&255,v[X++]=O&255}else{v[X++]=O&255,v[X++]=O>>>8&255,v[X++]=O>>>16&255,v[X++]=O>>>24&255,v[X++]=0,v[X++]=0,v[X++]=0,v[X++]=0;for(Z=8;Z<this.padLength;Z++)v[X++]=0}return v}}),Sf=lq((q)=>{var $=jK(),K=$.rotr32;function _(k,G,S,N){if(k===0)return P(G,S,N);if(k===1||k===3)return Y(G,S,N);if(k===2)return O(G,S,N)}q.ft_1=_;function P(k,G,S){return k&G^~k&S}q.ch32=P;function O(k,G,S){return k&G^k&S^G&S}q.maj32=O;function Y(k,G,S){return k^G^S}q.p32=Y;function H(k){return K(k,2)^K(k,13)^K(k,22)}q.s0_256=H;function v(k){return K(k,6)^K(k,11)^K(k,25)}q.s1_256=v;function X(k){return K(k,7)^K(k,18)^k>>>3}q.g0_256=X;function Z(k){return K(k,17)^K(k,19)^k>>>10}q.g1_256=Z}),Ub=lq((q,$)=>{var K=jK(),_=UP(),P=Sf(),O=K.rotl32,Y=K.sum32,H=K.sum32_5,v=P.ft_1,X=_.BlockHash,Z=[1518500249,1859775393,2400959708,3395469782];function k(){if(!(this instanceof k))return new k;X.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=Array(80)}K.inherits(k,X),$.exports=k,k.blockSize=512,k.outSize=160,k.hmacStrength=80,k.padLength=64,k.prototype._update=function(S,N){var E=this.W;for(var h=0;h<16;h++)E[h]=S[N+h];for(;h<E.length;h++)E[h]=O(E[h-3]^E[h-8]^E[h-14]^E[h-16],1);var D=this.h[0],I=this.h[1],g=this.h[2],y=this.h[3],p=this.h[4];for(h=0;h<E.length;h++){var m=~~(h/20),c=H(O(D,5),v(m,I,g,y),p,E[h],Z[m]);p=y,y=g,g=O(I,30),I=D,D=c}this.h[0]=Y(this.h[0],D),this.h[1]=Y(this.h[1],I),this.h[2]=Y(this.h[2],g),this.h[3]=Y(this.h[3],y),this.h[4]=Y(this.h[4],p)},k.prototype._digest=function(S){if(S==="hex")return K.toHex32(this.h,"big");else return K.split32(this.h,"big")}}),Cf=lq((q,$)=>{var K=jK(),_=UP(),P=Sf(),O=P_(),Y=K.sum32,H=K.sum32_4,v=K.sum32_5,X=P.ch32,Z=P.maj32,k=P.s0_256,G=P.s1_256,S=P.g0_256,N=P.g1_256,E=_.BlockHash,h=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function D(){if(!(this instanceof D))return new D;E.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=h,this.W=Array(64)}K.inherits(D,E),$.exports=D,D.blockSize=512,D.outSize=256,D.hmacStrength=192,D.padLength=64,D.prototype._update=function(g,y){var p=this.W;for(var m=0;m<16;m++)p[m]=g[y+m];for(;m<p.length;m++)p[m]=H(N(p[m-2]),p[m-7],S(p[m-15]),p[m-16]);var c=this.h[0],$q=this.h[1],e=this.h[2],d=this.h[3],n=this.h[4],M=this.h[5],j=this.h[6],J=this.h[7];O(this.k.length===p.length);for(m=0;m<p.length;m++){var w=v(J,G(n),X(n,M,j),this.k[m],p[m]),z=Y(k(c),Z(c,$q,e));J=j,j=M,M=n,n=Y(d,w),d=e,e=$q,$q=c,c=Y(w,z)}this.h[0]=Y(this.h[0],c),this.h[1]=Y(this.h[1],$q),this.h[2]=Y(this.h[2],e),this.h[3]=Y(this.h[3],d),this.h[4]=Y(this.h[4],n),this.h[5]=Y(this.h[5],M),this.h[6]=Y(this.h[6],j),this.h[7]=Y(this.h[7],J)},D.prototype._digest=function(g){if(g==="hex")return K.toHex32(this.h,"big");else return K.split32(this.h,"big")}}),Fb=lq((q,$)=>{var K=jK(),_=Cf();function P(){if(!(this instanceof P))return new P;_.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}K.inherits(P,_),$.exports=P,P.blockSize=512,P.outSize=224,P.hmacStrength=192,P.padLength=64,P.prototype._digest=function(Y){if(Y==="hex")return K.toHex32(this.h.slice(0,7),"big");else return K.split32(this.h.slice(0,7),"big")}}),Nf=lq((q,$)=>{var K=jK(),_=UP(),P=P_(),O=K.rotr64_hi,Y=K.rotr64_lo,H=K.shr64_hi,v=K.shr64_lo,X=K.sum64,Z=K.sum64_hi,k=K.sum64_lo,G=K.sum64_4_hi,S=K.sum64_4_lo,N=K.sum64_5_hi,E=K.sum64_5_lo,h=_.BlockHash,D=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function I(){if(!(this instanceof I))return new I;h.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=D,this.W=Array(160)}K.inherits(I,h),$.exports=I,I.blockSize=1024,I.outSize=512,I.hmacStrength=192,I.padLength=128,I.prototype._prepareBlock=function(z,T){var V=this.W;for(var C=0;C<32;C++)V[C]=z[T+C];for(;C<V.length;C+=2){var f=j(V[C-4],V[C-3]),W=J(V[C-4],V[C-3]),A=V[C-14],L=V[C-13],R=n(V[C-30],V[C-29]),b=M(V[C-30],V[C-29]),l=V[C-32],B=V[C-31];V[C]=G(f,W,A,L,R,b,l,B),V[C+1]=S(f,W,A,L,R,b,l,B)}},I.prototype._update=function(z,T){this._prepareBlock(z,T);var V=this.W,C=this.h[0],f=this.h[1],W=this.h[2],A=this.h[3],L=this.h[4],R=this.h[5],b=this.h[6],l=this.h[7],B=this.h[8],t=this.h[9],Wq=this.h[10],r=this.h[11],i=this.h[12],gq=this.h[13],jq=this.h[14],Oq=this.h[15];P(this.k.length===V.length);for(var Q=0;Q<V.length;Q+=2){var o=jq,U=Oq,yq=e(B,t),qq=d(B,t),s=g(B,t,Wq,r,i,gq),a=y(B,t,Wq,r,i,gq),F=this.k[Q],_q=this.k[Q+1],Tq=V[Q],Yq=V[Q+1],Jq=N(o,U,yq,qq,s,a,F,_q,Tq,Yq),z$=E(o,U,yq,qq,s,a,F,_q,Tq,Yq);o=c(C,f),U=$q(C,f),yq=p(C,f,W,A,L,R),qq=m(C,f,W,A,L,R);var Hq=Z(o,U,yq,qq),Xq=k(o,U,yq,qq);jq=i,Oq=gq,i=Wq,gq=r,Wq=B,r=t,B=Z(b,l,Jq,z$),t=k(l,l,Jq,z$),b=L,l=R,L=W,R=A,W=C,A=f,C=Z(Jq,z$,Hq,Xq),f=k(Jq,z$,Hq,Xq)}X(this.h,0,C,f),X(this.h,2,W,A),X(this.h,4,L,R),X(this.h,6,b,l),X(this.h,8,B,t),X(this.h,10,Wq,r),X(this.h,12,i,gq),X(this.h,14,jq,Oq)},I.prototype._digest=function(z){if(z==="hex")return K.toHex32(this.h,"big");else return K.split32(this.h,"big")};function g(w,z,T,V,C){var f=w&T^~w&C;if(f<0)f+=4294967296;return f}function y(w,z,T,V,C,f){var W=z&V^~z&f;if(W<0)W+=4294967296;return W}function p(w,z,T,V,C){var f=w&T^w&C^T&C;if(f<0)f+=4294967296;return f}function m(w,z,T,V,C,f){var W=z&V^z&f^V&f;if(W<0)W+=4294967296;return W}function c(w,z){var T=O(w,z,28),V=O(z,w,2),C=O(z,w,7),f=T^V^C;if(f<0)f+=4294967296;return f}function $q(w,z){var T=Y(w,z,28),V=Y(z,w,2),C=Y(z,w,7),f=T^V^C;if(f<0)f+=4294967296;return f}function e(w,z){var T=O(w,z,14),V=O(w,z,18),C=O(z,w,9),f=T^V^C;if(f<0)f+=4294967296;return f}function d(w,z){var T=Y(w,z,14),V=Y(w,z,18),C=Y(z,w,9),f=T^V^C;if(f<0)f+=4294967296;return f}function n(w,z){var T=O(w,z,1),V=O(w,z,8),C=H(w,z,7),f=T^V^C;if(f<0)f+=4294967296;return f}function M(w,z){var T=Y(w,z,1),V=Y(w,z,8),C=v(w,z,7),f=T^V^C;if(f<0)f+=4294967296;return f}function j(w,z){var T=O(w,z,19),V=O(z,w,29),C=H(w,z,6),f=T^V^C;if(f<0)f+=4294967296;return f}function J(w,z){var T=Y(w,z,19),V=Y(z,w,29),C=v(w,z,6),f=T^V^C;if(f<0)f+=4294967296;return f}}),tb=lq((q,$)=>{var K=jK(),_=Nf();function P(){if(!(this instanceof P))return new P;_.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}K.inherits(P,_),$.exports=P,P.blockSize=1024,P.outSize=384,P.hmacStrength=192,P.padLength=128,P.prototype._digest=function(Y){if(Y==="hex")return K.toHex32(this.h.slice(0,12),"big");else return K.split32(this.h.slice(0,12),"big")}}),Qb=lq((q)=>{q.sha1=Ub(),q.sha224=Fb(),q.sha256=Cf(),q.sha384=tb(),q.sha512=Nf()}),ab=lq((q)=>{var $=jK(),K=UP(),_=$.rotl32,P=$.sum32,O=$.sum32_3,Y=$.sum32_4,H=K.BlockHash;function v(){if(!(this instanceof v))return new v;H.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}$.inherits(v,H),q.ripemd160=v,v.blockSize=512,v.outSize=160,v.hmacStrength=192,v.padLength=64,v.prototype._update=function(D,I){var g=this.h[0],y=this.h[1],p=this.h[2],m=this.h[3],c=this.h[4],$q=g,e=y,d=p,n=m,M=c;for(var j=0;j<80;j++){var J=P(_(Y(g,X(j,y,p,m),D[G[j]+I],Z(j)),N[j]),c);g=c,c=m,m=_(p,10),p=y,y=J,J=P(_(Y($q,X(79-j,e,d,n),D[S[j]+I],k(j)),E[j]),M),$q=M,M=n,n=_(d,10),d=e,e=J}J=O(this.h[1],p,n),this.h[1]=O(this.h[2],m,M),this.h[2]=O(this.h[3],c,$q),this.h[3]=O(this.h[4],g,e),this.h[4]=O(this.h[0],y,d),this.h[0]=J},v.prototype._digest=function(D){if(D==="hex")return $.toHex32(this.h,"little");else return $.split32(this.h,"little")};function X(h,D,I,g){if(h<=15)return D^I^g;else if(h<=31)return D&I|~D&g;else if(h<=47)return(D|~I)^g;else if(h<=63)return D&g|I&~g;else return D^(I|~g)}function Z(h){if(h<=15)return 0;else if(h<=31)return 1518500249;else if(h<=47)return 1859775393;else if(h<=63)return 2400959708;else return 2840853838}function k(h){if(h<=15)return 1352829926;else if(h<=31)return 1548603684;else if(h<=47)return 1836072691;else if(h<=63)return 2053994217;else return 0}var G=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],S=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],N=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],E=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]}),eb=lq((q,$)=>{var K=jK(),_=P_();function P(O,Y,H){if(!(this instanceof P))return new P(O,Y,H);this.Hash=O,this.blockSize=O.blockSize/8,this.outSize=O.outSize/8,this.inner=null,this.outer=null,this._init(K.toArray(Y,H))}$.exports=P,P.prototype._init=function(Y){if(Y.length>this.blockSize)Y=new this.Hash().update(Y).digest();_(Y.length<=this.blockSize);for(var H=Y.length;H<this.blockSize;H++)Y.push(0);for(H=0;H<Y.length;H++)Y[H]^=54;this.inner=new this.Hash().update(Y);for(H=0;H<Y.length;H++)Y[H]^=106;this.outer=new this.Hash().update(Y)},P.prototype.update=function(Y,H){return this.inner.update(Y,H),this},P.prototype.digest=function(Y){return this.outer.update(this.inner.digest()),this.outer.digest(Y)}}),$j=lq((q)=>{var $=q;$.utils=jK(),$.common=UP(),$.sha=Qb(),$.ripemd=ab(),$.hmac=eb(),$.sha1=$.sha.sha1,$.sha256=$.sha.sha256,$.sha224=$.sha.sha224,$.sha384=$.sha.sha384,$.sha512=$.sha.sha512,$.ripemd160=$.ripemd.ripemd160}),sb=lq((q,$)=>{$.exports={doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}}}),Kj=lq((q)=>{var $=q,K=$j(),_=Mf(),P=Z6(),O=P.assert;function Y(X){if(X.type==="short")this.curve=new _.short(X);else if(X.type==="edwards")this.curve=new _.edwards(X);else this.curve=new _.mont(X);this.g=this.curve.g,this.n=this.curve.n,this.hash=X.hash,O(this.g.validate(),"Invalid curve"),O(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}$.PresetCurve=Y;function H(X,Z){Object.defineProperty($,X,{configurable:!0,enumerable:!0,get:function(){var k=new Y(Z);return Object.defineProperty($,X,{configurable:!0,enumerable:!0,value:k}),k}})}H("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:K.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),H("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:K.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),H("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:K.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),H("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:K.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),H("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:K.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),H("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:K.sha256,gRed:!1,g:["9"]}),H("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:K.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});var v;try{v=sb()}catch(X){v=void 0}H("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:K.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",v]})}),qg=lq((q,$)=>{var K=$j(),_=Zf(),P=P_();function O(Y){if(!(this instanceof O))return new O(Y);this.hash=Y.hash,this.predResist=!!Y.predResist,this.outLen=this.hash.outSize,this.minEntropy=Y.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var H=_.toArray(Y.entropy,Y.entropyEnc||"hex"),v=_.toArray(Y.nonce,Y.nonceEnc||"hex"),X=_.toArray(Y.pers,Y.persEnc||"hex");P(H.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(H,v,X)}$.exports=O,O.prototype._init=function(H,v,X){var Z=H.concat(v).concat(X);this.K=Array(this.outLen/8),this.V=Array(this.outLen/8);for(var k=0;k<this.V.length;k++)this.K[k]=0,this.V[k]=1;this._update(Z),this._reseed=1,this.reseedInterval=281474976710656},O.prototype._hmac=function(){return new K.hmac(this.hash,this.K)},O.prototype._update=function(H){var v=this._hmac().update(this.V).update([0]);if(H)v=v.update(H);if(this.K=v.digest(),this.V=this._hmac().update(this.V).digest(),!H)return;this.K=this._hmac().update(this.V).update([1]).update(H).digest(),this.V=this._hmac().update(this.V).digest()},O.prototype.reseed=function(H,v,X,Z){if(typeof v!=="string")Z=X,X=v,v=null;H=_.toArray(H,v),X=_.toArray(X,Z),P(H.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(H.concat(X||[])),this._reseed=1},O.prototype.generate=function(H,v,X,Z){if(this._reseed>this.reseedInterval)throw Error("Reseed is required");if(typeof v!=="string")Z=X,X=v,v=null;if(X)X=_.toArray(X,Z||"hex"),this._update(X);var k=[];while(k.length<H)this.V=this._hmac().update(this.V).digest(),k=k.concat(this.V);var G=k.slice(0,H);return this._update(X),this._reseed++,_.encode(G,v)}}),$g=lq((q,$)=>{var K=bK(),_=Z6(),P=_.assert;function O(Y,H){if(this.ec=Y,this.priv=null,this.pub=null,H.priv)this._importPrivate(H.priv,H.privEnc);if(H.pub)this._importPublic(H.pub,H.pubEnc)}$.exports=O,O.fromPublic=function(H,v,X){if(v instanceof O)return v;return new O(H,{pub:v,pubEnc:X})},O.fromPrivate=function(H,v,X){if(v instanceof O)return v;return new O(H,{priv:v,privEnc:X})},O.prototype.validate=function(){var H=this.getPublic();if(H.isInfinity())return{result:!1,reason:"Invalid public key"};if(!H.validate())return{result:!1,reason:"Public key is not a point"};if(!H.mul(this.ec.curve.n).isInfinity())return{result:!1,reason:"Public key * N != O"};return{result:!0,reason:null}},O.prototype.getPublic=function(H,v){if(typeof H==="string")v=H,H=null;if(!this.pub)this.pub=this.ec.g.mul(this.priv);if(!v)return this.pub;return this.pub.encode(v,H)},O.prototype.getPrivate=function(H){if(H==="hex")return this.priv.toString(16,2);else return this.priv},O.prototype._importPrivate=function(H,v){this.priv=new K(H,v||16),this.priv=this.priv.umod(this.ec.curve.n)},O.prototype._importPublic=function(H,v){if(H.x||H.y){if(this.ec.curve.type==="mont")P(H.x,"Need x coordinate");else if(this.ec.curve.type==="short"||this.ec.curve.type==="edwards")P(H.x&&H.y,"Need both x and y coordinate");this.pub=this.ec.curve.point(H.x,H.y);return}this.pub=this.ec.curve.decodePoint(H,v)},O.prototype.derive=function(H){if(!H.validate())P(H.validate(),"public point not validated");return H.mul(this.priv).getX()},O.prototype.sign=function(H,v,X){return this.ec.sign(H,this,v,X)},O.prototype.verify=function(H,v,X){return this.ec.verify(H,v,this,void 0,X)},O.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"}}),Kg=lq((q,$)=>{var K=bK(),_=Z6(),P=_.assert;function O(Z,k){if(Z instanceof O)return Z;if(this._importDER(Z,k))return;if(P(Z.r&&Z.s,"Signature without r or s"),this.r=new K(Z.r,16),this.s=new K(Z.s,16),Z.recoveryParam===void 0)this.recoveryParam=null;else this.recoveryParam=Z.recoveryParam}$.exports=O;function Y(){this.place=0}function H(Z,k){var G=Z[k.place++];if(!(G&128))return G;var S=G&15;if(S===0||S>4)return!1;if(Z[k.place]===0)return!1;var N=0;for(var E=0,h=k.place;E<S;E++,h++)N<<=8,N|=Z[h],N>>>=0;if(N<=127)return!1;return k.place=h,N}function v(Z){var k=0,G=Z.length-1;while(!Z[k]&&!(Z[k+1]&128)&&k<G)k++;if(k===0)return Z;return Z.slice(k)}O.prototype._importDER=function(k,G){k=_.toArray(k,G);var S=new Y;if(k[S.place++]!==48)return!1;var N=H(k,S);if(N===!1)return!1;if(N+S.place!==k.length)return!1;if(k[S.place++]!==2)return!1;var E=H(k,S);if(E===!1)return!1;if((k[S.place]&128)!==0)return!1;var h=k.slice(S.place,E+S.place);if(S.place+=E,k[S.place++]!==2)return!1;var D=H(k,S);if(D===!1)return!1;if(k.length!==D+S.place)return!1;if((k[S.place]&128)!==0)return!1;var I=k.slice(S.place,D+S.place);if(h[0]===0)if(h[1]&128)h=h.slice(1);else return!1;if(I[0]===0)if(I[1]&128)I=I.slice(1);else return!1;return this.r=new K(h),this.s=new K(I),this.recoveryParam=null,!0};function X(Z,k){if(k<128){Z.push(k);return}var G=1+(Math.log(k)/Math.LN2>>>3);Z.push(G|128);while(--G)Z.push(k>>>(G<<3)&255);Z.push(k)}O.prototype.toDER=function(k){var G=this.r.toArray(),S=this.s.toArray();if(G[0]&128)G=[0].concat(G);if(S[0]&128)S=[0].concat(S);G=v(G),S=v(S);while(!S[0]&&!(S[1]&128))S=S.slice(1);var N=[2];X(N,G.length),N=N.concat(G),N.push(2),X(N,S.length);var E=N.concat(S),h=[48];return X(h,E.length),h=h.concat(E),_.encode(h,k)}}),_g=lq((q,$)=>{var K=bK(),_=qg(),P=Z6(),O=Kj(),Y=Vf(),H=P.assert,v=$g(),X=Kg();function Z(k){if(!(this instanceof Z))return new Z(k);if(typeof k==="string")H(Object.prototype.hasOwnProperty.call(O,k),"Unknown curve "+k),k=O[k];if(k instanceof O.PresetCurve)k={curve:k};this.curve=k.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=k.curve.g,this.g.precompute(k.curve.n.bitLength()+1),this.hash=k.hash||k.curve.hash}$.exports=Z,Z.prototype.keyPair=function(G){return new v(this,G)},Z.prototype.keyFromPrivate=function(G,S){return v.fromPrivate(this,G,S)},Z.prototype.keyFromPublic=function(G,S){return v.fromPublic(this,G,S)},Z.prototype.genKeyPair=function(G){if(!G)G={};var S=new _({hash:this.hash,pers:G.pers,persEnc:G.persEnc||"utf8",entropy:G.entropy||Y(this.hash.hmacStrength),entropyEnc:G.entropy&&G.entropyEnc||"utf8",nonce:this.n.toArray()}),N=this.n.byteLength(),E=this.n.sub(new K(2));for(;;){var h=new K(S.generate(N));if(h.cmp(E)>0)continue;return h.iaddn(1),this.keyFromPrivate(h)}},Z.prototype._truncateToN=function(G,S,N){var E;if(K.isBN(G)||typeof G==="number")G=new K(G,16),E=G.byteLength();else if(typeof G==="object")E=G.length,G=new K(G,16);else{var h=G.toString();E=h.length+1>>>1,G=new K(h,16)}if(typeof N!=="number")N=E*8;var D=N-this.n.bitLength();if(D>0)G=G.ushrn(D);if(!S&&G.cmp(this.n)>=0)return G.sub(this.n);else return G},Z.prototype.sign=function(G,S,N,E){if(typeof N==="object")E=N,N=null;if(!E)E={};if(typeof G!=="string"&&typeof G!=="number"&&!K.isBN(G)){H(typeof G==="object"&&G&&typeof G.length==="number","Expected message to be an array-like, a hex string, or a BN instance"),H(G.length>>>0===G.length);for(var h=0;h<G.length;h++)H((G[h]&255)===G[h])}S=this.keyFromPrivate(S,N),G=this._truncateToN(G,!1,E.msgBitLength),H(!G.isNeg(),"Can not sign a negative message");var D=this.n.byteLength(),I=S.getPrivate().toArray("be",D),g=G.toArray("be",D);H(new K(g).eq(G),"Can not sign message");var y=new _({hash:this.hash,entropy:I,nonce:g,pers:E.pers,persEnc:E.persEnc||"utf8"}),p=this.n.sub(new K(1));for(var m=0;;m++){var c=E.k?E.k(m):new K(y.generate(this.n.byteLength()));if(c=this._truncateToN(c,!0),c.cmpn(1)<=0||c.cmp(p)>=0)continue;var $q=this.g.mul(c);if($q.isInfinity())continue;var e=$q.getX(),d=e.umod(this.n);if(d.cmpn(0)===0)continue;var n=c.invm(this.n).mul(d.mul(S.getPrivate()).iadd(G));if(n=n.umod(this.n),n.cmpn(0)===0)continue;var M=($q.getY().isOdd()?1:0)|(e.cmp(d)!==0?2:0);if(E.canonical&&n.cmp(this.nh)>0)n=this.n.sub(n),M^=1;return new X({r:d,s:n,recoveryParam:M})}},Z.prototype.verify=function(G,S,N,E,h){if(!h)h={};G=this._truncateToN(G,!1,h.msgBitLength),N=this.keyFromPublic(N,E),S=new X(S,"hex");var{r:D,s:I}=S;if(D.cmpn(1)<0||D.cmp(this.n)>=0)return!1;if(I.cmpn(1)<0||I.cmp(this.n)>=0)return!1;var g=I.invm(this.n),y=g.mul(G).umod(this.n),p=g.mul(D).umod(this.n),m;if(!this.curve._maxwellTrick){if(m=this.g.mulAdd(y,N.getPublic(),p),m.isInfinity())return!1;return m.getX().umod(this.n).cmp(D)===0}if(m=this.g.jmulAdd(y,N.getPublic(),p),m.isInfinity())return!1;return m.eqXToP(D)},Z.prototype.recoverPubKey=function(k,G,S,N){H((3&S)===S,"The recovery param is more than two bits"),G=new X(G,N);var E=this.n,h=new K(k),D=G.r,I=G.s,g=S&1,y=S>>1;if(D.cmp(this.curve.p.umod(this.curve.n))>=0&&y)throw Error("Unable to find sencond key candinate");if(y)D=this.curve.pointFromX(D.add(this.curve.n),g);else D=this.curve.pointFromX(D,g);var p=G.r.invm(E),m=E.sub(h).mul(p).umod(E),c=I.mul(p).umod(E);return this.g.mulAdd(m,D,c)},Z.prototype.getKeyRecoveryParam=function(k,G,S,N){if(G=new X(G,N),G.recoveryParam!==null)return G.recoveryParam;for(var E=0;E<4;E++){var h;try{h=this.recoverPubKey(k,G,E)}catch(D){continue}if(h.eq(S))return E}throw Error("Unable to find valid recovery factor")}}),Pg=lq((q,$)=>{var K=Z6(),_=K.assert,P=K.parseBytes,O=K.cachedProperty;function Y(H,v){if(this.eddsa=H,this._secret=P(v.secret),H.isPoint(v.pub))this._pub=v.pub;else this._pubBytes=P(v.pub)}Y.fromPublic=function(v,X){if(X instanceof Y)return X;return new Y(v,{pub:X})},Y.fromSecret=function(v,X){if(X instanceof Y)return X;return new Y(v,{secret:X})},Y.prototype.secret=function(){return this._secret},O(Y,"pubBytes",function(){return this.eddsa.encodePoint(this.pub())}),O(Y,"pub",function(){if(this._pubBytes)return this.eddsa.decodePoint(this._pubBytes);return this.eddsa.g.mul(this.priv())}),O(Y,"privBytes",function(){var v=this.eddsa,X=this.hash(),Z=v.encodingLength-1,k=X.slice(0,v.encodingLength);return k[0]&=248,k[Z]&=127,k[Z]|=64,k}),O(Y,"priv",function(){return this.eddsa.decodeInt(this.privBytes())}),O(Y,"hash",function(){return this.eddsa.hash().update(this.secret()).digest()}),O(Y,"messagePrefix",function(){return this.hash().slice(this.eddsa.encodingLength)}),Y.prototype.sign=function(v){return _(this._secret,"KeyPair can only verify"),this.eddsa.sign(v,this)},Y.prototype.verify=function(v,X){return this.eddsa.verify(v,X,this)},Y.prototype.getSecret=function(v){return _(this._secret,"KeyPair is public only"),K.encode(this.secret(),v)},Y.prototype.getPublic=function(v){return K.encode(this.pubBytes(),v)},$.exports=Y}),Yg=lq((q,$)=>{var K=bK(),_=Z6(),P=_.assert,O=_.cachedProperty,Y=_.parseBytes;function H(v,X){if(this.eddsa=v,typeof X!=="object")X=Y(X);if(Array.isArray(X))P(X.length===v.encodingLength*2,"Signature has invalid size"),X={R:X.slice(0,v.encodingLength),S:X.slice(v.encodingLength)};if(P(X.R&&X.S,"Signature without R or S"),v.isPoint(X.R))this._R=X.R;if(X.S instanceof K)this._S=X.S;this._Rencoded=Array.isArray(X.R)?X.R:X.Rencoded,this._Sencoded=Array.isArray(X.S)?X.S:X.Sencoded}O(H,"S",function(){return this.eddsa.decodeInt(this.Sencoded())}),O(H,"R",function(){return this.eddsa.decodePoint(this.Rencoded())}),O(H,"Rencoded",function(){return this.eddsa.encodePoint(this.R())}),O(H,"Sencoded",function(){return this.eddsa.encodeInt(this.S())}),H.prototype.toBytes=function(){return this.Rencoded().concat(this.Sencoded())},H.prototype.toHex=function(){return _.encode(this.toBytes(),"hex").toUpperCase()},$.exports=H}),jg=lq((q,$)=>{var K=$j(),_=Kj(),P=Z6(),O=P.assert,Y=P.parseBytes,H=Pg(),v=Yg();function X(Z){if(O(Z==="ed25519","only tested with ed25519 so far"),!(this instanceof X))return new X(Z);Z=_[Z].curve,this.curve=Z,this.g=Z.g,this.g.precompute(Z.n.bitLength()+1),this.pointClass=Z.point().constructor,this.encodingLength=Math.ceil(Z.n.bitLength()/8),this.hash=K.sha512}$.exports=X,X.prototype.sign=function(k,G){k=Y(k);var S=this.keyFromSecret(G),N=this.hashInt(S.messagePrefix(),k),E=this.g.mul(N),h=this.encodePoint(E),D=this.hashInt(h,S.pubBytes(),k).mul(S.priv()),I=N.add(D).umod(this.curve.n);return this.makeSignature({R:E,S:I,Rencoded:h})},X.prototype.verify=function(k,G,S){if(k=Y(k),G=this.makeSignature(G),G.S().gte(G.eddsa.curve.n)||G.S().isNeg())return!1;var N=this.keyFromPublic(S),E=this.hashInt(G.Rencoded(),N.pubBytes(),k),h=this.g.mul(G.S()),D=G.R().add(N.pub().mul(E));return D.eq(h)},X.prototype.hashInt=function(){var k=this.hash();for(var G=0;G<arguments.length;G++)k.update(arguments[G]);return P.intFromLE(k.digest()).umod(this.curve.n)},X.prototype.keyFromPublic=function(k){return H.fromPublic(this,k)},X.prototype.keyFromSecret=function(k){return H.fromSecret(this,k)},X.prototype.makeSignature=function(k){if(k instanceof v)return k;return new v(this,k)},X.prototype.encodePoint=function(k){var G=k.getY().toArray("le",this.encodingLength);return G[this.encodingLength-1]|=k.getX().isOdd()?128:0,G},X.prototype.decodePoint=function(k){k=P.parseBytes(k);var G=k.length-1,S=k.slice(0,G).concat(k[G]&-129),N=(k[G]&128)!==0,E=P.intFromLE(S);return this.curve.pointFromY(E,N)},X.prototype.encodeInt=function(k){return k.toArray("le",this.encodingLength)},X.prototype.decodeInt=function(k){return P.intFromLE(k)},X.prototype.isPoint=function(k){return k instanceof this.pointClass}}),Og=lq((q)=>{var $=q;$.version=ob().version,$.utils=Z6(),$.rand=Vf(),$.curve=Mf(),$.curves=Kj(),$.ec=_g(),$.eddsa=jg()}),Wg=lq((q,$)=>{(function(K,_){function P(M,j){if(!M)throw Error(j||"Assertion failed")}function O(M,j){M.super_=j;var J=function(){};J.prototype=j.prototype,M.prototype=new J,M.prototype.constructor=M}function Y(M,j,J){if(Y.isBN(M))return M;if(this.negative=0,this.words=null,this.length=0,this.red=null,M!==null){if(j==="le"||j==="be")J=j,j=10;this._init(M||0,j||10,J||"be")}}if(typeof K==="object")K.exports=Y;else _.BN=Y;Y.BN=Y,Y.wordSize=26;var H;try{if(typeof window<"u"&&typeof window.Buffer<"u")H=window.Buffer;else H=(T8(),M$(w8)).Buffer}catch(M){}Y.isBN=function(j){if(j instanceof Y)return!0;return j!==null&&typeof j==="object"&&j.constructor.wordSize===Y.wordSize&&Array.isArray(j.words)},Y.max=function(j,J){if(j.cmp(J)>0)return j;return J},Y.min=function(j,J){if(j.cmp(J)<0)return j;return J},Y.prototype._init=function(j,J,w){if(typeof j==="number")return this._initNumber(j,J,w);if(typeof j==="object")return this._initArray(j,J,w);if(J==="hex")J=16;P(J===(J|0)&&J>=2&&J<=36),j=j.toString().replace(/\s+/g,"");var z=0;if(j[0]==="-")z++,this.negative=1;if(z<j.length){if(J===16)this._parseHex(j,z,w);else if(this._parseBase(j,J,z),w==="le")this._initArray(this.toArray(),J,w)}},Y.prototype._initNumber=function(j,J,w){if(j<0)this.negative=1,j=-j;if(j<67108864)this.words=[j&67108863],this.length=1;else if(j<4503599627370496)this.words=[j&67108863,j/67108864&67108863],this.length=2;else P(j<9007199254740992),this.words=[j&67108863,j/67108864&67108863,1],this.length=3;if(w!=="le")return;this._initArray(this.toArray(),J,w)},Y.prototype._initArray=function(j,J,w){if(P(typeof j.length==="number"),j.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(j.length/3),this.words=Array(this.length);for(var z=0;z<this.length;z++)this.words[z]=0;var T,V,C=0;if(w==="be"){for(z=j.length-1,T=0;z>=0;z-=3)if(V=j[z]|j[z-1]<<8|j[z-2]<<16,this.words[T]|=V<<C&67108863,this.words[T+1]=V>>>26-C&67108863,C+=24,C>=26)C-=26,T++}else if(w==="le"){for(z=0,T=0;z<j.length;z+=3)if(V=j[z]|j[z+1]<<8|j[z+2]<<16,this.words[T]|=V<<C&67108863,this.words[T+1]=V>>>26-C&67108863,C+=24,C>=26)C-=26,T++}return this.strip()};function v(M,j){var J=M.charCodeAt(j);if(J>=65&&J<=70)return J-55;else if(J>=97&&J<=102)return J-87;else return J-48&15}function X(M,j,J){var w=v(M,J);if(J-1>=j)w|=v(M,J-1)<<4;return w}Y.prototype._parseHex=function(j,J,w){this.length=Math.ceil((j.length-J)/6),this.words=Array(this.length);for(var z=0;z<this.length;z++)this.words[z]=0;var T=0,V=0,C;if(w==="be")for(z=j.length-1;z>=J;z-=2)if(C=X(j,J,z)<<T,this.words[V]|=C&67108863,T>=18)T-=18,V+=1,this.words[V]|=C>>>26;else T+=8;else{var f=j.length-J;for(z=f%2===0?J+1:J;z<j.length;z+=2)if(C=X(j,J,z)<<T,this.words[V]|=C&67108863,T>=18)T-=18,V+=1,this.words[V]|=C>>>26;else T+=8}this.strip()};function Z(M,j,J,w){var z=0,T=Math.min(M.length,J);for(var V=j;V<T;V++){var C=M.charCodeAt(V)-48;if(z*=w,C>=49)z+=C-49+10;else if(C>=17)z+=C-17+10;else z+=C}return z}Y.prototype._parseBase=function(j,J,w){this.words=[0],this.length=1;for(var z=0,T=1;T<=67108863;T*=J)z++;z--,T=T/J|0;var V=j.length-w,C=V%z,f=Math.min(V,V-C)+w,W=0;for(var A=w;A<f;A+=z)if(W=Z(j,A,A+z,J),this.imuln(T),this.words[0]+W<67108864)this.words[0]+=W;else this._iaddn(W);if(C!==0){var L=1;W=Z(j,A,j.length,J);for(A=0;A<C;A++)L*=J;if(this.imuln(L),this.words[0]+W<67108864)this.words[0]+=W;else this._iaddn(W)}this.strip()},Y.prototype.copy=function(j){j.words=Array(this.length);for(var J=0;J<this.length;J++)j.words[J]=this.words[J];j.length=this.length,j.negative=this.negative,j.red=this.red},Y.prototype.clone=function(){var j=new Y(null);return this.copy(j),j},Y.prototype._expand=function(j){while(this.length<j)this.words[this.length++]=0;return this},Y.prototype.strip=function(){while(this.length>1&&this.words[this.length-1]===0)this.length--;return this._normSign()},Y.prototype._normSign=function(){if(this.length===1&&this.words[0]===0)this.negative=0;return this},Y.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var k=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],G=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],S=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64000000,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,24300000,28629151,33554432,39135393,45435424,52521875,60466176];if(Y.prototype.toString=function(j,J){j=j||10,J=J|0||1;var w;if(j===16||j==="hex"){w="";var z=0,T=0;for(var V=0;V<this.length;V++){var C=this.words[V],f=((C<<z|T)&16777215).toString(16);if(T=C>>>24-z&16777215,z+=2,z>=26)z-=26,V--;if(T!==0||V!==this.length-1)w=k[6-f.length]+f+w;else w=f+w}if(T!==0)w=T.toString(16)+w;while(w.length%J!==0)w="0"+w;if(this.negative!==0)w="-"+w;return w}if(j===(j|0)&&j>=2&&j<=36){var W=G[j],A=S[j];w="";var L=this.clone();L.negative=0;while(!L.isZero()){var R=L.modn(A).toString(j);if(L=L.idivn(A),!L.isZero())w=k[W-R.length]+R+w;else w=R+w}if(this.isZero())w="0"+w;while(w.length%J!==0)w="0"+w;if(this.negative!==0)w="-"+w;return w}P(!1,"Base should be between 2 and 36")},Y.prototype.toNumber=function(){var j=this.words[0];if(this.length===2)j+=this.words[1]*67108864;else if(this.length===3&&this.words[2]===1)j+=4503599627370496+this.words[1]*67108864;else if(this.length>2)P(!1,"Number can only safely store up to 53 bits");return this.negative!==0?-j:j},Y.prototype.toJSON=function(){return this.toString(16)},Y.prototype.toBuffer=function(j,J){return P(typeof H<"u"),this.toArrayLike(H,j,J)},Y.prototype.toArray=function(j,J){return this.toArrayLike(Array,j,J)},Y.prototype.toArrayLike=function(j,J,w){var z=this.byteLength(),T=w||Math.max(1,z);P(z<=T,"byte array longer than desired length"),P(T>0,"Requested array length <= 0"),this.strip();var V=J==="le",C=new j(T),f,W,A=this.clone();if(!V){for(W=0;W<T-z;W++)C[W]=0;for(W=0;!A.isZero();W++)f=A.andln(255),A.iushrn(8),C[T-W-1]=f}else{for(W=0;!A.isZero();W++)f=A.andln(255),A.iushrn(8),C[W]=f;for(;W<T;W++)C[W]=0}return C},Math.clz32)Y.prototype._countBits=function(j){return 32-Math.clz32(j)};else Y.prototype._countBits=function(j){var J=j,w=0;if(J>=4096)w+=13,J>>>=13;if(J>=64)w+=7,J>>>=7;if(J>=8)w+=4,J>>>=4;if(J>=2)w+=2,J>>>=2;return w+J};Y.prototype._zeroBits=function(j){if(j===0)return 26;var J=j,w=0;if((J&8191)===0)w+=13,J>>>=13;if((J&127)===0)w+=7,J>>>=7;if((J&15)===0)w+=4,J>>>=4;if((J&3)===0)w+=2,J>>>=2;if((J&1)===0)w++;return w},Y.prototype.bitLength=function(){var j=this.words[this.length-1],J=this._countBits(j);return(this.length-1)*26+J};function N(M){var j=Array(M.bitLength());for(var J=0;J<j.length;J++){var w=J/26|0,z=J%26;j[J]=(M.words[w]&1<<z)>>>z}return j}Y.prototype.zeroBits=function(){if(this.isZero())return 0;var j=0;for(var J=0;J<this.length;J++){var w=this._zeroBits(this.words[J]);if(j+=w,w!==26)break}return j},Y.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},Y.prototype.toTwos=function(j){if(this.negative!==0)return this.abs().inotn(j).iaddn(1);return this.clone()},Y.prototype.fromTwos=function(j){if(this.testn(j-1))return this.notn(j).iaddn(1).ineg();return this.clone()},Y.prototype.isNeg=function(){return this.negative!==0},Y.prototype.neg=function(){return this.clone().ineg()},Y.prototype.ineg=function(){if(!this.isZero())this.negative^=1;return this},Y.prototype.iuor=function(j){while(this.length<j.length)this.words[this.length++]=0;for(var J=0;J<j.length;J++)this.words[J]=this.words[J]|j.words[J];return this.strip()},Y.prototype.ior=function(j){return P((this.negative|j.negative)===0),this.iuor(j)},Y.prototype.or=function(j){if(this.length>j.length)return this.clone().ior(j);return j.clone().ior(this)},Y.prototype.uor=function(j){if(this.length>j.length)return this.clone().iuor(j);return j.clone().iuor(this)},Y.prototype.iuand=function(j){var J;if(this.length>j.length)J=j;else J=this;for(var w=0;w<J.length;w++)this.words[w]=this.words[w]&j.words[w];return this.length=J.length,this.strip()},Y.prototype.iand=function(j){return P((this.negative|j.negative)===0),this.iuand(j)},Y.prototype.and=function(j){if(this.length>j.length)return this.clone().iand(j);return j.clone().iand(this)},Y.prototype.uand=function(j){if(this.length>j.length)return this.clone().iuand(j);return j.clone().iuand(this)},Y.prototype.iuxor=function(j){var J,w;if(this.length>j.length)J=this,w=j;else J=j,w=this;for(var z=0;z<w.length;z++)this.words[z]=J.words[z]^w.words[z];if(this!==J)for(;z<J.length;z++)this.words[z]=J.words[z];return this.length=J.length,this.strip()},Y.prototype.ixor=function(j){return P((this.negative|j.negative)===0),this.iuxor(j)},Y.prototype.xor=function(j){if(this.length>j.length)return this.clone().ixor(j);return j.clone().ixor(this)},Y.prototype.uxor=function(j){if(this.length>j.length)return this.clone().iuxor(j);return j.clone().iuxor(this)},Y.prototype.inotn=function(j){P(typeof j==="number"&&j>=0);var J=Math.ceil(j/26)|0,w=j%26;if(this._expand(J),w>0)J--;for(var z=0;z<J;z++)this.words[z]=~this.words[z]&67108863;if(w>0)this.words[z]=~this.words[z]&67108863>>26-w;return this.strip()},Y.prototype.notn=function(j){return this.clone().inotn(j)},Y.prototype.setn=function(j,J){P(typeof j==="number"&&j>=0);var w=j/26|0,z=j%26;if(this._expand(w+1),J)this.words[w]=this.words[w]|1<<z;else this.words[w]=this.words[w]&~(1<<z);return this.strip()},Y.prototype.iadd=function(j){var J;if(this.negative!==0&&j.negative===0)return this.negative=0,J=this.isub(j),this.negative^=1,this._normSign();else if(this.negative===0&&j.negative!==0)return j.negative=0,J=this.isub(j),j.negative=1,J._normSign();var w,z;if(this.length>j.length)w=this,z=j;else w=j,z=this;var T=0;for(var V=0;V<z.length;V++)J=(w.words[V]|0)+(z.words[V]|0)+T,this.words[V]=J&67108863,T=J>>>26;for(;T!==0&&V<w.length;V++)J=(w.words[V]|0)+T,this.words[V]=J&67108863,T=J>>>26;if(this.length=w.length,T!==0)this.words[this.length]=T,this.length++;else if(w!==this)for(;V<w.length;V++)this.words[V]=w.words[V];return this},Y.prototype.add=function(j){var J;if(j.negative!==0&&this.negative===0)return j.negative=0,J=this.sub(j),j.negative^=1,J;else if(j.negative===0&&this.negative!==0)return this.negative=0,J=j.sub(this),this.negative=1,J;if(this.length>j.length)return this.clone().iadd(j);return j.clone().iadd(this)},Y.prototype.isub=function(j){if(j.negative!==0){j.negative=0;var J=this.iadd(j);return j.negative=1,J._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(j),this.negative=1,this._normSign();var w=this.cmp(j);if(w===0)return this.negative=0,this.length=1,this.words[0]=0,this;var z,T;if(w>0)z=this,T=j;else z=j,T=this;var V=0;for(var C=0;C<T.length;C++)J=(z.words[C]|0)-(T.words[C]|0)+V,V=J>>26,this.words[C]=J&67108863;for(;V!==0&&C<z.length;C++)J=(z.words[C]|0)+V,V=J>>26,this.words[C]=J&67108863;if(V===0&&C<z.length&&z!==this)for(;C<z.length;C++)this.words[C]=z.words[C];if(this.length=Math.max(this.length,C),z!==this)this.negative=1;return this.strip()},Y.prototype.sub=function(j){return this.clone().isub(j)};function E(M,j,J){J.negative=j.negative^M.negative;var w=M.length+j.length|0;J.length=w,w=w-1|0;var z=M.words[0]|0,T=j.words[0]|0,V=z*T,C=V&67108863,f=V/67108864|0;J.words[0]=C;for(var W=1;W<w;W++){var A=f>>>26,L=f&67108863,R=Math.min(W,j.length-1);for(var b=Math.max(0,W-M.length+1);b<=R;b++){var l=W-b|0;z=M.words[l]|0,T=j.words[b]|0,V=z*T+L,A+=V/67108864|0,L=V&67108863}J.words[W]=L|0,f=A|0}if(f!==0)J.words[W]=f|0;else J.length--;return J.strip()}var h=function(j,J,w){var z=j.words,T=J.words,V=w.words,C=0,f,W,A,L=z[0]|0,R=L&8191,b=L>>>13,l=z[1]|0,B=l&8191,t=l>>>13,Wq=z[2]|0,r=Wq&8191,i=Wq>>>13,gq=z[3]|0,jq=gq&8191,Oq=gq>>>13,Q=z[4]|0,o=Q&8191,U=Q>>>13,yq=z[5]|0,qq=yq&8191,s=yq>>>13,a=z[6]|0,F=a&8191,_q=a>>>13,Tq=z[7]|0,Yq=Tq&8191,Jq=Tq>>>13,z$=z[8]|0,Hq=z$&8191,Xq=z$>>>13,N$=z[9]|0,vq=N$&8191,kq=N$>>>13,o$=T[0]|0,fq=o$&8191,Rq=o$>>>13,X8=T[1]|0,hq=X8&8191,Dq=X8>>>13,h8=T[2]|0,Sq=h8&8191,Cq=h8>>>13,D8=T[3]|0,Nq=D8&8191,Gq=D8>>>13,I8=T[4]|0,Iq=I8&8191,Zq=I8>>>13,f8=T[5]|0,x=f8&8191,u=f8>>>13,pq=T[6]|0,Kq=pq&8191,Pq=pq>>>13,E$=T[7]|0,wq=E$&8191,Aq=E$>>>13,A8=T[8]|0,Lq=A8&8191,Eq=A8>>>13,k8=T[9]|0,Vq=k8&8191,Mq=k8>>>13;w.negative=j.negative^J.negative,w.length=19,f=Math.imul(R,fq),W=Math.imul(R,Rq),W=W+Math.imul(b,fq)|0,A=Math.imul(b,Rq);var m$=(C+f|0)+((W&8191)<<13)|0;C=(A+(W>>>13)|0)+(m$>>>26)|0,m$&=67108863,f=Math.imul(B,fq),W=Math.imul(B,Rq),W=W+Math.imul(t,fq)|0,A=Math.imul(t,Rq),f=f+Math.imul(R,hq)|0,W=W+Math.imul(R,Dq)|0,W=W+Math.imul(b,hq)|0,A=A+Math.imul(b,Dq)|0;var J$=(C+f|0)+((W&8191)<<13)|0;C=(A+(W>>>13)|0)+(J$>>>26)|0,J$&=67108863,f=Math.imul(r,fq),W=Math.imul(r,Rq),W=W+Math.imul(i,fq)|0,A=Math.imul(i,Rq),f=f+Math.imul(B,hq)|0,W=W+Math.imul(B,Dq)|0,W=W+Math.imul(t,hq)|0,A=A+Math.imul(t,Dq)|0,f=f+Math.imul(R,Sq)|0,W=W+Math.imul(R,Cq)|0,W=W+Math.imul(b,Sq)|0,A=A+Math.imul(b,Cq)|0;var O$=(C+f|0)+((W&8191)<<13)|0;C=(A+(W>>>13)|0)+(O$>>>26)|0,O$&=67108863,f=Math.imul(jq,fq),W=Math.imul(jq,Rq),W=W+Math.imul(Oq,fq)|0,A=Math.imul(Oq,Rq),f=f+Math.imul(r,hq)|0,W=W+Math.imul(r,Dq)|0,W=W+Math.imul(i,hq)|0,A=A+Math.imul(i,Dq)|0,f=f+Math.imul(B,Sq)|0,W=W+Math.imul(B,Cq)|0,W=W+Math.imul(t,Sq)|0,A=A+Math.imul(t,Cq)|0,f=f+Math.imul(R,Nq)|0,W=W+Math.imul(R,Gq)|0,W=W+Math.imul(b,Nq)|0,A=A+Math.imul(b,Gq)|0;var h$=(C+f|0)+((W&8191)<<13)|0;C=(A+(W>>>13)|0)+(h$>>>26)|0,h$&=67108863,f=Math.imul(o,fq),W=Math.imul(o,Rq),W=W+Math.imul(U,fq)|0,A=Math.imul(U,Rq),f=f+Math.imul(jq,hq)|0,W=W+Math.imul(jq,Dq)|0,W=W+Math.imul(Oq,hq)|0,A=A+Math.imul(Oq,Dq)|0,f=f+Math.imul(r,Sq)|0,W=W+Math.imul(r,Cq)|0,W=W+Math.imul(i,Sq)|0,A=A+Math.imul(i,Cq)|0,f=f+Math.imul(B,Nq)|0,W=W+Math.imul(B,Gq)|0,W=W+Math.imul(t,Nq)|0,A=A+Math.imul(t,Gq)|0,f=f+Math.imul(R,Iq)|0,W=W+Math.imul(R,Zq)|0,W=W+Math.imul(b,Iq)|0,A=A+Math.imul(b,Zq)|0;var F$=(C+f|0)+((W&8191)<<13)|0;C=(A+(W>>>13)|0)+(F$>>>26)|0,F$&=67108863,f=Math.imul(qq,fq),W=Math.imul(qq,Rq),W=W+Math.imul(s,fq)|0,A=Math.imul(s,Rq),f=f+Math.imul(o,hq)|0,W=W+Math.imul(o,Dq)|0,W=W+Math.imul(U,hq)|0,A=A+Math.imul(U,Dq)|0,f=f+Math.imul(jq,Sq)|0,W=W+Math.imul(jq,Cq)|0,W=W+Math.imul(Oq,Sq)|0,A=A+Math.imul(Oq,Cq)|0,f=f+Math.imul(r,Nq)|0,W=W+Math.imul(r,Gq)|0,W=W+Math.imul(i,Nq)|0,A=A+Math.imul(i,Gq)|0,f=f+Math.imul(B,Iq)|0,W=W+Math.imul(B,Zq)|0,W=W+Math.imul(t,Iq)|0,A=A+Math.imul(t,Zq)|0,f=f+Math.imul(R,x)|0,W=W+Math.imul(R,u)|0,W=W+Math.imul(b,x)|0,A=A+Math.imul(b,u)|0;var t$=(C+f|0)+((W&8191)<<13)|0;C=(A+(W>>>13)|0)+(t$>>>26)|0,t$&=67108863,f=Math.imul(F,fq),W=Math.imul(F,Rq),W=W+Math.imul(_q,fq)|0,A=Math.imul(_q,Rq),f=f+Math.imul(qq,hq)|0,W=W+Math.imul(qq,Dq)|0,W=W+Math.imul(s,hq)|0,A=A+Math.imul(s,Dq)|0,f=f+Math.imul(o,Sq)|0,W=W+Math.imul(o,Cq)|0,W=W+Math.imul(U,Sq)|0,A=A+Math.imul(U,Cq)|0,f=f+Math.imul(jq,Nq)|0,W=W+Math.imul(jq,Gq)|0,W=W+Math.imul(Oq,Nq)|0,A=A+Math.imul(Oq,Gq)|0,f=f+Math.imul(r,Iq)|0,W=W+Math.imul(r,Zq)|0,W=W+Math.imul(i,Iq)|0,A=A+Math.imul(i,Zq)|0,f=f+Math.imul(B,x)|0,W=W+Math.imul(B,u)|0,W=W+Math.imul(t,x)|0,A=A+Math.imul(t,u)|0,f=f+Math.imul(R,Kq)|0,W=W+Math.imul(R,Pq)|0,W=W+Math.imul(b,Kq)|0,A=A+Math.imul(b,Pq)|0;var Q$=(C+f|0)+((W&8191)<<13)|0;C=(A+(W>>>13)|0)+(Q$>>>26)|0,Q$&=67108863,f=Math.imul(Yq,fq),W=Math.imul(Yq,Rq),W=W+Math.imul(Jq,fq)|0,A=Math.imul(Jq,Rq),f=f+Math.imul(F,hq)|0,W=W+Math.imul(F,Dq)|0,W=W+Math.imul(_q,hq)|0,A=A+Math.imul(_q,Dq)|0,f=f+Math.imul(qq,Sq)|0,W=W+Math.imul(qq,Cq)|0,W=W+Math.imul(s,Sq)|0,A=A+Math.imul(s,Cq)|0,f=f+Math.imul(o,Nq)|0,W=W+Math.imul(o,Gq)|0,W=W+Math.imul(U,Nq)|0,A=A+Math.imul(U,Gq)|0,f=f+Math.imul(jq,Iq)|0,W=W+Math.imul(jq,Zq)|0,W=W+Math.imul(Oq,Iq)|0,A=A+Math.imul(Oq,Zq)|0,f=f+Math.imul(r,x)|0,W=W+Math.imul(r,u)|0,W=W+Math.imul(i,x)|0,A=A+Math.imul(i,u)|0,f=f+Math.imul(B,Kq)|0,W=W+Math.imul(B,Pq)|0,W=W+Math.imul(t,Kq)|0,A=A+Math.imul(t,Pq)|0,f=f+Math.imul(R,wq)|0,W=W+Math.imul(R,Aq)|0,W=W+Math.imul(b,wq)|0,A=A+Math.imul(b,Aq)|0;var a$=(C+f|0)+((W&8191)<<13)|0;C=(A+(W>>>13)|0)+(a$>>>26)|0,a$&=67108863,f=Math.imul(Hq,fq),W=Math.imul(Hq,Rq),W=W+Math.imul(Xq,fq)|0,A=Math.imul(Xq,Rq),f=f+Math.imul(Yq,hq)|0,W=W+Math.imul(Yq,Dq)|0,W=W+Math.imul(Jq,hq)|0,A=A+Math.imul(Jq,Dq)|0,f=f+Math.imul(F,Sq)|0,W=W+Math.imul(F,Cq)|0,W=W+Math.imul(_q,Sq)|0,A=A+Math.imul(_q,Cq)|0,f=f+Math.imul(qq,Nq)|0,W=W+Math.imul(qq,Gq)|0,W=W+Math.imul(s,Nq)|0,A=A+Math.imul(s,Gq)|0,f=f+Math.imul(o,Iq)|0,W=W+Math.imul(o,Zq)|0,W=W+Math.imul(U,Iq)|0,A=A+Math.imul(U,Zq)|0,f=f+Math.imul(jq,x)|0,W=W+Math.imul(jq,u)|0,W=W+Math.imul(Oq,x)|0,A=A+Math.imul(Oq,u)|0,f=f+Math.imul(r,Kq)|0,W=W+Math.imul(r,Pq)|0,W=W+Math.imul(i,Kq)|0,A=A+Math.imul(i,Pq)|0,f=f+Math.imul(B,wq)|0,W=W+Math.imul(B,Aq)|0,W=W+Math.imul(t,wq)|0,A=A+Math.imul(t,Aq)|0,f=f+Math.imul(R,Lq)|0,W=W+Math.imul(R,Eq)|0,W=W+Math.imul(b,Lq)|0,A=A+Math.imul(b,Eq)|0;var e$=(C+f|0)+((W&8191)<<13)|0;C=(A+(W>>>13)|0)+(e$>>>26)|0,e$&=67108863,f=Math.imul(vq,fq),W=Math.imul(vq,Rq),W=W+Math.imul(kq,fq)|0,A=Math.imul(kq,Rq),f=f+Math.imul(Hq,hq)|0,W=W+Math.imul(Hq,Dq)|0,W=W+Math.imul(Xq,hq)|0,A=A+Math.imul(Xq,Dq)|0,f=f+Math.imul(Yq,Sq)|0,W=W+Math.imul(Yq,Cq)|0,W=W+Math.imul(Jq,Sq)|0,A=A+Math.imul(Jq,Cq)|0,f=f+Math.imul(F,Nq)|0,W=W+Math.imul(F,Gq)|0,W=W+Math.imul(_q,Nq)|0,A=A+Math.imul(_q,Gq)|0,f=f+Math.imul(qq,Iq)|0,W=W+Math.imul(qq,Zq)|0,W=W+Math.imul(s,Iq)|0,A=A+Math.imul(s,Zq)|0,f=f+Math.imul(o,x)|0,W=W+Math.imul(o,u)|0,W=W+Math.imul(U,x)|0,A=A+Math.imul(U,u)|0,f=f+Math.imul(jq,Kq)|0,W=W+Math.imul(jq,Pq)|0,W=W+Math.imul(Oq,Kq)|0,A=A+Math.imul(Oq,Pq)|0,f=f+Math.imul(r,wq)|0,W=W+Math.imul(r,Aq)|0,W=W+Math.imul(i,wq)|0,A=A+Math.imul(i,Aq)|0,f=f+Math.imul(B,Lq)|0,W=W+Math.imul(B,Eq)|0,W=W+Math.imul(t,Lq)|0,A=A+Math.imul(t,Eq)|0,f=f+Math.imul(R,Vq)|0,W=W+Math.imul(R,Mq)|0,W=W+Math.imul(b,Vq)|0,A=A+Math.imul(b,Mq)|0;var s$=(C+f|0)+((W&8191)<<13)|0;C=(A+(W>>>13)|0)+(s$>>>26)|0,s$&=67108863,f=Math.imul(vq,hq),W=Math.imul(vq,Dq),W=W+Math.imul(kq,hq)|0,A=Math.imul(kq,Dq),f=f+Math.imul(Hq,Sq)|0,W=W+Math.imul(Hq,Cq)|0,W=W+Math.imul(Xq,Sq)|0,A=A+Math.imul(Xq,Cq)|0,f=f+Math.imul(Yq,Nq)|0,W=W+Math.imul(Yq,Gq)|0,W=W+Math.imul(Jq,Nq)|0,A=A+Math.imul(Jq,Gq)|0,f=f+Math.imul(F,Iq)|0,W=W+Math.imul(F,Zq)|0,W=W+Math.imul(_q,Iq)|0,A=A+Math.imul(_q,Zq)|0,f=f+Math.imul(qq,x)|0,W=W+Math.imul(qq,u)|0,W=W+Math.imul(s,x)|0,A=A+Math.imul(s,u)|0,f=f+Math.imul(o,Kq)|0,W=W+Math.imul(o,Pq)|0,W=W+Math.imul(U,Kq)|0,A=A+Math.imul(U,Pq)|0,f=f+Math.imul(jq,wq)|0,W=W+Math.imul(jq,Aq)|0,W=W+Math.imul(Oq,wq)|0,A=A+Math.imul(Oq,Aq)|0,f=f+Math.imul(r,Lq)|0,W=W+Math.imul(r,Eq)|0,W=W+Math.imul(i,Lq)|0,A=A+Math.imul(i,Eq)|0,f=f+Math.imul(B,Vq)|0,W=W+Math.imul(B,Mq)|0,W=W+Math.imul(t,Vq)|0,A=A+Math.imul(t,Mq)|0;var q8=(C+f|0)+((W&8191)<<13)|0;C=(A+(W>>>13)|0)+(q8>>>26)|0,q8&=67108863,f=Math.imul(vq,Sq),W=Math.imul(vq,Cq),W=W+Math.imul(kq,Sq)|0,A=Math.imul(kq,Cq),f=f+Math.imul(Hq,Nq)|0,W=W+Math.imul(Hq,Gq)|0,W=W+Math.imul(Xq,Nq)|0,A=A+Math.imul(Xq,Gq)|0,f=f+Math.imul(Yq,Iq)|0,W=W+Math.imul(Yq,Zq)|0,W=W+Math.imul(Jq,Iq)|0,A=A+Math.imul(Jq,Zq)|0,f=f+Math.imul(F,x)|0,W=W+Math.imul(F,u)|0,W=W+Math.imul(_q,x)|0,A=A+Math.imul(_q,u)|0,f=f+Math.imul(qq,Kq)|0,W=W+Math.imul(qq,Pq)|0,W=W+Math.imul(s,Kq)|0,A=A+Math.imul(s,Pq)|0,f=f+Math.imul(o,wq)|0,W=W+Math.imul(o,Aq)|0,W=W+Math.imul(U,wq)|0,A=A+Math.imul(U,Aq)|0,f=f+Math.imul(jq,Lq)|0,W=W+Math.imul(jq,Eq)|0,W=W+Math.imul(Oq,Lq)|0,A=A+Math.imul(Oq,Eq)|0,f=f+Math.imul(r,Vq)|0,W=W+Math.imul(r,Mq)|0,W=W+Math.imul(i,Vq)|0,A=A+Math.imul(i,Mq)|0;var $8=(C+f|0)+((W&8191)<<13)|0;C=(A+(W>>>13)|0)+($8>>>26)|0,$8&=67108863,f=Math.imul(vq,Nq),W=Math.imul(vq,Gq),W=W+Math.imul(kq,Nq)|0,A=Math.imul(kq,Gq),f=f+Math.imul(Hq,Iq)|0,W=W+Math.imul(Hq,Zq)|0,W=W+Math.imul(Xq,Iq)|0,A=A+Math.imul(Xq,Zq)|0,f=f+Math.imul(Yq,x)|0,W=W+Math.imul(Yq,u)|0,W=W+Math.imul(Jq,x)|0,A=A+Math.imul(Jq,u)|0,f=f+Math.imul(F,Kq)|0,W=W+Math.imul(F,Pq)|0,W=W+Math.imul(_q,Kq)|0,A=A+Math.imul(_q,Pq)|0,f=f+Math.imul(qq,wq)|0,W=W+Math.imul(qq,Aq)|0,W=W+Math.imul(s,wq)|0,A=A+Math.imul(s,Aq)|0,f=f+Math.imul(o,Lq)|0,W=W+Math.imul(o,Eq)|0,W=W+Math.imul(U,Lq)|0,A=A+Math.imul(U,Eq)|0,f=f+Math.imul(jq,Vq)|0,W=W+Math.imul(jq,Mq)|0,W=W+Math.imul(Oq,Vq)|0,A=A+Math.imul(Oq,Mq)|0;var K8=(C+f|0)+((W&8191)<<13)|0;C=(A+(W>>>13)|0)+(K8>>>26)|0,K8&=67108863,f=Math.imul(vq,Iq),W=Math.imul(vq,Zq),W=W+Math.imul(kq,Iq)|0,A=Math.imul(kq,Zq),f=f+Math.imul(Hq,x)|0,W=W+Math.imul(Hq,u)|0,W=W+Math.imul(Xq,x)|0,A=A+Math.imul(Xq,u)|0,f=f+Math.imul(Yq,Kq)|0,W=W+Math.imul(Yq,Pq)|0,W=W+Math.imul(Jq,Kq)|0,A=A+Math.imul(Jq,Pq)|0,f=f+Math.imul(F,wq)|0,W=W+Math.imul(F,Aq)|0,W=W+Math.imul(_q,wq)|0,A=A+Math.imul(_q,Aq)|0,f=f+Math.imul(qq,Lq)|0,W=W+Math.imul(qq,Eq)|0,W=W+Math.imul(s,Lq)|0,A=A+Math.imul(s,Eq)|0,f=f+Math.imul(o,Vq)|0,W=W+Math.imul(o,Mq)|0,W=W+Math.imul(U,Vq)|0,A=A+Math.imul(U,Mq)|0;var _8=(C+f|0)+((W&8191)<<13)|0;C=(A+(W>>>13)|0)+(_8>>>26)|0,_8&=67108863,f=Math.imul(vq,x),W=Math.imul(vq,u),W=W+Math.imul(kq,x)|0,A=Math.imul(kq,u),f=f+Math.imul(Hq,Kq)|0,W=W+Math.imul(Hq,Pq)|0,W=W+Math.imul(Xq,Kq)|0,A=A+Math.imul(Xq,Pq)|0,f=f+Math.imul(Yq,wq)|0,W=W+Math.imul(Yq,Aq)|0,W=W+Math.imul(Jq,wq)|0,A=A+Math.imul(Jq,Aq)|0,f=f+Math.imul(F,Lq)|0,W=W+Math.imul(F,Eq)|0,W=W+Math.imul(_q,Lq)|0,A=A+Math.imul(_q,Eq)|0,f=f+Math.imul(qq,Vq)|0,W=W+Math.imul(qq,Mq)|0,W=W+Math.imul(s,Vq)|0,A=A+Math.imul(s,Mq)|0;var P8=(C+f|0)+((W&8191)<<13)|0;C=(A+(W>>>13)|0)+(P8>>>26)|0,P8&=67108863,f=Math.imul(vq,Kq),W=Math.imul(vq,Pq),W=W+Math.imul(kq,Kq)|0,A=Math.imul(kq,Pq),f=f+Math.imul(Hq,wq)|0,W=W+Math.imul(Hq,Aq)|0,W=W+Math.imul(Xq,wq)|0,A=A+Math.imul(Xq,Aq)|0,f=f+Math.imul(Yq,Lq)|0,W=W+Math.imul(Yq,Eq)|0,W=W+Math.imul(Jq,Lq)|0,A=A+Math.imul(Jq,Eq)|0,f=f+Math.imul(F,Vq)|0,W=W+Math.imul(F,Mq)|0,W=W+Math.imul(_q,Vq)|0,A=A+Math.imul(_q,Mq)|0;var Y8=(C+f|0)+((W&8191)<<13)|0;C=(A+(W>>>13)|0)+(Y8>>>26)|0,Y8&=67108863,f=Math.imul(vq,wq),W=Math.imul(vq,Aq),W=W+Math.imul(kq,wq)|0,A=Math.imul(kq,Aq),f=f+Math.imul(Hq,Lq)|0,W=W+Math.imul(Hq,Eq)|0,W=W+Math.imul(Xq,Lq)|0,A=A+Math.imul(Xq,Eq)|0,f=f+Math.imul(Yq,Vq)|0,W=W+Math.imul(Yq,Mq)|0,W=W+Math.imul(Jq,Vq)|0,A=A+Math.imul(Jq,Mq)|0;var j8=(C+f|0)+((W&8191)<<13)|0;C=(A+(W>>>13)|0)+(j8>>>26)|0,j8&=67108863,f=Math.imul(vq,Lq),W=Math.imul(vq,Eq),W=W+Math.imul(kq,Lq)|0,A=Math.imul(kq,Eq),f=f+Math.imul(Hq,Vq)|0,W=W+Math.imul(Hq,Mq)|0,W=W+Math.imul(Xq,Vq)|0,A=A+Math.imul(Xq,Mq)|0;var O8=(C+f|0)+((W&8191)<<13)|0;C=(A+(W>>>13)|0)+(O8>>>26)|0,O8&=67108863,f=Math.imul(vq,Vq),W=Math.imul(vq,Mq),W=W+Math.imul(kq,Vq)|0,A=Math.imul(kq,Mq);var W8=(C+f|0)+((W&8191)<<13)|0;if(C=(A+(W>>>13)|0)+(W8>>>26)|0,W8&=67108863,V[0]=m$,V[1]=J$,V[2]=O$,V[3]=h$,V[4]=F$,V[5]=t$,V[6]=Q$,V[7]=a$,V[8]=e$,V[9]=s$,V[10]=q8,V[11]=$8,V[12]=K8,V[13]=_8,V[14]=P8,V[15]=Y8,V[16]=j8,V[17]=O8,V[18]=W8,C!==0)V[19]=C,w.length++;return w};if(!Math.imul)h=E;function D(M,j,J){J.negative=j.negative^M.negative,J.length=M.length+j.length;var w=0,z=0;for(var T=0;T<J.length-1;T++){var V=z;z=0;var C=w&67108863,f=Math.min(T,j.length-1);for(var W=Math.max(0,T-M.length+1);W<=f;W++){var A=T-W,L=M.words[A]|0,R=j.words[W]|0,b=L*R,l=b&67108863;V=V+(b/67108864|0)|0,l=l+C|0,C=l&67108863,V=V+(l>>>26)|0,z+=V>>>26,V&=67108863}J.words[T]=C,w=V,V=z}if(w!==0)J.words[T]=w;else J.length--;return J.strip()}function I(M,j,J){var w=new g;return w.mulp(M,j,J)}Y.prototype.mulTo=function(j,J){var w,z=this.length+j.length;if(this.length===10&&j.length===10)w=h(this,j,J);else if(z<63)w=E(this,j,J);else if(z<1024)w=D(this,j,J);else w=I(this,j,J);return w};function g(M,j){this.x=M,this.y=j}g.prototype.makeRBT=function(j){var J=Array(j),w=Y.prototype._countBits(j)-1;for(var z=0;z<j;z++)J[z]=this.revBin(z,w,j);return J},g.prototype.revBin=function(j,J,w){if(j===0||j===w-1)return j;var z=0;for(var T=0;T<J;T++)z|=(j&1)<<J-T-1,j>>=1;return z},g.prototype.permute=function(j,J,w,z,T,V){for(var C=0;C<V;C++)z[C]=J[j[C]],T[C]=w[j[C]]},g.prototype.transform=function(j,J,w,z,T,V){this.permute(V,j,J,w,z,T);for(var C=1;C<T;C<<=1){var f=C<<1,W=Math.cos(2*Math.PI/f),A=Math.sin(2*Math.PI/f);for(var L=0;L<T;L+=f){var R=W,b=A;for(var l=0;l<C;l++){var B=w[L+l],t=z[L+l],Wq=w[L+l+C],r=z[L+l+C],i=R*Wq-b*r;if(r=R*r+b*Wq,Wq=i,w[L+l]=B+Wq,z[L+l]=t+r,w[L+l+C]=B-Wq,z[L+l+C]=t-r,l!==f)i=W*R-A*b,b=W*b+A*R,R=i}}}},g.prototype.guessLen13b=function(j,J){var w=Math.max(J,j)|1,z=w&1,T=0;for(w=w/2|0;w;w=w>>>1)T++;return 1<<T+1+z},g.prototype.conjugate=function(j,J,w){if(w<=1)return;for(var z=0;z<w/2;z++){var T=j[z];j[z]=j[w-z-1],j[w-z-1]=T,T=J[z],J[z]=-J[w-z-1],J[w-z-1]=-T}},g.prototype.normalize13b=function(j,J){var w=0;for(var z=0;z<J/2;z++){var T=Math.round(j[2*z+1]/J)*8192+Math.round(j[2*z]/J)+w;if(j[z]=T&67108863,T<67108864)w=0;else w=T/67108864|0}return j},g.prototype.convert13b=function(j,J,w,z){var T=0;for(var V=0;V<J;V++)T=T+(j[V]|0),w[2*V]=T&8191,T=T>>>13,w[2*V+1]=T&8191,T=T>>>13;for(V=2*J;V<z;++V)w[V]=0;P(T===0),P((T&-8192)===0)},g.prototype.stub=function(j){var J=Array(j);for(var w=0;w<j;w++)J[w]=0;return J},g.prototype.mulp=function(j,J,w){var z=2*this.guessLen13b(j.length,J.length),T=this.makeRBT(z),V=this.stub(z),C=Array(z),f=Array(z),W=Array(z),A=Array(z),L=Array(z),R=Array(z),b=w.words;b.length=z,this.convert13b(j.words,j.length,C,z),this.convert13b(J.words,J.length,A,z),this.transform(C,V,f,W,z,T),this.transform(A,V,L,R,z,T);for(var l=0;l<z;l++){var B=f[l]*L[l]-W[l]*R[l];W[l]=f[l]*R[l]+W[l]*L[l],f[l]=B}return this.conjugate(f,W,z),this.transform(f,W,b,V,z,T),this.conjugate(b,V,z),this.normalize13b(b,z),w.negative=j.negative^J.negative,w.length=j.length+J.length,w.strip()},Y.prototype.mul=function(j){var J=new Y(null);return J.words=Array(this.length+j.length),this.mulTo(j,J)},Y.prototype.mulf=function(j){var J=new Y(null);return J.words=Array(this.length+j.length),I(this,j,J)},Y.prototype.imul=function(j){return this.clone().mulTo(j,this)},Y.prototype.imuln=function(j){P(typeof j==="number"),P(j<67108864);var J=0;for(var w=0;w<this.length;w++){var z=(this.words[w]|0)*j,T=(z&67108863)+(J&67108863);J>>=26,J+=z/67108864|0,J+=T>>>26,this.words[w]=T&67108863}if(J!==0)this.words[w]=J,this.length++;return this.length=j===0?1:this.length,this},Y.prototype.muln=function(j){return this.clone().imuln(j)},Y.prototype.sqr=function(){return this.mul(this)},Y.prototype.isqr=function(){return this.imul(this.clone())},Y.prototype.pow=function(j){var J=N(j);if(J.length===0)return new Y(1);var w=this;for(var z=0;z<J.length;z++,w=w.sqr())if(J[z]!==0)break;if(++z<J.length)for(var T=w.sqr();z<J.length;z++,T=T.sqr()){if(J[z]===0)continue;w=w.mul(T)}return w},Y.prototype.iushln=function(j){P(typeof j==="number"&&j>=0);var J=j%26,w=(j-J)/26,z=67108863>>>26-J<<26-J,T;if(J!==0){var V=0;for(T=0;T<this.length;T++){var C=this.words[T]&z,f=(this.words[T]|0)-C<<J;this.words[T]=f|V,V=C>>>26-J}if(V)this.words[T]=V,this.length++}if(w!==0){for(T=this.length-1;T>=0;T--)this.words[T+w]=this.words[T];for(T=0;T<w;T++)this.words[T]=0;this.length+=w}return this.strip()},Y.prototype.ishln=function(j){return P(this.negative===0),this.iushln(j)},Y.prototype.iushrn=function(j,J,w){P(typeof j==="number"&&j>=0);var z;if(J)z=(J-J%26)/26;else z=0;var T=j%26,V=Math.min((j-T)/26,this.length),C=67108863^67108863>>>T<<T,f=w;if(z-=V,z=Math.max(0,z),f){for(var W=0;W<V;W++)f.words[W]=this.words[W];f.length=V}if(V===0);else if(this.length>V){this.length-=V;for(W=0;W<this.length;W++)this.words[W]=this.words[W+V]}else this.words[0]=0,this.length=1;var A=0;for(W=this.length-1;W>=0&&(A!==0||W>=z);W--){var L=this.words[W]|0;this.words[W]=A<<26-T|L>>>T,A=L&C}if(f&&A!==0)f.words[f.length++]=A;if(this.length===0)this.words[0]=0,this.length=1;return this.strip()},Y.prototype.ishrn=function(j,J,w){return P(this.negative===0),this.iushrn(j,J,w)},Y.prototype.shln=function(j){return this.clone().ishln(j)},Y.prototype.ushln=function(j){return this.clone().iushln(j)},Y.prototype.shrn=function(j){return this.clone().ishrn(j)},Y.prototype.ushrn=function(j){return this.clone().iushrn(j)},Y.prototype.testn=function(j){P(typeof j==="number"&&j>=0);var J=j%26,w=(j-J)/26,z=1<<J;if(this.length<=w)return!1;var T=this.words[w];return!!(T&z)},Y.prototype.imaskn=function(j){P(typeof j==="number"&&j>=0);var J=j%26,w=(j-J)/26;if(P(this.negative===0,"imaskn works only with positive numbers"),this.length<=w)return this;if(J!==0)w++;if(this.length=Math.min(w,this.length),J!==0){var z=67108863^67108863>>>J<<J;this.words[this.length-1]&=z}return this.strip()},Y.prototype.maskn=function(j){return this.clone().imaskn(j)},Y.prototype.iaddn=function(j){if(P(typeof j==="number"),P(j<67108864),j<0)return this.isubn(-j);if(this.negative!==0){if(this.length===1&&(this.words[0]|0)<j)return this.words[0]=j-(this.words[0]|0),this.negative=0,this;return this.negative=0,this.isubn(j),this.negative=1,this}return this._iaddn(j)},Y.prototype._iaddn=function(j){this.words[0]+=j;for(var J=0;J<this.length&&this.words[J]>=67108864;J++)if(this.words[J]-=67108864,J===this.length-1)this.words[J+1]=1;else this.words[J+1]++;return this.length=Math.max(this.length,J+1),this},Y.prototype.isubn=function(j){if(P(typeof j==="number"),P(j<67108864),j<0)return this.iaddn(-j);if(this.negative!==0)return this.negative=0,this.iaddn(j),this.negative=1,this;if(this.words[0]-=j,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var J=0;J<this.length&&this.words[J]<0;J++)this.words[J]+=67108864,this.words[J+1]-=1;return this.strip()},Y.prototype.addn=function(j){return this.clone().iaddn(j)},Y.prototype.subn=function(j){return this.clone().isubn(j)},Y.prototype.iabs=function(){return this.negative=0,this},Y.prototype.abs=function(){return this.clone().iabs()},Y.prototype._ishlnsubmul=function(j,J,w){var z=j.length+w,T;this._expand(z);var V,C=0;for(T=0;T<j.length;T++){V=(this.words[T+w]|0)+C;var f=(j.words[T]|0)*J;V-=f&67108863,C=(V>>26)-(f/67108864|0),this.words[T+w]=V&67108863}for(;T<this.length-w;T++)V=(this.words[T+w]|0)+C,C=V>>26,this.words[T+w]=V&67108863;if(C===0)return this.strip();P(C===-1),C=0;for(T=0;T<this.length;T++)V=-(this.words[T]|0)+C,C=V>>26,this.words[T]=V&67108863;return this.negative=1,this.strip()},Y.prototype._wordDiv=function(j,J){var w=this.length-j.length,z=this.clone(),T=j,V=T.words[T.length-1]|0,C=this._countBits(V);if(w=26-C,w!==0)T=T.ushln(w),z.iushln(w),V=T.words[T.length-1]|0;var f=z.length-T.length,W;if(J!=="mod"){W=new Y(null),W.length=f+1,W.words=Array(W.length);for(var A=0;A<W.length;A++)W.words[A]=0}var L=z.clone()._ishlnsubmul(T,1,f);if(L.negative===0){if(z=L,W)W.words[f]=1}for(var R=f-1;R>=0;R--){var b=(z.words[T.length+R]|0)*67108864+(z.words[T.length+R-1]|0);b=Math.min(b/V|0,67108863),z._ishlnsubmul(T,b,R);while(z.negative!==0)if(b--,z.negative=0,z._ishlnsubmul(T,1,R),!z.isZero())z.negative^=1;if(W)W.words[R]=b}if(W)W.strip();if(z.strip(),J!=="div"&&w!==0)z.iushrn(w);return{div:W||null,mod:z}},Y.prototype.divmod=function(j,J,w){if(P(!j.isZero()),this.isZero())return{div:new Y(0),mod:new Y(0)};var z,T,V;if(this.negative!==0&&j.negative===0){if(V=this.neg().divmod(j,J),J!=="mod")z=V.div.neg();if(J!=="div"){if(T=V.mod.neg(),w&&T.negative!==0)T.iadd(j)}return{div:z,mod:T}}if(this.negative===0&&j.negative!==0){if(V=this.divmod(j.neg(),J),J!=="mod")z=V.div.neg();return{div:z,mod:V.mod}}if((this.negative&j.negative)!==0){if(V=this.neg().divmod(j.neg(),J),J!=="div"){if(T=V.mod.neg(),w&&T.negative!==0)T.isub(j)}return{div:V.div,mod:T}}if(j.length>this.length||this.cmp(j)<0)return{div:new Y(0),mod:this};if(j.length===1){if(J==="div")return{div:this.divn(j.words[0]),mod:null};if(J==="mod")return{div:null,mod:new Y(this.modn(j.words[0]))};return{div:this.divn(j.words[0]),mod:new Y(this.modn(j.words[0]))}}return this._wordDiv(j,J)},Y.prototype.div=function(j){return this.divmod(j,"div",!1).div},Y.prototype.mod=function(j){return this.divmod(j,"mod",!1).mod},Y.prototype.umod=function(j){return this.divmod(j,"mod",!0).mod},Y.prototype.divRound=function(j){var J=this.divmod(j);if(J.mod.isZero())return J.div;var w=J.div.negative!==0?J.mod.isub(j):J.mod,z=j.ushrn(1),T=j.andln(1),V=w.cmp(z);if(V<0||T===1&&V===0)return J.div;return J.div.negative!==0?J.div.isubn(1):J.div.iaddn(1)},Y.prototype.modn=function(j){P(j<=67108863);var J=67108864%j,w=0;for(var z=this.length-1;z>=0;z--)w=(J*w+(this.words[z]|0))%j;return w},Y.prototype.idivn=function(j){P(j<=67108863);var J=0;for(var w=this.length-1;w>=0;w--){var z=(this.words[w]|0)+J*67108864;this.words[w]=z/j|0,J=z%j}return this.strip()},Y.prototype.divn=function(j){return this.clone().idivn(j)},Y.prototype.egcd=function(j){P(j.negative===0),P(!j.isZero());var J=this,w=j.clone();if(J.negative!==0)J=J.umod(j);else J=J.clone();var z=new Y(1),T=new Y(0),V=new Y(0),C=new Y(1),f=0;while(J.isEven()&&w.isEven())J.iushrn(1),w.iushrn(1),++f;var W=w.clone(),A=J.clone();while(!J.isZero()){for(var L=0,R=1;(J.words[0]&R)===0&&L<26;++L,R<<=1);if(L>0){J.iushrn(L);while(L-- >0){if(z.isOdd()||T.isOdd())z.iadd(W),T.isub(A);z.iushrn(1),T.iushrn(1)}}for(var b=0,l=1;(w.words[0]&l)===0&&b<26;++b,l<<=1);if(b>0){w.iushrn(b);while(b-- >0){if(V.isOdd()||C.isOdd())V.iadd(W),C.isub(A);V.iushrn(1),C.iushrn(1)}}if(J.cmp(w)>=0)J.isub(w),z.isub(V),T.isub(C);else w.isub(J),V.isub(z),C.isub(T)}return{a:V,b:C,gcd:w.iushln(f)}},Y.prototype._invmp=function(j){P(j.negative===0),P(!j.isZero());var J=this,w=j.clone();if(J.negative!==0)J=J.umod(j);else J=J.clone();var z=new Y(1),T=new Y(0),V=w.clone();while(J.cmpn(1)>0&&w.cmpn(1)>0){for(var C=0,f=1;(J.words[0]&f)===0&&C<26;++C,f<<=1);if(C>0){J.iushrn(C);while(C-- >0){if(z.isOdd())z.iadd(V);z.iushrn(1)}}for(var W=0,A=1;(w.words[0]&A)===0&&W<26;++W,A<<=1);if(W>0){w.iushrn(W);while(W-- >0){if(T.isOdd())T.iadd(V);T.iushrn(1)}}if(J.cmp(w)>=0)J.isub(w),z.isub(T);else w.isub(J),T.isub(z)}var L;if(J.cmpn(1)===0)L=z;else L=T;if(L.cmpn(0)<0)L.iadd(j);return L},Y.prototype.gcd=function(j){if(this.isZero())return j.abs();if(j.isZero())return this.abs();var J=this.clone(),w=j.clone();J.negative=0,w.negative=0;for(var z=0;J.isEven()&&w.isEven();z++)J.iushrn(1),w.iushrn(1);do{while(J.isEven())J.iushrn(1);while(w.isEven())w.iushrn(1);var T=J.cmp(w);if(T<0){var V=J;J=w,w=V}else if(T===0||w.cmpn(1)===0)break;J.isub(w)}while(!0);return w.iushln(z)},Y.prototype.invm=function(j){return this.egcd(j).a.umod(j)},Y.prototype.isEven=function(){return(this.words[0]&1)===0},Y.prototype.isOdd=function(){return(this.words[0]&1)===1},Y.prototype.andln=function(j){return this.words[0]&j},Y.prototype.bincn=function(j){P(typeof j==="number");var J=j%26,w=(j-J)/26,z=1<<J;if(this.length<=w)return this._expand(w+1),this.words[w]|=z,this;var T=z;for(var V=w;T!==0&&V<this.length;V++){var C=this.words[V]|0;C+=T,T=C>>>26,C&=67108863,this.words[V]=C}if(T!==0)this.words[V]=T,this.length++;return this},Y.prototype.isZero=function(){return this.length===1&&this.words[0]===0},Y.prototype.cmpn=function(j){var J=j<0;if(this.negative!==0&&!J)return-1;if(this.negative===0&&J)return 1;this.strip();var w;if(this.length>1)w=1;else{if(J)j=-j;P(j<=67108863,"Number is too big");var z=this.words[0]|0;w=z===j?0:z<j?-1:1}if(this.negative!==0)return-w|0;return w},Y.prototype.cmp=function(j){if(this.negative!==0&&j.negative===0)return-1;if(this.negative===0&&j.negative!==0)return 1;var J=this.ucmp(j);if(this.negative!==0)return-J|0;return J},Y.prototype.ucmp=function(j){if(this.length>j.length)return 1;if(this.length<j.length)return-1;var J=0;for(var w=this.length-1;w>=0;w--){var z=this.words[w]|0,T=j.words[w]|0;if(z===T)continue;if(z<T)J=-1;else if(z>T)J=1;break}return J},Y.prototype.gtn=function(j){return this.cmpn(j)===1},Y.prototype.gt=function(j){return this.cmp(j)===1},Y.prototype.gten=function(j){return this.cmpn(j)>=0},Y.prototype.gte=function(j){return this.cmp(j)>=0},Y.prototype.ltn=function(j){return this.cmpn(j)===-1},Y.prototype.lt=function(j){return this.cmp(j)===-1},Y.prototype.lten=function(j){return this.cmpn(j)<=0},Y.prototype.lte=function(j){return this.cmp(j)<=0},Y.prototype.eqn=function(j){return this.cmpn(j)===0},Y.prototype.eq=function(j){return this.cmp(j)===0},Y.red=function(j){return new d(j)},Y.prototype.toRed=function(j){return P(!this.red,"Already a number in reduction context"),P(this.negative===0,"red works only with positives"),j.convertTo(this)._forceRed(j)},Y.prototype.fromRed=function(){return P(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},Y.prototype._forceRed=function(j){return this.red=j,this},Y.prototype.forceRed=function(j){return P(!this.red,"Already a number in reduction context"),this._forceRed(j)},Y.prototype.redAdd=function(j){return P(this.red,"redAdd works only with red numbers"),this.red.add(this,j)},Y.prototype.redIAdd=function(j){return P(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,j)},Y.prototype.redSub=function(j){return P(this.red,"redSub works only with red numbers"),this.red.sub(this,j)},Y.prototype.redISub=function(j){return P(this.red,"redISub works only with red numbers"),this.red.isub(this,j)},Y.prototype.redShl=function(j){return P(this.red,"redShl works only with red numbers"),this.red.shl(this,j)},Y.prototype.redMul=function(j){return P(this.red,"redMul works only with red numbers"),this.red._verify2(this,j),this.red.mul(this,j)},Y.prototype.redIMul=function(j){return P(this.red,"redMul works only with red numbers"),this.red._verify2(this,j),this.red.imul(this,j)},Y.prototype.redSqr=function(){return P(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},Y.prototype.redISqr=function(){return P(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},Y.prototype.redSqrt=function(){return P(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},Y.prototype.redInvm=function(){return P(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},Y.prototype.redNeg=function(){return P(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},Y.prototype.redPow=function(j){return P(this.red&&!j.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,j)};var y={k256:null,p224:null,p192:null,p25519:null};function p(M,j){this.name=M,this.p=new Y(j,16),this.n=this.p.bitLength(),this.k=new Y(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}p.prototype._tmp=function(){var j=new Y(null);return j.words=Array(Math.ceil(this.n/13)),j},p.prototype.ireduce=function(j){var J=j,w;do this.split(J,this.tmp),J=this.imulK(J),J=J.iadd(this.tmp),w=J.bitLength();while(w>this.n);var z=w<this.n?-1:J.ucmp(this.p);if(z===0)J.words[0]=0,J.length=1;else if(z>0)J.isub(this.p);else if(J.strip!==void 0)J.strip();else J._strip();return J},p.prototype.split=function(j,J){j.iushrn(this.n,0,J)},p.prototype.imulK=function(j){return j.imul(this.k)};function m(){p.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}O(m,p),m.prototype.split=function(j,J){var w=4194303,z=Math.min(j.length,9);for(var T=0;T<z;T++)J.words[T]=j.words[T];if(J.length=z,j.length<=9){j.words[0]=0,j.length=1;return}var V=j.words[9];J.words[J.length++]=V&w;for(T=10;T<j.length;T++){var C=j.words[T]|0;j.words[T-10]=(C&w)<<4|V>>>22,V=C}if(V>>>=22,j.words[T-10]=V,V===0&&j.length>10)j.length-=10;else j.length-=9},m.prototype.imulK=function(j){j.words[j.length]=0,j.words[j.length+1]=0,j.length+=2;var J=0;for(var w=0;w<j.length;w++){var z=j.words[w]|0;J+=z*977,j.words[w]=J&67108863,J=z*64+(J/67108864|0)}if(j.words[j.length-1]===0){if(j.length--,j.words[j.length-1]===0)j.length--}return j};function c(){p.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}O(c,p);function $q(){p.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}O($q,p);function e(){p.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}O(e,p),e.prototype.imulK=function(j){var J=0;for(var w=0;w<j.length;w++){var z=(j.words[w]|0)*19+J,T=z&67108863;z>>>=26,j.words[w]=T,J=z}if(J!==0)j.words[j.length++]=J;return j},Y._prime=function(j){if(y[j])return y[j];var J;if(j==="k256")J=new m;else if(j==="p224")J=new c;else if(j==="p192")J=new $q;else if(j==="p25519")J=new e;else throw Error("Unknown prime "+j);return y[j]=J,J};function d(M){if(typeof M==="string"){var j=Y._prime(M);this.m=j.p,this.prime=j}else P(M.gtn(1),"modulus must be greater than 1"),this.m=M,this.prime=null}d.prototype._verify1=function(j){P(j.negative===0,"red works only with positives"),P(j.red,"red works only with red numbers")},d.prototype._verify2=function(j,J){P((j.negative|J.negative)===0,"red works only with positives"),P(j.red&&j.red===J.red,"red works only with red numbers")},d.prototype.imod=function(j){if(this.prime)return this.prime.ireduce(j)._forceRed(this);return j.umod(this.m)._forceRed(this)},d.prototype.neg=function(j){if(j.isZero())return j.clone();return this.m.sub(j)._forceRed(this)},d.prototype.add=function(j,J){this._verify2(j,J);var w=j.add(J);if(w.cmp(this.m)>=0)w.isub(this.m);return w._forceRed(this)},d.prototype.iadd=function(j,J){this._verify2(j,J);var w=j.iadd(J);if(w.cmp(this.m)>=0)w.isub(this.m);return w},d.prototype.sub=function(j,J){this._verify2(j,J);var w=j.sub(J);if(w.cmpn(0)<0)w.iadd(this.m);return w._forceRed(this)},d.prototype.isub=function(j,J){this._verify2(j,J);var w=j.isub(J);if(w.cmpn(0)<0)w.iadd(this.m);return w},d.prototype.shl=function(j,J){return this._verify1(j),this.imod(j.ushln(J))},d.prototype.imul=function(j,J){return this._verify2(j,J),this.imod(j.imul(J))},d.prototype.mul=function(j,J){return this._verify2(j,J),this.imod(j.mul(J))},d.prototype.isqr=function(j){return this.imul(j,j.clone())},d.prototype.sqr=function(j){return this.mul(j,j)},d.prototype.sqrt=function(j){if(j.isZero())return j.clone();var J=this.m.andln(3);if(P(J%2===1),J===3){var w=this.m.add(new Y(1)).iushrn(2);return this.pow(j,w)}var z=this.m.subn(1),T=0;while(!z.isZero()&&z.andln(1)===0)T++,z.iushrn(1);P(!z.isZero());var V=new Y(1).toRed(this),C=V.redNeg(),f=this.m.subn(1).iushrn(1),W=this.m.bitLength();W=new Y(2*W*W).toRed(this);while(this.pow(W,f).cmp(C)!==0)W.redIAdd(C);var A=this.pow(W,z),L=this.pow(j,z.addn(1).iushrn(1)),R=this.pow(j,z),b=T;while(R.cmp(V)!==0){var l=R;for(var B=0;l.cmp(V)!==0;B++)l=l.redSqr();P(B<b);var t=this.pow(A,new Y(1).iushln(b-B-1));L=L.redMul(t),A=t.redSqr(),R=R.redMul(A),b=B}return L},d.prototype.invm=function(j){var J=j._invmp(this.m);if(J.negative!==0)return J.negative=0,this.imod(J).redNeg();else return this.imod(J)},d.prototype.pow=function(j,J){if(J.isZero())return new Y(1).toRed(this);if(J.cmpn(1)===0)return j.clone();var w=4,z=Array(1<<w);z[0]=new Y(1).toRed(this),z[1]=j;for(var T=2;T<z.length;T++)z[T]=this.mul(z[T-1],j);var V=z[0],C=0,f=0,W=J.bitLength()%26;if(W===0)W=26;for(T=J.length-1;T>=0;T--){var A=J.words[T];for(var L=W-1;L>=0;L--){var R=A>>L&1;if(V!==z[0])V=this.sqr(V);if(R===0&&C===0){f=0;continue}if(C<<=1,C|=R,f++,f!==w&&(T!==0||L!==0))continue;V=this.mul(V,z[C]),f=0,C=0}W=26}return V},d.prototype.convertTo=function(j){var J=j.umod(this.m);return J===j?J.clone():J},d.prototype.convertFrom=function(j){var J=j.clone();return J.red=null,J},Y.mont=function(j){return new n(j)};function n(M){if(d.call(this,M),this.shift=this.m.bitLength(),this.shift%26!==0)this.shift+=26-this.shift%26;this.r=new Y(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}O(n,d),n.prototype.convertTo=function(j){return this.imod(j.ushln(this.shift))},n.prototype.convertFrom=function(j){var J=this.imod(j.mul(this.rinv));return J.red=null,J},n.prototype.imul=function(j,J){if(j.isZero()||J.isZero())return j.words[0]=0,j.length=1,j;var w=j.imul(J),z=w.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),T=w.isub(z).iushrn(this.shift),V=T;if(T.cmp(this.m)>=0)V=T.isub(this.m);else if(T.cmpn(0)<0)V=T.iadd(this.m);return V._forceRed(this)},n.prototype.mul=function(j,J){if(j.isZero()||J.isZero())return new Y(0)._forceRed(this);var w=j.mul(J),z=w.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),T=w.isub(z).iushrn(this.shift),V=T;if(T.cmp(this.m)>=0)V=T.isub(this.m);else if(T.cmpn(0)<0)V=T.iadd(this.m);return V._forceRed(this)},n.prototype.invm=function(j){var J=this.imod(j._invmp(this.m).mul(this.r2));return J._forceRed(this)}})(typeof $>"u"||$,q)}),Hg=lq((q,$)=>{var K=Og(),_=Wg();$.exports=function(v){return new O(v)};var P={secp256k1:{name:"secp256k1",byteLength:32},secp224r1:{name:"p224",byteLength:28},prime256v1:{name:"p256",byteLength:32},prime192v1:{name:"p192",byteLength:24},ed25519:{name:"ed25519",byteLength:32},secp384r1:{name:"p384",byteLength:48},secp521r1:{name:"p521",byteLength:66}};P.p224=P.secp224r1,P.p256=P.secp256r1=P.prime256v1,P.p192=P.secp192r1=P.prime192v1,P.p384=P.secp384r1,P.p521=P.secp521r1;function O(H){if(this.curveType=P[H],!this.curveType)this.curveType={name:H};this.curve=new K.ec(this.curveType.name),this.keys=void 0}O.prototype.generateKeys=function(H,v){return this.keys=this.curve.genKeyPair(),this.getPublicKey(H,v)},O.prototype.computeSecret=function(H,v,X){if(v=v||"utf8",!Buffer.isBuffer(H))H=new Buffer(H,v);var Z=this.curve.keyFromPublic(H).getPublic(),k=Z.mul(this.keys.getPrivate()).getX();return Y(k,X,this.curveType.byteLength)},O.prototype.getPublicKey=function(H,v){var X=this.keys.getPublic(v==="compressed",!0);if(v==="hybrid")if(X[X.length-1]%2)X[0]=7;else X[0]=6;return Y(X,H)},O.prototype.getPrivateKey=function(H){return Y(this.keys.getPrivate(),H)},O.prototype.setPublicKey=function(H,v){if(v=v||"utf8",!Buffer.isBuffer(H))H=new Buffer(H,v);return this.keys._importPublic(H),this},O.prototype.setPrivateKey=function(H,v){if(v=v||"utf8",!Buffer.isBuffer(H))H=new Buffer(H,v);var X=new _(H);return X=X.toString(16),this.keys=this.curve.genKeyPair(),this.keys._importPrivate(X),this};function Y(H,v,X){if(!Array.isArray(H))H=H.toArray();var Z=new Buffer(H);if(X&&Z.length<X){var k=new Buffer(X-Z.length);k.fill(0),Z=Buffer.concat([k,Z])}if(!v)return Z;else return Z.toString(v)}}),zg=lq((q,$)=>{var K=($6(),M$(q6)).createECDH;$.exports=K||Hg()}),Jg=lq((q,$)=>{(function(K,_){function P(M,j){if(!M)throw Error(j||"Assertion failed")}function O(M,j){M.super_=j;var J=function(){};J.prototype=j.prototype,M.prototype=new J,M.prototype.constructor=M}function Y(M,j,J){if(Y.isBN(M))return M;if(this.negative=0,this.words=null,this.length=0,this.red=null,M!==null){if(j==="le"||j==="be")J=j,j=10;this._init(M||0,j||10,J||"be")}}if(typeof K==="object")K.exports=Y;else _.BN=Y;Y.BN=Y,Y.wordSize=26;var H;try{if(typeof window<"u"&&typeof window.Buffer<"u")H=window.Buffer;else H=(T8(),M$(w8)).Buffer}catch(M){}Y.isBN=function(j){if(j instanceof Y)return!0;return j!==null&&typeof j==="object"&&j.constructor.wordSize===Y.wordSize&&Array.isArray(j.words)},Y.max=function(j,J){if(j.cmp(J)>0)return j;return J},Y.min=function(j,J){if(j.cmp(J)<0)return j;return J},Y.prototype._init=function(j,J,w){if(typeof j==="number")return this._initNumber(j,J,w);if(typeof j==="object")return this._initArray(j,J,w);if(J==="hex")J=16;P(J===(J|0)&&J>=2&&J<=36),j=j.toString().replace(/\s+/g,"");var z=0;if(j[0]==="-")z++,this.negative=1;if(z<j.length){if(J===16)this._parseHex(j,z,w);else if(this._parseBase(j,J,z),w==="le")this._initArray(this.toArray(),J,w)}},Y.prototype._initNumber=function(j,J,w){if(j<0)this.negative=1,j=-j;if(j<67108864)this.words=[j&67108863],this.length=1;else if(j<4503599627370496)this.words=[j&67108863,j/67108864&67108863],this.length=2;else P(j<9007199254740992),this.words=[j&67108863,j/67108864&67108863,1],this.length=3;if(w!=="le")return;this._initArray(this.toArray(),J,w)},Y.prototype._initArray=function(j,J,w){if(P(typeof j.length==="number"),j.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(j.length/3),this.words=Array(this.length);for(var z=0;z<this.length;z++)this.words[z]=0;var T,V,C=0;if(w==="be"){for(z=j.length-1,T=0;z>=0;z-=3)if(V=j[z]|j[z-1]<<8|j[z-2]<<16,this.words[T]|=V<<C&67108863,this.words[T+1]=V>>>26-C&67108863,C+=24,C>=26)C-=26,T++}else if(w==="le"){for(z=0,T=0;z<j.length;z+=3)if(V=j[z]|j[z+1]<<8|j[z+2]<<16,this.words[T]|=V<<C&67108863,this.words[T+1]=V>>>26-C&67108863,C+=24,C>=26)C-=26,T++}return this.strip()};function v(M,j){var J=M.charCodeAt(j);if(J>=65&&J<=70)return J-55;else if(J>=97&&J<=102)return J-87;else return J-48&15}function X(M,j,J){var w=v(M,J);if(J-1>=j)w|=v(M,J-1)<<4;return w}Y.prototype._parseHex=function(j,J,w){this.length=Math.ceil((j.length-J)/6),this.words=Array(this.length);for(var z=0;z<this.length;z++)this.words[z]=0;var T=0,V=0,C;if(w==="be")for(z=j.length-1;z>=J;z-=2)if(C=X(j,J,z)<<T,this.words[V]|=C&67108863,T>=18)T-=18,V+=1,this.words[V]|=C>>>26;else T+=8;else{var f=j.length-J;for(z=f%2===0?J+1:J;z<j.length;z+=2)if(C=X(j,J,z)<<T,this.words[V]|=C&67108863,T>=18)T-=18,V+=1,this.words[V]|=C>>>26;else T+=8}this.strip()};function Z(M,j,J,w){var z=0,T=Math.min(M.length,J);for(var V=j;V<T;V++){var C=M.charCodeAt(V)-48;if(z*=w,C>=49)z+=C-49+10;else if(C>=17)z+=C-17+10;else z+=C}return z}Y.prototype._parseBase=function(j,J,w){this.words=[0],this.length=1;for(var z=0,T=1;T<=67108863;T*=J)z++;z--,T=T/J|0;var V=j.length-w,C=V%z,f=Math.min(V,V-C)+w,W=0;for(var A=w;A<f;A+=z)if(W=Z(j,A,A+z,J),this.imuln(T),this.words[0]+W<67108864)this.words[0]+=W;else this._iaddn(W);if(C!==0){var L=1;W=Z(j,A,j.length,J);for(A=0;A<C;A++)L*=J;if(this.imuln(L),this.words[0]+W<67108864)this.words[0]+=W;else this._iaddn(W)}this.strip()},Y.prototype.copy=function(j){j.words=Array(this.length);for(var J=0;J<this.length;J++)j.words[J]=this.words[J];j.length=this.length,j.negative=this.negative,j.red=this.red},Y.prototype.clone=function(){var j=new Y(null);return this.copy(j),j},Y.prototype._expand=function(j){while(this.length<j)this.words[this.length++]=0;return this},Y.prototype.strip=function(){while(this.length>1&&this.words[this.length-1]===0)this.length--;return this._normSign()},Y.prototype._normSign=function(){if(this.length===1&&this.words[0]===0)this.negative=0;return this},Y.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var k=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],G=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],S=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64000000,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,24300000,28629151,33554432,39135393,45435424,52521875,60466176];if(Y.prototype.toString=function(j,J){j=j||10,J=J|0||1;var w;if(j===16||j==="hex"){w="";var z=0,T=0;for(var V=0;V<this.length;V++){var C=this.words[V],f=((C<<z|T)&16777215).toString(16);if(T=C>>>24-z&16777215,z+=2,z>=26)z-=26,V--;if(T!==0||V!==this.length-1)w=k[6-f.length]+f+w;else w=f+w}if(T!==0)w=T.toString(16)+w;while(w.length%J!==0)w="0"+w;if(this.negative!==0)w="-"+w;return w}if(j===(j|0)&&j>=2&&j<=36){var W=G[j],A=S[j];w="";var L=this.clone();L.negative=0;while(!L.isZero()){var R=L.modn(A).toString(j);if(L=L.idivn(A),!L.isZero())w=k[W-R.length]+R+w;else w=R+w}if(this.isZero())w="0"+w;while(w.length%J!==0)w="0"+w;if(this.negative!==0)w="-"+w;return w}P(!1,"Base should be between 2 and 36")},Y.prototype.toNumber=function(){var j=this.words[0];if(this.length===2)j+=this.words[1]*67108864;else if(this.length===3&&this.words[2]===1)j+=4503599627370496+this.words[1]*67108864;else if(this.length>2)P(!1,"Number can only safely store up to 53 bits");return this.negative!==0?-j:j},Y.prototype.toJSON=function(){return this.toString(16)},Y.prototype.toBuffer=function(j,J){return P(typeof H<"u"),this.toArrayLike(H,j,J)},Y.prototype.toArray=function(j,J){return this.toArrayLike(Array,j,J)},Y.prototype.toArrayLike=function(j,J,w){var z=this.byteLength(),T=w||Math.max(1,z);P(z<=T,"byte array longer than desired length"),P(T>0,"Requested array length <= 0"),this.strip();var V=J==="le",C=new j(T),f,W,A=this.clone();if(!V){for(W=0;W<T-z;W++)C[W]=0;for(W=0;!A.isZero();W++)f=A.andln(255),A.iushrn(8),C[T-W-1]=f}else{for(W=0;!A.isZero();W++)f=A.andln(255),A.iushrn(8),C[W]=f;for(;W<T;W++)C[W]=0}return C},Math.clz32)Y.prototype._countBits=function(j){return 32-Math.clz32(j)};else Y.prototype._countBits=function(j){var J=j,w=0;if(J>=4096)w+=13,J>>>=13;if(J>=64)w+=7,J>>>=7;if(J>=8)w+=4,J>>>=4;if(J>=2)w+=2,J>>>=2;return w+J};Y.prototype._zeroBits=function(j){if(j===0)return 26;var J=j,w=0;if((J&8191)===0)w+=13,J>>>=13;if((J&127)===0)w+=7,J>>>=7;if((J&15)===0)w+=4,J>>>=4;if((J&3)===0)w+=2,J>>>=2;if((J&1)===0)w++;return w},Y.prototype.bitLength=function(){var j=this.words[this.length-1],J=this._countBits(j);return(this.length-1)*26+J};function N(M){var j=Array(M.bitLength());for(var J=0;J<j.length;J++){var w=J/26|0,z=J%26;j[J]=(M.words[w]&1<<z)>>>z}return j}Y.prototype.zeroBits=function(){if(this.isZero())return 0;var j=0;for(var J=0;J<this.length;J++){var w=this._zeroBits(this.words[J]);if(j+=w,w!==26)break}return j},Y.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},Y.prototype.toTwos=function(j){if(this.negative!==0)return this.abs().inotn(j).iaddn(1);return this.clone()},Y.prototype.fromTwos=function(j){if(this.testn(j-1))return this.notn(j).iaddn(1).ineg();return this.clone()},Y.prototype.isNeg=function(){return this.negative!==0},Y.prototype.neg=function(){return this.clone().ineg()},Y.prototype.ineg=function(){if(!this.isZero())this.negative^=1;return this},Y.prototype.iuor=function(j){while(this.length<j.length)this.words[this.length++]=0;for(var J=0;J<j.length;J++)this.words[J]=this.words[J]|j.words[J];return this.strip()},Y.prototype.ior=function(j){return P((this.negative|j.negative)===0),this.iuor(j)},Y.prototype.or=function(j){if(this.length>j.length)return this.clone().ior(j);return j.clone().ior(this)},Y.prototype.uor=function(j){if(this.length>j.length)return this.clone().iuor(j);return j.clone().iuor(this)},Y.prototype.iuand=function(j){var J;if(this.length>j.length)J=j;else J=this;for(var w=0;w<J.length;w++)this.words[w]=this.words[w]&j.words[w];return this.length=J.length,this.strip()},Y.prototype.iand=function(j){return P((this.negative|j.negative)===0),this.iuand(j)},Y.prototype.and=function(j){if(this.length>j.length)return this.clone().iand(j);return j.clone().iand(this)},Y.prototype.uand=function(j){if(this.length>j.length)return this.clone().iuand(j);return j.clone().iuand(this)},Y.prototype.iuxor=function(j){var J,w;if(this.length>j.length)J=this,w=j;else J=j,w=this;for(var z=0;z<w.length;z++)this.words[z]=J.words[z]^w.words[z];if(this!==J)for(;z<J.length;z++)this.words[z]=J.words[z];return this.length=J.length,this.strip()},Y.prototype.ixor=function(j){return P((this.negative|j.negative)===0),this.iuxor(j)},Y.prototype.xor=function(j){if(this.length>j.length)return this.clone().ixor(j);return j.clone().ixor(this)},Y.prototype.uxor=function(j){if(this.length>j.length)return this.clone().iuxor(j);return j.clone().iuxor(this)},Y.prototype.inotn=function(j){P(typeof j==="number"&&j>=0);var J=Math.ceil(j/26)|0,w=j%26;if(this._expand(J),w>0)J--;for(var z=0;z<J;z++)this.words[z]=~this.words[z]&67108863;if(w>0)this.words[z]=~this.words[z]&67108863>>26-w;return this.strip()},Y.prototype.notn=function(j){return this.clone().inotn(j)},Y.prototype.setn=function(j,J){P(typeof j==="number"&&j>=0);var w=j/26|0,z=j%26;if(this._expand(w+1),J)this.words[w]=this.words[w]|1<<z;else this.words[w]=this.words[w]&~(1<<z);return this.strip()},Y.prototype.iadd=function(j){var J;if(this.negative!==0&&j.negative===0)return this.negative=0,J=this.isub(j),this.negative^=1,this._normSign();else if(this.negative===0&&j.negative!==0)return j.negative=0,J=this.isub(j),j.negative=1,J._normSign();var w,z;if(this.length>j.length)w=this,z=j;else w=j,z=this;var T=0;for(var V=0;V<z.length;V++)J=(w.words[V]|0)+(z.words[V]|0)+T,this.words[V]=J&67108863,T=J>>>26;for(;T!==0&&V<w.length;V++)J=(w.words[V]|0)+T,this.words[V]=J&67108863,T=J>>>26;if(this.length=w.length,T!==0)this.words[this.length]=T,this.length++;else if(w!==this)for(;V<w.length;V++)this.words[V]=w.words[V];return this},Y.prototype.add=function(j){var J;if(j.negative!==0&&this.negative===0)return j.negative=0,J=this.sub(j),j.negative^=1,J;else if(j.negative===0&&this.negative!==0)return this.negative=0,J=j.sub(this),this.negative=1,J;if(this.length>j.length)return this.clone().iadd(j);return j.clone().iadd(this)},Y.prototype.isub=function(j){if(j.negative!==0){j.negative=0;var J=this.iadd(j);return j.negative=1,J._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(j),this.negative=1,this._normSign();var w=this.cmp(j);if(w===0)return this.negative=0,this.length=1,this.words[0]=0,this;var z,T;if(w>0)z=this,T=j;else z=j,T=this;var V=0;for(var C=0;C<T.length;C++)J=(z.words[C]|0)-(T.words[C]|0)+V,V=J>>26,this.words[C]=J&67108863;for(;V!==0&&C<z.length;C++)J=(z.words[C]|0)+V,V=J>>26,this.words[C]=J&67108863;if(V===0&&C<z.length&&z!==this)for(;C<z.length;C++)this.words[C]=z.words[C];if(this.length=Math.max(this.length,C),z!==this)this.negative=1;return this.strip()},Y.prototype.sub=function(j){return this.clone().isub(j)};function E(M,j,J){J.negative=j.negative^M.negative;var w=M.length+j.length|0;J.length=w,w=w-1|0;var z=M.words[0]|0,T=j.words[0]|0,V=z*T,C=V&67108863,f=V/67108864|0;J.words[0]=C;for(var W=1;W<w;W++){var A=f>>>26,L=f&67108863,R=Math.min(W,j.length-1);for(var b=Math.max(0,W-M.length+1);b<=R;b++){var l=W-b|0;z=M.words[l]|0,T=j.words[b]|0,V=z*T+L,A+=V/67108864|0,L=V&67108863}J.words[W]=L|0,f=A|0}if(f!==0)J.words[W]=f|0;else J.length--;return J.strip()}var h=function(j,J,w){var z=j.words,T=J.words,V=w.words,C=0,f,W,A,L=z[0]|0,R=L&8191,b=L>>>13,l=z[1]|0,B=l&8191,t=l>>>13,Wq=z[2]|0,r=Wq&8191,i=Wq>>>13,gq=z[3]|0,jq=gq&8191,Oq=gq>>>13,Q=z[4]|0,o=Q&8191,U=Q>>>13,yq=z[5]|0,qq=yq&8191,s=yq>>>13,a=z[6]|0,F=a&8191,_q=a>>>13,Tq=z[7]|0,Yq=Tq&8191,Jq=Tq>>>13,z$=z[8]|0,Hq=z$&8191,Xq=z$>>>13,N$=z[9]|0,vq=N$&8191,kq=N$>>>13,o$=T[0]|0,fq=o$&8191,Rq=o$>>>13,X8=T[1]|0,hq=X8&8191,Dq=X8>>>13,h8=T[2]|0,Sq=h8&8191,Cq=h8>>>13,D8=T[3]|0,Nq=D8&8191,Gq=D8>>>13,I8=T[4]|0,Iq=I8&8191,Zq=I8>>>13,f8=T[5]|0,x=f8&8191,u=f8>>>13,pq=T[6]|0,Kq=pq&8191,Pq=pq>>>13,E$=T[7]|0,wq=E$&8191,Aq=E$>>>13,A8=T[8]|0,Lq=A8&8191,Eq=A8>>>13,k8=T[9]|0,Vq=k8&8191,Mq=k8>>>13;w.negative=j.negative^J.negative,w.length=19,f=Math.imul(R,fq),W=Math.imul(R,Rq),W=W+Math.imul(b,fq)|0,A=Math.imul(b,Rq);var m$=(C+f|0)+((W&8191)<<13)|0;C=(A+(W>>>13)|0)+(m$>>>26)|0,m$&=67108863,f=Math.imul(B,fq),W=Math.imul(B,Rq),W=W+Math.imul(t,fq)|0,A=Math.imul(t,Rq),f=f+Math.imul(R,hq)|0,W=W+Math.imul(R,Dq)|0,W=W+Math.imul(b,hq)|0,A=A+Math.imul(b,Dq)|0;var J$=(C+f|0)+((W&8191)<<13)|0;C=(A+(W>>>13)|0)+(J$>>>26)|0,J$&=67108863,f=Math.imul(r,fq),W=Math.imul(r,Rq),W=W+Math.imul(i,fq)|0,A=Math.imul(i,Rq),f=f+Math.imul(B,hq)|0,W=W+Math.imul(B,Dq)|0,W=W+Math.imul(t,hq)|0,A=A+Math.imul(t,Dq)|0,f=f+Math.imul(R,Sq)|0,W=W+Math.imul(R,Cq)|0,W=W+Math.imul(b,Sq)|0,A=A+Math.imul(b,Cq)|0;var O$=(C+f|0)+((W&8191)<<13)|0;C=(A+(W>>>13)|0)+(O$>>>26)|0,O$&=67108863,f=Math.imul(jq,fq),W=Math.imul(jq,Rq),W=W+Math.imul(Oq,fq)|0,A=Math.imul(Oq,Rq),f=f+Math.imul(r,hq)|0,W=W+Math.imul(r,Dq)|0,W=W+Math.imul(i,hq)|0,A=A+Math.imul(i,Dq)|0,f=f+Math.imul(B,Sq)|0,W=W+Math.imul(B,Cq)|0,W=W+Math.imul(t,Sq)|0,A=A+Math.imul(t,Cq)|0,f=f+Math.imul(R,Nq)|0,W=W+Math.imul(R,Gq)|0,W=W+Math.imul(b,Nq)|0,A=A+Math.imul(b,Gq)|0;var h$=(C+f|0)+((W&8191)<<13)|0;C=(A+(W>>>13)|0)+(h$>>>26)|0,h$&=67108863,f=Math.imul(o,fq),W=Math.imul(o,Rq),W=W+Math.imul(U,fq)|0,A=Math.imul(U,Rq),f=f+Math.imul(jq,hq)|0,W=W+Math.imul(jq,Dq)|0,W=W+Math.imul(Oq,hq)|0,A=A+Math.imul(Oq,Dq)|0,f=f+Math.imul(r,Sq)|0,W=W+Math.imul(r,Cq)|0,W=W+Math.imul(i,Sq)|0,A=A+Math.imul(i,Cq)|0,f=f+Math.imul(B,Nq)|0,W=W+Math.imul(B,Gq)|0,W=W+Math.imul(t,Nq)|0,A=A+Math.imul(t,Gq)|0,f=f+Math.imul(R,Iq)|0,W=W+Math.imul(R,Zq)|0,W=W+Math.imul(b,Iq)|0,A=A+Math.imul(b,Zq)|0;var F$=(C+f|0)+((W&8191)<<13)|0;C=(A+(W>>>13)|0)+(F$>>>26)|0,F$&=67108863,f=Math.imul(qq,fq),W=Math.imul(qq,Rq),W=W+Math.imul(s,fq)|0,A=Math.imul(s,Rq),f=f+Math.imul(o,hq)|0,W=W+Math.imul(o,Dq)|0,W=W+Math.imul(U,hq)|0,A=A+Math.imul(U,Dq)|0,f=f+Math.imul(jq,Sq)|0,W=W+Math.imul(jq,Cq)|0,W=W+Math.imul(Oq,Sq)|0,A=A+Math.imul(Oq,Cq)|0,f=f+Math.imul(r,Nq)|0,W=W+Math.imul(r,Gq)|0,W=W+Math.imul(i,Nq)|0,A=A+Math.imul(i,Gq)|0,f=f+Math.imul(B,Iq)|0,W=W+Math.imul(B,Zq)|0,W=W+Math.imul(t,Iq)|0,A=A+Math.imul(t,Zq)|0,f=f+Math.imul(R,x)|0,W=W+Math.imul(R,u)|0,W=W+Math.imul(b,x)|0,A=A+Math.imul(b,u)|0;var t$=(C+f|0)+((W&8191)<<13)|0;C=(A+(W>>>13)|0)+(t$>>>26)|0,t$&=67108863,f=Math.imul(F,fq),W=Math.imul(F,Rq),W=W+Math.imul(_q,fq)|0,A=Math.imul(_q,Rq),f=f+Math.imul(qq,hq)|0,W=W+Math.imul(qq,Dq)|0,W=W+Math.imul(s,hq)|0,A=A+Math.imul(s,Dq)|0,f=f+Math.imul(o,Sq)|0,W=W+Math.imul(o,Cq)|0,W=W+Math.imul(U,Sq)|0,A=A+Math.imul(U,Cq)|0,f=f+Math.imul(jq,Nq)|0,W=W+Math.imul(jq,Gq)|0,W=W+Math.imul(Oq,Nq)|0,A=A+Math.imul(Oq,Gq)|0,f=f+Math.imul(r,Iq)|0,W=W+Math.imul(r,Zq)|0,W=W+Math.imul(i,Iq)|0,A=A+Math.imul(i,Zq)|0,f=f+Math.imul(B,x)|0,W=W+Math.imul(B,u)|0,W=W+Math.imul(t,x)|0,A=A+Math.imul(t,u)|0,f=f+Math.imul(R,Kq)|0,W=W+Math.imul(R,Pq)|0,W=W+Math.imul(b,Kq)|0,A=A+Math.imul(b,Pq)|0;var Q$=(C+f|0)+((W&8191)<<13)|0;C=(A+(W>>>13)|0)+(Q$>>>26)|0,Q$&=67108863,f=Math.imul(Yq,fq),W=Math.imul(Yq,Rq),W=W+Math.imul(Jq,fq)|0,A=Math.imul(Jq,Rq),f=f+Math.imul(F,hq)|0,W=W+Math.imul(F,Dq)|0,W=W+Math.imul(_q,hq)|0,A=A+Math.imul(_q,Dq)|0,f=f+Math.imul(qq,Sq)|0,W=W+Math.imul(qq,Cq)|0,W=W+Math.imul(s,Sq)|0,A=A+Math.imul(s,Cq)|0,f=f+Math.imul(o,Nq)|0,W=W+Math.imul(o,Gq)|0,W=W+Math.imul(U,Nq)|0,A=A+Math.imul(U,Gq)|0,f=f+Math.imul(jq,Iq)|0,W=W+Math.imul(jq,Zq)|0,W=W+Math.imul(Oq,Iq)|0,A=A+Math.imul(Oq,Zq)|0,f=f+Math.imul(r,x)|0,W=W+Math.imul(r,u)|0,W=W+Math.imul(i,x)|0,A=A+Math.imul(i,u)|0,f=f+Math.imul(B,Kq)|0,W=W+Math.imul(B,Pq)|0,W=W+Math.imul(t,Kq)|0,A=A+Math.imul(t,Pq)|0,f=f+Math.imul(R,wq)|0,W=W+Math.imul(R,Aq)|0,W=W+Math.imul(b,wq)|0,A=A+Math.imul(b,Aq)|0;var a$=(C+f|0)+((W&8191)<<13)|0;C=(A+(W>>>13)|0)+(a$>>>26)|0,a$&=67108863,f=Math.imul(Hq,fq),W=Math.imul(Hq,Rq),W=W+Math.imul(Xq,fq)|0,A=Math.imul(Xq,Rq),f=f+Math.imul(Yq,hq)|0,W=W+Math.imul(Yq,Dq)|0,W=W+Math.imul(Jq,hq)|0,A=A+Math.imul(Jq,Dq)|0,f=f+Math.imul(F,Sq)|0,W=W+Math.imul(F,Cq)|0,W=W+Math.imul(_q,Sq)|0,A=A+Math.imul(_q,Cq)|0,f=f+Math.imul(qq,Nq)|0,W=W+Math.imul(qq,Gq)|0,W=W+Math.imul(s,Nq)|0,A=A+Math.imul(s,Gq)|0,f=f+Math.imul(o,Iq)|0,W=W+Math.imul(o,Zq)|0,W=W+Math.imul(U,Iq)|0,A=A+Math.imul(U,Zq)|0,f=f+Math.imul(jq,x)|0,W=W+Math.imul(jq,u)|0,W=W+Math.imul(Oq,x)|0,A=A+Math.imul(Oq,u)|0,f=f+Math.imul(r,Kq)|0,W=W+Math.imul(r,Pq)|0,W=W+Math.imul(i,Kq)|0,A=A+Math.imul(i,Pq)|0,f=f+Math.imul(B,wq)|0,W=W+Math.imul(B,Aq)|0,W=W+Math.imul(t,wq)|0,A=A+Math.imul(t,Aq)|0,f=f+Math.imul(R,Lq)|0,W=W+Math.imul(R,Eq)|0,W=W+Math.imul(b,Lq)|0,A=A+Math.imul(b,Eq)|0;var e$=(C+f|0)+((W&8191)<<13)|0;C=(A+(W>>>13)|0)+(e$>>>26)|0,e$&=67108863,f=Math.imul(vq,fq),W=Math.imul(vq,Rq),W=W+Math.imul(kq,fq)|0,A=Math.imul(kq,Rq),f=f+Math.imul(Hq,hq)|0,W=W+Math.imul(Hq,Dq)|0,W=W+Math.imul(Xq,hq)|0,A=A+Math.imul(Xq,Dq)|0,f=f+Math.imul(Yq,Sq)|0,W=W+Math.imul(Yq,Cq)|0,W=W+Math.imul(Jq,Sq)|0,A=A+Math.imul(Jq,Cq)|0,f=f+Math.imul(F,Nq)|0,W=W+Math.imul(F,Gq)|0,W=W+Math.imul(_q,Nq)|0,A=A+Math.imul(_q,Gq)|0,f=f+Math.imul(qq,Iq)|0,W=W+Math.imul(qq,Zq)|0,W=W+Math.imul(s,Iq)|0,A=A+Math.imul(s,Zq)|0,f=f+Math.imul(o,x)|0,W=W+Math.imul(o,u)|0,W=W+Math.imul(U,x)|0,A=A+Math.imul(U,u)|0,f=f+Math.imul(jq,Kq)|0,W=W+Math.imul(jq,Pq)|0,W=W+Math.imul(Oq,Kq)|0,A=A+Math.imul(Oq,Pq)|0,f=f+Math.imul(r,wq)|0,W=W+Math.imul(r,Aq)|0,W=W+Math.imul(i,wq)|0,A=A+Math.imul(i,Aq)|0,f=f+Math.imul(B,Lq)|0,W=W+Math.imul(B,Eq)|0,W=W+Math.imul(t,Lq)|0,A=A+Math.imul(t,Eq)|0,f=f+Math.imul(R,Vq)|0,W=W+Math.imul(R,Mq)|0,W=W+Math.imul(b,Vq)|0,A=A+Math.imul(b,Mq)|0;var s$=(C+f|0)+((W&8191)<<13)|0;C=(A+(W>>>13)|0)+(s$>>>26)|0,s$&=67108863,f=Math.imul(vq,hq),W=Math.imul(vq,Dq),W=W+Math.imul(kq,hq)|0,A=Math.imul(kq,Dq),f=f+Math.imul(Hq,Sq)|0,W=W+Math.imul(Hq,Cq)|0,W=W+Math.imul(Xq,Sq)|0,A=A+Math.imul(Xq,Cq)|0,f=f+Math.imul(Yq,Nq)|0,W=W+Math.imul(Yq,Gq)|0,W=W+Math.imul(Jq,Nq)|0,A=A+Math.imul(Jq,Gq)|0,f=f+Math.imul(F,Iq)|0,W=W+Math.imul(F,Zq)|0,W=W+Math.imul(_q,Iq)|0,A=A+Math.imul(_q,Zq)|0,f=f+Math.imul(qq,x)|0,W=W+Math.imul(qq,u)|0,W=W+Math.imul(s,x)|0,A=A+Math.imul(s,u)|0,f=f+Math.imul(o,Kq)|0,W=W+Math.imul(o,Pq)|0,W=W+Math.imul(U,Kq)|0,A=A+Math.imul(U,Pq)|0,f=f+Math.imul(jq,wq)|0,W=W+Math.imul(jq,Aq)|0,W=W+Math.imul(Oq,wq)|0,A=A+Math.imul(Oq,Aq)|0,f=f+Math.imul(r,Lq)|0,W=W+Math.imul(r,Eq)|0,W=W+Math.imul(i,Lq)|0,A=A+Math.imul(i,Eq)|0,f=f+Math.imul(B,Vq)|0,W=W+Math.imul(B,Mq)|0,W=W+Math.imul(t,Vq)|0,A=A+Math.imul(t,Mq)|0;var q8=(C+f|0)+((W&8191)<<13)|0;C=(A+(W>>>13)|0)+(q8>>>26)|0,q8&=67108863,f=Math.imul(vq,Sq),W=Math.imul(vq,Cq),W=W+Math.imul(kq,Sq)|0,A=Math.imul(kq,Cq),f=f+Math.imul(Hq,Nq)|0,W=W+Math.imul(Hq,Gq)|0,W=W+Math.imul(Xq,Nq)|0,A=A+Math.imul(Xq,Gq)|0,f=f+Math.imul(Yq,Iq)|0,W=W+Math.imul(Yq,Zq)|0,W=W+Math.imul(Jq,Iq)|0,A=A+Math.imul(Jq,Zq)|0,f=f+Math.imul(F,x)|0,W=W+Math.imul(F,u)|0,W=W+Math.imul(_q,x)|0,A=A+Math.imul(_q,u)|0,f=f+Math.imul(qq,Kq)|0,W=W+Math.imul(qq,Pq)|0,W=W+Math.imul(s,Kq)|0,A=A+Math.imul(s,Pq)|0,f=f+Math.imul(o,wq)|0,W=W+Math.imul(o,Aq)|0,W=W+Math.imul(U,wq)|0,A=A+Math.imul(U,Aq)|0,f=f+Math.imul(jq,Lq)|0,W=W+Math.imul(jq,Eq)|0,W=W+Math.imul(Oq,Lq)|0,A=A+Math.imul(Oq,Eq)|0,f=f+Math.imul(r,Vq)|0,W=W+Math.imul(r,Mq)|0,W=W+Math.imul(i,Vq)|0,A=A+Math.imul(i,Mq)|0;var $8=(C+f|0)+((W&8191)<<13)|0;C=(A+(W>>>13)|0)+($8>>>26)|0,$8&=67108863,f=Math.imul(vq,Nq),W=Math.imul(vq,Gq),W=W+Math.imul(kq,Nq)|0,A=Math.imul(kq,Gq),f=f+Math.imul(Hq,Iq)|0,W=W+Math.imul(Hq,Zq)|0,W=W+Math.imul(Xq,Iq)|0,A=A+Math.imul(Xq,Zq)|0,f=f+Math.imul(Yq,x)|0,W=W+Math.imul(Yq,u)|0,W=W+Math.imul(Jq,x)|0,A=A+Math.imul(Jq,u)|0,f=f+Math.imul(F,Kq)|0,W=W+Math.imul(F,Pq)|0,W=W+Math.imul(_q,Kq)|0,A=A+Math.imul(_q,Pq)|0,f=f+Math.imul(qq,wq)|0,W=W+Math.imul(qq,Aq)|0,W=W+Math.imul(s,wq)|0,A=A+Math.imul(s,Aq)|0,f=f+Math.imul(o,Lq)|0,W=W+Math.imul(o,Eq)|0,W=W+Math.imul(U,Lq)|0,A=A+Math.imul(U,Eq)|0,f=f+Math.imul(jq,Vq)|0,W=W+Math.imul(jq,Mq)|0,W=W+Math.imul(Oq,Vq)|0,A=A+Math.imul(Oq,Mq)|0;var K8=(C+f|0)+((W&8191)<<13)|0;C=(A+(W>>>13)|0)+(K8>>>26)|0,K8&=67108863,f=Math.imul(vq,Iq),W=Math.imul(vq,Zq),W=W+Math.imul(kq,Iq)|0,A=Math.imul(kq,Zq),f=f+Math.imul(Hq,x)|0,W=W+Math.imul(Hq,u)|0,W=W+Math.imul(Xq,x)|0,A=A+Math.imul(Xq,u)|0,f=f+Math.imul(Yq,Kq)|0,W=W+Math.imul(Yq,Pq)|0,W=W+Math.imul(Jq,Kq)|0,A=A+Math.imul(Jq,Pq)|0,f=f+Math.imul(F,wq)|0,W=W+Math.imul(F,Aq)|0,W=W+Math.imul(_q,wq)|0,A=A+Math.imul(_q,Aq)|0,f=f+Math.imul(qq,Lq)|0,W=W+Math.imul(qq,Eq)|0,W=W+Math.imul(s,Lq)|0,A=A+Math.imul(s,Eq)|0,f=f+Math.imul(o,Vq)|0,W=W+Math.imul(o,Mq)|0,W=W+Math.imul(U,Vq)|0,A=A+Math.imul(U,Mq)|0;var _8=(C+f|0)+((W&8191)<<13)|0;C=(A+(W>>>13)|0)+(_8>>>26)|0,_8&=67108863,f=Math.imul(vq,x),W=Math.imul(vq,u),W=W+Math.imul(kq,x)|0,A=Math.imul(kq,u),f=f+Math.imul(Hq,Kq)|0,W=W+Math.imul(Hq,Pq)|0,W=W+Math.imul(Xq,Kq)|0,A=A+Math.imul(Xq,Pq)|0,f=f+Math.imul(Yq,wq)|0,W=W+Math.imul(Yq,Aq)|0,W=W+Math.imul(Jq,wq)|0,A=A+Math.imul(Jq,Aq)|0,f=f+Math.imul(F,Lq)|0,W=W+Math.imul(F,Eq)|0,W=W+Math.imul(_q,Lq)|0,A=A+Math.imul(_q,Eq)|0,f=f+Math.imul(qq,Vq)|0,W=W+Math.imul(qq,Mq)|0,W=W+Math.imul(s,Vq)|0,A=A+Math.imul(s,Mq)|0;var P8=(C+f|0)+((W&8191)<<13)|0;C=(A+(W>>>13)|0)+(P8>>>26)|0,P8&=67108863,f=Math.imul(vq,Kq),W=Math.imul(vq,Pq),W=W+Math.imul(kq,Kq)|0,A=Math.imul(kq,Pq),f=f+Math.imul(Hq,wq)|0,W=W+Math.imul(Hq,Aq)|0,W=W+Math.imul(Xq,wq)|0,A=A+Math.imul(Xq,Aq)|0,f=f+Math.imul(Yq,Lq)|0,W=W+Math.imul(Yq,Eq)|0,W=W+Math.imul(Jq,Lq)|0,A=A+Math.imul(Jq,Eq)|0,f=f+Math.imul(F,Vq)|0,W=W+Math.imul(F,Mq)|0,W=W+Math.imul(_q,Vq)|0,A=A+Math.imul(_q,Mq)|0;var Y8=(C+f|0)+((W&8191)<<13)|0;C=(A+(W>>>13)|0)+(Y8>>>26)|0,Y8&=67108863,f=Math.imul(vq,wq),W=Math.imul(vq,Aq),W=W+Math.imul(kq,wq)|0,A=Math.imul(kq,Aq),f=f+Math.imul(Hq,Lq)|0,W=W+Math.imul(Hq,Eq)|0,W=W+Math.imul(Xq,Lq)|0,A=A+Math.imul(Xq,Eq)|0,f=f+Math.imul(Yq,Vq)|0,W=W+Math.imul(Yq,Mq)|0,W=W+Math.imul(Jq,Vq)|0,A=A+Math.imul(Jq,Mq)|0;var j8=(C+f|0)+((W&8191)<<13)|0;C=(A+(W>>>13)|0)+(j8>>>26)|0,j8&=67108863,f=Math.imul(vq,Lq),W=Math.imul(vq,Eq),W=W+Math.imul(kq,Lq)|0,A=Math.imul(kq,Eq),f=f+Math.imul(Hq,Vq)|0,W=W+Math.imul(Hq,Mq)|0,W=W+Math.imul(Xq,Vq)|0,A=A+Math.imul(Xq,Mq)|0;var O8=(C+f|0)+((W&8191)<<13)|0;C=(A+(W>>>13)|0)+(O8>>>26)|0,O8&=67108863,f=Math.imul(vq,Vq),W=Math.imul(vq,Mq),W=W+Math.imul(kq,Vq)|0,A=Math.imul(kq,Mq);var W8=(C+f|0)+((W&8191)<<13)|0;if(C=(A+(W>>>13)|0)+(W8>>>26)|0,W8&=67108863,V[0]=m$,V[1]=J$,V[2]=O$,V[3]=h$,V[4]=F$,V[5]=t$,V[6]=Q$,V[7]=a$,V[8]=e$,V[9]=s$,V[10]=q8,V[11]=$8,V[12]=K8,V[13]=_8,V[14]=P8,V[15]=Y8,V[16]=j8,V[17]=O8,V[18]=W8,C!==0)V[19]=C,w.length++;return w};if(!Math.imul)h=E;function D(M,j,J){J.negative=j.negative^M.negative,J.length=M.length+j.length;var w=0,z=0;for(var T=0;T<J.length-1;T++){var V=z;z=0;var C=w&67108863,f=Math.min(T,j.length-1);for(var W=Math.max(0,T-M.length+1);W<=f;W++){var A=T-W,L=M.words[A]|0,R=j.words[W]|0,b=L*R,l=b&67108863;V=V+(b/67108864|0)|0,l=l+C|0,C=l&67108863,V=V+(l>>>26)|0,z+=V>>>26,V&=67108863}J.words[T]=C,w=V,V=z}if(w!==0)J.words[T]=w;else J.length--;return J.strip()}function I(M,j,J){var w=new g;return w.mulp(M,j,J)}Y.prototype.mulTo=function(j,J){var w,z=this.length+j.length;if(this.length===10&&j.length===10)w=h(this,j,J);else if(z<63)w=E(this,j,J);else if(z<1024)w=D(this,j,J);else w=I(this,j,J);return w};function g(M,j){this.x=M,this.y=j}g.prototype.makeRBT=function(j){var J=Array(j),w=Y.prototype._countBits(j)-1;for(var z=0;z<j;z++)J[z]=this.revBin(z,w,j);return J},g.prototype.revBin=function(j,J,w){if(j===0||j===w-1)return j;var z=0;for(var T=0;T<J;T++)z|=(j&1)<<J-T-1,j>>=1;return z},g.prototype.permute=function(j,J,w,z,T,V){for(var C=0;C<V;C++)z[C]=J[j[C]],T[C]=w[j[C]]},g.prototype.transform=function(j,J,w,z,T,V){this.permute(V,j,J,w,z,T);for(var C=1;C<T;C<<=1){var f=C<<1,W=Math.cos(2*Math.PI/f),A=Math.sin(2*Math.PI/f);for(var L=0;L<T;L+=f){var R=W,b=A;for(var l=0;l<C;l++){var B=w[L+l],t=z[L+l],Wq=w[L+l+C],r=z[L+l+C],i=R*Wq-b*r;if(r=R*r+b*Wq,Wq=i,w[L+l]=B+Wq,z[L+l]=t+r,w[L+l+C]=B-Wq,z[L+l+C]=t-r,l!==f)i=W*R-A*b,b=W*b+A*R,R=i}}}},g.prototype.guessLen13b=function(j,J){var w=Math.max(J,j)|1,z=w&1,T=0;for(w=w/2|0;w;w=w>>>1)T++;return 1<<T+1+z},g.prototype.conjugate=function(j,J,w){if(w<=1)return;for(var z=0;z<w/2;z++){var T=j[z];j[z]=j[w-z-1],j[w-z-1]=T,T=J[z],J[z]=-J[w-z-1],J[w-z-1]=-T}},g.prototype.normalize13b=function(j,J){var w=0;for(var z=0;z<J/2;z++){var T=Math.round(j[2*z+1]/J)*8192+Math.round(j[2*z]/J)+w;if(j[z]=T&67108863,T<67108864)w=0;else w=T/67108864|0}return j},g.prototype.convert13b=function(j,J,w,z){var T=0;for(var V=0;V<J;V++)T=T+(j[V]|0),w[2*V]=T&8191,T=T>>>13,w[2*V+1]=T&8191,T=T>>>13;for(V=2*J;V<z;++V)w[V]=0;P(T===0),P((T&-8192)===0)},g.prototype.stub=function(j){var J=Array(j);for(var w=0;w<j;w++)J[w]=0;return J},g.prototype.mulp=function(j,J,w){var z=2*this.guessLen13b(j.length,J.length),T=this.makeRBT(z),V=this.stub(z),C=Array(z),f=Array(z),W=Array(z),A=Array(z),L=Array(z),R=Array(z),b=w.words;b.length=z,this.convert13b(j.words,j.length,C,z),this.convert13b(J.words,J.length,A,z),this.transform(C,V,f,W,z,T),this.transform(A,V,L,R,z,T);for(var l=0;l<z;l++){var B=f[l]*L[l]-W[l]*R[l];W[l]=f[l]*R[l]+W[l]*L[l],f[l]=B}return this.conjugate(f,W,z),this.transform(f,W,b,V,z,T),this.conjugate(b,V,z),this.normalize13b(b,z),w.negative=j.negative^J.negative,w.length=j.length+J.length,w.strip()},Y.prototype.mul=function(j){var J=new Y(null);return J.words=Array(this.length+j.length),this.mulTo(j,J)},Y.prototype.mulf=function(j){var J=new Y(null);return J.words=Array(this.length+j.length),I(this,j,J)},Y.prototype.imul=function(j){return this.clone().mulTo(j,this)},Y.prototype.imuln=function(j){P(typeof j==="number"),P(j<67108864);var J=0;for(var w=0;w<this.length;w++){var z=(this.words[w]|0)*j,T=(z&67108863)+(J&67108863);J>>=26,J+=z/67108864|0,J+=T>>>26,this.words[w]=T&67108863}if(J!==0)this.words[w]=J,this.length++;return this.length=j===0?1:this.length,this},Y.prototype.muln=function(j){return this.clone().imuln(j)},Y.prototype.sqr=function(){return this.mul(this)},Y.prototype.isqr=function(){return this.imul(this.clone())},Y.prototype.pow=function(j){var J=N(j);if(J.length===0)return new Y(1);var w=this;for(var z=0;z<J.length;z++,w=w.sqr())if(J[z]!==0)break;if(++z<J.length)for(var T=w.sqr();z<J.length;z++,T=T.sqr()){if(J[z]===0)continue;w=w.mul(T)}return w},Y.prototype.iushln=function(j){P(typeof j==="number"&&j>=0);var J=j%26,w=(j-J)/26,z=67108863>>>26-J<<26-J,T;if(J!==0){var V=0;for(T=0;T<this.length;T++){var C=this.words[T]&z,f=(this.words[T]|0)-C<<J;this.words[T]=f|V,V=C>>>26-J}if(V)this.words[T]=V,this.length++}if(w!==0){for(T=this.length-1;T>=0;T--)this.words[T+w]=this.words[T];for(T=0;T<w;T++)this.words[T]=0;this.length+=w}return this.strip()},Y.prototype.ishln=function(j){return P(this.negative===0),this.iushln(j)},Y.prototype.iushrn=function(j,J,w){P(typeof j==="number"&&j>=0);var z;if(J)z=(J-J%26)/26;else z=0;var T=j%26,V=Math.min((j-T)/26,this.length),C=67108863^67108863>>>T<<T,f=w;if(z-=V,z=Math.max(0,z),f){for(var W=0;W<V;W++)f.words[W]=this.words[W];f.length=V}if(V===0);else if(this.length>V){this.length-=V;for(W=0;W<this.length;W++)this.words[W]=this.words[W+V]}else this.words[0]=0,this.length=1;var A=0;for(W=this.length-1;W>=0&&(A!==0||W>=z);W--){var L=this.words[W]|0;this.words[W]=A<<26-T|L>>>T,A=L&C}if(f&&A!==0)f.words[f.length++]=A;if(this.length===0)this.words[0]=0,this.length=1;return this.strip()},Y.prototype.ishrn=function(j,J,w){return P(this.negative===0),this.iushrn(j,J,w)},Y.prototype.shln=function(j){return this.clone().ishln(j)},Y.prototype.ushln=function(j){return this.clone().iushln(j)},Y.prototype.shrn=function(j){return this.clone().ishrn(j)},Y.prototype.ushrn=function(j){return this.clone().iushrn(j)},Y.prototype.testn=function(j){P(typeof j==="number"&&j>=0);var J=j%26,w=(j-J)/26,z=1<<J;if(this.length<=w)return!1;var T=this.words[w];return!!(T&z)},Y.prototype.imaskn=function(j){P(typeof j==="number"&&j>=0);var J=j%26,w=(j-J)/26;if(P(this.negative===0,"imaskn works only with positive numbers"),this.length<=w)return this;if(J!==0)w++;if(this.length=Math.min(w,this.length),J!==0){var z=67108863^67108863>>>J<<J;this.words[this.length-1]&=z}return this.strip()},Y.prototype.maskn=function(j){return this.clone().imaskn(j)},Y.prototype.iaddn=function(j){if(P(typeof j==="number"),P(j<67108864),j<0)return this.isubn(-j);if(this.negative!==0){if(this.length===1&&(this.words[0]|0)<j)return this.words[0]=j-(this.words[0]|0),this.negative=0,this;return this.negative=0,this.isubn(j),this.negative=1,this}return this._iaddn(j)},Y.prototype._iaddn=function(j){this.words[0]+=j;for(var J=0;J<this.length&&this.words[J]>=67108864;J++)if(this.words[J]-=67108864,J===this.length-1)this.words[J+1]=1;else this.words[J+1]++;return this.length=Math.max(this.length,J+1),this},Y.prototype.isubn=function(j){if(P(typeof j==="number"),P(j<67108864),j<0)return this.iaddn(-j);if(this.negative!==0)return this.negative=0,this.iaddn(j),this.negative=1,this;if(this.words[0]-=j,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var J=0;J<this.length&&this.words[J]<0;J++)this.words[J]+=67108864,this.words[J+1]-=1;return this.strip()},Y.prototype.addn=function(j){return this.clone().iaddn(j)},Y.prototype.subn=function(j){return this.clone().isubn(j)},Y.prototype.iabs=function(){return this.negative=0,this},Y.prototype.abs=function(){return this.clone().iabs()},Y.prototype._ishlnsubmul=function(j,J,w){var z=j.length+w,T;this._expand(z);var V,C=0;for(T=0;T<j.length;T++){V=(this.words[T+w]|0)+C;var f=(j.words[T]|0)*J;V-=f&67108863,C=(V>>26)-(f/67108864|0),this.words[T+w]=V&67108863}for(;T<this.length-w;T++)V=(this.words[T+w]|0)+C,C=V>>26,this.words[T+w]=V&67108863;if(C===0)return this.strip();P(C===-1),C=0;for(T=0;T<this.length;T++)V=-(this.words[T]|0)+C,C=V>>26,this.words[T]=V&67108863;return this.negative=1,this.strip()},Y.prototype._wordDiv=function(j,J){var w=this.length-j.length,z=this.clone(),T=j,V=T.words[T.length-1]|0,C=this._countBits(V);if(w=26-C,w!==0)T=T.ushln(w),z.iushln(w),V=T.words[T.length-1]|0;var f=z.length-T.length,W;if(J!=="mod"){W=new Y(null),W.length=f+1,W.words=Array(W.length);for(var A=0;A<W.length;A++)W.words[A]=0}var L=z.clone()._ishlnsubmul(T,1,f);if(L.negative===0){if(z=L,W)W.words[f]=1}for(var R=f-1;R>=0;R--){var b=(z.words[T.length+R]|0)*67108864+(z.words[T.length+R-1]|0);b=Math.min(b/V|0,67108863),z._ishlnsubmul(T,b,R);while(z.negative!==0)if(b--,z.negative=0,z._ishlnsubmul(T,1,R),!z.isZero())z.negative^=1;if(W)W.words[R]=b}if(W)W.strip();if(z.strip(),J!=="div"&&w!==0)z.iushrn(w);return{div:W||null,mod:z}},Y.prototype.divmod=function(j,J,w){if(P(!j.isZero()),this.isZero())return{div:new Y(0),mod:new Y(0)};var z,T,V;if(this.negative!==0&&j.negative===0){if(V=this.neg().divmod(j,J),J!=="mod")z=V.div.neg();if(J!=="div"){if(T=V.mod.neg(),w&&T.negative!==0)T.iadd(j)}return{div:z,mod:T}}if(this.negative===0&&j.negative!==0){if(V=this.divmod(j.neg(),J),J!=="mod")z=V.div.neg();return{div:z,mod:V.mod}}if((this.negative&j.negative)!==0){if(V=this.neg().divmod(j.neg(),J),J!=="div"){if(T=V.mod.neg(),w&&T.negative!==0)T.isub(j)}return{div:V.div,mod:T}}if(j.length>this.length||this.cmp(j)<0)return{div:new Y(0),mod:this};if(j.length===1){if(J==="div")return{div:this.divn(j.words[0]),mod:null};if(J==="mod")return{div:null,mod:new Y(this.modn(j.words[0]))};return{div:this.divn(j.words[0]),mod:new Y(this.modn(j.words[0]))}}return this._wordDiv(j,J)},Y.prototype.div=function(j){return this.divmod(j,"div",!1).div},Y.prototype.mod=function(j){return this.divmod(j,"mod",!1).mod},Y.prototype.umod=function(j){return this.divmod(j,"mod",!0).mod},Y.prototype.divRound=function(j){var J=this.divmod(j);if(J.mod.isZero())return J.div;var w=J.div.negative!==0?J.mod.isub(j):J.mod,z=j.ushrn(1),T=j.andln(1),V=w.cmp(z);if(V<0||T===1&&V===0)return J.div;return J.div.negative!==0?J.div.isubn(1):J.div.iaddn(1)},Y.prototype.modn=function(j){P(j<=67108863);var J=67108864%j,w=0;for(var z=this.length-1;z>=0;z--)w=(J*w+(this.words[z]|0))%j;return w},Y.prototype.idivn=function(j){P(j<=67108863);var J=0;for(var w=this.length-1;w>=0;w--){var z=(this.words[w]|0)+J*67108864;this.words[w]=z/j|0,J=z%j}return this.strip()},Y.prototype.divn=function(j){return this.clone().idivn(j)},Y.prototype.egcd=function(j){P(j.negative===0),P(!j.isZero());var J=this,w=j.clone();if(J.negative!==0)J=J.umod(j);else J=J.clone();var z=new Y(1),T=new Y(0),V=new Y(0),C=new Y(1),f=0;while(J.isEven()&&w.isEven())J.iushrn(1),w.iushrn(1),++f;var W=w.clone(),A=J.clone();while(!J.isZero()){for(var L=0,R=1;(J.words[0]&R)===0&&L<26;++L,R<<=1);if(L>0){J.iushrn(L);while(L-- >0){if(z.isOdd()||T.isOdd())z.iadd(W),T.isub(A);z.iushrn(1),T.iushrn(1)}}for(var b=0,l=1;(w.words[0]&l)===0&&b<26;++b,l<<=1);if(b>0){w.iushrn(b);while(b-- >0){if(V.isOdd()||C.isOdd())V.iadd(W),C.isub(A);V.iushrn(1),C.iushrn(1)}}if(J.cmp(w)>=0)J.isub(w),z.isub(V),T.isub(C);else w.isub(J),V.isub(z),C.isub(T)}return{a:V,b:C,gcd:w.iushln(f)}},Y.prototype._invmp=function(j){P(j.negative===0),P(!j.isZero());var J=this,w=j.clone();if(J.negative!==0)J=J.umod(j);else J=J.clone();var z=new Y(1),T=new Y(0),V=w.clone();while(J.cmpn(1)>0&&w.cmpn(1)>0){for(var C=0,f=1;(J.words[0]&f)===0&&C<26;++C,f<<=1);if(C>0){J.iushrn(C);while(C-- >0){if(z.isOdd())z.iadd(V);z.iushrn(1)}}for(var W=0,A=1;(w.words[0]&A)===0&&W<26;++W,A<<=1);if(W>0){w.iushrn(W);while(W-- >0){if(T.isOdd())T.iadd(V);T.iushrn(1)}}if(J.cmp(w)>=0)J.isub(w),z.isub(T);else w.isub(J),T.isub(z)}var L;if(J.cmpn(1)===0)L=z;else L=T;if(L.cmpn(0)<0)L.iadd(j);return L},Y.prototype.gcd=function(j){if(this.isZero())return j.abs();if(j.isZero())return this.abs();var J=this.clone(),w=j.clone();J.negative=0,w.negative=0;for(var z=0;J.isEven()&&w.isEven();z++)J.iushrn(1),w.iushrn(1);do{while(J.isEven())J.iushrn(1);while(w.isEven())w.iushrn(1);var T=J.cmp(w);if(T<0){var V=J;J=w,w=V}else if(T===0||w.cmpn(1)===0)break;J.isub(w)}while(!0);return w.iushln(z)},Y.prototype.invm=function(j){return this.egcd(j).a.umod(j)},Y.prototype.isEven=function(){return(this.words[0]&1)===0},Y.prototype.isOdd=function(){return(this.words[0]&1)===1},Y.prototype.andln=function(j){return this.words[0]&j},Y.prototype.bincn=function(j){P(typeof j==="number");var J=j%26,w=(j-J)/26,z=1<<J;if(this.length<=w)return this._expand(w+1),this.words[w]|=z,this;var T=z;for(var V=w;T!==0&&V<this.length;V++){var C=this.words[V]|0;C+=T,T=C>>>26,C&=67108863,this.words[V]=C}if(T!==0)this.words[V]=T,this.length++;return this},Y.prototype.isZero=function(){return this.length===1&&this.words[0]===0},Y.prototype.cmpn=function(j){var J=j<0;if(this.negative!==0&&!J)return-1;if(this.negative===0&&J)return 1;this.strip();var w;if(this.length>1)w=1;else{if(J)j=-j;P(j<=67108863,"Number is too big");var z=this.words[0]|0;w=z===j?0:z<j?-1:1}if(this.negative!==0)return-w|0;return w},Y.prototype.cmp=function(j){if(this.negative!==0&&j.negative===0)return-1;if(this.negative===0&&j.negative!==0)return 1;var J=this.ucmp(j);if(this.negative!==0)return-J|0;return J},Y.prototype.ucmp=function(j){if(this.length>j.length)return 1;if(this.length<j.length)return-1;var J=0;for(var w=this.length-1;w>=0;w--){var z=this.words[w]|0,T=j.words[w]|0;if(z===T)continue;if(z<T)J=-1;else if(z>T)J=1;break}return J},Y.prototype.gtn=function(j){return this.cmpn(j)===1},Y.prototype.gt=function(j){return this.cmp(j)===1},Y.prototype.gten=function(j){return this.cmpn(j)>=0},Y.prototype.gte=function(j){return this.cmp(j)>=0},Y.prototype.ltn=function(j){return this.cmpn(j)===-1},Y.prototype.lt=function(j){return this.cmp(j)===-1},Y.prototype.lten=function(j){return this.cmpn(j)<=0},Y.prototype.lte=function(j){return this.cmp(j)<=0},Y.prototype.eqn=function(j){return this.cmpn(j)===0},Y.prototype.eq=function(j){return this.cmp(j)===0},Y.red=function(j){return new d(j)},Y.prototype.toRed=function(j){return P(!this.red,"Already a number in reduction context"),P(this.negative===0,"red works only with positives"),j.convertTo(this)._forceRed(j)},Y.prototype.fromRed=function(){return P(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},Y.prototype._forceRed=function(j){return this.red=j,this},Y.prototype.forceRed=function(j){return P(!this.red,"Already a number in reduction context"),this._forceRed(j)},Y.prototype.redAdd=function(j){return P(this.red,"redAdd works only with red numbers"),this.red.add(this,j)},Y.prototype.redIAdd=function(j){return P(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,j)},Y.prototype.redSub=function(j){return P(this.red,"redSub works only with red numbers"),this.red.sub(this,j)},Y.prototype.redISub=function(j){return P(this.red,"redISub works only with red numbers"),this.red.isub(this,j)},Y.prototype.redShl=function(j){return P(this.red,"redShl works only with red numbers"),this.red.shl(this,j)},Y.prototype.redMul=function(j){return P(this.red,"redMul works only with red numbers"),this.red._verify2(this,j),this.red.mul(this,j)},Y.prototype.redIMul=function(j){return P(this.red,"redMul works only with red numbers"),this.red._verify2(this,j),this.red.imul(this,j)},Y.prototype.redSqr=function(){return P(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},Y.prototype.redISqr=function(){return P(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},Y.prototype.redSqrt=function(){return P(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},Y.prototype.redInvm=function(){return P(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},Y.prototype.redNeg=function(){return P(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},Y.prototype.redPow=function(j){return P(this.red&&!j.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,j)};var y={k256:null,p224:null,p192:null,p25519:null};function p(M,j){this.name=M,this.p=new Y(j,16),this.n=this.p.bitLength(),this.k=new Y(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}p.prototype._tmp=function(){var j=new Y(null);return j.words=Array(Math.ceil(this.n/13)),j},p.prototype.ireduce=function(j){var J=j,w;do this.split(J,this.tmp),J=this.imulK(J),J=J.iadd(this.tmp),w=J.bitLength();while(w>this.n);var z=w<this.n?-1:J.ucmp(this.p);if(z===0)J.words[0]=0,J.length=1;else if(z>0)J.isub(this.p);else if(J.strip!==void 0)J.strip();else J._strip();return J},p.prototype.split=function(j,J){j.iushrn(this.n,0,J)},p.prototype.imulK=function(j){return j.imul(this.k)};function m(){p.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}O(m,p),m.prototype.split=function(j,J){var w=4194303,z=Math.min(j.length,9);for(var T=0;T<z;T++)J.words[T]=j.words[T];if(J.length=z,j.length<=9){j.words[0]=0,j.length=1;return}var V=j.words[9];J.words[J.length++]=V&w;for(T=10;T<j.length;T++){var C=j.words[T]|0;j.words[T-10]=(C&w)<<4|V>>>22,V=C}if(V>>>=22,j.words[T-10]=V,V===0&&j.length>10)j.length-=10;else j.length-=9},m.prototype.imulK=function(j){j.words[j.length]=0,j.words[j.length+1]=0,j.length+=2;var J=0;for(var w=0;w<j.length;w++){var z=j.words[w]|0;J+=z*977,j.words[w]=J&67108863,J=z*64+(J/67108864|0)}if(j.words[j.length-1]===0){if(j.length--,j.words[j.length-1]===0)j.length--}return j};function c(){p.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}O(c,p);function $q(){p.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}O($q,p);function e(){p.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}O(e,p),e.prototype.imulK=function(j){var J=0;for(var w=0;w<j.length;w++){var z=(j.words[w]|0)*19+J,T=z&67108863;z>>>=26,j.words[w]=T,J=z}if(J!==0)j.words[j.length++]=J;return j},Y._prime=function(j){if(y[j])return y[j];var J;if(j==="k256")J=new m;else if(j==="p224")J=new c;else if(j==="p192")J=new $q;else if(j==="p25519")J=new e;else throw Error("Unknown prime "+j);return y[j]=J,J};function d(M){if(typeof M==="string"){var j=Y._prime(M);this.m=j.p,this.prime=j}else P(M.gtn(1),"modulus must be greater than 1"),this.m=M,this.prime=null}d.prototype._verify1=function(j){P(j.negative===0,"red works only with positives"),P(j.red,"red works only with red numbers")},d.prototype._verify2=function(j,J){P((j.negative|J.negative)===0,"red works only with positives"),P(j.red&&j.red===J.red,"red works only with red numbers")},d.prototype.imod=function(j){if(this.prime)return this.prime.ireduce(j)._forceRed(this);return j.umod(this.m)._forceRed(this)},d.prototype.neg=function(j){if(j.isZero())return j.clone();return this.m.sub(j)._forceRed(this)},d.prototype.add=function(j,J){this._verify2(j,J);var w=j.add(J);if(w.cmp(this.m)>=0)w.isub(this.m);return w._forceRed(this)},d.prototype.iadd=function(j,J){this._verify2(j,J);var w=j.iadd(J);if(w.cmp(this.m)>=0)w.isub(this.m);return w},d.prototype.sub=function(j,J){this._verify2(j,J);var w=j.sub(J);if(w.cmpn(0)<0)w.iadd(this.m);return w._forceRed(this)},d.prototype.isub=function(j,J){this._verify2(j,J);var w=j.isub(J);if(w.cmpn(0)<0)w.iadd(this.m);return w},d.prototype.shl=function(j,J){return this._verify1(j),this.imod(j.ushln(J))},d.prototype.imul=function(j,J){return this._verify2(j,J),this.imod(j.imul(J))},d.prototype.mul=function(j,J){return this._verify2(j,J),this.imod(j.mul(J))},d.prototype.isqr=function(j){return this.imul(j,j.clone())},d.prototype.sqr=function(j){return this.mul(j,j)},d.prototype.sqrt=function(j){if(j.isZero())return j.clone();var J=this.m.andln(3);if(P(J%2===1),J===3){var w=this.m.add(new Y(1)).iushrn(2);return this.pow(j,w)}var z=this.m.subn(1),T=0;while(!z.isZero()&&z.andln(1)===0)T++,z.iushrn(1);P(!z.isZero());var V=new Y(1).toRed(this),C=V.redNeg(),f=this.m.subn(1).iushrn(1),W=this.m.bitLength();W=new Y(2*W*W).toRed(this);while(this.pow(W,f).cmp(C)!==0)W.redIAdd(C);var A=this.pow(W,z),L=this.pow(j,z.addn(1).iushrn(1)),R=this.pow(j,z),b=T;while(R.cmp(V)!==0){var l=R;for(var B=0;l.cmp(V)!==0;B++)l=l.redSqr();P(B<b);var t=this.pow(A,new Y(1).iushln(b-B-1));L=L.redMul(t),A=t.redSqr(),R=R.redMul(A),b=B}return L},d.prototype.invm=function(j){var J=j._invmp(this.m);if(J.negative!==0)return J.negative=0,this.imod(J).redNeg();else return this.imod(J)},d.prototype.pow=function(j,J){if(J.isZero())return new Y(1).toRed(this);if(J.cmpn(1)===0)return j.clone();var w=4,z=Array(1<<w);z[0]=new Y(1).toRed(this),z[1]=j;for(var T=2;T<z.length;T++)z[T]=this.mul(z[T-1],j);var V=z[0],C=0,f=0,W=J.bitLength()%26;if(W===0)W=26;for(T=J.length-1;T>=0;T--){var A=J.words[T];for(var L=W-1;L>=0;L--){var R=A>>L&1;if(V!==z[0])V=this.sqr(V);if(R===0&&C===0){f=0;continue}if(C<<=1,C|=R,f++,f!==w&&(T!==0||L!==0))continue;V=this.mul(V,z[C]),f=0,C=0}W=26}return V},d.prototype.convertTo=function(j){var J=j.umod(this.m);return J===j?J.clone():J},d.prototype.convertFrom=function(j){var J=j.clone();return J.red=null,J},Y.mont=function(j){return new n(j)};function n(M){if(d.call(this,M),this.shift=this.m.bitLength(),this.shift%26!==0)this.shift+=26-this.shift%26;this.r=new Y(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}O(n,d),n.prototype.convertTo=function(j){return this.imod(j.ushln(this.shift))},n.prototype.convertFrom=function(j){var J=this.imod(j.mul(this.rinv));return J.red=null,J},n.prototype.imul=function(j,J){if(j.isZero()||J.isZero())return j.words[0]=0,j.length=1,j;var w=j.imul(J),z=w.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),T=w.isub(z).iushrn(this.shift),V=T;if(T.cmp(this.m)>=0)V=T.isub(this.m);else if(T.cmpn(0)<0)V=T.iadd(this.m);return V._forceRed(this)},n.prototype.mul=function(j,J){if(j.isZero()||J.isZero())return new Y(0)._forceRed(this);var w=j.mul(J),z=w.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),T=w.isub(z).iushrn(this.shift),V=T;if(T.cmp(this.m)>=0)V=T.isub(this.m);else if(T.cmpn(0)<0)V=T.iadd(this.m);return V._forceRed(this)},n.prototype.invm=function(j){var J=this.imod(j._invmp(this.m).mul(this.r2));return J._forceRed(this)}})(typeof $>"u"||$,q)}),vg=lq((q)=>{var $=FP(),K=W6(),_=q;_.define=function(Y,H){return new P(Y,H)};function P(O,Y){this.name=O,this.body=Y,this.decoders={},this.encoders={}}P.prototype._createNamed=function(Y){var H;try{H=(()=>{throw new Error("Cannot require module "+"vm");})().runInThisContext("(function "+this.name+`(entity) {
  this._initNamed(entity);
})`)}catch(v){H=function(X){this._initNamed(X)}}return K(H,Y),H.prototype._initNamed=function(X){Y.call(this,X)},new H(this)},P.prototype._getDecoder=function(Y){if(Y=Y||"der",!this.decoders.hasOwnProperty(Y))this.decoders[Y]=this._createNamed($.decoders[Y]);return this.decoders[Y]},P.prototype.decode=function(Y,H,v){return this._getDecoder(H).decode(Y,v)},P.prototype._getEncoder=function(Y){if(Y=Y||"der",!this.encoders.hasOwnProperty(Y))this.encoders[Y]=this._createNamed($.encoders[Y]);return this.encoders[Y]},P.prototype.encode=function(Y,H,v){return this._getEncoder(H).encode(Y,v)}}),wg=lq((q)=>{var $=W6();function K(P){this._reporterState={obj:null,path:[],options:P||{},errors:[]}}q.Reporter=K,K.prototype.isError=function(O){return O instanceof _},K.prototype.save=function(){var O=this._reporterState;return{obj:O.obj,pathLen:O.path.length}},K.prototype.restore=function(O){var Y=this._reporterState;Y.obj=O.obj,Y.path=Y.path.slice(0,O.pathLen)},K.prototype.enterKey=function(O){return this._reporterState.path.push(O)},K.prototype.exitKey=function(O){var Y=this._reporterState;Y.path=Y.path.slice(0,O-1)},K.prototype.leaveKey=function(O,Y,H){var v=this._reporterState;if(this.exitKey(O),v.obj!==null)v.obj[Y]=H},K.prototype.path=function(){return this._reporterState.path.join("/")},K.prototype.enterObject=function(){var O=this._reporterState,Y=O.obj;return O.obj={},Y},K.prototype.leaveObject=function(O){var Y=this._reporterState,H=Y.obj;return Y.obj=O,H},K.prototype.error=function(O){var Y,H=this._reporterState,v=O instanceof _;if(v)Y=O;else Y=new _(H.path.map(function(X){return"["+JSON.stringify(X)+"]"}).join(""),O.message||O,O.stack);if(!H.options.partial)throw Y;if(!v)H.errors.push(Y);return Y},K.prototype.wrapResult=function(O){var Y=this._reporterState;if(!Y.options.partial)return O;return{result:this.isError(O)?null:O,errors:Y.errors}};function _(P,O){this.path=P,this.rethrow(O)}$(_,Error),_.prototype.rethrow=function(O){if(this.message=O+" at: "+(this.path||"(shallow)"),Error.captureStackTrace)Error.captureStackTrace(this,_);if(!this.stack)try{throw Error(this.message)}catch(Y){this.stack=Y.stack}return this}}),ff=lq((q)=>{var $=W6(),K=iP().Reporter,_=(T8(),M$(w8)).Buffer;function P(Y,H){if(K.call(this,H),!_.isBuffer(Y)){this.error("Input not Buffer");return}this.base=Y,this.offset=0,this.length=Y.length}$(P,K),q.DecoderBuffer=P,P.prototype.save=function(){return{offset:this.offset,reporter:K.prototype.save.call(this)}},P.prototype.restore=function(H){var v=new P(this.base);return v.offset=H.offset,v.length=this.offset,this.offset=H.offset,K.prototype.restore.call(this,H.reporter),v},P.prototype.isEmpty=function(){return this.offset===this.length},P.prototype.readUInt8=function(H){if(this.offset+1<=this.length)return this.base.readUInt8(this.offset++,!0);else return this.error(H||"DecoderBuffer overrun")},P.prototype.skip=function(H,v){if(!(this.offset+H<=this.length))return this.error(v||"DecoderBuffer overrun");var X=new P(this.base);return X._reporterState=this._reporterState,X.offset=this.offset,X.length=this.offset+H,this.offset+=H,X},P.prototype.raw=function(H){return this.base.slice(H?H.offset:this.offset,this.length)};function O(Y,H){if(Array.isArray(Y))this.length=0,this.value=Y.map(function(v){if(!(v instanceof O))v=new O(v,H);return this.length+=v.length,v},this);else if(typeof Y==="number"){if(!(0<=Y&&Y<=255))return H.error("non-byte EncoderBuffer value");this.value=Y,this.length=1}else if(typeof Y==="string")this.value=Y,this.length=_.byteLength(Y);else if(_.isBuffer(Y))this.value=Y,this.length=Y.length;else return H.error("Unsupported type: "+typeof Y)}q.EncoderBuffer=O,O.prototype.join=function(H,v){if(!H)H=new _(this.length);if(!v)v=0;if(this.length===0)return H;if(Array.isArray(this.value))this.value.forEach(function(X){X.join(H,v),v+=X.length});else{if(typeof this.value==="number")H[v]=this.value;else if(typeof this.value==="string")H.write(this.value,v);else if(_.isBuffer(this.value))this.value.copy(H,v);v+=this.length}return H}}),Tg=lq((q,$)=>{var K=iP().Reporter,_=iP().EncoderBuffer,P=iP().DecoderBuffer,O=P_(),Y=["seq","seqof","set","setof","objid","bool","gentime","utctime","null_","enum","int","objDesc","bitstr","bmpstr","charstr","genstr","graphstr","ia5str","iso646str","numstr","octstr","printstr","t61str","unistr","utf8str","videostr"],H=["key","obj","use","optional","explicit","implicit","def","choice","any","contains"].concat(Y),v=["_peekTag","_decodeTag","_use","_decodeStr","_decodeObjid","_decodeTime","_decodeNull","_decodeInt","_decodeBool","_decodeList","_encodeComposite","_encodeStr","_encodeObjid","_encodeTime","_encodeNull","_encodeInt","_encodeBool"];function X(k,G){var S={};if(this._baseState=S,S.enc=k,S.parent=G||null,S.children=null,S.tag=null,S.args=null,S.reverseArgs=null,S.choice=null,S.optional=!1,S.any=!1,S.obj=!1,S.use=null,S.useDecoder=null,S.key=null,S.default=null,S.explicit=null,S.implicit=null,S.contains=null,!S.parent)S.children=[],this._wrap()}$.exports=X;var Z=["enc","parent","children","tag","args","reverseArgs","choice","optional","any","obj","use","alteredUse","key","default","explicit","implicit","contains"];X.prototype.clone=function(){var G=this._baseState,S={};Z.forEach(function(E){S[E]=G[E]});var N=new this.constructor(S.parent);return N._baseState=S,N},X.prototype._wrap=function(){var G=this._baseState;H.forEach(function(S){this[S]=function(){var E=new this.constructor(this);return G.children.push(E),E[S].apply(E,arguments)}},this)},X.prototype._init=function(G){var S=this._baseState;O(S.parent===null),G.call(this),S.children=S.children.filter(function(N){return N._baseState.parent===this},this),O.equal(S.children.length,1,"Root node can have only one child")},X.prototype._useArgs=function(G){var S=this._baseState,N=G.filter(function(E){return E instanceof this.constructor},this);if(G=G.filter(function(E){return!(E instanceof this.constructor)},this),N.length!==0)O(S.children===null),S.children=N,N.forEach(function(E){E._baseState.parent=this},this);if(G.length!==0)O(S.args===null),S.args=G,S.reverseArgs=G.map(function(E){if(typeof E!=="object"||E.constructor!==Object)return E;var h={};return Object.keys(E).forEach(function(D){if(D==(D|0))D|=0;var I=E[D];h[I]=D}),h})},v.forEach(function(k){X.prototype[k]=function(){var S=this._baseState;throw Error(k+" not implemented for encoding: "+S.enc)}}),Y.forEach(function(k){X.prototype[k]=function(){var S=this._baseState,N=Array.prototype.slice.call(arguments);return O(S.tag===null),S.tag=k,this._useArgs(N),this}}),X.prototype.use=function(G){O(G);var S=this._baseState;return O(S.use===null),S.use=G,this},X.prototype.optional=function(){var G=this._baseState;return G.optional=!0,this},X.prototype.def=function(G){var S=this._baseState;return O(S.default===null),S.default=G,S.optional=!0,this},X.prototype.explicit=function(G){var S=this._baseState;return O(S.explicit===null&&S.implicit===null),S.explicit=G,this},X.prototype.implicit=function(G){var S=this._baseState;return O(S.explicit===null&&S.implicit===null),S.implicit=G,this},X.prototype.obj=function(){var G=this._baseState,S=Array.prototype.slice.call(arguments);if(G.obj=!0,S.length!==0)this._useArgs(S);return this},X.prototype.key=function(G){var S=this._baseState;return O(S.key===null),S.key=G,this},X.prototype.any=function(){var G=this._baseState;return G.any=!0,this},X.prototype.choice=function(G){var S=this._baseState;return O(S.choice===null),S.choice=G,this._useArgs(Object.keys(G).map(function(N){return G[N]})),this},X.prototype.contains=function(G){var S=this._baseState;return O(S.use===null),S.contains=G,this},X.prototype._decode=function(G,S){var N=this._baseState;if(N.parent===null)return G.wrapResult(N.children[0]._decode(G,S));var E=N.default,h=!0,D=null;if(N.key!==null)D=G.enterKey(N.key);if(N.optional){var I=null;if(N.explicit!==null)I=N.explicit;else if(N.implicit!==null)I=N.implicit;else if(N.tag!==null)I=N.tag;if(I===null&&!N.any){var g=G.save();try{if(N.choice===null)this._decodeGeneric(N.tag,G,S);else this._decodeChoice(G,S);h=!0}catch(e){h=!1}G.restore(g)}else if(h=this._peekTag(G,I,N.any),G.isError(h))return h}var y;if(N.obj&&h)y=G.enterObject();if(h){if(N.explicit!==null){var p=this._decodeTag(G,N.explicit);if(G.isError(p))return p;G=p}var m=G.offset;if(N.use===null&&N.choice===null){if(N.any)var g=G.save();var c=this._decodeTag(G,N.implicit!==null?N.implicit:N.tag,N.any);if(G.isError(c))return c;if(N.any)E=G.raw(g);else G=c}if(S&&S.track&&N.tag!==null)S.track(G.path(),m,G.length,"tagged");if(S&&S.track&&N.tag!==null)S.track(G.path(),G.offset,G.length,"content");if(N.any)E=E;else if(N.choice===null)E=this._decodeGeneric(N.tag,G,S);else E=this._decodeChoice(G,S);if(G.isError(E))return E;if(!N.any&&N.choice===null&&N.children!==null)N.children.forEach(function(d){d._decode(G,S)});if(N.contains&&(N.tag==="octstr"||N.tag==="bitstr")){var $q=new P(E);E=this._getUse(N.contains,G._reporterState.obj)._decode($q,S)}}if(N.obj&&h)E=G.leaveObject(y);if(N.key!==null&&(E!==null||h===!0))G.leaveKey(D,N.key,E);else if(D!==null)G.exitKey(D);return E},X.prototype._decodeGeneric=function(G,S,N){var E=this._baseState;if(G==="seq"||G==="set")return null;if(G==="seqof"||G==="setof")return this._decodeList(S,G,E.args[0],N);else if(/str$/.test(G))return this._decodeStr(S,G,N);else if(G==="objid"&&E.args)return this._decodeObjid(S,E.args[0],E.args[1],N);else if(G==="objid")return this._decodeObjid(S,null,null,N);else if(G==="gentime"||G==="utctime")return this._decodeTime(S,G,N);else if(G==="null_")return this._decodeNull(S,N);else if(G==="bool")return this._decodeBool(S,N);else if(G==="objDesc")return this._decodeStr(S,G,N);else if(G==="int"||G==="enum")return this._decodeInt(S,E.args&&E.args[0],N);if(E.use!==null)return this._getUse(E.use,S._reporterState.obj)._decode(S,N);else return S.error("unknown tag: "+G)},X.prototype._getUse=function(G,S){var N=this._baseState;if(N.useDecoder=this._use(G,S),O(N.useDecoder._baseState.parent===null),N.useDecoder=N.useDecoder._baseState.children[0],N.implicit!==N.useDecoder._baseState.implicit)N.useDecoder=N.useDecoder.clone(),N.useDecoder._baseState.implicit=N.implicit;return N.useDecoder},X.prototype._decodeChoice=function(G,S){var N=this._baseState,E=null,h=!1;if(Object.keys(N.choice).some(function(D){var I=G.save(),g=N.choice[D];try{var y=g._decode(G,S);if(G.isError(y))return!1;E={type:D,value:y},h=!0}catch(p){return G.restore(I),!1}return!0},this),!h)return G.error("Choice not matched");return E},X.prototype._createEncoderBuffer=function(G){return new _(G,this.reporter)},X.prototype._encode=function(G,S,N){var E=this._baseState;if(E.default!==null&&E.default===G)return;var h=this._encodeValue(G,S,N);if(h===void 0)return;if(this._skipDefault(h,S,N))return;return h},X.prototype._encodeValue=function(G,S,N){var E=this._baseState;if(E.parent===null)return E.children[0]._encode(G,S||new K);var g=null;if(this.reporter=S,E.optional&&G===void 0)if(E.default!==null)G=E.default;else return;var h=null,D=!1;if(E.any)g=this._createEncoderBuffer(G);else if(E.choice)g=this._encodeChoice(G,S);else if(E.contains)h=this._getUse(E.contains,N)._encode(G,S),D=!0;else if(E.children)h=E.children.map(function(m){if(m._baseState.tag==="null_")return m._encode(null,S,G);if(m._baseState.key===null)return S.error("Child should have a key");var c=S.enterKey(m._baseState.key);if(typeof G!=="object")return S.error("Child expected, but input is not object");var $q=m._encode(G[m._baseState.key],S,G);return S.leaveKey(c),$q},this).filter(function(m){return m}),h=this._createEncoderBuffer(h);else if(E.tag==="seqof"||E.tag==="setof"){if(!(E.args&&E.args.length===1))return S.error("Too many args for : "+E.tag);if(!Array.isArray(G))return S.error("seqof/setof, but data is not Array");var I=this.clone();I._baseState.implicit=null,h=this._createEncoderBuffer(G.map(function(m){var c=this._baseState;return this._getUse(c.args[0],G)._encode(m,S)},I))}else if(E.use!==null)g=this._getUse(E.use,N)._encode(G,S);else h=this._encodePrimitive(E.tag,G),D=!0;var g;if(!E.any&&E.choice===null){var y=E.implicit!==null?E.implicit:E.tag,p=E.implicit===null?"universal":"context";if(y===null){if(E.use===null)S.error("Tag could be omitted only for .use()")}else if(E.use===null)g=this._encodeComposite(y,D,p,h)}if(E.explicit!==null)g=this._encodeComposite(E.explicit,!1,"context",g);return g},X.prototype._encodeChoice=function(G,S){var N=this._baseState,E=N.choice[G.type];if(!E)O(!1,G.type+" not found in "+JSON.stringify(Object.keys(N.choice)));return E._encode(G.value,S)},X.prototype._encodePrimitive=function(G,S){var N=this._baseState;if(/str$/.test(G))return this._encodeStr(S,G);else if(G==="objid"&&N.args)return this._encodeObjid(S,N.reverseArgs[0],N.args[1]);else if(G==="objid")return this._encodeObjid(S,null,null);else if(G==="gentime"||G==="utctime")return this._encodeTime(S,G);else if(G==="null_")return this._encodeNull();else if(G==="int"||G==="enum")return this._encodeInt(S,N.args&&N.reverseArgs[0]);else if(G==="bool")return this._encodeBool(S);else if(G==="objDesc")return this._encodeStr(S,G);else throw Error("Unsupported tag: "+G)},X.prototype._isNumstr=function(G){return/^[0-9 ]*$/.test(G)},X.prototype._isPrintstr=function(G){return/^[A-Za-z0-9 '\(\)\+,\-\.\/:=\?]*$/.test(G)}}),iP=lq((q)=>{var $=q;$.Reporter=wg().Reporter,$.DecoderBuffer=ff().DecoderBuffer,$.EncoderBuffer=ff().EncoderBuffer,$.Node=Tg()}),Xg=lq((q)=>{var $=Ef();q.tagClass={0:"universal",1:"application",2:"context",3:"private"},q.tagClassByName=$._reverse(q.tagClass),q.tag={0:"end",1:"bool",2:"int",3:"bitstr",4:"octstr",5:"null_",6:"objid",7:"objDesc",8:"external",9:"real",10:"enum",11:"embed",12:"utf8str",13:"relativeOid",16:"seq",17:"set",18:"numstr",19:"printstr",20:"t61str",21:"videostr",22:"ia5str",23:"utctime",24:"gentime",25:"graphstr",26:"iso646str",27:"genstr",28:"unistr",29:"charstr",30:"bmpstr"},q.tagByName=$._reverse(q.tag)}),Ef=lq((q)=>{var $=q;$._reverse=function(_){var P={};return Object.keys(_).forEach(function(O){if((O|0)==O)O=O|0;var Y=_[O];P[Y]=O}),P},$.der=Xg()}),Rf=lq((q,$)=>{var K=W6(),_=FP(),P=_.base,O=_.bignum,Y=_.constants.der;function H(k){this.enc="der",this.name=k.name,this.entity=k,this.tree=new v,this.tree._init(k.body)}$.exports=H,H.prototype.decode=function(G,S){if(!(G instanceof P.DecoderBuffer))G=new P.DecoderBuffer(G,S);return this.tree._decode(G,S)};function v(k){P.Node.call(this,"der",k)}K(v,P.Node),v.prototype._peekTag=function(G,S,N){if(G.isEmpty())return!1;var E=G.save(),h=X(G,'Failed to peek tag: "'+S+'"');if(G.isError(h))return h;return G.restore(E),h.tag===S||h.tagStr===S||h.tagStr+"of"===S||N},v.prototype._decodeTag=function(G,S,N){var E=X(G,'Failed to decode tag of "'+S+'"');if(G.isError(E))return E;var h=Z(G,E.primitive,'Failed to get length of "'+S+'"');if(G.isError(h))return h;if(!N&&E.tag!==S&&E.tagStr!==S&&E.tagStr+"of"!==S)return G.error('Failed to match tag: "'+S+'"');if(E.primitive||h!==null)return G.skip(h,'Failed to match body of: "'+S+'"');var D=G.save(),I=this._skipUntilEnd(G,'Failed to skip indefinite length body: "'+this.tag+'"');if(G.isError(I))return I;return h=G.offset-D.offset,G.restore(D),G.skip(h,'Failed to match body of: "'+S+'"')},v.prototype._skipUntilEnd=function(G,S){while(!0){var N=X(G,S);if(G.isError(N))return N;var E=Z(G,N.primitive,S);if(G.isError(E))return E;var h;if(N.primitive||E!==null)h=G.skip(E);else h=this._skipUntilEnd(G,S);if(G.isError(h))return h;if(N.tagStr==="end")break}},v.prototype._decodeList=function(G,S,N,E){var h=[];while(!G.isEmpty()){var D=this._peekTag(G,"end");if(G.isError(D))return D;var I=N.decode(G,"der",E);if(G.isError(I)&&D)break;h.push(I)}return h},v.prototype._decodeStr=function(G,S){if(S==="bitstr"){var N=G.readUInt8();if(G.isError(N))return N;return{unused:N,data:G.raw()}}else if(S==="bmpstr"){var E=G.raw();if(E.length%2===1)return G.error("Decoding of string type: bmpstr length mismatch");var h="";for(var D=0;D<E.length/2;D++)h+=String.fromCharCode(E.readUInt16BE(D*2));return h}else if(S==="numstr"){var I=G.raw().toString("ascii");if(!this._isNumstr(I))return G.error("Decoding of string type: numstr unsupported characters");return I}else if(S==="octstr")return G.raw();else if(S==="objDesc")return G.raw();else if(S==="printstr"){var g=G.raw().toString("ascii");if(!this._isPrintstr(g))return G.error("Decoding of string type: printstr unsupported characters");return g}else if(/str$/.test(S))return G.raw().toString();else return G.error("Decoding of string type: "+S+" unsupported")},v.prototype._decodeObjid=function(G,S,N){var E,h=[],D=0;while(!G.isEmpty()){var I=G.readUInt8();if(D<<=7,D|=I&127,(I&128)===0)h.push(D),D=0}if(I&128)h.push(D);var g=h[0]/40|0,y=h[0]%40;if(N)E=h;else E=[g,y].concat(h.slice(1));if(S){var p=S[E.join(" ")];if(p===void 0)p=S[E.join(".")];if(p!==void 0)E=p}return E},v.prototype._decodeTime=function(G,S){var N=G.raw().toString();if(S==="gentime")var E=N.slice(0,4)|0,h=N.slice(4,6)|0,D=N.slice(6,8)|0,I=N.slice(8,10)|0,g=N.slice(10,12)|0,y=N.slice(12,14)|0;else if(S==="utctime"){var E=N.slice(0,2)|0,h=N.slice(2,4)|0,D=N.slice(4,6)|0,I=N.slice(6,8)|0,g=N.slice(8,10)|0,y=N.slice(10,12)|0;if(E<70)E=2000+E;else E=1900+E}else return G.error("Decoding "+S+" time is not supported yet");return Date.UTC(E,h-1,D,I,g,y,0)},v.prototype._decodeNull=function(G){return null},v.prototype._decodeBool=function(G){var S=G.readUInt8();if(G.isError(S))return S;else return S!==0},v.prototype._decodeInt=function(G,S){var N=G.raw(),E=new O(N);if(S)E=S[E.toString(10)]||E;return E},v.prototype._use=function(G,S){if(typeof G==="function")G=G(S);return G._getDecoder("der").tree};function X(k,G){var S=k.readUInt8(G);if(k.isError(S))return S;var N=Y.tagClass[S>>6],E=(S&32)===0;if((S&31)===31){var h=S;S=0;while((h&128)===128){if(h=k.readUInt8(G),k.isError(h))return h;S<<=7,S|=h&127}}else S&=31;var D=Y.tag[S];return{cls:N,primitive:E,tag:S,tagStr:D}}function Z(k,G,S){var N=k.readUInt8(S);if(k.isError(N))return N;if(!G&&N===128)return null;if((N&128)===0)return N;var E=N&127;if(E>4)return k.error("length octect is too long");N=0;for(var h=0;h<E;h++){N<<=8;var D=k.readUInt8(S);if(k.isError(D))return D;N|=D}return N}}),fg=lq((q,$)=>{var K=W6(),_=(T8(),M$(w8)).Buffer,P=Rf();function O(Y){P.call(this,Y),this.enc="pem"}K(O,P),$.exports=O,O.prototype.decode=function(H,v){var X=H.toString().split(/[\r\n]+/g),Z=v.label.toUpperCase(),k=/^-----(BEGIN|END) ([^-]+)-----$/,G=-1,S=-1;for(var N=0;N<X.length;N++){var E=X[N].match(k);if(E===null)continue;if(E[2]!==Z)continue;if(G===-1){if(E[1]!=="BEGIN")break;G=N}else{if(E[1]!=="END")break;S=N;break}}if(G===-1||S===-1)throw Error("PEM section not found for: "+Z);var h=X.slice(G+1,S).join("");h.replace(/[^a-z0-9\+\/=]+/gi,"");var D=new _(h,"base64");return P.prototype.decode.call(this,D,v)}}),Ag=lq((q)=>{var $=q;$.der=Rf(),$.pem=fg()}),hf=lq((q,$)=>{var K=W6(),_=(T8(),M$(w8)).Buffer,P=FP(),O=P.base,Y=P.constants.der;function H(k){this.enc="der",this.name=k.name,this.entity=k,this.tree=new v,this.tree._init(k.body)}$.exports=H,H.prototype.encode=function(G,S){return this.tree._encode(G,S).join()};function v(k){O.Node.call(this,"der",k)}K(v,O.Node),v.prototype._encodeComposite=function(G,S,N,E){var h=Z(G,S,N,this.reporter);if(E.length<128){var g=new _(2);return g[0]=h,g[1]=E.length,this._createEncoderBuffer([g,E])}var D=1;for(var I=E.length;I>=256;I>>=8)D++;var g=new _(2+D);g[0]=h,g[1]=128|D;for(var I=1+D,y=E.length;y>0;I--,y>>=8)g[I]=y&255;return this._createEncoderBuffer([g,E])},v.prototype._encodeStr=function(G,S){if(S==="bitstr")return this._createEncoderBuffer([G.unused|0,G.data]);else if(S==="bmpstr"){var N=new _(G.length*2);for(var E=0;E<G.length;E++)N.writeUInt16BE(G.charCodeAt(E),E*2);return this._createEncoderBuffer(N)}else if(S==="numstr"){if(!this._isNumstr(G))return this.reporter.error("Encoding of string type: numstr supports only digits and space");return this._createEncoderBuffer(G)}else if(S==="printstr"){if(!this._isPrintstr(G))return this.reporter.error("Encoding of string type: printstr supports only latin upper and lower case letters, digits, space, apostrophe, left and rigth parenthesis, plus sign, comma, hyphen, dot, slash, colon, equal sign, question mark");return this._createEncoderBuffer(G)}else if(/str$/.test(S))return this._createEncoderBuffer(G);else if(S==="objDesc")return this._createEncoderBuffer(G);else return this.reporter.error("Encoding of string type: "+S+" unsupported")},v.prototype._encodeObjid=function(G,S,N){if(typeof G==="string"){if(!S)return this.reporter.error("string objid given, but no values map found");if(!S.hasOwnProperty(G))return this.reporter.error("objid not found in values map");G=S[G].split(/[\s\.]+/g);for(var E=0;E<G.length;E++)G[E]|=0}else if(Array.isArray(G)){G=G.slice();for(var E=0;E<G.length;E++)G[E]|=0}if(!Array.isArray(G))return this.reporter.error("objid() should be either array or string, got: "+JSON.stringify(G));if(!N){if(G[1]>=40)return this.reporter.error("Second objid identifier OOB");G.splice(0,2,G[0]*40+G[1])}var h=0;for(var E=0;E<G.length;E++){var D=G[E];for(h++;D>=128;D>>=7)h++}var I=new _(h),g=I.length-1;for(var E=G.length-1;E>=0;E--){var D=G[E];I[g--]=D&127;while((D>>=7)>0)I[g--]=128|D&127}return this._createEncoderBuffer(I)};function X(k){if(k<10)return"0"+k;else return k}v.prototype._encodeTime=function(G,S){var N,E=new Date(G);if(S==="gentime")N=[X(E.getFullYear()),X(E.getUTCMonth()+1),X(E.getUTCDate()),X(E.getUTCHours()),X(E.getUTCMinutes()),X(E.getUTCSeconds()),"Z"].join("");else if(S==="utctime")N=[X(E.getFullYear()%100),X(E.getUTCMonth()+1),X(E.getUTCDate()),X(E.getUTCHours()),X(E.getUTCMinutes()),X(E.getUTCSeconds()),"Z"].join("");else this.reporter.error("Encoding "+S+" time is not supported yet");return this._encodeStr(N,"octstr")},v.prototype._encodeNull=function(){return this._createEncoderBuffer("")},v.prototype._encodeInt=function(G,S){if(typeof G==="string"){if(!S)return this.reporter.error("String int or enum given, but no values map");if(!S.hasOwnProperty(G))return this.reporter.error("Values map doesn't contain: "+JSON.stringify(G));G=S[G]}if(typeof G!=="number"&&!_.isBuffer(G)){var N=G.toArray();if(!G.sign&&N[0]&128)N.unshift(0);G=new _(N)}if(_.isBuffer(G)){var E=G.length;if(G.length===0)E++;var D=new _(E);if(G.copy(D),G.length===0)D[0]=0;return this._createEncoderBuffer(D)}if(G<128)return this._createEncoderBuffer(G);if(G<256)return this._createEncoderBuffer([0,G]);var E=1;for(var h=G;h>=256;h>>=8)E++;var D=Array(E);for(var h=D.length-1;h>=0;h--)D[h]=G&255,G>>=8;if(D[0]&128)D.unshift(0);return this._createEncoderBuffer(new _(D))},v.prototype._encodeBool=function(G){return this._createEncoderBuffer(G?255:0)},v.prototype._use=function(G,S){if(typeof G==="function")G=G(S);return G._getEncoder("der").tree},v.prototype._skipDefault=function(G,S,N){var E=this._baseState,h;if(E.default===null)return!1;var D=G.join();if(E.defaultBuffer===void 0)E.defaultBuffer=this._encodeValue(E.default,S,N).join();if(D.length!==E.defaultBuffer.length)return!1;for(h=0;h<D.length;h++)if(D[h]!==E.defaultBuffer[h])return!1;return!0};function Z(k,G,S,N){var E;if(k==="seqof")k="seq";else if(k==="setof")k="set";if(Y.tagByName.hasOwnProperty(k))E=Y.tagByName[k];else if(typeof k==="number"&&(k|0)===k)E=k;else return N.error("Unknown tag: "+k);if(E>=31)return N.error("Multi-octet tag encoding unsupported");if(!G)E|=32;return E|=Y.tagClassByName[S||"universal"]<<6,E}}),kg=lq((q,$)=>{var K=W6(),_=hf();function P(O){_.call(this,O),this.enc="pem"}K(P,_),$.exports=P,P.prototype.encode=function(Y,H){var v=_.prototype.encode.call(this,Y),X=v.toString("base64"),Z=["-----BEGIN "+H.label+"-----"];for(var k=0;k<X.length;k+=64)Z.push(X.slice(k,k+64));return Z.push("-----END "+H.label+"-----"),Z.join(`
`)}}),Gg=lq((q)=>{var $=q;$.der=hf(),$.pem=kg()}),FP=lq((q)=>{var $=q;$.bignum=Jg(),$.define=vg().define,$.base=iP(),$.constants=Ef(),$.decoders=Ag(),$.encoders=Gg()}),Zg=lq((q,$)=>{var K=FP(),_=K.define("Time",function(){this.choice({utcTime:this.utctime(),generalTime:this.gentime()})}),P=K.define("AttributeTypeValue",function(){this.seq().obj(this.key("type").objid(),this.key("value").any())}),O=K.define("AlgorithmIdentifier",function(){this.seq().obj(this.key("algorithm").objid(),this.key("parameters").optional(),this.key("curve").objid().optional())}),Y=K.define("SubjectPublicKeyInfo",function(){this.seq().obj(this.key("algorithm").use(O),this.key("subjectPublicKey").bitstr())}),H=K.define("RelativeDistinguishedName",function(){this.setof(P)}),v=K.define("RDNSequence",function(){this.seqof(H)}),X=K.define("Name",function(){this.choice({rdnSequence:this.use(v)})}),Z=K.define("Validity",function(){this.seq().obj(this.key("notBefore").use(_),this.key("notAfter").use(_))}),k=K.define("Extension",function(){this.seq().obj(this.key("extnID").objid(),this.key("critical").bool().def(!1),this.key("extnValue").octstr())}),G=K.define("TBSCertificate",function(){this.seq().obj(this.key("version").explicit(0).int().optional(),this.key("serialNumber").int(),this.key("signature").use(O),this.key("issuer").use(X),this.key("validity").use(Z),this.key("subject").use(X),this.key("subjectPublicKeyInfo").use(Y),this.key("issuerUniqueID").implicit(1).bitstr().optional(),this.key("subjectUniqueID").implicit(2).bitstr().optional(),this.key("extensions").explicit(3).seqof(k).optional())}),S=K.define("X509Certificate",function(){this.seq().obj(this.key("tbsCertificate").use(G),this.key("signatureAlgorithm").use(O),this.key("signatureValue").bitstr())});$.exports=S}),Vg=lq((q)=>{var $=FP();q.certificate=Zg();var K=$.define("RSAPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("modulus").int(),this.key("publicExponent").int(),this.key("privateExponent").int(),this.key("prime1").int(),this.key("prime2").int(),this.key("exponent1").int(),this.key("exponent2").int(),this.key("coefficient").int())});q.RSAPrivateKey=K;var _=$.define("RSAPublicKey",function(){this.seq().obj(this.key("modulus").int(),this.key("publicExponent").int())});q.RSAPublicKey=_;var P=$.define("AlgorithmIdentifier",function(){this.seq().obj(this.key("algorithm").objid(),this.key("none").null_().optional(),this.key("curve").objid().optional(),this.key("params").seq().obj(this.key("p").int(),this.key("q").int(),this.key("g").int()).optional())}),O=$.define("SubjectPublicKeyInfo",function(){this.seq().obj(this.key("algorithm").use(P),this.key("subjectPublicKey").bitstr())});q.PublicKey=O;var Y=$.define("PrivateKeyInfo",function(){this.seq().obj(this.key("version").int(),this.key("algorithm").use(P),this.key("subjectPrivateKey").octstr())});q.PrivateKey=Y;var H=$.define("EncryptedPrivateKeyInfo",function(){this.seq().obj(this.key("algorithm").seq().obj(this.key("id").objid(),this.key("decrypt").seq().obj(this.key("kde").seq().obj(this.key("id").objid(),this.key("kdeparams").seq().obj(this.key("salt").octstr(),this.key("iters").int())),this.key("cipher").seq().obj(this.key("algo").objid(),this.key("iv").octstr()))),this.key("subjectPrivateKey").octstr())});q.EncryptedPrivateKey=H;var v=$.define("DSAPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("p").int(),this.key("q").int(),this.key("g").int(),this.key("pub_key").int(),this.key("priv_key").int())});q.DSAPrivateKey=v,q.DSAparam=$.define("DSAparam",function(){this.int()});var X=$.define("ECParameters",function(){this.choice({namedCurve:this.objid()})}),Z=$.define("ECPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("privateKey").octstr(),this.key("parameters").optional().explicit(0).use(X),this.key("publicKey").optional().explicit(1).bitstr())});q.ECPrivateKey=Z,q.signature=$.define("signature",function(){this.seq().obj(this.key("r").int(),this.key("s").int())})}),Mg=lq((q,$)=>{$.exports={"2.16.840.1.101.3.4.1.1":"aes-128-ecb","2.16.840.1.101.3.4.1.2":"aes-128-cbc","2.16.840.1.101.3.4.1.3":"aes-128-ofb","2.16.840.1.101.3.4.1.4":"aes-128-cfb","2.16.840.1.101.3.4.1.21":"aes-192-ecb","2.16.840.1.101.3.4.1.22":"aes-192-cbc","2.16.840.1.101.3.4.1.23":"aes-192-ofb","2.16.840.1.101.3.4.1.24":"aes-192-cfb","2.16.840.1.101.3.4.1.41":"aes-256-ecb","2.16.840.1.101.3.4.1.42":"aes-256-cbc","2.16.840.1.101.3.4.1.43":"aes-256-ofb","2.16.840.1.101.3.4.1.44":"aes-256-cfb"}}),Sg=lq((q,$)=>{var K=s8().Buffer,_=Q3().Transform,P=W6();function O(X){_.call(this),this._block=K.allocUnsafe(X),this._blockSize=X,this._blockOffset=0,this._length=[0,0,0,0],this._finalized=!1}P(O,_),O.prototype._transform=function(X,Z,k){var G=null;try{this.update(X,Z)}catch(S){G=S}k(G)},O.prototype._flush=function(X){var Z=null;try{this.push(this.digest())}catch(k){Z=k}X(Z)};var Y=typeof Uint8Array<"u",H=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&ArrayBuffer.isView&&(K.prototype instanceof Uint8Array||K.TYPED_ARRAY_SUPPORT);function v(X,Z){if(X instanceof K)return X;if(typeof X==="string")return K.from(X,Z);if(H&&ArrayBuffer.isView(X)){if(X.byteLength===0)return K.alloc(0);var k=K.from(X.buffer,X.byteOffset,X.byteLength);if(k.byteLength===X.byteLength)return k}if(Y&&X instanceof Uint8Array)return K.from(X);if(K.isBuffer(X)&&X.constructor&&typeof X.constructor.isBuffer==="function"&&X.constructor.isBuffer(X))return K.from(X);throw TypeError('The "data" argument must be of type string or an instance of Buffer, TypedArray, or DataView.')}O.prototype.update=function(X,Z){if(this._finalized)throw Error("Digest already called");X=v(X,Z);var k=this._block,G=0;while(this._blockOffset+X.length-G>=this._blockSize){for(var S=this._blockOffset;S<this._blockSize;)k[S++]=X[G++];this._update(),this._blockOffset=0}while(G<X.length)k[this._blockOffset++]=X[G++];for(var N=0,E=X.length*8;E>0;++N)if(this._length[N]+=E,E=this._length[N]/4294967296|0,E>0)this._length[N]-=4294967296*E;return this},O.prototype._update=function(){throw Error("_update is not implemented")},O.prototype.digest=function(X){if(this._finalized)throw Error("Digest already called");this._finalized=!0;var Z=this._digest();if(X!==void 0)Z=Z.toString(X);this._block.fill(0),this._blockOffset=0;for(var k=0;k<4;++k)this._length[k]=0;return Z},O.prototype._digest=function(){throw Error("_digest is not implemented")},$.exports=O}),Cg=lq((q,$)=>{var K=W6(),_=Sg(),P=s8().Buffer,O=Array(16);function Y(){_.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878}K(Y,_),Y.prototype._update=function(){var G=O;for(var S=0;S<16;++S)G[S]=this._block.readInt32LE(S*4);var N=this._a,E=this._b,h=this._c,D=this._d;N=v(N,E,h,D,G[0],3614090360,7),D=v(D,N,E,h,G[1],3905402710,12),h=v(h,D,N,E,G[2],606105819,17),E=v(E,h,D,N,G[3],3250441966,22),N=v(N,E,h,D,G[4],4118548399,7),D=v(D,N,E,h,G[5],1200080426,12),h=v(h,D,N,E,G[6],2821735955,17),E=v(E,h,D,N,G[7],4249261313,22),N=v(N,E,h,D,G[8],1770035416,7),D=v(D,N,E,h,G[9],2336552879,12),h=v(h,D,N,E,G[10],4294925233,17),E=v(E,h,D,N,G[11],2304563134,22),N=v(N,E,h,D,G[12],1804603682,7),D=v(D,N,E,h,G[13],4254626195,12),h=v(h,D,N,E,G[14],2792965006,17),E=v(E,h,D,N,G[15],1236535329,22),N=X(N,E,h,D,G[1],4129170786,5),D=X(D,N,E,h,G[6],3225465664,9),h=X(h,D,N,E,G[11],643717713,14),E=X(E,h,D,N,G[0],3921069994,20),N=X(N,E,h,D,G[5],3593408605,5),D=X(D,N,E,h,G[10],38016083,9),h=X(h,D,N,E,G[15],3634488961,14),E=X(E,h,D,N,G[4],3889429448,20),N=X(N,E,h,D,G[9],568446438,5),D=X(D,N,E,h,G[14],3275163606,9),h=X(h,D,N,E,G[3],4107603335,14),E=X(E,h,D,N,G[8],1163531501,20),N=X(N,E,h,D,G[13],2850285829,5),D=X(D,N,E,h,G[2],4243563512,9),h=X(h,D,N,E,G[7],1735328473,14),E=X(E,h,D,N,G[12],2368359562,20),N=Z(N,E,h,D,G[5],4294588738,4),D=Z(D,N,E,h,G[8],2272392833,11),h=Z(h,D,N,E,G[11],1839030562,16),E=Z(E,h,D,N,G[14],4259657740,23),N=Z(N,E,h,D,G[1],2763975236,4),D=Z(D,N,E,h,G[4],1272893353,11),h=Z(h,D,N,E,G[7],4139469664,16),E=Z(E,h,D,N,G[10],3200236656,23),N=Z(N,E,h,D,G[13],681279174,4),D=Z(D,N,E,h,G[0],3936430074,11),h=Z(h,D,N,E,G[3],3572445317,16),E=Z(E,h,D,N,G[6],76029189,23),N=Z(N,E,h,D,G[9],3654602809,4),D=Z(D,N,E,h,G[12],3873151461,11),h=Z(h,D,N,E,G[15],530742520,16),E=Z(E,h,D,N,G[2],3299628645,23),N=k(N,E,h,D,G[0],4096336452,6),D=k(D,N,E,h,G[7],1126891415,10),h=k(h,D,N,E,G[14],2878612391,15),E=k(E,h,D,N,G[5],4237533241,21),N=k(N,E,h,D,G[12],1700485571,6),D=k(D,N,E,h,G[3],2399980690,10),h=k(h,D,N,E,G[10],4293915773,15),E=k(E,h,D,N,G[1],2240044497,21),N=k(N,E,h,D,G[8],1873313359,6),D=k(D,N,E,h,G[15],4264355552,10),h=k(h,D,N,E,G[6],2734768916,15),E=k(E,h,D,N,G[13],1309151649,21),N=k(N,E,h,D,G[4],4149444226,6),D=k(D,N,E,h,G[11],3174756917,10),h=k(h,D,N,E,G[2],718787259,15),E=k(E,h,D,N,G[9],3951481745,21),this._a=this._a+N|0,this._b=this._b+E|0,this._c=this._c+h|0,this._d=this._d+D|0},Y.prototype._digest=function(){if(this._block[this._blockOffset++]=128,this._blockOffset>56)this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0;this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var G=P.allocUnsafe(16);return G.writeInt32LE(this._a,0),G.writeInt32LE(this._b,4),G.writeInt32LE(this._c,8),G.writeInt32LE(this._d,12),G};function H(G,S){return G<<S|G>>>32-S}function v(G,S,N,E,h,D,I){return H(G+(S&N|~S&E)+h+D|0,I)+S|0}function X(G,S,N,E,h,D,I){return H(G+(S&E|N&~E)+h+D|0,I)+S|0}function Z(G,S,N,E,h,D,I){return H(G+(S^N^E)+h+D|0,I)+S|0}function k(G,S,N,E,h,D,I){return H(G+(N^(S|~E))+h+D|0,I)+S|0}$.exports=Y}),Ng=lq((q,$)=>{var K=s8().Buffer,_=Cg();function P(O,Y,H,v){if(!K.isBuffer(O))O=K.from(O,"binary");if(Y){if(!K.isBuffer(Y))Y=K.from(Y,"binary");if(Y.length!==8)throw RangeError("salt should be Buffer with 8 byte length")}var X=H/8,Z=K.alloc(X),k=K.alloc(v||0),G=K.alloc(0);while(X>0||v>0){var S=new _;if(S.update(G),S.update(O),Y)S.update(Y);G=S.digest();var N=0;if(X>0){var E=Z.length-X;N=Math.min(X,G.length),G.copy(Z,E,0,N),X-=N}if(N<G.length&&v>0){var h=k.length-v,D=Math.min(v,G.length-N);G.copy(k,h,N,N+D),v-=D}}return G.fill(0),{key:Z,iv:k}}$.exports=P}),Df=lq((q)=>{var $=($6(),M$(q6));q.createCipher=q.Cipher=$.createCipher,q.createCipheriv=q.Cipheriv=$.createCipheriv,q.createDecipher=q.Decipher=$.createDecipher,q.createDecipheriv=q.Decipheriv=$.createDecipheriv,q.listCiphers=q.getCiphers=$.getCiphers}),Eg=lq((q,$)=>{var K=/Proc-Type: 4,ENCRYPTED[\n\r]+DEK-Info: AES-((?:128)|(?:192)|(?:256))-CBC,([0-9A-H]+)[\n\r]+([0-9A-z\n\r+/=]+)[\n\r]+/m,_=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----/m,P=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----([0-9A-z\n\r+/=]+)-----END \1-----$/m,O=Ng(),Y=Df(),H=s8().Buffer;$.exports=function(v,X){var Z=v.toString(),k=Z.match(K),G;if(!k){var S=Z.match(P);G=H.from(S[2].replace(/[\r\n]/g,""),"base64")}else{var N="aes"+k[1],E=H.from(k[2],"hex"),h=H.from(k[3].replace(/[\r\n]/g,""),"base64"),D=O(X,E.slice(0,8),parseInt(k[1],10)).key,I=[],g=Y.createDecipheriv(N,D,E);I.push(g.update(h)),I.push(g.final()),G=H.concat(I)}var y=Z.match(_)[1];return{tag:y,data:G}}}),If=lq((q,$)=>{var K=Vg(),_=Mg(),P=Eg(),O=Df(),Y=Gf(),H=s8().Buffer;function v(Z,k){var G=Z.algorithm.decrypt.kde.kdeparams.salt,S=parseInt(Z.algorithm.decrypt.kde.kdeparams.iters.toString(),10),N=_[Z.algorithm.decrypt.cipher.algo.join(".")],E=Z.algorithm.decrypt.cipher.iv,h=Z.subjectPrivateKey,D=parseInt(N.split("-")[1],10)/8,I=Y.pbkdf2Sync(k,G,S,D,"sha1"),g=O.createDecipheriv(N,I,E),y=[];return y.push(g.update(h)),y.push(g.final()),H.concat(y)}function X(Z){var k;if(typeof Z==="object"&&!H.isBuffer(Z))k=Z.passphrase,Z=Z.key;if(typeof Z==="string")Z=H.from(Z);var G=P(Z,k),S=G.tag,N=G.data,E,h;switch(S){case"CERTIFICATE":h=K.certificate.decode(N,"der").tbsCertificate.subjectPublicKeyInfo;case"PUBLIC KEY":if(!h)h=K.PublicKey.decode(N,"der");switch(E=h.algorithm.algorithm.join("."),E){case"1.2.840.113549.1.1.1":return K.RSAPublicKey.decode(h.subjectPublicKey.data,"der");case"1.2.840.10045.2.1":return h.subjectPrivateKey=h.subjectPublicKey,{type:"ec",data:h};case"1.2.840.10040.4.1":return h.algorithm.params.pub_key=K.DSAparam.decode(h.subjectPublicKey.data,"der"),{type:"dsa",data:h.algorithm.params};default:throw Error("unknown key id "+E)}case"ENCRYPTED PRIVATE KEY":N=K.EncryptedPrivateKey.decode(N,"der"),N=v(N,k);case"PRIVATE KEY":switch(h=K.PrivateKey.decode(N,"der"),E=h.algorithm.algorithm.join("."),E){case"1.2.840.113549.1.1.1":return K.RSAPrivateKey.decode(h.subjectPrivateKey,"der");case"1.2.840.10045.2.1":return{curve:h.algorithm.curve,privateKey:K.ECPrivateKey.decode(h.subjectPrivateKey,"der").privateKey};case"1.2.840.10040.4.1":return h.algorithm.params.priv_key=K.DSAparam.decode(h.subjectPrivateKey,"der"),{type:"dsa",params:h.algorithm.params};default:throw Error("unknown key id "+E)}case"RSA PUBLIC KEY":return K.RSAPublicKey.decode(N,"der");case"RSA PRIVATE KEY":return K.RSAPrivateKey.decode(N,"der");case"DSA PRIVATE KEY":return{type:"dsa",params:K.DSAPrivateKey.decode(N,"der")};case"EC PRIVATE KEY":return N=K.ECPrivateKey.decode(N,"der"),{curve:N.parameters.value,privateKey:N.privateKey};default:throw Error("unknown key type "+S)}}X.signature=K.signature,$.exports=X}),Lf=lq((q,$)=>{var K=H5(),_=s8().Buffer;$.exports=function(O,Y){var H=_.alloc(0),v=0,X;while(H.length<Y)X=P(v++),H=_.concat([H,K("sha1").update(O).update(X).digest()]);return H.slice(0,Y)};function P(O){var Y=_.allocUnsafe(4);return Y.writeUInt32BE(O,0),Y}}),bf=lq((q,$)=>{$.exports=function(_,P){var O=_.length,Y=-1;while(++Y<O)_[Y]^=P[Y];return _}}),_j=lq((q,$)=>{(function(K,_){function P(M,j){if(!M)throw Error(j||"Assertion failed")}function O(M,j){M.super_=j;var J=function(){};J.prototype=j.prototype,M.prototype=new J,M.prototype.constructor=M}function Y(M,j,J){if(Y.isBN(M))return M;if(this.negative=0,this.words=null,this.length=0,this.red=null,M!==null){if(j==="le"||j==="be")J=j,j=10;this._init(M||0,j||10,J||"be")}}if(typeof K==="object")K.exports=Y;else _.BN=Y;Y.BN=Y,Y.wordSize=26;var H;try{if(typeof window<"u"&&typeof window.Buffer<"u")H=window.Buffer;else H=(T8(),M$(w8)).Buffer}catch(M){}Y.isBN=function(j){if(j instanceof Y)return!0;return j!==null&&typeof j==="object"&&j.constructor.wordSize===Y.wordSize&&Array.isArray(j.words)},Y.max=function(j,J){if(j.cmp(J)>0)return j;return J},Y.min=function(j,J){if(j.cmp(J)<0)return j;return J},Y.prototype._init=function(j,J,w){if(typeof j==="number")return this._initNumber(j,J,w);if(typeof j==="object")return this._initArray(j,J,w);if(J==="hex")J=16;P(J===(J|0)&&J>=2&&J<=36),j=j.toString().replace(/\s+/g,"");var z=0;if(j[0]==="-")z++,this.negative=1;if(z<j.length){if(J===16)this._parseHex(j,z,w);else if(this._parseBase(j,J,z),w==="le")this._initArray(this.toArray(),J,w)}},Y.prototype._initNumber=function(j,J,w){if(j<0)this.negative=1,j=-j;if(j<67108864)this.words=[j&67108863],this.length=1;else if(j<4503599627370496)this.words=[j&67108863,j/67108864&67108863],this.length=2;else P(j<9007199254740992),this.words=[j&67108863,j/67108864&67108863,1],this.length=3;if(w!=="le")return;this._initArray(this.toArray(),J,w)},Y.prototype._initArray=function(j,J,w){if(P(typeof j.length==="number"),j.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(j.length/3),this.words=Array(this.length);for(var z=0;z<this.length;z++)this.words[z]=0;var T,V,C=0;if(w==="be"){for(z=j.length-1,T=0;z>=0;z-=3)if(V=j[z]|j[z-1]<<8|j[z-2]<<16,this.words[T]|=V<<C&67108863,this.words[T+1]=V>>>26-C&67108863,C+=24,C>=26)C-=26,T++}else if(w==="le"){for(z=0,T=0;z<j.length;z+=3)if(V=j[z]|j[z+1]<<8|j[z+2]<<16,this.words[T]|=V<<C&67108863,this.words[T+1]=V>>>26-C&67108863,C+=24,C>=26)C-=26,T++}return this.strip()};function v(M,j){var J=M.charCodeAt(j);if(J>=65&&J<=70)return J-55;else if(J>=97&&J<=102)return J-87;else return J-48&15}function X(M,j,J){var w=v(M,J);if(J-1>=j)w|=v(M,J-1)<<4;return w}Y.prototype._parseHex=function(j,J,w){this.length=Math.ceil((j.length-J)/6),this.words=Array(this.length);for(var z=0;z<this.length;z++)this.words[z]=0;var T=0,V=0,C;if(w==="be")for(z=j.length-1;z>=J;z-=2)if(C=X(j,J,z)<<T,this.words[V]|=C&67108863,T>=18)T-=18,V+=1,this.words[V]|=C>>>26;else T+=8;else{var f=j.length-J;for(z=f%2===0?J+1:J;z<j.length;z+=2)if(C=X(j,J,z)<<T,this.words[V]|=C&67108863,T>=18)T-=18,V+=1,this.words[V]|=C>>>26;else T+=8}this.strip()};function Z(M,j,J,w){var z=0,T=Math.min(M.length,J);for(var V=j;V<T;V++){var C=M.charCodeAt(V)-48;if(z*=w,C>=49)z+=C-49+10;else if(C>=17)z+=C-17+10;else z+=C}return z}Y.prototype._parseBase=function(j,J,w){this.words=[0],this.length=1;for(var z=0,T=1;T<=67108863;T*=J)z++;z--,T=T/J|0;var V=j.length-w,C=V%z,f=Math.min(V,V-C)+w,W=0;for(var A=w;A<f;A+=z)if(W=Z(j,A,A+z,J),this.imuln(T),this.words[0]+W<67108864)this.words[0]+=W;else this._iaddn(W);if(C!==0){var L=1;W=Z(j,A,j.length,J);for(A=0;A<C;A++)L*=J;if(this.imuln(L),this.words[0]+W<67108864)this.words[0]+=W;else this._iaddn(W)}this.strip()},Y.prototype.copy=function(j){j.words=Array(this.length);for(var J=0;J<this.length;J++)j.words[J]=this.words[J];j.length=this.length,j.negative=this.negative,j.red=this.red},Y.prototype.clone=function(){var j=new Y(null);return this.copy(j),j},Y.prototype._expand=function(j){while(this.length<j)this.words[this.length++]=0;return this},Y.prototype.strip=function(){while(this.length>1&&this.words[this.length-1]===0)this.length--;return this._normSign()},Y.prototype._normSign=function(){if(this.length===1&&this.words[0]===0)this.negative=0;return this},Y.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var k=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],G=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],S=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64000000,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,24300000,28629151,33554432,39135393,45435424,52521875,60466176];if(Y.prototype.toString=function(j,J){j=j||10,J=J|0||1;var w;if(j===16||j==="hex"){w="";var z=0,T=0;for(var V=0;V<this.length;V++){var C=this.words[V],f=((C<<z|T)&16777215).toString(16);if(T=C>>>24-z&16777215,z+=2,z>=26)z-=26,V--;if(T!==0||V!==this.length-1)w=k[6-f.length]+f+w;else w=f+w}if(T!==0)w=T.toString(16)+w;while(w.length%J!==0)w="0"+w;if(this.negative!==0)w="-"+w;return w}if(j===(j|0)&&j>=2&&j<=36){var W=G[j],A=S[j];w="";var L=this.clone();L.negative=0;while(!L.isZero()){var R=L.modn(A).toString(j);if(L=L.idivn(A),!L.isZero())w=k[W-R.length]+R+w;else w=R+w}if(this.isZero())w="0"+w;while(w.length%J!==0)w="0"+w;if(this.negative!==0)w="-"+w;return w}P(!1,"Base should be between 2 and 36")},Y.prototype.toNumber=function(){var j=this.words[0];if(this.length===2)j+=this.words[1]*67108864;else if(this.length===3&&this.words[2]===1)j+=4503599627370496+this.words[1]*67108864;else if(this.length>2)P(!1,"Number can only safely store up to 53 bits");return this.negative!==0?-j:j},Y.prototype.toJSON=function(){return this.toString(16)},Y.prototype.toBuffer=function(j,J){return P(typeof H<"u"),this.toArrayLike(H,j,J)},Y.prototype.toArray=function(j,J){return this.toArrayLike(Array,j,J)},Y.prototype.toArrayLike=function(j,J,w){var z=this.byteLength(),T=w||Math.max(1,z);P(z<=T,"byte array longer than desired length"),P(T>0,"Requested array length <= 0"),this.strip();var V=J==="le",C=new j(T),f,W,A=this.clone();if(!V){for(W=0;W<T-z;W++)C[W]=0;for(W=0;!A.isZero();W++)f=A.andln(255),A.iushrn(8),C[T-W-1]=f}else{for(W=0;!A.isZero();W++)f=A.andln(255),A.iushrn(8),C[W]=f;for(;W<T;W++)C[W]=0}return C},Math.clz32)Y.prototype._countBits=function(j){return 32-Math.clz32(j)};else Y.prototype._countBits=function(j){var J=j,w=0;if(J>=4096)w+=13,J>>>=13;if(J>=64)w+=7,J>>>=7;if(J>=8)w+=4,J>>>=4;if(J>=2)w+=2,J>>>=2;return w+J};Y.prototype._zeroBits=function(j){if(j===0)return 26;var J=j,w=0;if((J&8191)===0)w+=13,J>>>=13;if((J&127)===0)w+=7,J>>>=7;if((J&15)===0)w+=4,J>>>=4;if((J&3)===0)w+=2,J>>>=2;if((J&1)===0)w++;return w},Y.prototype.bitLength=function(){var j=this.words[this.length-1],J=this._countBits(j);return(this.length-1)*26+J};function N(M){var j=Array(M.bitLength());for(var J=0;J<j.length;J++){var w=J/26|0,z=J%26;j[J]=(M.words[w]&1<<z)>>>z}return j}Y.prototype.zeroBits=function(){if(this.isZero())return 0;var j=0;for(var J=0;J<this.length;J++){var w=this._zeroBits(this.words[J]);if(j+=w,w!==26)break}return j},Y.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},Y.prototype.toTwos=function(j){if(this.negative!==0)return this.abs().inotn(j).iaddn(1);return this.clone()},Y.prototype.fromTwos=function(j){if(this.testn(j-1))return this.notn(j).iaddn(1).ineg();return this.clone()},Y.prototype.isNeg=function(){return this.negative!==0},Y.prototype.neg=function(){return this.clone().ineg()},Y.prototype.ineg=function(){if(!this.isZero())this.negative^=1;return this},Y.prototype.iuor=function(j){while(this.length<j.length)this.words[this.length++]=0;for(var J=0;J<j.length;J++)this.words[J]=this.words[J]|j.words[J];return this.strip()},Y.prototype.ior=function(j){return P((this.negative|j.negative)===0),this.iuor(j)},Y.prototype.or=function(j){if(this.length>j.length)return this.clone().ior(j);return j.clone().ior(this)},Y.prototype.uor=function(j){if(this.length>j.length)return this.clone().iuor(j);return j.clone().iuor(this)},Y.prototype.iuand=function(j){var J;if(this.length>j.length)J=j;else J=this;for(var w=0;w<J.length;w++)this.words[w]=this.words[w]&j.words[w];return this.length=J.length,this.strip()},Y.prototype.iand=function(j){return P((this.negative|j.negative)===0),this.iuand(j)},Y.prototype.and=function(j){if(this.length>j.length)return this.clone().iand(j);return j.clone().iand(this)},Y.prototype.uand=function(j){if(this.length>j.length)return this.clone().iuand(j);return j.clone().iuand(this)},Y.prototype.iuxor=function(j){var J,w;if(this.length>j.length)J=this,w=j;else J=j,w=this;for(var z=0;z<w.length;z++)this.words[z]=J.words[z]^w.words[z];if(this!==J)for(;z<J.length;z++)this.words[z]=J.words[z];return this.length=J.length,this.strip()},Y.prototype.ixor=function(j){return P((this.negative|j.negative)===0),this.iuxor(j)},Y.prototype.xor=function(j){if(this.length>j.length)return this.clone().ixor(j);return j.clone().ixor(this)},Y.prototype.uxor=function(j){if(this.length>j.length)return this.clone().iuxor(j);return j.clone().iuxor(this)},Y.prototype.inotn=function(j){P(typeof j==="number"&&j>=0);var J=Math.ceil(j/26)|0,w=j%26;if(this._expand(J),w>0)J--;for(var z=0;z<J;z++)this.words[z]=~this.words[z]&67108863;if(w>0)this.words[z]=~this.words[z]&67108863>>26-w;return this.strip()},Y.prototype.notn=function(j){return this.clone().inotn(j)},Y.prototype.setn=function(j,J){P(typeof j==="number"&&j>=0);var w=j/26|0,z=j%26;if(this._expand(w+1),J)this.words[w]=this.words[w]|1<<z;else this.words[w]=this.words[w]&~(1<<z);return this.strip()},Y.prototype.iadd=function(j){var J;if(this.negative!==0&&j.negative===0)return this.negative=0,J=this.isub(j),this.negative^=1,this._normSign();else if(this.negative===0&&j.negative!==0)return j.negative=0,J=this.isub(j),j.negative=1,J._normSign();var w,z;if(this.length>j.length)w=this,z=j;else w=j,z=this;var T=0;for(var V=0;V<z.length;V++)J=(w.words[V]|0)+(z.words[V]|0)+T,this.words[V]=J&67108863,T=J>>>26;for(;T!==0&&V<w.length;V++)J=(w.words[V]|0)+T,this.words[V]=J&67108863,T=J>>>26;if(this.length=w.length,T!==0)this.words[this.length]=T,this.length++;else if(w!==this)for(;V<w.length;V++)this.words[V]=w.words[V];return this},Y.prototype.add=function(j){var J;if(j.negative!==0&&this.negative===0)return j.negative=0,J=this.sub(j),j.negative^=1,J;else if(j.negative===0&&this.negative!==0)return this.negative=0,J=j.sub(this),this.negative=1,J;if(this.length>j.length)return this.clone().iadd(j);return j.clone().iadd(this)},Y.prototype.isub=function(j){if(j.negative!==0){j.negative=0;var J=this.iadd(j);return j.negative=1,J._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(j),this.negative=1,this._normSign();var w=this.cmp(j);if(w===0)return this.negative=0,this.length=1,this.words[0]=0,this;var z,T;if(w>0)z=this,T=j;else z=j,T=this;var V=0;for(var C=0;C<T.length;C++)J=(z.words[C]|0)-(T.words[C]|0)+V,V=J>>26,this.words[C]=J&67108863;for(;V!==0&&C<z.length;C++)J=(z.words[C]|0)+V,V=J>>26,this.words[C]=J&67108863;if(V===0&&C<z.length&&z!==this)for(;C<z.length;C++)this.words[C]=z.words[C];if(this.length=Math.max(this.length,C),z!==this)this.negative=1;return this.strip()},Y.prototype.sub=function(j){return this.clone().isub(j)};function E(M,j,J){J.negative=j.negative^M.negative;var w=M.length+j.length|0;J.length=w,w=w-1|0;var z=M.words[0]|0,T=j.words[0]|0,V=z*T,C=V&67108863,f=V/67108864|0;J.words[0]=C;for(var W=1;W<w;W++){var A=f>>>26,L=f&67108863,R=Math.min(W,j.length-1);for(var b=Math.max(0,W-M.length+1);b<=R;b++){var l=W-b|0;z=M.words[l]|0,T=j.words[b]|0,V=z*T+L,A+=V/67108864|0,L=V&67108863}J.words[W]=L|0,f=A|0}if(f!==0)J.words[W]=f|0;else J.length--;return J.strip()}var h=function(j,J,w){var z=j.words,T=J.words,V=w.words,C=0,f,W,A,L=z[0]|0,R=L&8191,b=L>>>13,l=z[1]|0,B=l&8191,t=l>>>13,Wq=z[2]|0,r=Wq&8191,i=Wq>>>13,gq=z[3]|0,jq=gq&8191,Oq=gq>>>13,Q=z[4]|0,o=Q&8191,U=Q>>>13,yq=z[5]|0,qq=yq&8191,s=yq>>>13,a=z[6]|0,F=a&8191,_q=a>>>13,Tq=z[7]|0,Yq=Tq&8191,Jq=Tq>>>13,z$=z[8]|0,Hq=z$&8191,Xq=z$>>>13,N$=z[9]|0,vq=N$&8191,kq=N$>>>13,o$=T[0]|0,fq=o$&8191,Rq=o$>>>13,X8=T[1]|0,hq=X8&8191,Dq=X8>>>13,h8=T[2]|0,Sq=h8&8191,Cq=h8>>>13,D8=T[3]|0,Nq=D8&8191,Gq=D8>>>13,I8=T[4]|0,Iq=I8&8191,Zq=I8>>>13,f8=T[5]|0,x=f8&8191,u=f8>>>13,pq=T[6]|0,Kq=pq&8191,Pq=pq>>>13,E$=T[7]|0,wq=E$&8191,Aq=E$>>>13,A8=T[8]|0,Lq=A8&8191,Eq=A8>>>13,k8=T[9]|0,Vq=k8&8191,Mq=k8>>>13;w.negative=j.negative^J.negative,w.length=19,f=Math.imul(R,fq),W=Math.imul(R,Rq),W=W+Math.imul(b,fq)|0,A=Math.imul(b,Rq);var m$=(C+f|0)+((W&8191)<<13)|0;C=(A+(W>>>13)|0)+(m$>>>26)|0,m$&=67108863,f=Math.imul(B,fq),W=Math.imul(B,Rq),W=W+Math.imul(t,fq)|0,A=Math.imul(t,Rq),f=f+Math.imul(R,hq)|0,W=W+Math.imul(R,Dq)|0,W=W+Math.imul(b,hq)|0,A=A+Math.imul(b,Dq)|0;var J$=(C+f|0)+((W&8191)<<13)|0;C=(A+(W>>>13)|0)+(J$>>>26)|0,J$&=67108863,f=Math.imul(r,fq),W=Math.imul(r,Rq),W=W+Math.imul(i,fq)|0,A=Math.imul(i,Rq),f=f+Math.imul(B,hq)|0,W=W+Math.imul(B,Dq)|0,W=W+Math.imul(t,hq)|0,A=A+Math.imul(t,Dq)|0,f=f+Math.imul(R,Sq)|0,W=W+Math.imul(R,Cq)|0,W=W+Math.imul(b,Sq)|0,A=A+Math.imul(b,Cq)|0;var O$=(C+f|0)+((W&8191)<<13)|0;C=(A+(W>>>13)|0)+(O$>>>26)|0,O$&=67108863,f=Math.imul(jq,fq),W=Math.imul(jq,Rq),W=W+Math.imul(Oq,fq)|0,A=Math.imul(Oq,Rq),f=f+Math.imul(r,hq)|0,W=W+Math.imul(r,Dq)|0,W=W+Math.imul(i,hq)|0,A=A+Math.imul(i,Dq)|0,f=f+Math.imul(B,Sq)|0,W=W+Math.imul(B,Cq)|0,W=W+Math.imul(t,Sq)|0,A=A+Math.imul(t,Cq)|0,f=f+Math.imul(R,Nq)|0,W=W+Math.imul(R,Gq)|0,W=W+Math.imul(b,Nq)|0,A=A+Math.imul(b,Gq)|0;var h$=(C+f|0)+((W&8191)<<13)|0;C=(A+(W>>>13)|0)+(h$>>>26)|0,h$&=67108863,f=Math.imul(o,fq),W=Math.imul(o,Rq),W=W+Math.imul(U,fq)|0,A=Math.imul(U,Rq),f=f+Math.imul(jq,hq)|0,W=W+Math.imul(jq,Dq)|0,W=W+Math.imul(Oq,hq)|0,A=A+Math.imul(Oq,Dq)|0,f=f+Math.imul(r,Sq)|0,W=W+Math.imul(r,Cq)|0,W=W+Math.imul(i,Sq)|0,A=A+Math.imul(i,Cq)|0,f=f+Math.imul(B,Nq)|0,W=W+Math.imul(B,Gq)|0,W=W+Math.imul(t,Nq)|0,A=A+Math.imul(t,Gq)|0,f=f+Math.imul(R,Iq)|0,W=W+Math.imul(R,Zq)|0,W=W+Math.imul(b,Iq)|0,A=A+Math.imul(b,Zq)|0;var F$=(C+f|0)+((W&8191)<<13)|0;C=(A+(W>>>13)|0)+(F$>>>26)|0,F$&=67108863,f=Math.imul(qq,fq),W=Math.imul(qq,Rq),W=W+Math.imul(s,fq)|0,A=Math.imul(s,Rq),f=f+Math.imul(o,hq)|0,W=W+Math.imul(o,Dq)|0,W=W+Math.imul(U,hq)|0,A=A+Math.imul(U,Dq)|0,f=f+Math.imul(jq,Sq)|0,W=W+Math.imul(jq,Cq)|0,W=W+Math.imul(Oq,Sq)|0,A=A+Math.imul(Oq,Cq)|0,f=f+Math.imul(r,Nq)|0,W=W+Math.imul(r,Gq)|0,W=W+Math.imul(i,Nq)|0,A=A+Math.imul(i,Gq)|0,f=f+Math.imul(B,Iq)|0,W=W+Math.imul(B,Zq)|0,W=W+Math.imul(t,Iq)|0,A=A+Math.imul(t,Zq)|0,f=f+Math.imul(R,x)|0,W=W+Math.imul(R,u)|0,W=W+Math.imul(b,x)|0,A=A+Math.imul(b,u)|0;var t$=(C+f|0)+((W&8191)<<13)|0;C=(A+(W>>>13)|0)+(t$>>>26)|0,t$&=67108863,f=Math.imul(F,fq),W=Math.imul(F,Rq),W=W+Math.imul(_q,fq)|0,A=Math.imul(_q,Rq),f=f+Math.imul(qq,hq)|0,W=W+Math.imul(qq,Dq)|0,W=W+Math.imul(s,hq)|0,A=A+Math.imul(s,Dq)|0,f=f+Math.imul(o,Sq)|0,W=W+Math.imul(o,Cq)|0,W=W+Math.imul(U,Sq)|0,A=A+Math.imul(U,Cq)|0,f=f+Math.imul(jq,Nq)|0,W=W+Math.imul(jq,Gq)|0,W=W+Math.imul(Oq,Nq)|0,A=A+Math.imul(Oq,Gq)|0,f=f+Math.imul(r,Iq)|0,W=W+Math.imul(r,Zq)|0,W=W+Math.imul(i,Iq)|0,A=A+Math.imul(i,Zq)|0,f=f+Math.imul(B,x)|0,W=W+Math.imul(B,u)|0,W=W+Math.imul(t,x)|0,A=A+Math.imul(t,u)|0,f=f+Math.imul(R,Kq)|0,W=W+Math.imul(R,Pq)|0,W=W+Math.imul(b,Kq)|0,A=A+Math.imul(b,Pq)|0;var Q$=(C+f|0)+((W&8191)<<13)|0;C=(A+(W>>>13)|0)+(Q$>>>26)|0,Q$&=67108863,f=Math.imul(Yq,fq),W=Math.imul(Yq,Rq),W=W+Math.imul(Jq,fq)|0,A=Math.imul(Jq,Rq),f=f+Math.imul(F,hq)|0,W=W+Math.imul(F,Dq)|0,W=W+Math.imul(_q,hq)|0,A=A+Math.imul(_q,Dq)|0,f=f+Math.imul(qq,Sq)|0,W=W+Math.imul(qq,Cq)|0,W=W+Math.imul(s,Sq)|0,A=A+Math.imul(s,Cq)|0,f=f+Math.imul(o,Nq)|0,W=W+Math.imul(o,Gq)|0,W=W+Math.imul(U,Nq)|0,A=A+Math.imul(U,Gq)|0,f=f+Math.imul(jq,Iq)|0,W=W+Math.imul(jq,Zq)|0,W=W+Math.imul(Oq,Iq)|0,A=A+Math.imul(Oq,Zq)|0,f=f+Math.imul(r,x)|0,W=W+Math.imul(r,u)|0,W=W+Math.imul(i,x)|0,A=A+Math.imul(i,u)|0,f=f+Math.imul(B,Kq)|0,W=W+Math.imul(B,Pq)|0,W=W+Math.imul(t,Kq)|0,A=A+Math.imul(t,Pq)|0,f=f+Math.imul(R,wq)|0,W=W+Math.imul(R,Aq)|0,W=W+Math.imul(b,wq)|0,A=A+Math.imul(b,Aq)|0;var a$=(C+f|0)+((W&8191)<<13)|0;C=(A+(W>>>13)|0)+(a$>>>26)|0,a$&=67108863,f=Math.imul(Hq,fq),W=Math.imul(Hq,Rq),W=W+Math.imul(Xq,fq)|0,A=Math.imul(Xq,Rq),f=f+Math.imul(Yq,hq)|0,W=W+Math.imul(Yq,Dq)|0,W=W+Math.imul(Jq,hq)|0,A=A+Math.imul(Jq,Dq)|0,f=f+Math.imul(F,Sq)|0,W=W+Math.imul(F,Cq)|0,W=W+Math.imul(_q,Sq)|0,A=A+Math.imul(_q,Cq)|0,f=f+Math.imul(qq,Nq)|0,W=W+Math.imul(qq,Gq)|0,W=W+Math.imul(s,Nq)|0,A=A+Math.imul(s,Gq)|0,f=f+Math.imul(o,Iq)|0,W=W+Math.imul(o,Zq)|0,W=W+Math.imul(U,Iq)|0,A=A+Math.imul(U,Zq)|0,f=f+Math.imul(jq,x)|0,W=W+Math.imul(jq,u)|0,W=W+Math.imul(Oq,x)|0,A=A+Math.imul(Oq,u)|0,f=f+Math.imul(r,Kq)|0,W=W+Math.imul(r,Pq)|0,W=W+Math.imul(i,Kq)|0,A=A+Math.imul(i,Pq)|0,f=f+Math.imul(B,wq)|0,W=W+Math.imul(B,Aq)|0,W=W+Math.imul(t,wq)|0,A=A+Math.imul(t,Aq)|0,f=f+Math.imul(R,Lq)|0,W=W+Math.imul(R,Eq)|0,W=W+Math.imul(b,Lq)|0,A=A+Math.imul(b,Eq)|0;var e$=(C+f|0)+((W&8191)<<13)|0;C=(A+(W>>>13)|0)+(e$>>>26)|0,e$&=67108863,f=Math.imul(vq,fq),W=Math.imul(vq,Rq),W=W+Math.imul(kq,fq)|0,A=Math.imul(kq,Rq),f=f+Math.imul(Hq,hq)|0,W=W+Math.imul(Hq,Dq)|0,W=W+Math.imul(Xq,hq)|0,A=A+Math.imul(Xq,Dq)|0,f=f+Math.imul(Yq,Sq)|0,W=W+Math.imul(Yq,Cq)|0,W=W+Math.imul(Jq,Sq)|0,A=A+Math.imul(Jq,Cq)|0,f=f+Math.imul(F,Nq)|0,W=W+Math.imul(F,Gq)|0,W=W+Math.imul(_q,Nq)|0,A=A+Math.imul(_q,Gq)|0,f=f+Math.imul(qq,Iq)|0,W=W+Math.imul(qq,Zq)|0,W=W+Math.imul(s,Iq)|0,A=A+Math.imul(s,Zq)|0,f=f+Math.imul(o,x)|0,W=W+Math.imul(o,u)|0,W=W+Math.imul(U,x)|0,A=A+Math.imul(U,u)|0,f=f+Math.imul(jq,Kq)|0,W=W+Math.imul(jq,Pq)|0,W=W+Math.imul(Oq,Kq)|0,A=A+Math.imul(Oq,Pq)|0,f=f+Math.imul(r,wq)|0,W=W+Math.imul(r,Aq)|0,W=W+Math.imul(i,wq)|0,A=A+Math.imul(i,Aq)|0,f=f+Math.imul(B,Lq)|0,W=W+Math.imul(B,Eq)|0,W=W+Math.imul(t,Lq)|0,A=A+Math.imul(t,Eq)|0,f=f+Math.imul(R,Vq)|0,W=W+Math.imul(R,Mq)|0,W=W+Math.imul(b,Vq)|0,A=A+Math.imul(b,Mq)|0;var s$=(C+f|0)+((W&8191)<<13)|0;C=(A+(W>>>13)|0)+(s$>>>26)|0,s$&=67108863,f=Math.imul(vq,hq),W=Math.imul(vq,Dq),W=W+Math.imul(kq,hq)|0,A=Math.imul(kq,Dq),f=f+Math.imul(Hq,Sq)|0,W=W+Math.imul(Hq,Cq)|0,W=W+Math.imul(Xq,Sq)|0,A=A+Math.imul(Xq,Cq)|0,f=f+Math.imul(Yq,Nq)|0,W=W+Math.imul(Yq,Gq)|0,W=W+Math.imul(Jq,Nq)|0,A=A+Math.imul(Jq,Gq)|0,f=f+Math.imul(F,Iq)|0,W=W+Math.imul(F,Zq)|0,W=W+Math.imul(_q,Iq)|0,A=A+Math.imul(_q,Zq)|0,f=f+Math.imul(qq,x)|0,W=W+Math.imul(qq,u)|0,W=W+Math.imul(s,x)|0,A=A+Math.imul(s,u)|0,f=f+Math.imul(o,Kq)|0,W=W+Math.imul(o,Pq)|0,W=W+Math.imul(U,Kq)|0,A=A+Math.imul(U,Pq)|0,f=f+Math.imul(jq,wq)|0,W=W+Math.imul(jq,Aq)|0,W=W+Math.imul(Oq,wq)|0,A=A+Math.imul(Oq,Aq)|0,f=f+Math.imul(r,Lq)|0,W=W+Math.imul(r,Eq)|0,W=W+Math.imul(i,Lq)|0,A=A+Math.imul(i,Eq)|0,f=f+Math.imul(B,Vq)|0,W=W+Math.imul(B,Mq)|0,W=W+Math.imul(t,Vq)|0,A=A+Math.imul(t,Mq)|0;var q8=(C+f|0)+((W&8191)<<13)|0;C=(A+(W>>>13)|0)+(q8>>>26)|0,q8&=67108863,f=Math.imul(vq,Sq),W=Math.imul(vq,Cq),W=W+Math.imul(kq,Sq)|0,A=Math.imul(kq,Cq),f=f+Math.imul(Hq,Nq)|0,W=W+Math.imul(Hq,Gq)|0,W=W+Math.imul(Xq,Nq)|0,A=A+Math.imul(Xq,Gq)|0,f=f+Math.imul(Yq,Iq)|0,W=W+Math.imul(Yq,Zq)|0,W=W+Math.imul(Jq,Iq)|0,A=A+Math.imul(Jq,Zq)|0,f=f+Math.imul(F,x)|0,W=W+Math.imul(F,u)|0,W=W+Math.imul(_q,x)|0,A=A+Math.imul(_q,u)|0,f=f+Math.imul(qq,Kq)|0,W=W+Math.imul(qq,Pq)|0,W=W+Math.imul(s,Kq)|0,A=A+Math.imul(s,Pq)|0,f=f+Math.imul(o,wq)|0,W=W+Math.imul(o,Aq)|0,W=W+Math.imul(U,wq)|0,A=A+Math.imul(U,Aq)|0,f=f+Math.imul(jq,Lq)|0,W=W+Math.imul(jq,Eq)|0,W=W+Math.imul(Oq,Lq)|0,A=A+Math.imul(Oq,Eq)|0,f=f+Math.imul(r,Vq)|0,W=W+Math.imul(r,Mq)|0,W=W+Math.imul(i,Vq)|0,A=A+Math.imul(i,Mq)|0;var $8=(C+f|0)+((W&8191)<<13)|0;C=(A+(W>>>13)|0)+($8>>>26)|0,$8&=67108863,f=Math.imul(vq,Nq),W=Math.imul(vq,Gq),W=W+Math.imul(kq,Nq)|0,A=Math.imul(kq,Gq),f=f+Math.imul(Hq,Iq)|0,W=W+Math.imul(Hq,Zq)|0,W=W+Math.imul(Xq,Iq)|0,A=A+Math.imul(Xq,Zq)|0,f=f+Math.imul(Yq,x)|0,W=W+Math.imul(Yq,u)|0,W=W+Math.imul(Jq,x)|0,A=A+Math.imul(Jq,u)|0,f=f+Math.imul(F,Kq)|0,W=W+Math.imul(F,Pq)|0,W=W+Math.imul(_q,Kq)|0,A=A+Math.imul(_q,Pq)|0,f=f+Math.imul(qq,wq)|0,W=W+Math.imul(qq,Aq)|0,W=W+Math.imul(s,wq)|0,A=A+Math.imul(s,Aq)|0,f=f+Math.imul(o,Lq)|0,W=W+Math.imul(o,Eq)|0,W=W+Math.imul(U,Lq)|0,A=A+Math.imul(U,Eq)|0,f=f+Math.imul(jq,Vq)|0,W=W+Math.imul(jq,Mq)|0,W=W+Math.imul(Oq,Vq)|0,A=A+Math.imul(Oq,Mq)|0;var K8=(C+f|0)+((W&8191)<<13)|0;C=(A+(W>>>13)|0)+(K8>>>26)|0,K8&=67108863,f=Math.imul(vq,Iq),W=Math.imul(vq,Zq),W=W+Math.imul(kq,Iq)|0,A=Math.imul(kq,Zq),f=f+Math.imul(Hq,x)|0,W=W+Math.imul(Hq,u)|0,W=W+Math.imul(Xq,x)|0,A=A+Math.imul(Xq,u)|0,f=f+Math.imul(Yq,Kq)|0,W=W+Math.imul(Yq,Pq)|0,W=W+Math.imul(Jq,Kq)|0,A=A+Math.imul(Jq,Pq)|0,f=f+Math.imul(F,wq)|0,W=W+Math.imul(F,Aq)|0,W=W+Math.imul(_q,wq)|0,A=A+Math.imul(_q,Aq)|0,f=f+Math.imul(qq,Lq)|0,W=W+Math.imul(qq,Eq)|0,W=W+Math.imul(s,Lq)|0,A=A+Math.imul(s,Eq)|0,f=f+Math.imul(o,Vq)|0,W=W+Math.imul(o,Mq)|0,W=W+Math.imul(U,Vq)|0,A=A+Math.imul(U,Mq)|0;var _8=(C+f|0)+((W&8191)<<13)|0;C=(A+(W>>>13)|0)+(_8>>>26)|0,_8&=67108863,f=Math.imul(vq,x),W=Math.imul(vq,u),W=W+Math.imul(kq,x)|0,A=Math.imul(kq,u),f=f+Math.imul(Hq,Kq)|0,W=W+Math.imul(Hq,Pq)|0,W=W+Math.imul(Xq,Kq)|0,A=A+Math.imul(Xq,Pq)|0,f=f+Math.imul(Yq,wq)|0,W=W+Math.imul(Yq,Aq)|0,W=W+Math.imul(Jq,wq)|0,A=A+Math.imul(Jq,Aq)|0,f=f+Math.imul(F,Lq)|0,W=W+Math.imul(F,Eq)|0,W=W+Math.imul(_q,Lq)|0,A=A+Math.imul(_q,Eq)|0,f=f+Math.imul(qq,Vq)|0,W=W+Math.imul(qq,Mq)|0,W=W+Math.imul(s,Vq)|0,A=A+Math.imul(s,Mq)|0;var P8=(C+f|0)+((W&8191)<<13)|0;C=(A+(W>>>13)|0)+(P8>>>26)|0,P8&=67108863,f=Math.imul(vq,Kq),W=Math.imul(vq,Pq),W=W+Math.imul(kq,Kq)|0,A=Math.imul(kq,Pq),f=f+Math.imul(Hq,wq)|0,W=W+Math.imul(Hq,Aq)|0,W=W+Math.imul(Xq,wq)|0,A=A+Math.imul(Xq,Aq)|0,f=f+Math.imul(Yq,Lq)|0,W=W+Math.imul(Yq,Eq)|0,W=W+Math.imul(Jq,Lq)|0,A=A+Math.imul(Jq,Eq)|0,f=f+Math.imul(F,Vq)|0,W=W+Math.imul(F,Mq)|0,W=W+Math.imul(_q,Vq)|0,A=A+Math.imul(_q,Mq)|0;var Y8=(C+f|0)+((W&8191)<<13)|0;C=(A+(W>>>13)|0)+(Y8>>>26)|0,Y8&=67108863,f=Math.imul(vq,wq),W=Math.imul(vq,Aq),W=W+Math.imul(kq,wq)|0,A=Math.imul(kq,Aq),f=f+Math.imul(Hq,Lq)|0,W=W+Math.imul(Hq,Eq)|0,W=W+Math.imul(Xq,Lq)|0,A=A+Math.imul(Xq,Eq)|0,f=f+Math.imul(Yq,Vq)|0,W=W+Math.imul(Yq,Mq)|0,W=W+Math.imul(Jq,Vq)|0,A=A+Math.imul(Jq,Mq)|0;var j8=(C+f|0)+((W&8191)<<13)|0;C=(A+(W>>>13)|0)+(j8>>>26)|0,j8&=67108863,f=Math.imul(vq,Lq),W=Math.imul(vq,Eq),W=W+Math.imul(kq,Lq)|0,A=Math.imul(kq,Eq),f=f+Math.imul(Hq,Vq)|0,W=W+Math.imul(Hq,Mq)|0,W=W+Math.imul(Xq,Vq)|0,A=A+Math.imul(Xq,Mq)|0;var O8=(C+f|0)+((W&8191)<<13)|0;C=(A+(W>>>13)|0)+(O8>>>26)|0,O8&=67108863,f=Math.imul(vq,Vq),W=Math.imul(vq,Mq),W=W+Math.imul(kq,Vq)|0,A=Math.imul(kq,Mq);var W8=(C+f|0)+((W&8191)<<13)|0;if(C=(A+(W>>>13)|0)+(W8>>>26)|0,W8&=67108863,V[0]=m$,V[1]=J$,V[2]=O$,V[3]=h$,V[4]=F$,V[5]=t$,V[6]=Q$,V[7]=a$,V[8]=e$,V[9]=s$,V[10]=q8,V[11]=$8,V[12]=K8,V[13]=_8,V[14]=P8,V[15]=Y8,V[16]=j8,V[17]=O8,V[18]=W8,C!==0)V[19]=C,w.length++;return w};if(!Math.imul)h=E;function D(M,j,J){J.negative=j.negative^M.negative,J.length=M.length+j.length;var w=0,z=0;for(var T=0;T<J.length-1;T++){var V=z;z=0;var C=w&67108863,f=Math.min(T,j.length-1);for(var W=Math.max(0,T-M.length+1);W<=f;W++){var A=T-W,L=M.words[A]|0,R=j.words[W]|0,b=L*R,l=b&67108863;V=V+(b/67108864|0)|0,l=l+C|0,C=l&67108863,V=V+(l>>>26)|0,z+=V>>>26,V&=67108863}J.words[T]=C,w=V,V=z}if(w!==0)J.words[T]=w;else J.length--;return J.strip()}function I(M,j,J){var w=new g;return w.mulp(M,j,J)}Y.prototype.mulTo=function(j,J){var w,z=this.length+j.length;if(this.length===10&&j.length===10)w=h(this,j,J);else if(z<63)w=E(this,j,J);else if(z<1024)w=D(this,j,J);else w=I(this,j,J);return w};function g(M,j){this.x=M,this.y=j}g.prototype.makeRBT=function(j){var J=Array(j),w=Y.prototype._countBits(j)-1;for(var z=0;z<j;z++)J[z]=this.revBin(z,w,j);return J},g.prototype.revBin=function(j,J,w){if(j===0||j===w-1)return j;var z=0;for(var T=0;T<J;T++)z|=(j&1)<<J-T-1,j>>=1;return z},g.prototype.permute=function(j,J,w,z,T,V){for(var C=0;C<V;C++)z[C]=J[j[C]],T[C]=w[j[C]]},g.prototype.transform=function(j,J,w,z,T,V){this.permute(V,j,J,w,z,T);for(var C=1;C<T;C<<=1){var f=C<<1,W=Math.cos(2*Math.PI/f),A=Math.sin(2*Math.PI/f);for(var L=0;L<T;L+=f){var R=W,b=A;for(var l=0;l<C;l++){var B=w[L+l],t=z[L+l],Wq=w[L+l+C],r=z[L+l+C],i=R*Wq-b*r;if(r=R*r+b*Wq,Wq=i,w[L+l]=B+Wq,z[L+l]=t+r,w[L+l+C]=B-Wq,z[L+l+C]=t-r,l!==f)i=W*R-A*b,b=W*b+A*R,R=i}}}},g.prototype.guessLen13b=function(j,J){var w=Math.max(J,j)|1,z=w&1,T=0;for(w=w/2|0;w;w=w>>>1)T++;return 1<<T+1+z},g.prototype.conjugate=function(j,J,w){if(w<=1)return;for(var z=0;z<w/2;z++){var T=j[z];j[z]=j[w-z-1],j[w-z-1]=T,T=J[z],J[z]=-J[w-z-1],J[w-z-1]=-T}},g.prototype.normalize13b=function(j,J){var w=0;for(var z=0;z<J/2;z++){var T=Math.round(j[2*z+1]/J)*8192+Math.round(j[2*z]/J)+w;if(j[z]=T&67108863,T<67108864)w=0;else w=T/67108864|0}return j},g.prototype.convert13b=function(j,J,w,z){var T=0;for(var V=0;V<J;V++)T=T+(j[V]|0),w[2*V]=T&8191,T=T>>>13,w[2*V+1]=T&8191,T=T>>>13;for(V=2*J;V<z;++V)w[V]=0;P(T===0),P((T&-8192)===0)},g.prototype.stub=function(j){var J=Array(j);for(var w=0;w<j;w++)J[w]=0;return J},g.prototype.mulp=function(j,J,w){var z=2*this.guessLen13b(j.length,J.length),T=this.makeRBT(z),V=this.stub(z),C=Array(z),f=Array(z),W=Array(z),A=Array(z),L=Array(z),R=Array(z),b=w.words;b.length=z,this.convert13b(j.words,j.length,C,z),this.convert13b(J.words,J.length,A,z),this.transform(C,V,f,W,z,T),this.transform(A,V,L,R,z,T);for(var l=0;l<z;l++){var B=f[l]*L[l]-W[l]*R[l];W[l]=f[l]*R[l]+W[l]*L[l],f[l]=B}return this.conjugate(f,W,z),this.transform(f,W,b,V,z,T),this.conjugate(b,V,z),this.normalize13b(b,z),w.negative=j.negative^J.negative,w.length=j.length+J.length,w.strip()},Y.prototype.mul=function(j){var J=new Y(null);return J.words=Array(this.length+j.length),this.mulTo(j,J)},Y.prototype.mulf=function(j){var J=new Y(null);return J.words=Array(this.length+j.length),I(this,j,J)},Y.prototype.imul=function(j){return this.clone().mulTo(j,this)},Y.prototype.imuln=function(j){P(typeof j==="number"),P(j<67108864);var J=0;for(var w=0;w<this.length;w++){var z=(this.words[w]|0)*j,T=(z&67108863)+(J&67108863);J>>=26,J+=z/67108864|0,J+=T>>>26,this.words[w]=T&67108863}if(J!==0)this.words[w]=J,this.length++;return this.length=j===0?1:this.length,this},Y.prototype.muln=function(j){return this.clone().imuln(j)},Y.prototype.sqr=function(){return this.mul(this)},Y.prototype.isqr=function(){return this.imul(this.clone())},Y.prototype.pow=function(j){var J=N(j);if(J.length===0)return new Y(1);var w=this;for(var z=0;z<J.length;z++,w=w.sqr())if(J[z]!==0)break;if(++z<J.length)for(var T=w.sqr();z<J.length;z++,T=T.sqr()){if(J[z]===0)continue;w=w.mul(T)}return w},Y.prototype.iushln=function(j){P(typeof j==="number"&&j>=0);var J=j%26,w=(j-J)/26,z=67108863>>>26-J<<26-J,T;if(J!==0){var V=0;for(T=0;T<this.length;T++){var C=this.words[T]&z,f=(this.words[T]|0)-C<<J;this.words[T]=f|V,V=C>>>26-J}if(V)this.words[T]=V,this.length++}if(w!==0){for(T=this.length-1;T>=0;T--)this.words[T+w]=this.words[T];for(T=0;T<w;T++)this.words[T]=0;this.length+=w}return this.strip()},Y.prototype.ishln=function(j){return P(this.negative===0),this.iushln(j)},Y.prototype.iushrn=function(j,J,w){P(typeof j==="number"&&j>=0);var z;if(J)z=(J-J%26)/26;else z=0;var T=j%26,V=Math.min((j-T)/26,this.length),C=67108863^67108863>>>T<<T,f=w;if(z-=V,z=Math.max(0,z),f){for(var W=0;W<V;W++)f.words[W]=this.words[W];f.length=V}if(V===0);else if(this.length>V){this.length-=V;for(W=0;W<this.length;W++)this.words[W]=this.words[W+V]}else this.words[0]=0,this.length=1;var A=0;for(W=this.length-1;W>=0&&(A!==0||W>=z);W--){var L=this.words[W]|0;this.words[W]=A<<26-T|L>>>T,A=L&C}if(f&&A!==0)f.words[f.length++]=A;if(this.length===0)this.words[0]=0,this.length=1;return this.strip()},Y.prototype.ishrn=function(j,J,w){return P(this.negative===0),this.iushrn(j,J,w)},Y.prototype.shln=function(j){return this.clone().ishln(j)},Y.prototype.ushln=function(j){return this.clone().iushln(j)},Y.prototype.shrn=function(j){return this.clone().ishrn(j)},Y.prototype.ushrn=function(j){return this.clone().iushrn(j)},Y.prototype.testn=function(j){P(typeof j==="number"&&j>=0);var J=j%26,w=(j-J)/26,z=1<<J;if(this.length<=w)return!1;var T=this.words[w];return!!(T&z)},Y.prototype.imaskn=function(j){P(typeof j==="number"&&j>=0);var J=j%26,w=(j-J)/26;if(P(this.negative===0,"imaskn works only with positive numbers"),this.length<=w)return this;if(J!==0)w++;if(this.length=Math.min(w,this.length),J!==0){var z=67108863^67108863>>>J<<J;this.words[this.length-1]&=z}return this.strip()},Y.prototype.maskn=function(j){return this.clone().imaskn(j)},Y.prototype.iaddn=function(j){if(P(typeof j==="number"),P(j<67108864),j<0)return this.isubn(-j);if(this.negative!==0){if(this.length===1&&(this.words[0]|0)<j)return this.words[0]=j-(this.words[0]|0),this.negative=0,this;return this.negative=0,this.isubn(j),this.negative=1,this}return this._iaddn(j)},Y.prototype._iaddn=function(j){this.words[0]+=j;for(var J=0;J<this.length&&this.words[J]>=67108864;J++)if(this.words[J]-=67108864,J===this.length-1)this.words[J+1]=1;else this.words[J+1]++;return this.length=Math.max(this.length,J+1),this},Y.prototype.isubn=function(j){if(P(typeof j==="number"),P(j<67108864),j<0)return this.iaddn(-j);if(this.negative!==0)return this.negative=0,this.iaddn(j),this.negative=1,this;if(this.words[0]-=j,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var J=0;J<this.length&&this.words[J]<0;J++)this.words[J]+=67108864,this.words[J+1]-=1;return this.strip()},Y.prototype.addn=function(j){return this.clone().iaddn(j)},Y.prototype.subn=function(j){return this.clone().isubn(j)},Y.prototype.iabs=function(){return this.negative=0,this},Y.prototype.abs=function(){return this.clone().iabs()},Y.prototype._ishlnsubmul=function(j,J,w){var z=j.length+w,T;this._expand(z);var V,C=0;for(T=0;T<j.length;T++){V=(this.words[T+w]|0)+C;var f=(j.words[T]|0)*J;V-=f&67108863,C=(V>>26)-(f/67108864|0),this.words[T+w]=V&67108863}for(;T<this.length-w;T++)V=(this.words[T+w]|0)+C,C=V>>26,this.words[T+w]=V&67108863;if(C===0)return this.strip();P(C===-1),C=0;for(T=0;T<this.length;T++)V=-(this.words[T]|0)+C,C=V>>26,this.words[T]=V&67108863;return this.negative=1,this.strip()},Y.prototype._wordDiv=function(j,J){var w=this.length-j.length,z=this.clone(),T=j,V=T.words[T.length-1]|0,C=this._countBits(V);if(w=26-C,w!==0)T=T.ushln(w),z.iushln(w),V=T.words[T.length-1]|0;var f=z.length-T.length,W;if(J!=="mod"){W=new Y(null),W.length=f+1,W.words=Array(W.length);for(var A=0;A<W.length;A++)W.words[A]=0}var L=z.clone()._ishlnsubmul(T,1,f);if(L.negative===0){if(z=L,W)W.words[f]=1}for(var R=f-1;R>=0;R--){var b=(z.words[T.length+R]|0)*67108864+(z.words[T.length+R-1]|0);b=Math.min(b/V|0,67108863),z._ishlnsubmul(T,b,R);while(z.negative!==0)if(b--,z.negative=0,z._ishlnsubmul(T,1,R),!z.isZero())z.negative^=1;if(W)W.words[R]=b}if(W)W.strip();if(z.strip(),J!=="div"&&w!==0)z.iushrn(w);return{div:W||null,mod:z}},Y.prototype.divmod=function(j,J,w){if(P(!j.isZero()),this.isZero())return{div:new Y(0),mod:new Y(0)};var z,T,V;if(this.negative!==0&&j.negative===0){if(V=this.neg().divmod(j,J),J!=="mod")z=V.div.neg();if(J!=="div"){if(T=V.mod.neg(),w&&T.negative!==0)T.iadd(j)}return{div:z,mod:T}}if(this.negative===0&&j.negative!==0){if(V=this.divmod(j.neg(),J),J!=="mod")z=V.div.neg();return{div:z,mod:V.mod}}if((this.negative&j.negative)!==0){if(V=this.neg().divmod(j.neg(),J),J!=="div"){if(T=V.mod.neg(),w&&T.negative!==0)T.isub(j)}return{div:V.div,mod:T}}if(j.length>this.length||this.cmp(j)<0)return{div:new Y(0),mod:this};if(j.length===1){if(J==="div")return{div:this.divn(j.words[0]),mod:null};if(J==="mod")return{div:null,mod:new Y(this.modn(j.words[0]))};return{div:this.divn(j.words[0]),mod:new Y(this.modn(j.words[0]))}}return this._wordDiv(j,J)},Y.prototype.div=function(j){return this.divmod(j,"div",!1).div},Y.prototype.mod=function(j){return this.divmod(j,"mod",!1).mod},Y.prototype.umod=function(j){return this.divmod(j,"mod",!0).mod},Y.prototype.divRound=function(j){var J=this.divmod(j);if(J.mod.isZero())return J.div;var w=J.div.negative!==0?J.mod.isub(j):J.mod,z=j.ushrn(1),T=j.andln(1),V=w.cmp(z);if(V<0||T===1&&V===0)return J.div;return J.div.negative!==0?J.div.isubn(1):J.div.iaddn(1)},Y.prototype.modn=function(j){P(j<=67108863);var J=67108864%j,w=0;for(var z=this.length-1;z>=0;z--)w=(J*w+(this.words[z]|0))%j;return w},Y.prototype.idivn=function(j){P(j<=67108863);var J=0;for(var w=this.length-1;w>=0;w--){var z=(this.words[w]|0)+J*67108864;this.words[w]=z/j|0,J=z%j}return this.strip()},Y.prototype.divn=function(j){return this.clone().idivn(j)},Y.prototype.egcd=function(j){P(j.negative===0),P(!j.isZero());var J=this,w=j.clone();if(J.negative!==0)J=J.umod(j);else J=J.clone();var z=new Y(1),T=new Y(0),V=new Y(0),C=new Y(1),f=0;while(J.isEven()&&w.isEven())J.iushrn(1),w.iushrn(1),++f;var W=w.clone(),A=J.clone();while(!J.isZero()){for(var L=0,R=1;(J.words[0]&R)===0&&L<26;++L,R<<=1);if(L>0){J.iushrn(L);while(L-- >0){if(z.isOdd()||T.isOdd())z.iadd(W),T.isub(A);z.iushrn(1),T.iushrn(1)}}for(var b=0,l=1;(w.words[0]&l)===0&&b<26;++b,l<<=1);if(b>0){w.iushrn(b);while(b-- >0){if(V.isOdd()||C.isOdd())V.iadd(W),C.isub(A);V.iushrn(1),C.iushrn(1)}}if(J.cmp(w)>=0)J.isub(w),z.isub(V),T.isub(C);else w.isub(J),V.isub(z),C.isub(T)}return{a:V,b:C,gcd:w.iushln(f)}},Y.prototype._invmp=function(j){P(j.negative===0),P(!j.isZero());var J=this,w=j.clone();if(J.negative!==0)J=J.umod(j);else J=J.clone();var z=new Y(1),T=new Y(0),V=w.clone();while(J.cmpn(1)>0&&w.cmpn(1)>0){for(var C=0,f=1;(J.words[0]&f)===0&&C<26;++C,f<<=1);if(C>0){J.iushrn(C);while(C-- >0){if(z.isOdd())z.iadd(V);z.iushrn(1)}}for(var W=0,A=1;(w.words[0]&A)===0&&W<26;++W,A<<=1);if(W>0){w.iushrn(W);while(W-- >0){if(T.isOdd())T.iadd(V);T.iushrn(1)}}if(J.cmp(w)>=0)J.isub(w),z.isub(T);else w.isub(J),T.isub(z)}var L;if(J.cmpn(1)===0)L=z;else L=T;if(L.cmpn(0)<0)L.iadd(j);return L},Y.prototype.gcd=function(j){if(this.isZero())return j.abs();if(j.isZero())return this.abs();var J=this.clone(),w=j.clone();J.negative=0,w.negative=0;for(var z=0;J.isEven()&&w.isEven();z++)J.iushrn(1),w.iushrn(1);do{while(J.isEven())J.iushrn(1);while(w.isEven())w.iushrn(1);var T=J.cmp(w);if(T<0){var V=J;J=w,w=V}else if(T===0||w.cmpn(1)===0)break;J.isub(w)}while(!0);return w.iushln(z)},Y.prototype.invm=function(j){return this.egcd(j).a.umod(j)},Y.prototype.isEven=function(){return(this.words[0]&1)===0},Y.prototype.isOdd=function(){return(this.words[0]&1)===1},Y.prototype.andln=function(j){return this.words[0]&j},Y.prototype.bincn=function(j){P(typeof j==="number");var J=j%26,w=(j-J)/26,z=1<<J;if(this.length<=w)return this._expand(w+1),this.words[w]|=z,this;var T=z;for(var V=w;T!==0&&V<this.length;V++){var C=this.words[V]|0;C+=T,T=C>>>26,C&=67108863,this.words[V]=C}if(T!==0)this.words[V]=T,this.length++;return this},Y.prototype.isZero=function(){return this.length===1&&this.words[0]===0},Y.prototype.cmpn=function(j){var J=j<0;if(this.negative!==0&&!J)return-1;if(this.negative===0&&J)return 1;this.strip();var w;if(this.length>1)w=1;else{if(J)j=-j;P(j<=67108863,"Number is too big");var z=this.words[0]|0;w=z===j?0:z<j?-1:1}if(this.negative!==0)return-w|0;return w},Y.prototype.cmp=function(j){if(this.negative!==0&&j.negative===0)return-1;if(this.negative===0&&j.negative!==0)return 1;var J=this.ucmp(j);if(this.negative!==0)return-J|0;return J},Y.prototype.ucmp=function(j){if(this.length>j.length)return 1;if(this.length<j.length)return-1;var J=0;for(var w=this.length-1;w>=0;w--){var z=this.words[w]|0,T=j.words[w]|0;if(z===T)continue;if(z<T)J=-1;else if(z>T)J=1;break}return J},Y.prototype.gtn=function(j){return this.cmpn(j)===1},Y.prototype.gt=function(j){return this.cmp(j)===1},Y.prototype.gten=function(j){return this.cmpn(j)>=0},Y.prototype.gte=function(j){return this.cmp(j)>=0},Y.prototype.ltn=function(j){return this.cmpn(j)===-1},Y.prototype.lt=function(j){return this.cmp(j)===-1},Y.prototype.lten=function(j){return this.cmpn(j)<=0},Y.prototype.lte=function(j){return this.cmp(j)<=0},Y.prototype.eqn=function(j){return this.cmpn(j)===0},Y.prototype.eq=function(j){return this.cmp(j)===0},Y.red=function(j){return new d(j)},Y.prototype.toRed=function(j){return P(!this.red,"Already a number in reduction context"),P(this.negative===0,"red works only with positives"),j.convertTo(this)._forceRed(j)},Y.prototype.fromRed=function(){return P(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},Y.prototype._forceRed=function(j){return this.red=j,this},Y.prototype.forceRed=function(j){return P(!this.red,"Already a number in reduction context"),this._forceRed(j)},Y.prototype.redAdd=function(j){return P(this.red,"redAdd works only with red numbers"),this.red.add(this,j)},Y.prototype.redIAdd=function(j){return P(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,j)},Y.prototype.redSub=function(j){return P(this.red,"redSub works only with red numbers"),this.red.sub(this,j)},Y.prototype.redISub=function(j){return P(this.red,"redISub works only with red numbers"),this.red.isub(this,j)},Y.prototype.redShl=function(j){return P(this.red,"redShl works only with red numbers"),this.red.shl(this,j)},Y.prototype.redMul=function(j){return P(this.red,"redMul works only with red numbers"),this.red._verify2(this,j),this.red.mul(this,j)},Y.prototype.redIMul=function(j){return P(this.red,"redMul works only with red numbers"),this.red._verify2(this,j),this.red.imul(this,j)},Y.prototype.redSqr=function(){return P(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},Y.prototype.redISqr=function(){return P(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},Y.prototype.redSqrt=function(){return P(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},Y.prototype.redInvm=function(){return P(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},Y.prototype.redNeg=function(){return P(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},Y.prototype.redPow=function(j){return P(this.red&&!j.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,j)};var y={k256:null,p224:null,p192:null,p25519:null};function p(M,j){this.name=M,this.p=new Y(j,16),this.n=this.p.bitLength(),this.k=new Y(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}p.prototype._tmp=function(){var j=new Y(null);return j.words=Array(Math.ceil(this.n/13)),j},p.prototype.ireduce=function(j){var J=j,w;do this.split(J,this.tmp),J=this.imulK(J),J=J.iadd(this.tmp),w=J.bitLength();while(w>this.n);var z=w<this.n?-1:J.ucmp(this.p);if(z===0)J.words[0]=0,J.length=1;else if(z>0)J.isub(this.p);else if(J.strip!==void 0)J.strip();else J._strip();return J},p.prototype.split=function(j,J){j.iushrn(this.n,0,J)},p.prototype.imulK=function(j){return j.imul(this.k)};function m(){p.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}O(m,p),m.prototype.split=function(j,J){var w=4194303,z=Math.min(j.length,9);for(var T=0;T<z;T++)J.words[T]=j.words[T];if(J.length=z,j.length<=9){j.words[0]=0,j.length=1;return}var V=j.words[9];J.words[J.length++]=V&w;for(T=10;T<j.length;T++){var C=j.words[T]|0;j.words[T-10]=(C&w)<<4|V>>>22,V=C}if(V>>>=22,j.words[T-10]=V,V===0&&j.length>10)j.length-=10;else j.length-=9},m.prototype.imulK=function(j){j.words[j.length]=0,j.words[j.length+1]=0,j.length+=2;var J=0;for(var w=0;w<j.length;w++){var z=j.words[w]|0;J+=z*977,j.words[w]=J&67108863,J=z*64+(J/67108864|0)}if(j.words[j.length-1]===0){if(j.length--,j.words[j.length-1]===0)j.length--}return j};function c(){p.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}O(c,p);function $q(){p.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}O($q,p);function e(){p.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}O(e,p),e.prototype.imulK=function(j){var J=0;for(var w=0;w<j.length;w++){var z=(j.words[w]|0)*19+J,T=z&67108863;z>>>=26,j.words[w]=T,J=z}if(J!==0)j.words[j.length++]=J;return j},Y._prime=function(j){if(y[j])return y[j];var J;if(j==="k256")J=new m;else if(j==="p224")J=new c;else if(j==="p192")J=new $q;else if(j==="p25519")J=new e;else throw Error("Unknown prime "+j);return y[j]=J,J};function d(M){if(typeof M==="string"){var j=Y._prime(M);this.m=j.p,this.prime=j}else P(M.gtn(1),"modulus must be greater than 1"),this.m=M,this.prime=null}d.prototype._verify1=function(j){P(j.negative===0,"red works only with positives"),P(j.red,"red works only with red numbers")},d.prototype._verify2=function(j,J){P((j.negative|J.negative)===0,"red works only with positives"),P(j.red&&j.red===J.red,"red works only with red numbers")},d.prototype.imod=function(j){if(this.prime)return this.prime.ireduce(j)._forceRed(this);return j.umod(this.m)._forceRed(this)},d.prototype.neg=function(j){if(j.isZero())return j.clone();return this.m.sub(j)._forceRed(this)},d.prototype.add=function(j,J){this._verify2(j,J);var w=j.add(J);if(w.cmp(this.m)>=0)w.isub(this.m);return w._forceRed(this)},d.prototype.iadd=function(j,J){this._verify2(j,J);var w=j.iadd(J);if(w.cmp(this.m)>=0)w.isub(this.m);return w},d.prototype.sub=function(j,J){this._verify2(j,J);var w=j.sub(J);if(w.cmpn(0)<0)w.iadd(this.m);return w._forceRed(this)},d.prototype.isub=function(j,J){this._verify2(j,J);var w=j.isub(J);if(w.cmpn(0)<0)w.iadd(this.m);return w},d.prototype.shl=function(j,J){return this._verify1(j),this.imod(j.ushln(J))},d.prototype.imul=function(j,J){return this._verify2(j,J),this.imod(j.imul(J))},d.prototype.mul=function(j,J){return this._verify2(j,J),this.imod(j.mul(J))},d.prototype.isqr=function(j){return this.imul(j,j.clone())},d.prototype.sqr=function(j){return this.mul(j,j)},d.prototype.sqrt=function(j){if(j.isZero())return j.clone();var J=this.m.andln(3);if(P(J%2===1),J===3){var w=this.m.add(new Y(1)).iushrn(2);return this.pow(j,w)}var z=this.m.subn(1),T=0;while(!z.isZero()&&z.andln(1)===0)T++,z.iushrn(1);P(!z.isZero());var V=new Y(1).toRed(this),C=V.redNeg(),f=this.m.subn(1).iushrn(1),W=this.m.bitLength();W=new Y(2*W*W).toRed(this);while(this.pow(W,f).cmp(C)!==0)W.redIAdd(C);var A=this.pow(W,z),L=this.pow(j,z.addn(1).iushrn(1)),R=this.pow(j,z),b=T;while(R.cmp(V)!==0){var l=R;for(var B=0;l.cmp(V)!==0;B++)l=l.redSqr();P(B<b);var t=this.pow(A,new Y(1).iushln(b-B-1));L=L.redMul(t),A=t.redSqr(),R=R.redMul(A),b=B}return L},d.prototype.invm=function(j){var J=j._invmp(this.m);if(J.negative!==0)return J.negative=0,this.imod(J).redNeg();else return this.imod(J)},d.prototype.pow=function(j,J){if(J.isZero())return new Y(1).toRed(this);if(J.cmpn(1)===0)return j.clone();var w=4,z=Array(1<<w);z[0]=new Y(1).toRed(this),z[1]=j;for(var T=2;T<z.length;T++)z[T]=this.mul(z[T-1],j);var V=z[0],C=0,f=0,W=J.bitLength()%26;if(W===0)W=26;for(T=J.length-1;T>=0;T--){var A=J.words[T];for(var L=W-1;L>=0;L--){var R=A>>L&1;if(V!==z[0])V=this.sqr(V);if(R===0&&C===0){f=0;continue}if(C<<=1,C|=R,f++,f!==w&&(T!==0||L!==0))continue;V=this.mul(V,z[C]),f=0,C=0}W=26}return V},d.prototype.convertTo=function(j){var J=j.umod(this.m);return J===j?J.clone():J},d.prototype.convertFrom=function(j){var J=j.clone();return J.red=null,J},Y.mont=function(j){return new n(j)};function n(M){if(d.call(this,M),this.shift=this.m.bitLength(),this.shift%26!==0)this.shift+=26-this.shift%26;this.r=new Y(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}O(n,d),n.prototype.convertTo=function(j){return this.imod(j.ushln(this.shift))},n.prototype.convertFrom=function(j){var J=this.imod(j.mul(this.rinv));return J.red=null,J},n.prototype.imul=function(j,J){if(j.isZero()||J.isZero())return j.words[0]=0,j.length=1,j;var w=j.imul(J),z=w.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),T=w.isub(z).iushrn(this.shift),V=T;if(T.cmp(this.m)>=0)V=T.isub(this.m);else if(T.cmpn(0)<0)V=T.iadd(this.m);return V._forceRed(this)},n.prototype.mul=function(j,J){if(j.isZero()||J.isZero())return new Y(0)._forceRed(this);var w=j.mul(J),z=w.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),T=w.isub(z).iushrn(this.shift),V=T;if(T.cmp(this.m)>=0)V=T.isub(this.m);else if(T.cmpn(0)<0)V=T.iadd(this.m);return V._forceRed(this)},n.prototype.invm=function(j){var J=this.imod(j._invmp(this.m).mul(this.r2));return J._forceRed(this)}})(typeof $>"u"||$,q)}),gf=lq((q,$)=>{var K=_j(),_=s8().Buffer;function P(O,Y){return _.from(O.toRed(K.mont(Y.modulus)).redPow(new K(Y.publicExponent)).fromRed().toArray())}$.exports=P}),Rg=lq((q,$)=>{(function(K,_){function P(w,z){if(!w)throw Error(z||"Assertion failed")}function O(w,z){w.super_=z;var T=function(){};T.prototype=z.prototype,w.prototype=new T,w.prototype.constructor=w}function Y(w,z,T){if(Y.isBN(w))return w;if(this.negative=0,this.words=null,this.length=0,this.red=null,w!==null){if(z==="le"||z==="be")T=z,z=10;this._init(w||0,z||10,T||"be")}}if(typeof K==="object")K.exports=Y;else _.BN=Y;Y.BN=Y,Y.wordSize=26;var H;try{if(typeof window<"u"&&typeof window.Buffer<"u")H=window.Buffer;else H=(T8(),M$(w8)).Buffer}catch(w){}Y.isBN=function(z){if(z instanceof Y)return!0;return z!==null&&typeof z==="object"&&z.constructor.wordSize===Y.wordSize&&Array.isArray(z.words)},Y.max=function(z,T){if(z.cmp(T)>0)return z;return T},Y.min=function(z,T){if(z.cmp(T)<0)return z;return T},Y.prototype._init=function(z,T,V){if(typeof z==="number")return this._initNumber(z,T,V);if(typeof z==="object")return this._initArray(z,T,V);if(T==="hex")T=16;P(T===(T|0)&&T>=2&&T<=36),z=z.toString().replace(/\s+/g,"");var C=0;if(z[0]==="-")C++,this.negative=1;if(C<z.length){if(T===16)this._parseHex(z,C,V);else if(this._parseBase(z,T,C),V==="le")this._initArray(this.toArray(),T,V)}},Y.prototype._initNumber=function(z,T,V){if(z<0)this.negative=1,z=-z;if(z<67108864)this.words=[z&67108863],this.length=1;else if(z<4503599627370496)this.words=[z&67108863,z/67108864&67108863],this.length=2;else P(z<9007199254740992),this.words=[z&67108863,z/67108864&67108863,1],this.length=3;if(V!=="le")return;this._initArray(this.toArray(),T,V)},Y.prototype._initArray=function(z,T,V){if(P(typeof z.length==="number"),z.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(z.length/3),this.words=Array(this.length);for(var C=0;C<this.length;C++)this.words[C]=0;var f,W,A=0;if(V==="be"){for(C=z.length-1,f=0;C>=0;C-=3)if(W=z[C]|z[C-1]<<8|z[C-2]<<16,this.words[f]|=W<<A&67108863,this.words[f+1]=W>>>26-A&67108863,A+=24,A>=26)A-=26,f++}else if(V==="le"){for(C=0,f=0;C<z.length;C+=3)if(W=z[C]|z[C+1]<<8|z[C+2]<<16,this.words[f]|=W<<A&67108863,this.words[f+1]=W>>>26-A&67108863,A+=24,A>=26)A-=26,f++}return this._strip()};function v(w,z){var T=w.charCodeAt(z);if(T>=48&&T<=57)return T-48;else if(T>=65&&T<=70)return T-55;else if(T>=97&&T<=102)return T-87;else P(!1,"Invalid character in "+w)}function X(w,z,T){var V=v(w,T);if(T-1>=z)V|=v(w,T-1)<<4;return V}Y.prototype._parseHex=function(z,T,V){this.length=Math.ceil((z.length-T)/6),this.words=Array(this.length);for(var C=0;C<this.length;C++)this.words[C]=0;var f=0,W=0,A;if(V==="be")for(C=z.length-1;C>=T;C-=2)if(A=X(z,T,C)<<f,this.words[W]|=A&67108863,f>=18)f-=18,W+=1,this.words[W]|=A>>>26;else f+=8;else{var L=z.length-T;for(C=L%2===0?T+1:T;C<z.length;C+=2)if(A=X(z,T,C)<<f,this.words[W]|=A&67108863,f>=18)f-=18,W+=1,this.words[W]|=A>>>26;else f+=8}this._strip()};function Z(w,z,T,V){var C=0,f=0,W=Math.min(w.length,T);for(var A=z;A<W;A++){var L=w.charCodeAt(A)-48;if(C*=V,L>=49)f=L-49+10;else if(L>=17)f=L-17+10;else f=L;P(L>=0&&f<V,"Invalid character"),C+=f}return C}Y.prototype._parseBase=function(z,T,V){this.words=[0],this.length=1;for(var C=0,f=1;f<=67108863;f*=T)C++;C--,f=f/T|0;var W=z.length-V,A=W%C,L=Math.min(W,W-A)+V,R=0;for(var b=V;b<L;b+=C)if(R=Z(z,b,b+C,T),this.imuln(f),this.words[0]+R<67108864)this.words[0]+=R;else this._iaddn(R);if(A!==0){var l=1;R=Z(z,b,z.length,T);for(b=0;b<A;b++)l*=T;if(this.imuln(l),this.words[0]+R<67108864)this.words[0]+=R;else this._iaddn(R)}this._strip()},Y.prototype.copy=function(z){z.words=Array(this.length);for(var T=0;T<this.length;T++)z.words[T]=this.words[T];z.length=this.length,z.negative=this.negative,z.red=this.red};function k(w,z){w.words=z.words,w.length=z.length,w.negative=z.negative,w.red=z.red}if(Y.prototype._move=function(z){k(z,this)},Y.prototype.clone=function(){var z=new Y(null);return this.copy(z),z},Y.prototype._expand=function(z){while(this.length<z)this.words[this.length++]=0;return this},Y.prototype._strip=function(){while(this.length>1&&this.words[this.length-1]===0)this.length--;return this._normSign()},Y.prototype._normSign=function(){if(this.length===1&&this.words[0]===0)this.negative=0;return this},typeof Symbol<"u"&&typeof Symbol.for==="function")try{Y.prototype[Symbol.for("nodejs.util.inspect.custom")]=G}catch(w){Y.prototype.inspect=G}else Y.prototype.inspect=G;function G(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var S=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],N=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],E=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64000000,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,24300000,28629151,33554432,39135393,45435424,52521875,60466176];if(Y.prototype.toString=function(z,T){z=z||10,T=T|0||1;var V;if(z===16||z==="hex"){V="";var C=0,f=0;for(var W=0;W<this.length;W++){var A=this.words[W],L=((A<<C|f)&16777215).toString(16);if(f=A>>>24-C&16777215,C+=2,C>=26)C-=26,W--;if(f!==0||W!==this.length-1)V=S[6-L.length]+L+V;else V=L+V}if(f!==0)V=f.toString(16)+V;while(V.length%T!==0)V="0"+V;if(this.negative!==0)V="-"+V;return V}if(z===(z|0)&&z>=2&&z<=36){var R=N[z],b=E[z];V="";var l=this.clone();l.negative=0;while(!l.isZero()){var B=l.modrn(b).toString(z);if(l=l.idivn(b),!l.isZero())V=S[R-B.length]+B+V;else V=B+V}if(this.isZero())V="0"+V;while(V.length%T!==0)V="0"+V;if(this.negative!==0)V="-"+V;return V}P(!1,"Base should be between 2 and 36")},Y.prototype.toNumber=function(){var z=this.words[0];if(this.length===2)z+=this.words[1]*67108864;else if(this.length===3&&this.words[2]===1)z+=4503599627370496+this.words[1]*67108864;else if(this.length>2)P(!1,"Number can only safely store up to 53 bits");return this.negative!==0?-z:z},Y.prototype.toJSON=function(){return this.toString(16,2)},H)Y.prototype.toBuffer=function(z,T){return this.toArrayLike(H,z,T)};Y.prototype.toArray=function(z,T){return this.toArrayLike(Array,z,T)};var h=function(z,T){if(z.allocUnsafe)return z.allocUnsafe(T);return new z(T)};if(Y.prototype.toArrayLike=function(z,T,V){this._strip();var C=this.byteLength(),f=V||Math.max(1,C);P(C<=f,"byte array longer than desired length"),P(f>0,"Requested array length <= 0");var W=h(z,f),A=T==="le"?"LE":"BE";return this["_toArrayLike"+A](W,C),W},Y.prototype._toArrayLikeLE=function(z,T){var V=0,C=0;for(var f=0,W=0;f<this.length;f++){var A=this.words[f]<<W|C;if(z[V++]=A&255,V<z.length)z[V++]=A>>8&255;if(V<z.length)z[V++]=A>>16&255;if(W===6){if(V<z.length)z[V++]=A>>24&255;C=0,W=0}else C=A>>>24,W+=2}if(V<z.length){z[V++]=C;while(V<z.length)z[V++]=0}},Y.prototype._toArrayLikeBE=function(z,T){var V=z.length-1,C=0;for(var f=0,W=0;f<this.length;f++){var A=this.words[f]<<W|C;if(z[V--]=A&255,V>=0)z[V--]=A>>8&255;if(V>=0)z[V--]=A>>16&255;if(W===6){if(V>=0)z[V--]=A>>24&255;C=0,W=0}else C=A>>>24,W+=2}if(V>=0){z[V--]=C;while(V>=0)z[V--]=0}},Math.clz32)Y.prototype._countBits=function(z){return 32-Math.clz32(z)};else Y.prototype._countBits=function(z){var T=z,V=0;if(T>=4096)V+=13,T>>>=13;if(T>=64)V+=7,T>>>=7;if(T>=8)V+=4,T>>>=4;if(T>=2)V+=2,T>>>=2;return V+T};Y.prototype._zeroBits=function(z){if(z===0)return 26;var T=z,V=0;if((T&8191)===0)V+=13,T>>>=13;if((T&127)===0)V+=7,T>>>=7;if((T&15)===0)V+=4,T>>>=4;if((T&3)===0)V+=2,T>>>=2;if((T&1)===0)V++;return V},Y.prototype.bitLength=function(){var z=this.words[this.length-1],T=this._countBits(z);return(this.length-1)*26+T};function D(w){var z=Array(w.bitLength());for(var T=0;T<z.length;T++){var V=T/26|0,C=T%26;z[T]=w.words[V]>>>C&1}return z}Y.prototype.zeroBits=function(){if(this.isZero())return 0;var z=0;for(var T=0;T<this.length;T++){var V=this._zeroBits(this.words[T]);if(z+=V,V!==26)break}return z},Y.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},Y.prototype.toTwos=function(z){if(this.negative!==0)return this.abs().inotn(z).iaddn(1);return this.clone()},Y.prototype.fromTwos=function(z){if(this.testn(z-1))return this.notn(z).iaddn(1).ineg();return this.clone()},Y.prototype.isNeg=function(){return this.negative!==0},Y.prototype.neg=function(){return this.clone().ineg()},Y.prototype.ineg=function(){if(!this.isZero())this.negative^=1;return this},Y.prototype.iuor=function(z){while(this.length<z.length)this.words[this.length++]=0;for(var T=0;T<z.length;T++)this.words[T]=this.words[T]|z.words[T];return this._strip()},Y.prototype.ior=function(z){return P((this.negative|z.negative)===0),this.iuor(z)},Y.prototype.or=function(z){if(this.length>z.length)return this.clone().ior(z);return z.clone().ior(this)},Y.prototype.uor=function(z){if(this.length>z.length)return this.clone().iuor(z);return z.clone().iuor(this)},Y.prototype.iuand=function(z){var T;if(this.length>z.length)T=z;else T=this;for(var V=0;V<T.length;V++)this.words[V]=this.words[V]&z.words[V];return this.length=T.length,this._strip()},Y.prototype.iand=function(z){return P((this.negative|z.negative)===0),this.iuand(z)},Y.prototype.and=function(z){if(this.length>z.length)return this.clone().iand(z);return z.clone().iand(this)},Y.prototype.uand=function(z){if(this.length>z.length)return this.clone().iuand(z);return z.clone().iuand(this)},Y.prototype.iuxor=function(z){var T,V;if(this.length>z.length)T=this,V=z;else T=z,V=this;for(var C=0;C<V.length;C++)this.words[C]=T.words[C]^V.words[C];if(this!==T)for(;C<T.length;C++)this.words[C]=T.words[C];return this.length=T.length,this._strip()},Y.prototype.ixor=function(z){return P((this.negative|z.negative)===0),this.iuxor(z)},Y.prototype.xor=function(z){if(this.length>z.length)return this.clone().ixor(z);return z.clone().ixor(this)},Y.prototype.uxor=function(z){if(this.length>z.length)return this.clone().iuxor(z);return z.clone().iuxor(this)},Y.prototype.inotn=function(z){P(typeof z==="number"&&z>=0);var T=Math.ceil(z/26)|0,V=z%26;if(this._expand(T),V>0)T--;for(var C=0;C<T;C++)this.words[C]=~this.words[C]&67108863;if(V>0)this.words[C]=~this.words[C]&67108863>>26-V;return this._strip()},Y.prototype.notn=function(z){return this.clone().inotn(z)},Y.prototype.setn=function(z,T){P(typeof z==="number"&&z>=0);var V=z/26|0,C=z%26;if(this._expand(V+1),T)this.words[V]=this.words[V]|1<<C;else this.words[V]=this.words[V]&~(1<<C);return this._strip()},Y.prototype.iadd=function(z){var T;if(this.negative!==0&&z.negative===0)return this.negative=0,T=this.isub(z),this.negative^=1,this._normSign();else if(this.negative===0&&z.negative!==0)return z.negative=0,T=this.isub(z),z.negative=1,T._normSign();var V,C;if(this.length>z.length)V=this,C=z;else V=z,C=this;var f=0;for(var W=0;W<C.length;W++)T=(V.words[W]|0)+(C.words[W]|0)+f,this.words[W]=T&67108863,f=T>>>26;for(;f!==0&&W<V.length;W++)T=(V.words[W]|0)+f,this.words[W]=T&67108863,f=T>>>26;if(this.length=V.length,f!==0)this.words[this.length]=f,this.length++;else if(V!==this)for(;W<V.length;W++)this.words[W]=V.words[W];return this},Y.prototype.add=function(z){var T;if(z.negative!==0&&this.negative===0)return z.negative=0,T=this.sub(z),z.negative^=1,T;else if(z.negative===0&&this.negative!==0)return this.negative=0,T=z.sub(this),this.negative=1,T;if(this.length>z.length)return this.clone().iadd(z);return z.clone().iadd(this)},Y.prototype.isub=function(z){if(z.negative!==0){z.negative=0;var T=this.iadd(z);return z.negative=1,T._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(z),this.negative=1,this._normSign();var V=this.cmp(z);if(V===0)return this.negative=0,this.length=1,this.words[0]=0,this;var C,f;if(V>0)C=this,f=z;else C=z,f=this;var W=0;for(var A=0;A<f.length;A++)T=(C.words[A]|0)-(f.words[A]|0)+W,W=T>>26,this.words[A]=T&67108863;for(;W!==0&&A<C.length;A++)T=(C.words[A]|0)+W,W=T>>26,this.words[A]=T&67108863;if(W===0&&A<C.length&&C!==this)for(;A<C.length;A++)this.words[A]=C.words[A];if(this.length=Math.max(this.length,A),C!==this)this.negative=1;return this._strip()},Y.prototype.sub=function(z){return this.clone().isub(z)};function I(w,z,T){T.negative=z.negative^w.negative;var V=w.length+z.length|0;T.length=V,V=V-1|0;var C=w.words[0]|0,f=z.words[0]|0,W=C*f,A=W&67108863,L=W/67108864|0;T.words[0]=A;for(var R=1;R<V;R++){var b=L>>>26,l=L&67108863,B=Math.min(R,z.length-1);for(var t=Math.max(0,R-w.length+1);t<=B;t++){var Wq=R-t|0;C=w.words[Wq]|0,f=z.words[t]|0,W=C*f+l,b+=W/67108864|0,l=W&67108863}T.words[R]=l|0,L=b|0}if(L!==0)T.words[R]=L|0;else T.length--;return T._strip()}var g=function(z,T,V){var C=z.words,f=T.words,W=V.words,A=0,L,R,b,l=C[0]|0,B=l&8191,t=l>>>13,Wq=C[1]|0,r=Wq&8191,i=Wq>>>13,gq=C[2]|0,jq=gq&8191,Oq=gq>>>13,Q=C[3]|0,o=Q&8191,U=Q>>>13,yq=C[4]|0,qq=yq&8191,s=yq>>>13,a=C[5]|0,F=a&8191,_q=a>>>13,Tq=C[6]|0,Yq=Tq&8191,Jq=Tq>>>13,z$=C[7]|0,Hq=z$&8191,Xq=z$>>>13,N$=C[8]|0,vq=N$&8191,kq=N$>>>13,o$=C[9]|0,fq=o$&8191,Rq=o$>>>13,X8=f[0]|0,hq=X8&8191,Dq=X8>>>13,h8=f[1]|0,Sq=h8&8191,Cq=h8>>>13,D8=f[2]|0,Nq=D8&8191,Gq=D8>>>13,I8=f[3]|0,Iq=I8&8191,Zq=I8>>>13,f8=f[4]|0,x=f8&8191,u=f8>>>13,pq=f[5]|0,Kq=pq&8191,Pq=pq>>>13,E$=f[6]|0,wq=E$&8191,Aq=E$>>>13,A8=f[7]|0,Lq=A8&8191,Eq=A8>>>13,k8=f[8]|0,Vq=k8&8191,Mq=k8>>>13,m$=f[9]|0,J$=m$&8191,O$=m$>>>13;V.negative=z.negative^T.negative,V.length=19,L=Math.imul(B,hq),R=Math.imul(B,Dq),R=R+Math.imul(t,hq)|0,b=Math.imul(t,Dq);var h$=(A+L|0)+((R&8191)<<13)|0;A=(b+(R>>>13)|0)+(h$>>>26)|0,h$&=67108863,L=Math.imul(r,hq),R=Math.imul(r,Dq),R=R+Math.imul(i,hq)|0,b=Math.imul(i,Dq),L=L+Math.imul(B,Sq)|0,R=R+Math.imul(B,Cq)|0,R=R+Math.imul(t,Sq)|0,b=b+Math.imul(t,Cq)|0;var F$=(A+L|0)+((R&8191)<<13)|0;A=(b+(R>>>13)|0)+(F$>>>26)|0,F$&=67108863,L=Math.imul(jq,hq),R=Math.imul(jq,Dq),R=R+Math.imul(Oq,hq)|0,b=Math.imul(Oq,Dq),L=L+Math.imul(r,Sq)|0,R=R+Math.imul(r,Cq)|0,R=R+Math.imul(i,Sq)|0,b=b+Math.imul(i,Cq)|0,L=L+Math.imul(B,Nq)|0,R=R+Math.imul(B,Gq)|0,R=R+Math.imul(t,Nq)|0,b=b+Math.imul(t,Gq)|0;var t$=(A+L|0)+((R&8191)<<13)|0;A=(b+(R>>>13)|0)+(t$>>>26)|0,t$&=67108863,L=Math.imul(o,hq),R=Math.imul(o,Dq),R=R+Math.imul(U,hq)|0,b=Math.imul(U,Dq),L=L+Math.imul(jq,Sq)|0,R=R+Math.imul(jq,Cq)|0,R=R+Math.imul(Oq,Sq)|0,b=b+Math.imul(Oq,Cq)|0,L=L+Math.imul(r,Nq)|0,R=R+Math.imul(r,Gq)|0,R=R+Math.imul(i,Nq)|0,b=b+Math.imul(i,Gq)|0,L=L+Math.imul(B,Iq)|0,R=R+Math.imul(B,Zq)|0,R=R+Math.imul(t,Iq)|0,b=b+Math.imul(t,Zq)|0;var Q$=(A+L|0)+((R&8191)<<13)|0;A=(b+(R>>>13)|0)+(Q$>>>26)|0,Q$&=67108863,L=Math.imul(qq,hq),R=Math.imul(qq,Dq),R=R+Math.imul(s,hq)|0,b=Math.imul(s,Dq),L=L+Math.imul(o,Sq)|0,R=R+Math.imul(o,Cq)|0,R=R+Math.imul(U,Sq)|0,b=b+Math.imul(U,Cq)|0,L=L+Math.imul(jq,Nq)|0,R=R+Math.imul(jq,Gq)|0,R=R+Math.imul(Oq,Nq)|0,b=b+Math.imul(Oq,Gq)|0,L=L+Math.imul(r,Iq)|0,R=R+Math.imul(r,Zq)|0,R=R+Math.imul(i,Iq)|0,b=b+Math.imul(i,Zq)|0,L=L+Math.imul(B,x)|0,R=R+Math.imul(B,u)|0,R=R+Math.imul(t,x)|0,b=b+Math.imul(t,u)|0;var a$=(A+L|0)+((R&8191)<<13)|0;A=(b+(R>>>13)|0)+(a$>>>26)|0,a$&=67108863,L=Math.imul(F,hq),R=Math.imul(F,Dq),R=R+Math.imul(_q,hq)|0,b=Math.imul(_q,Dq),L=L+Math.imul(qq,Sq)|0,R=R+Math.imul(qq,Cq)|0,R=R+Math.imul(s,Sq)|0,b=b+Math.imul(s,Cq)|0,L=L+Math.imul(o,Nq)|0,R=R+Math.imul(o,Gq)|0,R=R+Math.imul(U,Nq)|0,b=b+Math.imul(U,Gq)|0,L=L+Math.imul(jq,Iq)|0,R=R+Math.imul(jq,Zq)|0,R=R+Math.imul(Oq,Iq)|0,b=b+Math.imul(Oq,Zq)|0,L=L+Math.imul(r,x)|0,R=R+Math.imul(r,u)|0,R=R+Math.imul(i,x)|0,b=b+Math.imul(i,u)|0,L=L+Math.imul(B,Kq)|0,R=R+Math.imul(B,Pq)|0,R=R+Math.imul(t,Kq)|0,b=b+Math.imul(t,Pq)|0;var e$=(A+L|0)+((R&8191)<<13)|0;A=(b+(R>>>13)|0)+(e$>>>26)|0,e$&=67108863,L=Math.imul(Yq,hq),R=Math.imul(Yq,Dq),R=R+Math.imul(Jq,hq)|0,b=Math.imul(Jq,Dq),L=L+Math.imul(F,Sq)|0,R=R+Math.imul(F,Cq)|0,R=R+Math.imul(_q,Sq)|0,b=b+Math.imul(_q,Cq)|0,L=L+Math.imul(qq,Nq)|0,R=R+Math.imul(qq,Gq)|0,R=R+Math.imul(s,Nq)|0,b=b+Math.imul(s,Gq)|0,L=L+Math.imul(o,Iq)|0,R=R+Math.imul(o,Zq)|0,R=R+Math.imul(U,Iq)|0,b=b+Math.imul(U,Zq)|0,L=L+Math.imul(jq,x)|0,R=R+Math.imul(jq,u)|0,R=R+Math.imul(Oq,x)|0,b=b+Math.imul(Oq,u)|0,L=L+Math.imul(r,Kq)|0,R=R+Math.imul(r,Pq)|0,R=R+Math.imul(i,Kq)|0,b=b+Math.imul(i,Pq)|0,L=L+Math.imul(B,wq)|0,R=R+Math.imul(B,Aq)|0,R=R+Math.imul(t,wq)|0,b=b+Math.imul(t,Aq)|0;var s$=(A+L|0)+((R&8191)<<13)|0;A=(b+(R>>>13)|0)+(s$>>>26)|0,s$&=67108863,L=Math.imul(Hq,hq),R=Math.imul(Hq,Dq),R=R+Math.imul(Xq,hq)|0,b=Math.imul(Xq,Dq),L=L+Math.imul(Yq,Sq)|0,R=R+Math.imul(Yq,Cq)|0,R=R+Math.imul(Jq,Sq)|0,b=b+Math.imul(Jq,Cq)|0,L=L+Math.imul(F,Nq)|0,R=R+Math.imul(F,Gq)|0,R=R+Math.imul(_q,Nq)|0,b=b+Math.imul(_q,Gq)|0,L=L+Math.imul(qq,Iq)|0,R=R+Math.imul(qq,Zq)|0,R=R+Math.imul(s,Iq)|0,b=b+Math.imul(s,Zq)|0,L=L+Math.imul(o,x)|0,R=R+Math.imul(o,u)|0,R=R+Math.imul(U,x)|0,b=b+Math.imul(U,u)|0,L=L+Math.imul(jq,Kq)|0,R=R+Math.imul(jq,Pq)|0,R=R+Math.imul(Oq,Kq)|0,b=b+Math.imul(Oq,Pq)|0,L=L+Math.imul(r,wq)|0,R=R+Math.imul(r,Aq)|0,R=R+Math.imul(i,wq)|0,b=b+Math.imul(i,Aq)|0,L=L+Math.imul(B,Lq)|0,R=R+Math.imul(B,Eq)|0,R=R+Math.imul(t,Lq)|0,b=b+Math.imul(t,Eq)|0;var q8=(A+L|0)+((R&8191)<<13)|0;A=(b+(R>>>13)|0)+(q8>>>26)|0,q8&=67108863,L=Math.imul(vq,hq),R=Math.imul(vq,Dq),R=R+Math.imul(kq,hq)|0,b=Math.imul(kq,Dq),L=L+Math.imul(Hq,Sq)|0,R=R+Math.imul(Hq,Cq)|0,R=R+Math.imul(Xq,Sq)|0,b=b+Math.imul(Xq,Cq)|0,L=L+Math.imul(Yq,Nq)|0,R=R+Math.imul(Yq,Gq)|0,R=R+Math.imul(Jq,Nq)|0,b=b+Math.imul(Jq,Gq)|0,L=L+Math.imul(F,Iq)|0,R=R+Math.imul(F,Zq)|0,R=R+Math.imul(_q,Iq)|0,b=b+Math.imul(_q,Zq)|0,L=L+Math.imul(qq,x)|0,R=R+Math.imul(qq,u)|0,R=R+Math.imul(s,x)|0,b=b+Math.imul(s,u)|0,L=L+Math.imul(o,Kq)|0,R=R+Math.imul(o,Pq)|0,R=R+Math.imul(U,Kq)|0,b=b+Math.imul(U,Pq)|0,L=L+Math.imul(jq,wq)|0,R=R+Math.imul(jq,Aq)|0,R=R+Math.imul(Oq,wq)|0,b=b+Math.imul(Oq,Aq)|0,L=L+Math.imul(r,Lq)|0,R=R+Math.imul(r,Eq)|0,R=R+Math.imul(i,Lq)|0,b=b+Math.imul(i,Eq)|0,L=L+Math.imul(B,Vq)|0,R=R+Math.imul(B,Mq)|0,R=R+Math.imul(t,Vq)|0,b=b+Math.imul(t,Mq)|0;var $8=(A+L|0)+((R&8191)<<13)|0;A=(b+(R>>>13)|0)+($8>>>26)|0,$8&=67108863,L=Math.imul(fq,hq),R=Math.imul(fq,Dq),R=R+Math.imul(Rq,hq)|0,b=Math.imul(Rq,Dq),L=L+Math.imul(vq,Sq)|0,R=R+Math.imul(vq,Cq)|0,R=R+Math.imul(kq,Sq)|0,b=b+Math.imul(kq,Cq)|0,L=L+Math.imul(Hq,Nq)|0,R=R+Math.imul(Hq,Gq)|0,R=R+Math.imul(Xq,Nq)|0,b=b+Math.imul(Xq,Gq)|0,L=L+Math.imul(Yq,Iq)|0,R=R+Math.imul(Yq,Zq)|0,R=R+Math.imul(Jq,Iq)|0,b=b+Math.imul(Jq,Zq)|0,L=L+Math.imul(F,x)|0,R=R+Math.imul(F,u)|0,R=R+Math.imul(_q,x)|0,b=b+Math.imul(_q,u)|0,L=L+Math.imul(qq,Kq)|0,R=R+Math.imul(qq,Pq)|0,R=R+Math.imul(s,Kq)|0,b=b+Math.imul(s,Pq)|0,L=L+Math.imul(o,wq)|0,R=R+Math.imul(o,Aq)|0,R=R+Math.imul(U,wq)|0,b=b+Math.imul(U,Aq)|0,L=L+Math.imul(jq,Lq)|0,R=R+Math.imul(jq,Eq)|0,R=R+Math.imul(Oq,Lq)|0,b=b+Math.imul(Oq,Eq)|0,L=L+Math.imul(r,Vq)|0,R=R+Math.imul(r,Mq)|0,R=R+Math.imul(i,Vq)|0,b=b+Math.imul(i,Mq)|0,L=L+Math.imul(B,J$)|0,R=R+Math.imul(B,O$)|0,R=R+Math.imul(t,J$)|0,b=b+Math.imul(t,O$)|0;var K8=(A+L|0)+((R&8191)<<13)|0;A=(b+(R>>>13)|0)+(K8>>>26)|0,K8&=67108863,L=Math.imul(fq,Sq),R=Math.imul(fq,Cq),R=R+Math.imul(Rq,Sq)|0,b=Math.imul(Rq,Cq),L=L+Math.imul(vq,Nq)|0,R=R+Math.imul(vq,Gq)|0,R=R+Math.imul(kq,Nq)|0,b=b+Math.imul(kq,Gq)|0,L=L+Math.imul(Hq,Iq)|0,R=R+Math.imul(Hq,Zq)|0,R=R+Math.imul(Xq,Iq)|0,b=b+Math.imul(Xq,Zq)|0,L=L+Math.imul(Yq,x)|0,R=R+Math.imul(Yq,u)|0,R=R+Math.imul(Jq,x)|0,b=b+Math.imul(Jq,u)|0,L=L+Math.imul(F,Kq)|0,R=R+Math.imul(F,Pq)|0,R=R+Math.imul(_q,Kq)|0,b=b+Math.imul(_q,Pq)|0,L=L+Math.imul(qq,wq)|0,R=R+Math.imul(qq,Aq)|0,R=R+Math.imul(s,wq)|0,b=b+Math.imul(s,Aq)|0,L=L+Math.imul(o,Lq)|0,R=R+Math.imul(o,Eq)|0,R=R+Math.imul(U,Lq)|0,b=b+Math.imul(U,Eq)|0,L=L+Math.imul(jq,Vq)|0,R=R+Math.imul(jq,Mq)|0,R=R+Math.imul(Oq,Vq)|0,b=b+Math.imul(Oq,Mq)|0,L=L+Math.imul(r,J$)|0,R=R+Math.imul(r,O$)|0,R=R+Math.imul(i,J$)|0,b=b+Math.imul(i,O$)|0;var _8=(A+L|0)+((R&8191)<<13)|0;A=(b+(R>>>13)|0)+(_8>>>26)|0,_8&=67108863,L=Math.imul(fq,Nq),R=Math.imul(fq,Gq),R=R+Math.imul(Rq,Nq)|0,b=Math.imul(Rq,Gq),L=L+Math.imul(vq,Iq)|0,R=R+Math.imul(vq,Zq)|0,R=R+Math.imul(kq,Iq)|0,b=b+Math.imul(kq,Zq)|0,L=L+Math.imul(Hq,x)|0,R=R+Math.imul(Hq,u)|0,R=R+Math.imul(Xq,x)|0,b=b+Math.imul(Xq,u)|0,L=L+Math.imul(Yq,Kq)|0,R=R+Math.imul(Yq,Pq)|0,R=R+Math.imul(Jq,Kq)|0,b=b+Math.imul(Jq,Pq)|0,L=L+Math.imul(F,wq)|0,R=R+Math.imul(F,Aq)|0,R=R+Math.imul(_q,wq)|0,b=b+Math.imul(_q,Aq)|0,L=L+Math.imul(qq,Lq)|0,R=R+Math.imul(qq,Eq)|0,R=R+Math.imul(s,Lq)|0,b=b+Math.imul(s,Eq)|0,L=L+Math.imul(o,Vq)|0,R=R+Math.imul(o,Mq)|0,R=R+Math.imul(U,Vq)|0,b=b+Math.imul(U,Mq)|0,L=L+Math.imul(jq,J$)|0,R=R+Math.imul(jq,O$)|0,R=R+Math.imul(Oq,J$)|0,b=b+Math.imul(Oq,O$)|0;var P8=(A+L|0)+((R&8191)<<13)|0;A=(b+(R>>>13)|0)+(P8>>>26)|0,P8&=67108863,L=Math.imul(fq,Iq),R=Math.imul(fq,Zq),R=R+Math.imul(Rq,Iq)|0,b=Math.imul(Rq,Zq),L=L+Math.imul(vq,x)|0,R=R+Math.imul(vq,u)|0,R=R+Math.imul(kq,x)|0,b=b+Math.imul(kq,u)|0,L=L+Math.imul(Hq,Kq)|0,R=R+Math.imul(Hq,Pq)|0,R=R+Math.imul(Xq,Kq)|0,b=b+Math.imul(Xq,Pq)|0,L=L+Math.imul(Yq,wq)|0,R=R+Math.imul(Yq,Aq)|0,R=R+Math.imul(Jq,wq)|0,b=b+Math.imul(Jq,Aq)|0,L=L+Math.imul(F,Lq)|0,R=R+Math.imul(F,Eq)|0,R=R+Math.imul(_q,Lq)|0,b=b+Math.imul(_q,Eq)|0,L=L+Math.imul(qq,Vq)|0,R=R+Math.imul(qq,Mq)|0,R=R+Math.imul(s,Vq)|0,b=b+Math.imul(s,Mq)|0,L=L+Math.imul(o,J$)|0,R=R+Math.imul(o,O$)|0,R=R+Math.imul(U,J$)|0,b=b+Math.imul(U,O$)|0;var Y8=(A+L|0)+((R&8191)<<13)|0;A=(b+(R>>>13)|0)+(Y8>>>26)|0,Y8&=67108863,L=Math.imul(fq,x),R=Math.imul(fq,u),R=R+Math.imul(Rq,x)|0,b=Math.imul(Rq,u),L=L+Math.imul(vq,Kq)|0,R=R+Math.imul(vq,Pq)|0,R=R+Math.imul(kq,Kq)|0,b=b+Math.imul(kq,Pq)|0,L=L+Math.imul(Hq,wq)|0,R=R+Math.imul(Hq,Aq)|0,R=R+Math.imul(Xq,wq)|0,b=b+Math.imul(Xq,Aq)|0,L=L+Math.imul(Yq,Lq)|0,R=R+Math.imul(Yq,Eq)|0,R=R+Math.imul(Jq,Lq)|0,b=b+Math.imul(Jq,Eq)|0,L=L+Math.imul(F,Vq)|0,R=R+Math.imul(F,Mq)|0,R=R+Math.imul(_q,Vq)|0,b=b+Math.imul(_q,Mq)|0,L=L+Math.imul(qq,J$)|0,R=R+Math.imul(qq,O$)|0,R=R+Math.imul(s,J$)|0,b=b+Math.imul(s,O$)|0;var j8=(A+L|0)+((R&8191)<<13)|0;A=(b+(R>>>13)|0)+(j8>>>26)|0,j8&=67108863,L=Math.imul(fq,Kq),R=Math.imul(fq,Pq),R=R+Math.imul(Rq,Kq)|0,b=Math.imul(Rq,Pq),L=L+Math.imul(vq,wq)|0,R=R+Math.imul(vq,Aq)|0,R=R+Math.imul(kq,wq)|0,b=b+Math.imul(kq,Aq)|0,L=L+Math.imul(Hq,Lq)|0,R=R+Math.imul(Hq,Eq)|0,R=R+Math.imul(Xq,Lq)|0,b=b+Math.imul(Xq,Eq)|0,L=L+Math.imul(Yq,Vq)|0,R=R+Math.imul(Yq,Mq)|0,R=R+Math.imul(Jq,Vq)|0,b=b+Math.imul(Jq,Mq)|0,L=L+Math.imul(F,J$)|0,R=R+Math.imul(F,O$)|0,R=R+Math.imul(_q,J$)|0,b=b+Math.imul(_q,O$)|0;var O8=(A+L|0)+((R&8191)<<13)|0;A=(b+(R>>>13)|0)+(O8>>>26)|0,O8&=67108863,L=Math.imul(fq,wq),R=Math.imul(fq,Aq),R=R+Math.imul(Rq,wq)|0,b=Math.imul(Rq,Aq),L=L+Math.imul(vq,Lq)|0,R=R+Math.imul(vq,Eq)|0,R=R+Math.imul(kq,Lq)|0,b=b+Math.imul(kq,Eq)|0,L=L+Math.imul(Hq,Vq)|0,R=R+Math.imul(Hq,Mq)|0,R=R+Math.imul(Xq,Vq)|0,b=b+Math.imul(Xq,Mq)|0,L=L+Math.imul(Yq,J$)|0,R=R+Math.imul(Yq,O$)|0,R=R+Math.imul(Jq,J$)|0,b=b+Math.imul(Jq,O$)|0;var W8=(A+L|0)+((R&8191)<<13)|0;A=(b+(R>>>13)|0)+(W8>>>26)|0,W8&=67108863,L=Math.imul(fq,Lq),R=Math.imul(fq,Eq),R=R+Math.imul(Rq,Lq)|0,b=Math.imul(Rq,Eq),L=L+Math.imul(vq,Vq)|0,R=R+Math.imul(vq,Mq)|0,R=R+Math.imul(kq,Vq)|0,b=b+Math.imul(kq,Mq)|0,L=L+Math.imul(Hq,J$)|0,R=R+Math.imul(Hq,O$)|0,R=R+Math.imul(Xq,J$)|0,b=b+Math.imul(Xq,O$)|0;var w5=(A+L|0)+((R&8191)<<13)|0;A=(b+(R>>>13)|0)+(w5>>>26)|0,w5&=67108863,L=Math.imul(fq,Vq),R=Math.imul(fq,Mq),R=R+Math.imul(Rq,Vq)|0,b=Math.imul(Rq,Mq),L=L+Math.imul(vq,J$)|0,R=R+Math.imul(vq,O$)|0,R=R+Math.imul(kq,J$)|0,b=b+Math.imul(kq,O$)|0;var T5=(A+L|0)+((R&8191)<<13)|0;A=(b+(R>>>13)|0)+(T5>>>26)|0,T5&=67108863,L=Math.imul(fq,J$),R=Math.imul(fq,O$),R=R+Math.imul(Rq,J$)|0,b=Math.imul(Rq,O$);var X5=(A+L|0)+((R&8191)<<13)|0;if(A=(b+(R>>>13)|0)+(X5>>>26)|0,X5&=67108863,W[0]=h$,W[1]=F$,W[2]=t$,W[3]=Q$,W[4]=a$,W[5]=e$,W[6]=s$,W[7]=q8,W[8]=$8,W[9]=K8,W[10]=_8,W[11]=P8,W[12]=Y8,W[13]=j8,W[14]=O8,W[15]=W8,W[16]=w5,W[17]=T5,W[18]=X5,A!==0)W[19]=A,V.length++;return V};if(!Math.imul)g=I;function y(w,z,T){T.negative=z.negative^w.negative,T.length=w.length+z.length;var V=0,C=0;for(var f=0;f<T.length-1;f++){var W=C;C=0;var A=V&67108863,L=Math.min(f,z.length-1);for(var R=Math.max(0,f-w.length+1);R<=L;R++){var b=f-R,l=w.words[b]|0,B=z.words[R]|0,t=l*B,Wq=t&67108863;W=W+(t/67108864|0)|0,Wq=Wq+A|0,A=Wq&67108863,W=W+(Wq>>>26)|0,C+=W>>>26,W&=67108863}T.words[f]=A,V=W,W=C}if(V!==0)T.words[f]=V;else T.length--;return T._strip()}function p(w,z,T){return y(w,z,T)}Y.prototype.mulTo=function(z,T){var V,C=this.length+z.length;if(this.length===10&&z.length===10)V=g(this,z,T);else if(C<63)V=I(this,z,T);else if(C<1024)V=y(this,z,T);else V=p(this,z,T);return V};function m(w,z){this.x=w,this.y=z}m.prototype.makeRBT=function(z){var T=Array(z),V=Y.prototype._countBits(z)-1;for(var C=0;C<z;C++)T[C]=this.revBin(C,V,z);return T},m.prototype.revBin=function(z,T,V){if(z===0||z===V-1)return z;var C=0;for(var f=0;f<T;f++)C|=(z&1)<<T-f-1,z>>=1;return C},m.prototype.permute=function(z,T,V,C,f,W){for(var A=0;A<W;A++)C[A]=T[z[A]],f[A]=V[z[A]]},m.prototype.transform=function(z,T,V,C,f,W){this.permute(W,z,T,V,C,f);for(var A=1;A<f;A<<=1){var L=A<<1,R=Math.cos(2*Math.PI/L),b=Math.sin(2*Math.PI/L);for(var l=0;l<f;l+=L){var B=R,t=b;for(var Wq=0;Wq<A;Wq++){var r=V[l+Wq],i=C[l+Wq],gq=V[l+Wq+A],jq=C[l+Wq+A],Oq=B*gq-t*jq;if(jq=B*jq+t*gq,gq=Oq,V[l+Wq]=r+gq,C[l+Wq]=i+jq,V[l+Wq+A]=r-gq,C[l+Wq+A]=i-jq,Wq!==L)Oq=R*B-b*t,t=R*t+b*B,B=Oq}}}},m.prototype.guessLen13b=function(z,T){var V=Math.max(T,z)|1,C=V&1,f=0;for(V=V/2|0;V;V=V>>>1)f++;return 1<<f+1+C},m.prototype.conjugate=function(z,T,V){if(V<=1)return;for(var C=0;C<V/2;C++){var f=z[C];z[C]=z[V-C-1],z[V-C-1]=f,f=T[C],T[C]=-T[V-C-1],T[V-C-1]=-f}},m.prototype.normalize13b=function(z,T){var V=0;for(var C=0;C<T/2;C++){var f=Math.round(z[2*C+1]/T)*8192+Math.round(z[2*C]/T)+V;if(z[C]=f&67108863,f<67108864)V=0;else V=f/67108864|0}return z},m.prototype.convert13b=function(z,T,V,C){var f=0;for(var W=0;W<T;W++)f=f+(z[W]|0),V[2*W]=f&8191,f=f>>>13,V[2*W+1]=f&8191,f=f>>>13;for(W=2*T;W<C;++W)V[W]=0;P(f===0),P((f&-8192)===0)},m.prototype.stub=function(z){var T=Array(z);for(var V=0;V<z;V++)T[V]=0;return T},m.prototype.mulp=function(z,T,V){var C=2*this.guessLen13b(z.length,T.length),f=this.makeRBT(C),W=this.stub(C),A=Array(C),L=Array(C),R=Array(C),b=Array(C),l=Array(C),B=Array(C),t=V.words;t.length=C,this.convert13b(z.words,z.length,A,C),this.convert13b(T.words,T.length,b,C),this.transform(A,W,L,R,C,f),this.transform(b,W,l,B,C,f);for(var Wq=0;Wq<C;Wq++){var r=L[Wq]*l[Wq]-R[Wq]*B[Wq];R[Wq]=L[Wq]*B[Wq]+R[Wq]*l[Wq],L[Wq]=r}return this.conjugate(L,R,C),this.transform(L,R,t,W,C,f),this.conjugate(t,W,C),this.normalize13b(t,C),V.negative=z.negative^T.negative,V.length=z.length+T.length,V._strip()},Y.prototype.mul=function(z){var T=new Y(null);return T.words=Array(this.length+z.length),this.mulTo(z,T)},Y.prototype.mulf=function(z){var T=new Y(null);return T.words=Array(this.length+z.length),p(this,z,T)},Y.prototype.imul=function(z){return this.clone().mulTo(z,this)},Y.prototype.imuln=function(z){var T=z<0;if(T)z=-z;P(typeof z==="number"),P(z<67108864);var V=0;for(var C=0;C<this.length;C++){var f=(this.words[C]|0)*z,W=(f&67108863)+(V&67108863);V>>=26,V+=f/67108864|0,V+=W>>>26,this.words[C]=W&67108863}if(V!==0)this.words[C]=V,this.length++;return this.length=z===0?1:this.length,T?this.ineg():this},Y.prototype.muln=function(z){return this.clone().imuln(z)},Y.prototype.sqr=function(){return this.mul(this)},Y.prototype.isqr=function(){return this.imul(this.clone())},Y.prototype.pow=function(z){var T=D(z);if(T.length===0)return new Y(1);var V=this;for(var C=0;C<T.length;C++,V=V.sqr())if(T[C]!==0)break;if(++C<T.length)for(var f=V.sqr();C<T.length;C++,f=f.sqr()){if(T[C]===0)continue;V=V.mul(f)}return V},Y.prototype.iushln=function(z){P(typeof z==="number"&&z>=0);var T=z%26,V=(z-T)/26,C=67108863>>>26-T<<26-T,f;if(T!==0){var W=0;for(f=0;f<this.length;f++){var A=this.words[f]&C,L=(this.words[f]|0)-A<<T;this.words[f]=L|W,W=A>>>26-T}if(W)this.words[f]=W,this.length++}if(V!==0){for(f=this.length-1;f>=0;f--)this.words[f+V]=this.words[f];for(f=0;f<V;f++)this.words[f]=0;this.length+=V}return this._strip()},Y.prototype.ishln=function(z){return P(this.negative===0),this.iushln(z)},Y.prototype.iushrn=function(z,T,V){P(typeof z==="number"&&z>=0);var C;if(T)C=(T-T%26)/26;else C=0;var f=z%26,W=Math.min((z-f)/26,this.length),A=67108863^67108863>>>f<<f,L=V;if(C-=W,C=Math.max(0,C),L){for(var R=0;R<W;R++)L.words[R]=this.words[R];L.length=W}if(W===0);else if(this.length>W){this.length-=W;for(R=0;R<this.length;R++)this.words[R]=this.words[R+W]}else this.words[0]=0,this.length=1;var b=0;for(R=this.length-1;R>=0&&(b!==0||R>=C);R--){var l=this.words[R]|0;this.words[R]=b<<26-f|l>>>f,b=l&A}if(L&&b!==0)L.words[L.length++]=b;if(this.length===0)this.words[0]=0,this.length=1;return this._strip()},Y.prototype.ishrn=function(z,T,V){return P(this.negative===0),this.iushrn(z,T,V)},Y.prototype.shln=function(z){return this.clone().ishln(z)},Y.prototype.ushln=function(z){return this.clone().iushln(z)},Y.prototype.shrn=function(z){return this.clone().ishrn(z)},Y.prototype.ushrn=function(z){return this.clone().iushrn(z)},Y.prototype.testn=function(z){P(typeof z==="number"&&z>=0);var T=z%26,V=(z-T)/26,C=1<<T;if(this.length<=V)return!1;var f=this.words[V];return!!(f&C)},Y.prototype.imaskn=function(z){P(typeof z==="number"&&z>=0);var T=z%26,V=(z-T)/26;if(P(this.negative===0,"imaskn works only with positive numbers"),this.length<=V)return this;if(T!==0)V++;if(this.length=Math.min(V,this.length),T!==0){var C=67108863^67108863>>>T<<T;this.words[this.length-1]&=C}return this._strip()},Y.prototype.maskn=function(z){return this.clone().imaskn(z)},Y.prototype.iaddn=function(z){if(P(typeof z==="number"),P(z<67108864),z<0)return this.isubn(-z);if(this.negative!==0){if(this.length===1&&(this.words[0]|0)<=z)return this.words[0]=z-(this.words[0]|0),this.negative=0,this;return this.negative=0,this.isubn(z),this.negative=1,this}return this._iaddn(z)},Y.prototype._iaddn=function(z){this.words[0]+=z;for(var T=0;T<this.length&&this.words[T]>=67108864;T++)if(this.words[T]-=67108864,T===this.length-1)this.words[T+1]=1;else this.words[T+1]++;return this.length=Math.max(this.length,T+1),this},Y.prototype.isubn=function(z){if(P(typeof z==="number"),P(z<67108864),z<0)return this.iaddn(-z);if(this.negative!==0)return this.negative=0,this.iaddn(z),this.negative=1,this;if(this.words[0]-=z,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var T=0;T<this.length&&this.words[T]<0;T++)this.words[T]+=67108864,this.words[T+1]-=1;return this._strip()},Y.prototype.addn=function(z){return this.clone().iaddn(z)},Y.prototype.subn=function(z){return this.clone().isubn(z)},Y.prototype.iabs=function(){return this.negative=0,this},Y.prototype.abs=function(){return this.clone().iabs()},Y.prototype._ishlnsubmul=function(z,T,V){var C=z.length+V,f;this._expand(C);var W,A=0;for(f=0;f<z.length;f++){W=(this.words[f+V]|0)+A;var L=(z.words[f]|0)*T;W-=L&67108863,A=(W>>26)-(L/67108864|0),this.words[f+V]=W&67108863}for(;f<this.length-V;f++)W=(this.words[f+V]|0)+A,A=W>>26,this.words[f+V]=W&67108863;if(A===0)return this._strip();P(A===-1),A=0;for(f=0;f<this.length;f++)W=-(this.words[f]|0)+A,A=W>>26,this.words[f]=W&67108863;return this.negative=1,this._strip()},Y.prototype._wordDiv=function(z,T){var V=this.length-z.length,C=this.clone(),f=z,W=f.words[f.length-1]|0,A=this._countBits(W);if(V=26-A,V!==0)f=f.ushln(V),C.iushln(V),W=f.words[f.length-1]|0;var L=C.length-f.length,R;if(T!=="mod"){R=new Y(null),R.length=L+1,R.words=Array(R.length);for(var b=0;b<R.length;b++)R.words[b]=0}var l=C.clone()._ishlnsubmul(f,1,L);if(l.negative===0){if(C=l,R)R.words[L]=1}for(var B=L-1;B>=0;B--){var t=(C.words[f.length+B]|0)*67108864+(C.words[f.length+B-1]|0);t=Math.min(t/W|0,67108863),C._ishlnsubmul(f,t,B);while(C.negative!==0)if(t--,C.negative=0,C._ishlnsubmul(f,1,B),!C.isZero())C.negative^=1;if(R)R.words[B]=t}if(R)R._strip();if(C._strip(),T!=="div"&&V!==0)C.iushrn(V);return{div:R||null,mod:C}},Y.prototype.divmod=function(z,T,V){if(P(!z.isZero()),this.isZero())return{div:new Y(0),mod:new Y(0)};var C,f,W;if(this.negative!==0&&z.negative===0){if(W=this.neg().divmod(z,T),T!=="mod")C=W.div.neg();if(T!=="div"){if(f=W.mod.neg(),V&&f.negative!==0)f.iadd(z)}return{div:C,mod:f}}if(this.negative===0&&z.negative!==0){if(W=this.divmod(z.neg(),T),T!=="mod")C=W.div.neg();return{div:C,mod:W.mod}}if((this.negative&z.negative)!==0){if(W=this.neg().divmod(z.neg(),T),T!=="div"){if(f=W.mod.neg(),V&&f.negative!==0)f.isub(z)}return{div:W.div,mod:f}}if(z.length>this.length||this.cmp(z)<0)return{div:new Y(0),mod:this};if(z.length===1){if(T==="div")return{div:this.divn(z.words[0]),mod:null};if(T==="mod")return{div:null,mod:new Y(this.modrn(z.words[0]))};return{div:this.divn(z.words[0]),mod:new Y(this.modrn(z.words[0]))}}return this._wordDiv(z,T)},Y.prototype.div=function(z){return this.divmod(z,"div",!1).div},Y.prototype.mod=function(z){return this.divmod(z,"mod",!1).mod},Y.prototype.umod=function(z){return this.divmod(z,"mod",!0).mod},Y.prototype.divRound=function(z){var T=this.divmod(z);if(T.mod.isZero())return T.div;var V=T.div.negative!==0?T.mod.isub(z):T.mod,C=z.ushrn(1),f=z.andln(1),W=V.cmp(C);if(W<0||f===1&&W===0)return T.div;return T.div.negative!==0?T.div.isubn(1):T.div.iaddn(1)},Y.prototype.modrn=function(z){var T=z<0;if(T)z=-z;P(z<=67108863);var V=67108864%z,C=0;for(var f=this.length-1;f>=0;f--)C=(V*C+(this.words[f]|0))%z;return T?-C:C},Y.prototype.modn=function(z){return this.modrn(z)},Y.prototype.idivn=function(z){var T=z<0;if(T)z=-z;P(z<=67108863);var V=0;for(var C=this.length-1;C>=0;C--){var f=(this.words[C]|0)+V*67108864;this.words[C]=f/z|0,V=f%z}return this._strip(),T?this.ineg():this},Y.prototype.divn=function(z){return this.clone().idivn(z)},Y.prototype.egcd=function(z){P(z.negative===0),P(!z.isZero());var T=this,V=z.clone();if(T.negative!==0)T=T.umod(z);else T=T.clone();var C=new Y(1),f=new Y(0),W=new Y(0),A=new Y(1),L=0;while(T.isEven()&&V.isEven())T.iushrn(1),V.iushrn(1),++L;var R=V.clone(),b=T.clone();while(!T.isZero()){for(var l=0,B=1;(T.words[0]&B)===0&&l<26;++l,B<<=1);if(l>0){T.iushrn(l);while(l-- >0){if(C.isOdd()||f.isOdd())C.iadd(R),f.isub(b);C.iushrn(1),f.iushrn(1)}}for(var t=0,Wq=1;(V.words[0]&Wq)===0&&t<26;++t,Wq<<=1);if(t>0){V.iushrn(t);while(t-- >0){if(W.isOdd()||A.isOdd())W.iadd(R),A.isub(b);W.iushrn(1),A.iushrn(1)}}if(T.cmp(V)>=0)T.isub(V),C.isub(W),f.isub(A);else V.isub(T),W.isub(C),A.isub(f)}return{a:W,b:A,gcd:V.iushln(L)}},Y.prototype._invmp=function(z){P(z.negative===0),P(!z.isZero());var T=this,V=z.clone();if(T.negative!==0)T=T.umod(z);else T=T.clone();var C=new Y(1),f=new Y(0),W=V.clone();while(T.cmpn(1)>0&&V.cmpn(1)>0){for(var A=0,L=1;(T.words[0]&L)===0&&A<26;++A,L<<=1);if(A>0){T.iushrn(A);while(A-- >0){if(C.isOdd())C.iadd(W);C.iushrn(1)}}for(var R=0,b=1;(V.words[0]&b)===0&&R<26;++R,b<<=1);if(R>0){V.iushrn(R);while(R-- >0){if(f.isOdd())f.iadd(W);f.iushrn(1)}}if(T.cmp(V)>=0)T.isub(V),C.isub(f);else V.isub(T),f.isub(C)}var l;if(T.cmpn(1)===0)l=C;else l=f;if(l.cmpn(0)<0)l.iadd(z);return l},Y.prototype.gcd=function(z){if(this.isZero())return z.abs();if(z.isZero())return this.abs();var T=this.clone(),V=z.clone();T.negative=0,V.negative=0;for(var C=0;T.isEven()&&V.isEven();C++)T.iushrn(1),V.iushrn(1);do{while(T.isEven())T.iushrn(1);while(V.isEven())V.iushrn(1);var f=T.cmp(V);if(f<0){var W=T;T=V,V=W}else if(f===0||V.cmpn(1)===0)break;T.isub(V)}while(!0);return V.iushln(C)},Y.prototype.invm=function(z){return this.egcd(z).a.umod(z)},Y.prototype.isEven=function(){return(this.words[0]&1)===0},Y.prototype.isOdd=function(){return(this.words[0]&1)===1},Y.prototype.andln=function(z){return this.words[0]&z},Y.prototype.bincn=function(z){P(typeof z==="number");var T=z%26,V=(z-T)/26,C=1<<T;if(this.length<=V)return this._expand(V+1),this.words[V]|=C,this;var f=C;for(var W=V;f!==0&&W<this.length;W++){var A=this.words[W]|0;A+=f,f=A>>>26,A&=67108863,this.words[W]=A}if(f!==0)this.words[W]=f,this.length++;return this},Y.prototype.isZero=function(){return this.length===1&&this.words[0]===0},Y.prototype.cmpn=function(z){var T=z<0;if(this.negative!==0&&!T)return-1;if(this.negative===0&&T)return 1;this._strip();var V;if(this.length>1)V=1;else{if(T)z=-z;P(z<=67108863,"Number is too big");var C=this.words[0]|0;V=C===z?0:C<z?-1:1}if(this.negative!==0)return-V|0;return V},Y.prototype.cmp=function(z){if(this.negative!==0&&z.negative===0)return-1;if(this.negative===0&&z.negative!==0)return 1;var T=this.ucmp(z);if(this.negative!==0)return-T|0;return T},Y.prototype.ucmp=function(z){if(this.length>z.length)return 1;if(this.length<z.length)return-1;var T=0;for(var V=this.length-1;V>=0;V--){var C=this.words[V]|0,f=z.words[V]|0;if(C===f)continue;if(C<f)T=-1;else if(C>f)T=1;break}return T},Y.prototype.gtn=function(z){return this.cmpn(z)===1},Y.prototype.gt=function(z){return this.cmp(z)===1},Y.prototype.gten=function(z){return this.cmpn(z)>=0},Y.prototype.gte=function(z){return this.cmp(z)>=0},Y.prototype.ltn=function(z){return this.cmpn(z)===-1},Y.prototype.lt=function(z){return this.cmp(z)===-1},Y.prototype.lten=function(z){return this.cmpn(z)<=0},Y.prototype.lte=function(z){return this.cmp(z)<=0},Y.prototype.eqn=function(z){return this.cmpn(z)===0},Y.prototype.eq=function(z){return this.cmp(z)===0},Y.red=function(z){return new j(z)},Y.prototype.toRed=function(z){return P(!this.red,"Already a number in reduction context"),P(this.negative===0,"red works only with positives"),z.convertTo(this)._forceRed(z)},Y.prototype.fromRed=function(){return P(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},Y.prototype._forceRed=function(z){return this.red=z,this},Y.prototype.forceRed=function(z){return P(!this.red,"Already a number in reduction context"),this._forceRed(z)},Y.prototype.redAdd=function(z){return P(this.red,"redAdd works only with red numbers"),this.red.add(this,z)},Y.prototype.redIAdd=function(z){return P(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,z)},Y.prototype.redSub=function(z){return P(this.red,"redSub works only with red numbers"),this.red.sub(this,z)},Y.prototype.redISub=function(z){return P(this.red,"redISub works only with red numbers"),this.red.isub(this,z)},Y.prototype.redShl=function(z){return P(this.red,"redShl works only with red numbers"),this.red.shl(this,z)},Y.prototype.redMul=function(z){return P(this.red,"redMul works only with red numbers"),this.red._verify2(this,z),this.red.mul(this,z)},Y.prototype.redIMul=function(z){return P(this.red,"redMul works only with red numbers"),this.red._verify2(this,z),this.red.imul(this,z)},Y.prototype.redSqr=function(){return P(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},Y.prototype.redISqr=function(){return P(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},Y.prototype.redSqrt=function(){return P(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},Y.prototype.redInvm=function(){return P(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},Y.prototype.redNeg=function(){return P(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},Y.prototype.redPow=function(z){return P(this.red&&!z.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,z)};var c={k256:null,p224:null,p192:null,p25519:null};function $q(w,z){this.name=w,this.p=new Y(z,16),this.n=this.p.bitLength(),this.k=new Y(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}$q.prototype._tmp=function(){var z=new Y(null);return z.words=Array(Math.ceil(this.n/13)),z},$q.prototype.ireduce=function(z){var T=z,V;do this.split(T,this.tmp),T=this.imulK(T),T=T.iadd(this.tmp),V=T.bitLength();while(V>this.n);var C=V<this.n?-1:T.ucmp(this.p);if(C===0)T.words[0]=0,T.length=1;else if(C>0)T.isub(this.p);else if(T.strip!==void 0)T.strip();else T._strip();return T},$q.prototype.split=function(z,T){z.iushrn(this.n,0,T)},$q.prototype.imulK=function(z){return z.imul(this.k)};function e(){$q.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}O(e,$q),e.prototype.split=function(z,T){var V=4194303,C=Math.min(z.length,9);for(var f=0;f<C;f++)T.words[f]=z.words[f];if(T.length=C,z.length<=9){z.words[0]=0,z.length=1;return}var W=z.words[9];T.words[T.length++]=W&V;for(f=10;f<z.length;f++){var A=z.words[f]|0;z.words[f-10]=(A&V)<<4|W>>>22,W=A}if(W>>>=22,z.words[f-10]=W,W===0&&z.length>10)z.length-=10;else z.length-=9},e.prototype.imulK=function(z){z.words[z.length]=0,z.words[z.length+1]=0,z.length+=2;var T=0;for(var V=0;V<z.length;V++){var C=z.words[V]|0;T+=C*977,z.words[V]=T&67108863,T=C*64+(T/67108864|0)}if(z.words[z.length-1]===0){if(z.length--,z.words[z.length-1]===0)z.length--}return z};function d(){$q.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}O(d,$q);function n(){$q.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}O(n,$q);function M(){$q.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}O(M,$q),M.prototype.imulK=function(z){var T=0;for(var V=0;V<z.length;V++){var C=(z.words[V]|0)*19+T,f=C&67108863;C>>>=26,z.words[V]=f,T=C}if(T!==0)z.words[z.length++]=T;return z},Y._prime=function(z){if(c[z])return c[z];var T;if(z==="k256")T=new e;else if(z==="p224")T=new d;else if(z==="p192")T=new n;else if(z==="p25519")T=new M;else throw Error("Unknown prime "+z);return c[z]=T,T};function j(w){if(typeof w==="string"){var z=Y._prime(w);this.m=z.p,this.prime=z}else P(w.gtn(1),"modulus must be greater than 1"),this.m=w,this.prime=null}j.prototype._verify1=function(z){P(z.negative===0,"red works only with positives"),P(z.red,"red works only with red numbers")},j.prototype._verify2=function(z,T){P((z.negative|T.negative)===0,"red works only with positives"),P(z.red&&z.red===T.red,"red works only with red numbers")},j.prototype.imod=function(z){if(this.prime)return this.prime.ireduce(z)._forceRed(this);return k(z,z.umod(this.m)._forceRed(this)),z},j.prototype.neg=function(z){if(z.isZero())return z.clone();return this.m.sub(z)._forceRed(this)},j.prototype.add=function(z,T){this._verify2(z,T);var V=z.add(T);if(V.cmp(this.m)>=0)V.isub(this.m);return V._forceRed(this)},j.prototype.iadd=function(z,T){this._verify2(z,T);var V=z.iadd(T);if(V.cmp(this.m)>=0)V.isub(this.m);return V},j.prototype.sub=function(z,T){this._verify2(z,T);var V=z.sub(T);if(V.cmpn(0)<0)V.iadd(this.m);return V._forceRed(this)},j.prototype.isub=function(z,T){this._verify2(z,T);var V=z.isub(T);if(V.cmpn(0)<0)V.iadd(this.m);return V},j.prototype.shl=function(z,T){return this._verify1(z),this.imod(z.ushln(T))},j.prototype.imul=function(z,T){return this._verify2(z,T),this.imod(z.imul(T))},j.prototype.mul=function(z,T){return this._verify2(z,T),this.imod(z.mul(T))},j.prototype.isqr=function(z){return this.imul(z,z.clone())},j.prototype.sqr=function(z){return this.mul(z,z)},j.prototype.sqrt=function(z){if(z.isZero())return z.clone();var T=this.m.andln(3);if(P(T%2===1),T===3){var V=this.m.add(new Y(1)).iushrn(2);return this.pow(z,V)}var C=this.m.subn(1),f=0;while(!C.isZero()&&C.andln(1)===0)f++,C.iushrn(1);P(!C.isZero());var W=new Y(1).toRed(this),A=W.redNeg(),L=this.m.subn(1).iushrn(1),R=this.m.bitLength();R=new Y(2*R*R).toRed(this);while(this.pow(R,L).cmp(A)!==0)R.redIAdd(A);var b=this.pow(R,C),l=this.pow(z,C.addn(1).iushrn(1)),B=this.pow(z,C),t=f;while(B.cmp(W)!==0){var Wq=B;for(var r=0;Wq.cmp(W)!==0;r++)Wq=Wq.redSqr();P(r<t);var i=this.pow(b,new Y(1).iushln(t-r-1));l=l.redMul(i),b=i.redSqr(),B=B.redMul(b),t=r}return l},j.prototype.invm=function(z){var T=z._invmp(this.m);if(T.negative!==0)return T.negative=0,this.imod(T).redNeg();else return this.imod(T)},j.prototype.pow=function(z,T){if(T.isZero())return new Y(1).toRed(this);if(T.cmpn(1)===0)return z.clone();var V=4,C=Array(1<<V);C[0]=new Y(1).toRed(this),C[1]=z;for(var f=2;f<C.length;f++)C[f]=this.mul(C[f-1],z);var W=C[0],A=0,L=0,R=T.bitLength()%26;if(R===0)R=26;for(f=T.length-1;f>=0;f--){var b=T.words[f];for(var l=R-1;l>=0;l--){var B=b>>l&1;if(W!==C[0])W=this.sqr(W);if(B===0&&A===0){L=0;continue}if(A<<=1,A|=B,L++,L!==V&&(f!==0||l!==0))continue;W=this.mul(W,C[A]),L=0,A=0}R=26}return W},j.prototype.convertTo=function(z){var T=z.umod(this.m);return T===z?T.clone():T},j.prototype.convertFrom=function(z){var T=z.clone();return T.red=null,T},Y.mont=function(z){return new J(z)};function J(w){if(j.call(this,w),this.shift=this.m.bitLength(),this.shift%26!==0)this.shift+=26-this.shift%26;this.r=new Y(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}O(J,j),J.prototype.convertTo=function(z){return this.imod(z.ushln(this.shift))},J.prototype.convertFrom=function(z){var T=this.imod(z.mul(this.rinv));return T.red=null,T},J.prototype.imul=function(z,T){if(z.isZero()||T.isZero())return z.words[0]=0,z.length=1,z;var V=z.imul(T),C=V.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),f=V.isub(C).iushrn(this.shift),W=f;if(f.cmp(this.m)>=0)W=f.isub(this.m);else if(f.cmpn(0)<0)W=f.iadd(this.m);return W._forceRed(this)},J.prototype.mul=function(z,T){if(z.isZero()||T.isZero())return new Y(0)._forceRed(this);var V=z.mul(T),C=V.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),f=V.isub(C).iushrn(this.shift),W=f;if(f.cmp(this.m)>=0)W=f.isub(this.m);else if(f.cmpn(0)<0)W=f.iadd(this.m);return W._forceRed(this)},J.prototype.invm=function(z){var T=this.imod(z._invmp(this.m).mul(this.r2));return T._forceRed(this)}})(typeof $>"u"||$,q)}),yf=lq((q,$)=>{var K=Rg(),_=W5(),P=s8().Buffer;function O(v){var X=v.modulus.byteLength(),Z;do Z=new K(_(X));while(Z.cmp(v.modulus)>=0||!Z.umod(v.prime1)||!Z.umod(v.prime2));return Z}function Y(v){var X=O(v),Z=X.toRed(K.mont(v.modulus)).redPow(new K(v.publicExponent)).fromRed();return{blinder:Z,unblinder:X.invm(v.modulus)}}function H(v,X){var Z=Y(X),k=X.modulus.byteLength(),G=new K(v).mul(Z.blinder).umod(X.modulus),S=G.toRed(K.mont(X.prime1)),N=G.toRed(K.mont(X.prime2)),E=X.coefficient,h=X.prime1,D=X.prime2,I=S.redPow(X.exponent1).fromRed(),g=N.redPow(X.exponent2).fromRed(),y=I.isub(g).imul(E).umod(h).imul(D);return g.iadd(y).imul(Z.unblinder).umod(X.modulus).toArrayLike(P,"be",k)}H.getr=O,$.exports=H}),hg=lq((q,$)=>{var K=If(),_=W5(),P=H5(),O=Lf(),Y=bf(),H=_j(),v=gf(),X=yf(),Z=s8().Buffer;$.exports=function(E,h,D){var I;if(E.padding)I=E.padding;else if(D)I=1;else I=4;var g=K(E),y;if(I===4)y=k(g,h);else if(I===1)y=G(g,h,D);else if(I===3){if(y=new H(h),y.cmp(g.modulus)>=0)throw Error("data too long for modulus")}else throw Error("unknown padding");if(D)return X(y,g);else return v(y,g)};function k(N,E){var h=N.modulus.byteLength(),D=E.length,I=P("sha1").update(Z.alloc(0)).digest(),g=I.length,y=2*g;if(D>h-y-2)throw Error("message too long");var p=Z.alloc(h-D-y-2),m=h-g-1,c=_(g),$q=Y(Z.concat([I,p,Z.alloc(1,1),E],m),O(c,m)),e=Y(c,O($q,g));return new H(Z.concat([Z.alloc(1),e,$q],h))}function G(N,E,h){var D=E.length,I=N.modulus.byteLength();if(D>I-11)throw Error("message too long");var g;if(h)g=Z.alloc(I-D-3,255);else g=S(I-D-3);return new H(Z.concat([Z.from([0,h?1:2]),g,Z.alloc(1),E],I))}function S(N){var E=Z.allocUnsafe(N),h=0,D=_(N*2),I=0,g;while(h<N){if(I===D.length)D=_(N*2),I=0;if(g=D[I++],g)E[h++]=g}return E}}),Dg=lq((q,$)=>{var K=If(),_=Lf(),P=bf(),O=_j(),Y=yf(),H=H5(),v=gf(),X=s8().Buffer;$.exports=function(N,E,h){var D;if(N.padding)D=N.padding;else if(h)D=1;else D=4;var I=K(N),g=I.modulus.byteLength();if(E.length>g||new O(E).cmp(I.modulus)>=0)throw Error("decryption error");var y;if(h)y=v(new O(E),I);else y=Y(E,I);var p=X.alloc(g-y.length);if(y=X.concat([p,y],g),D===4)return Z(I,y);else if(D===1)return k(I,y,h);else if(D===3)return y;else throw Error("unknown padding")};function Z(S,N){var E=S.modulus.byteLength(),h=H("sha1").update(X.alloc(0)).digest(),D=h.length;if(N[0]!==0)throw Error("decryption error");var I=N.slice(1,D+1),g=N.slice(D+1),y=P(I,_(g,D)),p=P(g,_(y,E-D-1));if(G(h,p.slice(0,D)))throw Error("decryption error");var m=D;while(p[m]===0)m++;if(p[m++]!==1)throw Error("decryption error");return p.slice(m)}function k(S,N,E){var h=N.slice(0,2),D=2,I=0;while(N[D++]!==0)if(D>=N.length){I++;break}var g=N.slice(2,D-1);if(h.toString("hex")!=="0002"&&!E||h.toString("hex")!=="0001"&&E)I++;if(g.length<8)I++;if(I)throw Error("decryption error");return N.slice(D)}function G(S,N){S=X.from(S),N=X.from(N);var E=0,h=S.length;if(S.length!==N.length)E++,h=Math.min(S.length,N.length);var D=-1;while(++D<h)E+=S[D]^N[D];return E}}),a3=lq((q)=>{q.publicEncrypt=hg(),q.privateDecrypt=Dg(),q.privateEncrypt=function(K,_){return q.publicEncrypt(K,_,!0)},q.publicDecrypt=function(K,_){return q.privateDecrypt(K,_,!0)}}),Ig=lq((q)=>{var $=($6(),M$(q6));if(typeof $.publicEncrypt!=="function")$=a3();if(q.publicEncrypt=$.publicEncrypt,q.privateDecrypt=$.privateDecrypt,typeof $.privateEncrypt!=="function")q.privateEncrypt=a3().privateEncrypt;else q.privateEncrypt=$.privateEncrypt;if(typeof $.publicDecrypt!=="function")q.publicDecrypt=a3().publicDecrypt;else q.publicDecrypt=$.publicDecrypt}),Lg=lq((q)=>{var $=s8(),K=W5(),_=$.Buffer,P=$.kMaxLength,O=globalThis.crypto||globalThis.msCrypto,Y=Math.pow(2,32)-1;function H(G,S){if(typeof G!=="number"||G!==G)throw TypeError("offset must be a number");if(G>Y||G<0)throw TypeError("offset must be a uint32");if(G>P||G>S)throw RangeError("offset out of range")}function v(G,S,N){if(typeof G!=="number"||G!==G)throw TypeError("size must be a number");if(G>Y||G<0)throw TypeError("size must be a uint32");if(G+S>N||G>P)throw RangeError("buffer too small")}O&&O.getRandomValues,q.randomFill=X,q.randomFillSync=k;function X(G,S,N,E){if(!_.isBuffer(G)&&!(G instanceof globalThis.Uint8Array))throw TypeError('"buf" argument must be a Buffer or Uint8Array');if(typeof S==="function")E=S,S=0,N=G.length;else if(typeof N==="function")E=N,N=G.length-S;else if(typeof E!=="function")throw TypeError('"cb" argument must be a function');return H(S,G.length),v(N,S,G.length),Z(G,S,N,E)}function Z(G,S,N,E){if(!1)var h,D;if(E){K(N,function(g,y){if(g)return E(g);y.copy(G,S),E(null,G)});return}var I=K(N);return I.copy(G,S),G}function k(G,S,N){if(typeof S>"u")S=0;if(!_.isBuffer(G)&&!(G instanceof globalThis.Uint8Array))throw TypeError('"buf" argument must be a Buffer or Uint8Array');if(H(S,G.length),N===void 0)N=G.length-S;return v(N,S,G.length),Z(G,S,N)}}),bg=lq((q,$)=>{var K=($6(),M$(q6));if(typeof K.randomFill==="function"&&typeof K.randomFillSync==="function")q.randomFill=K.randomFill,q.randomFillSync=K.randomFillSync;else $.exports=Lg()}),gg=lq((q)=>{q.randomBytes=q.rng=q.pseudoRandomBytes=q.prng=W5(),q.createHash=q.Hash=H5(),q.createHmac=q.Hmac=Af();var $=ub(),K=Object.keys($),_=["sha1","sha224","sha256","sha384","sha512","md5","rmd160"].concat(K);q.getHashes=function(){return _};var P=Gf();q.pbkdf2=P.pbkdf2,q.pbkdf2Sync=P.pbkdf2Sync;var O=cb();q.Cipher=O.Cipher,q.createCipher=O.createCipher,q.Cipheriv=O.Cipheriv,q.createCipheriv=O.createCipheriv,q.Decipher=O.Decipher,q.createDecipher=O.createDecipher,q.Decipheriv=O.Decipheriv,q.createDecipheriv=O.createDecipheriv,q.getCiphers=O.getCiphers,q.listCiphers=O.listCiphers;var Y=lb();q.DiffieHellmanGroup=Y.DiffieHellmanGroup,q.createDiffieHellmanGroup=Y.createDiffieHellmanGroup,q.getDiffieHellman=Y.getDiffieHellman,q.createDiffieHellman=Y.createDiffieHellman,q.DiffieHellman=Y.DiffieHellman;var H=db();q.createSign=H.createSign,q.Sign=H.Sign,q.createVerify=H.createVerify,q.Verify=H.Verify,q.createECDH=zg();var v=Ig();q.publicEncrypt=v.publicEncrypt,q.privateEncrypt=v.privateEncrypt,q.publicDecrypt=v.publicDecrypt,q.privateDecrypt=v.privateDecrypt;var X=bg();q.randomFill=X.randomFill,q.randomFillSync=X.randomFillSync,q.createCredentials=function(){throw Error(`sorry, createCredentials is not implemented yet
we accept pull requests
https://github.com/browserify/crypto-browserify`)},q.constants={DH_CHECK_P_NOT_SAFE_PRIME:2,DH_CHECK_P_NOT_PRIME:1,DH_UNABLE_TO_CHECK_GENERATOR:4,DH_NOT_SUITABLE_GENERATOR:8,NPN_ENABLED:1,ALPN_ENABLED:1,RSA_PKCS1_PADDING:1,RSA_SSLV23_PADDING:2,RSA_NO_PADDING:3,RSA_PKCS1_OAEP_PADDING:4,RSA_X931_PADDING:5,RSA_PKCS1_PSS_PADDING:6,POINT_CONVERSION_COMPRESSED:2,POINT_CONVERSION_UNCOMPRESSED:4,POINT_CONVERSION_HYBRID:6}}),k$=xb(gg(),1),yg=k$.prng,pg=k$.pseudoRandomBytes,xg=k$.rng,ug=k$.randomBytes,mg=k$.Hash,cg=k$.createHash,lg=k$.Hmac,dg=k$.createHmac,og=k$.getHashes,ng=k$.pbkdf2,rg=k$.pbkdf2Sync,Bg=k$.Cipher,ig=k$.createCipher,Ug=k$.Cipheriv,Fg=k$.createCipheriv,tg=k$.Decipher,Qg=k$.createDecipher,ag=k$.Decipheriv,eg=k$.createDecipheriv,sg=k$.getCiphers,qy=k$.listCiphers,$y=k$.DiffieHellmanGroup,Ky=k$.createDiffieHellmanGroup,_y=k$.getDiffieHellman,Py=k$.createDiffieHellman,Yy=k$.DiffieHellman,jy=k$.createSign,Oy=k$.Sign,Wy=k$.createVerify,Hy=k$.Verify,zy=k$.createECDH,Jy=k$.publicEncrypt,vy=k$.privateEncrypt,wy=k$.publicDecrypt,Ty=k$.privateDecrypt,Xy=k$.randomFill,fy=k$.randomFillSync,Ay=k$.createCredentials,ky=k$.constants,My=["p192","p224","p256","p384","p521","curve25519","ed25519","secp256k1","secp224r1","prime256v1","prime192v1","ed25519","secp384r1","secp521r1"];Cy=crypto,Ny=crypto});function Yp(q){if(!q||!/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(q))throw Error(`Invalid UUID format: ${q}`);return q}var wj;((O)=>{O.IMAGE="image";O.VIDEO="video";O.AUDIO="audio";O.DOCUMENT="document";O.LINK="link"})(wj||={});var Uf;((O)=>{O.DOCUMENT="document";O.FRAGMENT="fragment";O.MESSAGE="message";O.DESCRIPTION="description";O.CUSTOM="custom"})(Uf||={});function Op(q){return{...q,createdAt:Date.now(),metadata:{type:"message",timestamp:Date.now(),scope:q.agentId?"private":"shared"}}}function Wp(q){return q.type==="document"}function Hp(q){return q.type==="fragment"}function zp(q){return q.type==="message"}function Jp(q){return q.type==="description"}function vp(q){return q.type!=="document"&&q.type!=="fragment"&&q.type!=="message"&&q.type!=="description"}function wp(q){return q.metadata?.type==="document"}function Tp(q){return q.metadata?.type==="fragment"}function Xp(q,$=""){return q.content.text??$}var Ff;((K)=>{K.SHARED="shared";K.PRIVATE="private"})(Ff||={});var tf;(($)=>$.KNOWLEDGE="knowledge")(tf||={});var Qf;((_)=>{_.OWNER="OWNER";_.ADMIN="ADMIN";_.NONE="NONE"})(Qf||={});var Tj;((Z)=>{Z.SELF="SELF";Z.DM="DM";Z.GROUP="GROUP";Z.VOICE_DM="VOICE_DM";Z.VOICE_GROUP="VOICE_GROUP";Z.FEED="FEED";Z.THREAD="THREAD";Z.WORLD="WORLD";Z.FORUM="FORUM";Z.API="API"})(Tj||={});var af;((K)=>{K.ACTIVE="active";K.INACTIVE="inactive"})(af||={});function Zp(q={}){return{success:!0,...q}}var r$={TRANSCRIPTION:"transcription",VIDEO:"video",BROWSER:"browser",PDF:"pdf",REMOTE_FILES:"aws_s3",WEB_SEARCH:"web_search",EMAIL:"email",TEE:"tee",TASK:"task",WALLET:"wallet",LP_POOL:"lp_pool",TOKEN_DATA:"token_data",MESSAGE:"message",POST:"post",UNKNOWN:"unknown"};class I${runtime;constructor(q){if(q)this.runtime=q}static serviceType;config;static async start(q){throw Error("Not implemented")}static async stop(q){throw Error("Not implemented")}}function Mp(q,$){return q.getService($)}function Sp(q,$="UNKNOWN_ERROR"){if(q instanceof Error)return{code:$,message:q.message,cause:q};return{code:$,message:String(q)}}var L8={SMALL:"TEXT_SMALL",MEDIUM:"TEXT_LARGE",LARGE:"TEXT_LARGE",TEXT_SMALL:"TEXT_SMALL",TEXT_LARGE:"TEXT_LARGE",TEXT_EMBEDDING:"TEXT_EMBEDDING",TEXT_TOKENIZER_ENCODE:"TEXT_TOKENIZER_ENCODE",TEXT_TOKENIZER_DECODE:"TEXT_TOKENIZER_DECODE",TEXT_REASONING_SMALL:"REASONING_SMALL",TEXT_REASONING_LARGE:"REASONING_LARGE",TEXT_COMPLETION:"TEXT_COMPLETION",IMAGE:"IMAGE",IMAGE_DESCRIPTION:"IMAGE_DESCRIPTION",TRANSCRIPTION:"TRANSCRIPTION",TEXT_TO_SPEECH:"TEXT_TO_SPEECH",AUDIO:"AUDIO",VIDEO:"VIDEO",OBJECT_SMALL:"OBJECT_SMALL",OBJECT_LARGE:"OBJECT_LARGE"},X7={DEFAULT_MAX_TOKENS:"DEFAULT_MAX_TOKENS",DEFAULT_TEMPERATURE:"DEFAULT_TEMPERATURE",DEFAULT_FREQUENCY_PENALTY:"DEFAULT_FREQUENCY_PENALTY",DEFAULT_PRESENCE_PENALTY:"DEFAULT_PRESENCE_PENALTY",TEXT_SMALL_MAX_TOKENS:"TEXT_SMALL_MAX_TOKENS",TEXT_SMALL_TEMPERATURE:"TEXT_SMALL_TEMPERATURE",TEXT_SMALL_FREQUENCY_PENALTY:"TEXT_SMALL_FREQUENCY_PENALTY",TEXT_SMALL_PRESENCE_PENALTY:"TEXT_SMALL_PRESENCE_PENALTY",TEXT_LARGE_MAX_TOKENS:"TEXT_LARGE_MAX_TOKENS",TEXT_LARGE_TEMPERATURE:"TEXT_LARGE_TEMPERATURE",TEXT_LARGE_FREQUENCY_PENALTY:"TEXT_LARGE_FREQUENCY_PENALTY",TEXT_LARGE_PRESENCE_PENALTY:"TEXT_LARGE_PRESENCE_PENALTY",OBJECT_SMALL_MAX_TOKENS:"OBJECT_SMALL_MAX_TOKENS",OBJECT_SMALL_TEMPERATURE:"OBJECT_SMALL_TEMPERATURE",OBJECT_SMALL_FREQUENCY_PENALTY:"OBJECT_SMALL_FREQUENCY_PENALTY",OBJECT_SMALL_PRESENCE_PENALTY:"OBJECT_SMALL_PRESENCE_PENALTY",OBJECT_LARGE_MAX_TOKENS:"OBJECT_LARGE_MAX_TOKENS",OBJECT_LARGE_TEMPERATURE:"OBJECT_LARGE_TEMPERATURE",OBJECT_LARGE_FREQUENCY_PENALTY:"OBJECT_LARGE_FREQUENCY_PENALTY",OBJECT_LARGE_PRESENCE_PENALTY:"OBJECT_LARGE_PRESENCE_PENALTY",MODEL_MAX_TOKEN:"MODEL_MAX_TOKEN",MODEL_TEMPERATURE:"MODEL_TEMPERATURE",MODEL_FREQ_PENALTY:"MODEL_FREQ_PENALTY",MODEL_PRESENCE_PENALTY:"MODEL_PRESENCE_PENALTY"};function Np(q,$){if(!["TEXT_SMALL","TEXT_LARGE","OBJECT_SMALL","OBJECT_LARGE"].includes(q))return null;return`${q}_${$}`}var Rp={SMALL:384,MEDIUM:512,LARGE:768,XL:1024,XXL:1536,XXXL:3072};var Xj;((M)=>{M.WORLD_JOINED="WORLD_JOINED";M.WORLD_CONNECTED="WORLD_CONNECTED";M.WORLD_LEFT="WORLD_LEFT";M.ENTITY_JOINED="ENTITY_JOINED";M.ENTITY_LEFT="ENTITY_LEFT";M.ENTITY_UPDATED="ENTITY_UPDATED";M.ROOM_JOINED="ROOM_JOINED";M.ROOM_LEFT="ROOM_LEFT";M.MESSAGE_RECEIVED="MESSAGE_RECEIVED";M.MESSAGE_SENT="MESSAGE_SENT";M.MESSAGE_DELETED="MESSAGE_DELETED";M.CHANNEL_CLEARED="CHANNEL_CLEARED";M.VOICE_MESSAGE_RECEIVED="VOICE_MESSAGE_RECEIVED";M.VOICE_MESSAGE_SENT="VOICE_MESSAGE_SENT";M.REACTION_RECEIVED="REACTION_RECEIVED";M.POST_GENERATED="POST_GENERATED";M.INTERACTION_RECEIVED="INTERACTION_RECEIVED";M.RUN_STARTED="RUN_STARTED";M.RUN_ENDED="RUN_ENDED";M.RUN_TIMEOUT="RUN_TIMEOUT";M.ACTION_STARTED="ACTION_STARTED";M.ACTION_COMPLETED="ACTION_COMPLETED";M.EVALUATOR_STARTED="EVALUATOR_STARTED";M.EVALUATOR_COMPLETED="EVALUATOR_COMPLETED";M.MODEL_USED="MODEL_USED";M.EMBEDDING_GENERATION_REQUESTED="EMBEDDING_GENERATION_REQUESTED";M.EMBEDDING_GENERATION_COMPLETED="EMBEDDING_GENERATION_COMPLETED";M.EMBEDDING_GENERATION_FAILED="EMBEDDING_GENERATION_FAILED"})(Xj||={});var ef;((_)=>{_.DISCORD="DISCORD";_.TELEGRAM="TELEGRAM";_.TWITTER="TWITTER"})(ef||={});var sf;((P)=>{P.OFF="OFF";P.LOCAL="LOCAL";P.DOCKER="DOCKER";P.PRODUCTION="PRODUCTION"})(sf||={});var qA;(($)=>$.TDX_DSTACK="tdx_dstack")(qA||={});class $A extends I${static serviceType=r$.TOKEN_DATA;capabilityDescription="Provides standardized access to token market data."}var KA;((Y)=>{Y[Y.ROOM_JOINING=1]="ROOM_JOINING";Y[Y.SEND_MESSAGE=2]="SEND_MESSAGE";Y[Y.MESSAGE=3]="MESSAGE";Y[Y.ACK=4]="ACK";Y[Y.THINKING=5]="THINKING";Y[Y.CONTROL=6]="CONTROL"})(KA||={});class _A extends I${static serviceType=r$.WALLET;capabilityDescription="Provides standardized access to wallet balances and portfolios."}class PA extends I${static serviceType="lp";capabilityDescription="Provides standardized access to DEX liquidity pools."}class YA extends I${static serviceType=r$.PDF;capabilityDescription="PDF processing, extraction, and generation capabilities"}class jA extends I${static serviceType=r$.VIDEO;capabilityDescription="Video download, processing, and conversion capabilities"}class OA extends I${static serviceType=r$.BROWSER;capabilityDescription="Web browser automation and scraping capabilities"}class WA extends I${static serviceType=r$.TRANSCRIPTION;capabilityDescription="Audio transcription and speech processing capabilities"}class HA extends I${static serviceType=r$.WEB_SEARCH;capabilityDescription="Web search and content discovery capabilities"}class zA extends I${static serviceType=r$.EMAIL;capabilityDescription="Email sending, receiving, and management capabilities"}class JA extends I${static serviceType=r$.MESSAGE;capabilityDescription="Message sending, receiving, and management capabilities"}class vA extends I${static serviceType=r$.POST;capabilityDescription="Social media posting and content management capabilities"}class f5{constructor(q){Object.defineProperty(this,"pageContent",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metadata",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.pageContent=q.pageContent!==void 0?q.pageContent.toString():"",this.metadata=q.metadata??{},this.id=q.id}}var v_={};yK(v_,{void:()=>QA,util:()=>Z$,unknown:()=>FA,union:()=>qk,undefined:()=>BA,tuple:()=>_k,transformer:()=>wk,symbol:()=>rA,string:()=>Cj,strictObject:()=>sA,setErrorMap:()=>XA,set:()=>jk,record:()=>Pk,quotelessJson:()=>wA,promise:()=>vk,preprocess:()=>fk,pipeline:()=>Ak,ostring:()=>kk,optional:()=>Tk,onumber:()=>Gk,oboolean:()=>Zk,objectUtil:()=>A5,object:()=>eA,number:()=>Nj,nullable:()=>Xk,null:()=>iA,never:()=>tA,nativeEnum:()=>Jk,nan:()=>dA,map:()=>Yk,makeIssue:()=>f7,literal:()=>Hk,lazy:()=>Wk,late:()=>cA,isValid:()=>pK,isDirty:()=>QP,isAsync:()=>U_,isAborted:()=>tP,intersection:()=>Kk,instanceof:()=>lA,getParsedType:()=>m6,getErrorMap:()=>i_,function:()=>Ok,enum:()=>zk,effect:()=>wk,discriminatedUnion:()=>$k,defaultErrorMap:()=>WK,datetimeRegex:()=>Vj,date:()=>nA,custom:()=>Sj,coerce:()=>Vk,boolean:()=>Ej,bigint:()=>oA,array:()=>aA,any:()=>UA,addIssueToContext:()=>nq,ZodVoid:()=>k7,ZodUnknown:()=>xK,ZodUnion:()=>s_,ZodUndefined:()=>a_,ZodType:()=>f$,ZodTuple:()=>l6,ZodTransformer:()=>N6,ZodSymbol:()=>A7,ZodString:()=>V6,ZodSet:()=>z_,ZodSchema:()=>f$,ZodRecord:()=>G7,ZodReadonly:()=>j4,ZodPromise:()=>J_,ZodPipeline:()=>M7,ZodParsedType:()=>dq,ZodOptional:()=>S6,ZodObject:()=>p$,ZodNumber:()=>uK,ZodNullable:()=>zK,ZodNull:()=>e_,ZodNever:()=>c6,ZodNativeEnum:()=>_4,ZodNaN:()=>V7,ZodMap:()=>Z7,ZodLiteral:()=>K4,ZodLazy:()=>$4,ZodIssueCode:()=>xq,ZodIntersection:()=>q4,ZodFunction:()=>t_,ZodFirstPartyTypeKind:()=>_$,ZodError:()=>r8,ZodEnum:()=>cK,ZodEffects:()=>N6,ZodDiscriminatedUnion:()=>aP,ZodDefault:()=>P4,ZodDate:()=>W_,ZodCatch:()=>Y4,ZodBranded:()=>eP,ZodBoolean:()=>Q_,ZodBigInt:()=>mK,ZodArray:()=>M6,ZodAny:()=>H_,Schema:()=>f$,ParseStatus:()=>G8,OK:()=>b8,NEVER:()=>Mk,INVALID:()=>$$,EMPTY_PATH:()=>fA,DIRTY:()=>O_,BRAND:()=>mA});var Z$;(function(q){q.assertEqual=(P)=>{};function $(P){}q.assertIs=$;function K(P){throw Error()}q.assertNever=K,q.arrayToEnum=(P)=>{let O={};for(let Y of P)O[Y]=Y;return O},q.getValidEnumValues=(P)=>{let O=q.objectKeys(P).filter((H)=>typeof P[P[H]]!=="number"),Y={};for(let H of O)Y[H]=P[H];return q.objectValues(Y)},q.objectValues=(P)=>{return q.objectKeys(P).map(function(O){return P[O]})},q.objectKeys=typeof Object.keys==="function"?(P)=>Object.keys(P):(P)=>{let O=[];for(let Y in P)if(Object.prototype.hasOwnProperty.call(P,Y))O.push(Y);return O},q.find=(P,O)=>{for(let Y of P)if(O(Y))return Y;return},q.isInteger=typeof Number.isInteger==="function"?(P)=>Number.isInteger(P):(P)=>typeof P==="number"&&Number.isFinite(P)&&Math.floor(P)===P;function _(P,O=" | "){return P.map((Y)=>typeof Y==="string"?`'${Y}'`:Y).join(O)}q.joinValues=_,q.jsonStringifyReplacer=(P,O)=>{if(typeof O==="bigint")return O.toString();return O}})(Z$||(Z$={}));var A5;(function(q){q.mergeShapes=($,K)=>{return{...$,...K}}})(A5||(A5={}));var dq=Z$.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),m6=(q)=>{switch(typeof q){case"undefined":return dq.undefined;case"string":return dq.string;case"number":return Number.isNaN(q)?dq.nan:dq.number;case"boolean":return dq.boolean;case"function":return dq.function;case"bigint":return dq.bigint;case"symbol":return dq.symbol;case"object":if(Array.isArray(q))return dq.array;if(q===null)return dq.null;if(q.then&&typeof q.then==="function"&&q.catch&&typeof q.catch==="function")return dq.promise;if(typeof Map<"u"&&q instanceof Map)return dq.map;if(typeof Set<"u"&&q instanceof Set)return dq.set;if(typeof Date<"u"&&q instanceof Date)return dq.date;return dq.object;default:return dq.unknown}};var xq=Z$.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),wA=(q)=>{return JSON.stringify(q,null,2).replace(/"([^"]+)":/g,"$1:")};class r8 extends Error{get errors(){return this.issues}constructor(q){super();this.issues=[],this.addIssue=(K)=>{this.issues=[...this.issues,K]},this.addIssues=(K=[])=>{this.issues=[...this.issues,...K]};let $=new.target.prototype;if(Object.setPrototypeOf)Object.setPrototypeOf(this,$);else this.__proto__=$;this.name="ZodError",this.issues=q}format(q){let $=q||function(P){return P.message},K={_errors:[]},_=(P)=>{for(let O of P.issues)if(O.code==="invalid_union")O.unionErrors.map(_);else if(O.code==="invalid_return_type")_(O.returnTypeError);else if(O.code==="invalid_arguments")_(O.argumentsError);else if(O.path.length===0)K._errors.push($(O));else{let Y=K,H=0;while(H<O.path.length){let v=O.path[H];if(H!==O.path.length-1)Y[v]=Y[v]||{_errors:[]};else Y[v]=Y[v]||{_errors:[]},Y[v]._errors.push($(O));Y=Y[v],H++}}};return _(this),K}static assert(q){if(!(q instanceof r8))throw Error(`Not a ZodError: ${q}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,Z$.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(q=($)=>$.message){let $={},K=[];for(let _ of this.issues)if(_.path.length>0){let P=_.path[0];$[P]=$[P]||[],$[P].push(q(_))}else K.push(q(_));return{formErrors:K,fieldErrors:$}}get formErrors(){return this.flatten()}}r8.create=(q)=>{return new r8(q)};var TA=(q,$)=>{let K;switch(q.code){case xq.invalid_type:if(q.received===dq.undefined)K="Required";else K=`Expected ${q.expected}, received ${q.received}`;break;case xq.invalid_literal:K=`Invalid literal value, expected ${JSON.stringify(q.expected,Z$.jsonStringifyReplacer)}`;break;case xq.unrecognized_keys:K=`Unrecognized key(s) in object: ${Z$.joinValues(q.keys,", ")}`;break;case xq.invalid_union:K="Invalid input";break;case xq.invalid_union_discriminator:K=`Invalid discriminator value. Expected ${Z$.joinValues(q.options)}`;break;case xq.invalid_enum_value:K=`Invalid enum value. Expected ${Z$.joinValues(q.options)}, received '${q.received}'`;break;case xq.invalid_arguments:K="Invalid function arguments";break;case xq.invalid_return_type:K="Invalid function return type";break;case xq.invalid_date:K="Invalid date";break;case xq.invalid_string:if(typeof q.validation==="object")if("includes"in q.validation){if(K=`Invalid input: must include "${q.validation.includes}"`,typeof q.validation.position==="number")K=`${K} at one or more positions greater than or equal to ${q.validation.position}`}else if("startsWith"in q.validation)K=`Invalid input: must start with "${q.validation.startsWith}"`;else if("endsWith"in q.validation)K=`Invalid input: must end with "${q.validation.endsWith}"`;else Z$.assertNever(q.validation);else if(q.validation!=="regex")K=`Invalid ${q.validation}`;else K="Invalid";break;case xq.too_small:if(q.type==="array")K=`Array must contain ${q.exact?"exactly":q.inclusive?"at least":"more than"} ${q.minimum} element(s)`;else if(q.type==="string")K=`String must contain ${q.exact?"exactly":q.inclusive?"at least":"over"} ${q.minimum} character(s)`;else if(q.type==="number")K=`Number must be ${q.exact?"exactly equal to ":q.inclusive?"greater than or equal to ":"greater than "}${q.minimum}`;else if(q.type==="bigint")K=`Number must be ${q.exact?"exactly equal to ":q.inclusive?"greater than or equal to ":"greater than "}${q.minimum}`;else if(q.type==="date")K=`Date must be ${q.exact?"exactly equal to ":q.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(q.minimum))}`;else K="Invalid input";break;case xq.too_big:if(q.type==="array")K=`Array must contain ${q.exact?"exactly":q.inclusive?"at most":"less than"} ${q.maximum} element(s)`;else if(q.type==="string")K=`String must contain ${q.exact?"exactly":q.inclusive?"at most":"under"} ${q.maximum} character(s)`;else if(q.type==="number")K=`Number must be ${q.exact?"exactly":q.inclusive?"less than or equal to":"less than"} ${q.maximum}`;else if(q.type==="bigint")K=`BigInt must be ${q.exact?"exactly":q.inclusive?"less than or equal to":"less than"} ${q.maximum}`;else if(q.type==="date")K=`Date must be ${q.exact?"exactly":q.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(q.maximum))}`;else K="Invalid input";break;case xq.custom:K="Invalid input";break;case xq.invalid_intersection_types:K="Intersection results could not be merged";break;case xq.not_multiple_of:K=`Number must be a multiple of ${q.multipleOf}`;break;case xq.not_finite:K="Number must be finite";break;default:K=$.defaultError,Z$.assertNever(q)}return{message:K}},WK=TA;var fj=WK;function XA(q){fj=q}function i_(){return fj}var f7=(q)=>{let{data:$,path:K,errorMaps:_,issueData:P}=q,O=[...K,...P.path||[]],Y={...P,path:O};if(P.message!==void 0)return{...P,path:O,message:P.message};let H="",v=_.filter((X)=>!!X).slice().reverse();for(let X of v)H=X(Y,{data:$,defaultError:H}).message;return{...P,path:O,message:H}},fA=[];function nq(q,$){let K=i_(),_=f7({issueData:$,data:q.data,path:q.path,errorMaps:[q.common.contextualErrorMap,q.schemaErrorMap,K,K===WK?void 0:WK].filter((P)=>!!P)});q.common.issues.push(_)}class G8{constructor(){this.value="valid"}dirty(){if(this.value==="valid")this.value="dirty"}abort(){if(this.value!=="aborted")this.value="aborted"}static mergeArray(q,$){let K=[];for(let _ of $){if(_.status==="aborted")return $$;if(_.status==="dirty")q.dirty();K.push(_.value)}return{status:q.value,value:K}}static async mergeObjectAsync(q,$){let K=[];for(let _ of $){let P=await _.key,O=await _.value;K.push({key:P,value:O})}return G8.mergeObjectSync(q,K)}static mergeObjectSync(q,$){let K={};for(let _ of $){let{key:P,value:O}=_;if(P.status==="aborted")return $$;if(O.status==="aborted")return $$;if(P.status==="dirty")q.dirty();if(O.status==="dirty")q.dirty();if(P.value!=="__proto__"&&(typeof O.value<"u"||_.alwaysSet))K[P.value]=O.value}return{status:q.value,value:K}}}var $$=Object.freeze({status:"aborted"}),O_=(q)=>({status:"dirty",value:q}),b8=(q)=>({status:"valid",value:q}),tP=(q)=>q.status==="aborted",QP=(q)=>q.status==="dirty",pK=(q)=>q.status==="valid",U_=(q)=>typeof Promise<"u"&&q instanceof Promise;var aq;(function(q){q.errToObj=($)=>typeof $==="string"?{message:$}:$||{},q.toString=($)=>typeof $==="string"?$:$?.message})(aq||(aq={}));class C6{constructor(q,$,K,_){this._cachedPath=[],this.parent=q,this.data=$,this._path=K,this._key=_}get path(){if(!this._cachedPath.length)if(Array.isArray(this._key))this._cachedPath.push(...this._path,...this._key);else this._cachedPath.push(...this._path,this._key);return this._cachedPath}}var Aj=(q,$)=>{if(pK($))return{success:!0,data:$.value};else{if(!q.common.issues.length)throw Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;let K=new r8(q.common.issues);return this._error=K,this._error}}}};function v$(q){if(!q)return{};let{errorMap:$,invalid_type_error:K,required_error:_,description:P}=q;if($&&(K||_))throw Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);if($)return{errorMap:$,description:P};return{errorMap:(Y,H)=>{let{message:v}=q;if(Y.code==="invalid_enum_value")return{message:v??H.defaultError};if(typeof H.data>"u")return{message:v??_??H.defaultError};if(Y.code!=="invalid_type")return{message:H.defaultError};return{message:v??K??H.defaultError}},description:P}}class f${get description(){return this._def.description}_getType(q){return m6(q.data)}_getOrReturnCtx(q,$){return $||{common:q.parent.common,data:q.data,parsedType:m6(q.data),schemaErrorMap:this._def.errorMap,path:q.path,parent:q.parent}}_processInputParams(q){return{status:new G8,ctx:{common:q.parent.common,data:q.data,parsedType:m6(q.data),schemaErrorMap:this._def.errorMap,path:q.path,parent:q.parent}}}_parseSync(q){let $=this._parse(q);if(U_($))throw Error("Synchronous parse encountered promise.");return $}_parseAsync(q){let $=this._parse(q);return Promise.resolve($)}parse(q,$){let K=this.safeParse(q,$);if(K.success)return K.data;throw K.error}safeParse(q,$){let K={common:{issues:[],async:$?.async??!1,contextualErrorMap:$?.errorMap},path:$?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:q,parsedType:m6(q)},_=this._parseSync({data:q,path:K.path,parent:K});return Aj(K,_)}"~validate"(q){let $={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:q,parsedType:m6(q)};if(!this["~standard"].async)try{let K=this._parseSync({data:q,path:[],parent:$});return pK(K)?{value:K.value}:{issues:$.common.issues}}catch(K){if(K?.message?.toLowerCase()?.includes("encountered"))this["~standard"].async=!0;$.common={issues:[],async:!0}}return this._parseAsync({data:q,path:[],parent:$}).then((K)=>pK(K)?{value:K.value}:{issues:$.common.issues})}async parseAsync(q,$){let K=await this.safeParseAsync(q,$);if(K.success)return K.data;throw K.error}async safeParseAsync(q,$){let K={common:{issues:[],contextualErrorMap:$?.errorMap,async:!0},path:$?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:q,parsedType:m6(q)},_=this._parse({data:q,path:K.path,parent:K}),P=await(U_(_)?_:Promise.resolve(_));return Aj(K,P)}refine(q,$){let K=(_)=>{if(typeof $==="string"||typeof $>"u")return{message:$};else if(typeof $==="function")return $(_);else return $};return this._refinement((_,P)=>{let O=q(_),Y=()=>P.addIssue({code:xq.custom,...K(_)});if(typeof Promise<"u"&&O instanceof Promise)return O.then((H)=>{if(!H)return Y(),!1;else return!0});if(!O)return Y(),!1;else return!0})}refinement(q,$){return this._refinement((K,_)=>{if(!q(K))return _.addIssue(typeof $==="function"?$(K,_):$),!1;else return!0})}_refinement(q){return new N6({schema:this,typeName:_$.ZodEffects,effect:{type:"refinement",refinement:q}})}superRefine(q){return this._refinement(q)}constructor(q){this.spa=this.safeParseAsync,this._def=q,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:($)=>this["~validate"]($)}}optional(){return S6.create(this,this._def)}nullable(){return zK.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return M6.create(this)}promise(){return J_.create(this,this._def)}or(q){return s_.create([this,q],this._def)}and(q){return q4.create(this,q,this._def)}transform(q){return new N6({...v$(this._def),schema:this,typeName:_$.ZodEffects,effect:{type:"transform",transform:q}})}default(q){let $=typeof q==="function"?q:()=>q;return new P4({...v$(this._def),innerType:this,defaultValue:$,typeName:_$.ZodDefault})}brand(){return new eP({typeName:_$.ZodBranded,type:this,...v$(this._def)})}catch(q){let $=typeof q==="function"?q:()=>q;return new Y4({...v$(this._def),innerType:this,catchValue:$,typeName:_$.ZodCatch})}describe(q){return new this.constructor({...this._def,description:q})}pipe(q){return M7.create(this,q)}readonly(){return j4.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}var AA=/^c[^\s-]{8,}$/i,kA=/^[0-9a-z]+$/,GA=/^[0-9A-HJKMNP-TV-Z]{26}$/i,ZA=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,VA=/^[a-z0-9_-]{21}$/i,MA=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,SA=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,CA=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,NA="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$",k5,EA=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,RA=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,hA=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,DA=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,IA=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,LA=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,Gj="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",bA=new RegExp(`^${Gj}$`);function Zj(q){let $="[0-5]\\d";if(q.precision)$=`${$}\\.\\d{${q.precision}}`;else if(q.precision==null)$=`${$}(\\.\\d+)?`;let K=q.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${$})${K}`}function gA(q){return new RegExp(`^${Zj(q)}$`)}function Vj(q){let $=`${Gj}T${Zj(q)}`,K=[];if(K.push(q.local?"Z?":"Z"),q.offset)K.push("([+-]\\d{2}:?\\d{2})");return $=`${$}(${K.join("|")})`,new RegExp(`^${$}$`)}function yA(q,$){if(($==="v4"||!$)&&EA.test(q))return!0;if(($==="v6"||!$)&&hA.test(q))return!0;return!1}function pA(q,$){if(!MA.test(q))return!1;try{let[K]=q.split(".");if(!K)return!1;let _=K.replace(/-/g,"+").replace(/_/g,"/").padEnd(K.length+(4-K.length%4)%4,"="),P=JSON.parse(atob(_));if(typeof P!=="object"||P===null)return!1;if("typ"in P&&P?.typ!=="JWT")return!1;if(!P.alg)return!1;if($&&P.alg!==$)return!1;return!0}catch{return!1}}function xA(q,$){if(($==="v4"||!$)&&RA.test(q))return!0;if(($==="v6"||!$)&&DA.test(q))return!0;return!1}class V6 extends f${_parse(q){if(this._def.coerce)q.data=String(q.data);if(this._getType(q)!==dq.string){let P=this._getOrReturnCtx(q);return nq(P,{code:xq.invalid_type,expected:dq.string,received:P.parsedType}),$$}let K=new G8,_=void 0;for(let P of this._def.checks)if(P.kind==="min"){if(q.data.length<P.value)_=this._getOrReturnCtx(q,_),nq(_,{code:xq.too_small,minimum:P.value,type:"string",inclusive:!0,exact:!1,message:P.message}),K.dirty()}else if(P.kind==="max"){if(q.data.length>P.value)_=this._getOrReturnCtx(q,_),nq(_,{code:xq.too_big,maximum:P.value,type:"string",inclusive:!0,exact:!1,message:P.message}),K.dirty()}else if(P.kind==="length"){let O=q.data.length>P.value,Y=q.data.length<P.value;if(O||Y){if(_=this._getOrReturnCtx(q,_),O)nq(_,{code:xq.too_big,maximum:P.value,type:"string",inclusive:!0,exact:!0,message:P.message});else if(Y)nq(_,{code:xq.too_small,minimum:P.value,type:"string",inclusive:!0,exact:!0,message:P.message});K.dirty()}}else if(P.kind==="email"){if(!CA.test(q.data))_=this._getOrReturnCtx(q,_),nq(_,{validation:"email",code:xq.invalid_string,message:P.message}),K.dirty()}else if(P.kind==="emoji"){if(!k5)k5=new RegExp(NA,"u");if(!k5.test(q.data))_=this._getOrReturnCtx(q,_),nq(_,{validation:"emoji",code:xq.invalid_string,message:P.message}),K.dirty()}else if(P.kind==="uuid"){if(!ZA.test(q.data))_=this._getOrReturnCtx(q,_),nq(_,{validation:"uuid",code:xq.invalid_string,message:P.message}),K.dirty()}else if(P.kind==="nanoid"){if(!VA.test(q.data))_=this._getOrReturnCtx(q,_),nq(_,{validation:"nanoid",code:xq.invalid_string,message:P.message}),K.dirty()}else if(P.kind==="cuid"){if(!AA.test(q.data))_=this._getOrReturnCtx(q,_),nq(_,{validation:"cuid",code:xq.invalid_string,message:P.message}),K.dirty()}else if(P.kind==="cuid2"){if(!kA.test(q.data))_=this._getOrReturnCtx(q,_),nq(_,{validation:"cuid2",code:xq.invalid_string,message:P.message}),K.dirty()}else if(P.kind==="ulid"){if(!GA.test(q.data))_=this._getOrReturnCtx(q,_),nq(_,{validation:"ulid",code:xq.invalid_string,message:P.message}),K.dirty()}else if(P.kind==="url")try{new URL(q.data)}catch{_=this._getOrReturnCtx(q,_),nq(_,{validation:"url",code:xq.invalid_string,message:P.message}),K.dirty()}else if(P.kind==="regex"){if(P.regex.lastIndex=0,!P.regex.test(q.data))_=this._getOrReturnCtx(q,_),nq(_,{validation:"regex",code:xq.invalid_string,message:P.message}),K.dirty()}else if(P.kind==="trim")q.data=q.data.trim();else if(P.kind==="includes"){if(!q.data.includes(P.value,P.position))_=this._getOrReturnCtx(q,_),nq(_,{code:xq.invalid_string,validation:{includes:P.value,position:P.position},message:P.message}),K.dirty()}else if(P.kind==="toLowerCase")q.data=q.data.toLowerCase();else if(P.kind==="toUpperCase")q.data=q.data.toUpperCase();else if(P.kind==="startsWith"){if(!q.data.startsWith(P.value))_=this._getOrReturnCtx(q,_),nq(_,{code:xq.invalid_string,validation:{startsWith:P.value},message:P.message}),K.dirty()}else if(P.kind==="endsWith"){if(!q.data.endsWith(P.value))_=this._getOrReturnCtx(q,_),nq(_,{code:xq.invalid_string,validation:{endsWith:P.value},message:P.message}),K.dirty()}else if(P.kind==="datetime"){if(!Vj(P).test(q.data))_=this._getOrReturnCtx(q,_),nq(_,{code:xq.invalid_string,validation:"datetime",message:P.message}),K.dirty()}else if(P.kind==="date"){if(!bA.test(q.data))_=this._getOrReturnCtx(q,_),nq(_,{code:xq.invalid_string,validation:"date",message:P.message}),K.dirty()}else if(P.kind==="time"){if(!gA(P).test(q.data))_=this._getOrReturnCtx(q,_),nq(_,{code:xq.invalid_string,validation:"time",message:P.message}),K.dirty()}else if(P.kind==="duration"){if(!SA.test(q.data))_=this._getOrReturnCtx(q,_),nq(_,{validation:"duration",code:xq.invalid_string,message:P.message}),K.dirty()}else if(P.kind==="ip"){if(!yA(q.data,P.version))_=this._getOrReturnCtx(q,_),nq(_,{validation:"ip",code:xq.invalid_string,message:P.message}),K.dirty()}else if(P.kind==="jwt"){if(!pA(q.data,P.alg))_=this._getOrReturnCtx(q,_),nq(_,{validation:"jwt",code:xq.invalid_string,message:P.message}),K.dirty()}else if(P.kind==="cidr"){if(!xA(q.data,P.version))_=this._getOrReturnCtx(q,_),nq(_,{validation:"cidr",code:xq.invalid_string,message:P.message}),K.dirty()}else if(P.kind==="base64"){if(!IA.test(q.data))_=this._getOrReturnCtx(q,_),nq(_,{validation:"base64",code:xq.invalid_string,message:P.message}),K.dirty()}else if(P.kind==="base64url"){if(!LA.test(q.data))_=this._getOrReturnCtx(q,_),nq(_,{validation:"base64url",code:xq.invalid_string,message:P.message}),K.dirty()}else Z$.assertNever(P);return{status:K.value,value:q.data}}_regex(q,$,K){return this.refinement((_)=>q.test(_),{validation:$,code:xq.invalid_string,...aq.errToObj(K)})}_addCheck(q){return new V6({...this._def,checks:[...this._def.checks,q]})}email(q){return this._addCheck({kind:"email",...aq.errToObj(q)})}url(q){return this._addCheck({kind:"url",...aq.errToObj(q)})}emoji(q){return this._addCheck({kind:"emoji",...aq.errToObj(q)})}uuid(q){return this._addCheck({kind:"uuid",...aq.errToObj(q)})}nanoid(q){return this._addCheck({kind:"nanoid",...aq.errToObj(q)})}cuid(q){return this._addCheck({kind:"cuid",...aq.errToObj(q)})}cuid2(q){return this._addCheck({kind:"cuid2",...aq.errToObj(q)})}ulid(q){return this._addCheck({kind:"ulid",...aq.errToObj(q)})}base64(q){return this._addCheck({kind:"base64",...aq.errToObj(q)})}base64url(q){return this._addCheck({kind:"base64url",...aq.errToObj(q)})}jwt(q){return this._addCheck({kind:"jwt",...aq.errToObj(q)})}ip(q){return this._addCheck({kind:"ip",...aq.errToObj(q)})}cidr(q){return this._addCheck({kind:"cidr",...aq.errToObj(q)})}datetime(q){if(typeof q==="string")return this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:q});return this._addCheck({kind:"datetime",precision:typeof q?.precision>"u"?null:q?.precision,offset:q?.offset??!1,local:q?.local??!1,...aq.errToObj(q?.message)})}date(q){return this._addCheck({kind:"date",message:q})}time(q){if(typeof q==="string")return this._addCheck({kind:"time",precision:null,message:q});return this._addCheck({kind:"time",precision:typeof q?.precision>"u"?null:q?.precision,...aq.errToObj(q?.message)})}duration(q){return this._addCheck({kind:"duration",...aq.errToObj(q)})}regex(q,$){return this._addCheck({kind:"regex",regex:q,...aq.errToObj($)})}includes(q,$){return this._addCheck({kind:"includes",value:q,position:$?.position,...aq.errToObj($?.message)})}startsWith(q,$){return this._addCheck({kind:"startsWith",value:q,...aq.errToObj($)})}endsWith(q,$){return this._addCheck({kind:"endsWith",value:q,...aq.errToObj($)})}min(q,$){return this._addCheck({kind:"min",value:q,...aq.errToObj($)})}max(q,$){return this._addCheck({kind:"max",value:q,...aq.errToObj($)})}length(q,$){return this._addCheck({kind:"length",value:q,...aq.errToObj($)})}nonempty(q){return this.min(1,aq.errToObj(q))}trim(){return new V6({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new V6({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new V6({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find((q)=>q.kind==="datetime")}get isDate(){return!!this._def.checks.find((q)=>q.kind==="date")}get isTime(){return!!this._def.checks.find((q)=>q.kind==="time")}get isDuration(){return!!this._def.checks.find((q)=>q.kind==="duration")}get isEmail(){return!!this._def.checks.find((q)=>q.kind==="email")}get isURL(){return!!this._def.checks.find((q)=>q.kind==="url")}get isEmoji(){return!!this._def.checks.find((q)=>q.kind==="emoji")}get isUUID(){return!!this._def.checks.find((q)=>q.kind==="uuid")}get isNANOID(){return!!this._def.checks.find((q)=>q.kind==="nanoid")}get isCUID(){return!!this._def.checks.find((q)=>q.kind==="cuid")}get isCUID2(){return!!this._def.checks.find((q)=>q.kind==="cuid2")}get isULID(){return!!this._def.checks.find((q)=>q.kind==="ulid")}get isIP(){return!!this._def.checks.find((q)=>q.kind==="ip")}get isCIDR(){return!!this._def.checks.find((q)=>q.kind==="cidr")}get isBase64(){return!!this._def.checks.find((q)=>q.kind==="base64")}get isBase64url(){return!!this._def.checks.find((q)=>q.kind==="base64url")}get minLength(){let q=null;for(let $ of this._def.checks)if($.kind==="min"){if(q===null||$.value>q)q=$.value}return q}get maxLength(){let q=null;for(let $ of this._def.checks)if($.kind==="max"){if(q===null||$.value<q)q=$.value}return q}}V6.create=(q)=>{return new V6({checks:[],typeName:_$.ZodString,coerce:q?.coerce??!1,...v$(q)})};function uA(q,$){let K=(q.toString().split(".")[1]||"").length,_=($.toString().split(".")[1]||"").length,P=K>_?K:_,O=Number.parseInt(q.toFixed(P).replace(".","")),Y=Number.parseInt($.toFixed(P).replace(".",""));return O%Y/10**P}class uK extends f${constructor(){super(...arguments);this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(q){if(this._def.coerce)q.data=Number(q.data);if(this._getType(q)!==dq.number){let P=this._getOrReturnCtx(q);return nq(P,{code:xq.invalid_type,expected:dq.number,received:P.parsedType}),$$}let K=void 0,_=new G8;for(let P of this._def.checks)if(P.kind==="int"){if(!Z$.isInteger(q.data))K=this._getOrReturnCtx(q,K),nq(K,{code:xq.invalid_type,expected:"integer",received:"float",message:P.message}),_.dirty()}else if(P.kind==="min"){if(P.inclusive?q.data<P.value:q.data<=P.value)K=this._getOrReturnCtx(q,K),nq(K,{code:xq.too_small,minimum:P.value,type:"number",inclusive:P.inclusive,exact:!1,message:P.message}),_.dirty()}else if(P.kind==="max"){if(P.inclusive?q.data>P.value:q.data>=P.value)K=this._getOrReturnCtx(q,K),nq(K,{code:xq.too_big,maximum:P.value,type:"number",inclusive:P.inclusive,exact:!1,message:P.message}),_.dirty()}else if(P.kind==="multipleOf"){if(uA(q.data,P.value)!==0)K=this._getOrReturnCtx(q,K),nq(K,{code:xq.not_multiple_of,multipleOf:P.value,message:P.message}),_.dirty()}else if(P.kind==="finite"){if(!Number.isFinite(q.data))K=this._getOrReturnCtx(q,K),nq(K,{code:xq.not_finite,message:P.message}),_.dirty()}else Z$.assertNever(P);return{status:_.value,value:q.data}}gte(q,$){return this.setLimit("min",q,!0,aq.toString($))}gt(q,$){return this.setLimit("min",q,!1,aq.toString($))}lte(q,$){return this.setLimit("max",q,!0,aq.toString($))}lt(q,$){return this.setLimit("max",q,!1,aq.toString($))}setLimit(q,$,K,_){return new uK({...this._def,checks:[...this._def.checks,{kind:q,value:$,inclusive:K,message:aq.toString(_)}]})}_addCheck(q){return new uK({...this._def,checks:[...this._def.checks,q]})}int(q){return this._addCheck({kind:"int",message:aq.toString(q)})}positive(q){return this._addCheck({kind:"min",value:0,inclusive:!1,message:aq.toString(q)})}negative(q){return this._addCheck({kind:"max",value:0,inclusive:!1,message:aq.toString(q)})}nonpositive(q){return this._addCheck({kind:"max",value:0,inclusive:!0,message:aq.toString(q)})}nonnegative(q){return this._addCheck({kind:"min",value:0,inclusive:!0,message:aq.toString(q)})}multipleOf(q,$){return this._addCheck({kind:"multipleOf",value:q,message:aq.toString($)})}finite(q){return this._addCheck({kind:"finite",message:aq.toString(q)})}safe(q){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:aq.toString(q)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:aq.toString(q)})}get minValue(){let q=null;for(let $ of this._def.checks)if($.kind==="min"){if(q===null||$.value>q)q=$.value}return q}get maxValue(){let q=null;for(let $ of this._def.checks)if($.kind==="max"){if(q===null||$.value<q)q=$.value}return q}get isInt(){return!!this._def.checks.find((q)=>q.kind==="int"||q.kind==="multipleOf"&&Z$.isInteger(q.value))}get isFinite(){let q=null,$=null;for(let K of this._def.checks)if(K.kind==="finite"||K.kind==="int"||K.kind==="multipleOf")return!0;else if(K.kind==="min"){if($===null||K.value>$)$=K.value}else if(K.kind==="max"){if(q===null||K.value<q)q=K.value}return Number.isFinite($)&&Number.isFinite(q)}}uK.create=(q)=>{return new uK({checks:[],typeName:_$.ZodNumber,coerce:q?.coerce||!1,...v$(q)})};class mK extends f${constructor(){super(...arguments);this.min=this.gte,this.max=this.lte}_parse(q){if(this._def.coerce)try{q.data=BigInt(q.data)}catch{return this._getInvalidInput(q)}if(this._getType(q)!==dq.bigint)return this._getInvalidInput(q);let K=void 0,_=new G8;for(let P of this._def.checks)if(P.kind==="min"){if(P.inclusive?q.data<P.value:q.data<=P.value)K=this._getOrReturnCtx(q,K),nq(K,{code:xq.too_small,type:"bigint",minimum:P.value,inclusive:P.inclusive,message:P.message}),_.dirty()}else if(P.kind==="max"){if(P.inclusive?q.data>P.value:q.data>=P.value)K=this._getOrReturnCtx(q,K),nq(K,{code:xq.too_big,type:"bigint",maximum:P.value,inclusive:P.inclusive,message:P.message}),_.dirty()}else if(P.kind==="multipleOf"){if(q.data%P.value!==BigInt(0))K=this._getOrReturnCtx(q,K),nq(K,{code:xq.not_multiple_of,multipleOf:P.value,message:P.message}),_.dirty()}else Z$.assertNever(P);return{status:_.value,value:q.data}}_getInvalidInput(q){let $=this._getOrReturnCtx(q);return nq($,{code:xq.invalid_type,expected:dq.bigint,received:$.parsedType}),$$}gte(q,$){return this.setLimit("min",q,!0,aq.toString($))}gt(q,$){return this.setLimit("min",q,!1,aq.toString($))}lte(q,$){return this.setLimit("max",q,!0,aq.toString($))}lt(q,$){return this.setLimit("max",q,!1,aq.toString($))}setLimit(q,$,K,_){return new mK({...this._def,checks:[...this._def.checks,{kind:q,value:$,inclusive:K,message:aq.toString(_)}]})}_addCheck(q){return new mK({...this._def,checks:[...this._def.checks,q]})}positive(q){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:aq.toString(q)})}negative(q){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:aq.toString(q)})}nonpositive(q){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:aq.toString(q)})}nonnegative(q){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:aq.toString(q)})}multipleOf(q,$){return this._addCheck({kind:"multipleOf",value:q,message:aq.toString($)})}get minValue(){let q=null;for(let $ of this._def.checks)if($.kind==="min"){if(q===null||$.value>q)q=$.value}return q}get maxValue(){let q=null;for(let $ of this._def.checks)if($.kind==="max"){if(q===null||$.value<q)q=$.value}return q}}mK.create=(q)=>{return new mK({checks:[],typeName:_$.ZodBigInt,coerce:q?.coerce??!1,...v$(q)})};class Q_ extends f${_parse(q){if(this._def.coerce)q.data=Boolean(q.data);if(this._getType(q)!==dq.boolean){let K=this._getOrReturnCtx(q);return nq(K,{code:xq.invalid_type,expected:dq.boolean,received:K.parsedType}),$$}return b8(q.data)}}Q_.create=(q)=>{return new Q_({typeName:_$.ZodBoolean,coerce:q?.coerce||!1,...v$(q)})};class W_ extends f${_parse(q){if(this._def.coerce)q.data=new Date(q.data);if(this._getType(q)!==dq.date){let P=this._getOrReturnCtx(q);return nq(P,{code:xq.invalid_type,expected:dq.date,received:P.parsedType}),$$}if(Number.isNaN(q.data.getTime())){let P=this._getOrReturnCtx(q);return nq(P,{code:xq.invalid_date}),$$}let K=new G8,_=void 0;for(let P of this._def.checks)if(P.kind==="min"){if(q.data.getTime()<P.value)_=this._getOrReturnCtx(q,_),nq(_,{code:xq.too_small,message:P.message,inclusive:!0,exact:!1,minimum:P.value,type:"date"}),K.dirty()}else if(P.kind==="max"){if(q.data.getTime()>P.value)_=this._getOrReturnCtx(q,_),nq(_,{code:xq.too_big,message:P.message,inclusive:!0,exact:!1,maximum:P.value,type:"date"}),K.dirty()}else Z$.assertNever(P);return{status:K.value,value:new Date(q.data.getTime())}}_addCheck(q){return new W_({...this._def,checks:[...this._def.checks,q]})}min(q,$){return this._addCheck({kind:"min",value:q.getTime(),message:aq.toString($)})}max(q,$){return this._addCheck({kind:"max",value:q.getTime(),message:aq.toString($)})}get minDate(){let q=null;for(let $ of this._def.checks)if($.kind==="min"){if(q===null||$.value>q)q=$.value}return q!=null?new Date(q):null}get maxDate(){let q=null;for(let $ of this._def.checks)if($.kind==="max"){if(q===null||$.value<q)q=$.value}return q!=null?new Date(q):null}}W_.create=(q)=>{return new W_({checks:[],coerce:q?.coerce||!1,typeName:_$.ZodDate,...v$(q)})};class A7 extends f${_parse(q){if(this._getType(q)!==dq.symbol){let K=this._getOrReturnCtx(q);return nq(K,{code:xq.invalid_type,expected:dq.symbol,received:K.parsedType}),$$}return b8(q.data)}}A7.create=(q)=>{return new A7({typeName:_$.ZodSymbol,...v$(q)})};class a_ extends f${_parse(q){if(this._getType(q)!==dq.undefined){let K=this._getOrReturnCtx(q);return nq(K,{code:xq.invalid_type,expected:dq.undefined,received:K.parsedType}),$$}return b8(q.data)}}a_.create=(q)=>{return new a_({typeName:_$.ZodUndefined,...v$(q)})};class e_ extends f${_parse(q){if(this._getType(q)!==dq.null){let K=this._getOrReturnCtx(q);return nq(K,{code:xq.invalid_type,expected:dq.null,received:K.parsedType}),$$}return b8(q.data)}}e_.create=(q)=>{return new e_({typeName:_$.ZodNull,...v$(q)})};class H_ extends f${constructor(){super(...arguments);this._any=!0}_parse(q){return b8(q.data)}}H_.create=(q)=>{return new H_({typeName:_$.ZodAny,...v$(q)})};class xK extends f${constructor(){super(...arguments);this._unknown=!0}_parse(q){return b8(q.data)}}xK.create=(q)=>{return new xK({typeName:_$.ZodUnknown,...v$(q)})};class c6 extends f${_parse(q){let $=this._getOrReturnCtx(q);return nq($,{code:xq.invalid_type,expected:dq.never,received:$.parsedType}),$$}}c6.create=(q)=>{return new c6({typeName:_$.ZodNever,...v$(q)})};class k7 extends f${_parse(q){if(this._getType(q)!==dq.undefined){let K=this._getOrReturnCtx(q);return nq(K,{code:xq.invalid_type,expected:dq.void,received:K.parsedType}),$$}return b8(q.data)}}k7.create=(q)=>{return new k7({typeName:_$.ZodVoid,...v$(q)})};class M6 extends f${_parse(q){let{ctx:$,status:K}=this._processInputParams(q),_=this._def;if($.parsedType!==dq.array)return nq($,{code:xq.invalid_type,expected:dq.array,received:$.parsedType}),$$;if(_.exactLength!==null){let O=$.data.length>_.exactLength.value,Y=$.data.length<_.exactLength.value;if(O||Y)nq($,{code:O?xq.too_big:xq.too_small,minimum:Y?_.exactLength.value:void 0,maximum:O?_.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:_.exactLength.message}),K.dirty()}if(_.minLength!==null){if($.data.length<_.minLength.value)nq($,{code:xq.too_small,minimum:_.minLength.value,type:"array",inclusive:!0,exact:!1,message:_.minLength.message}),K.dirty()}if(_.maxLength!==null){if($.data.length>_.maxLength.value)nq($,{code:xq.too_big,maximum:_.maxLength.value,type:"array",inclusive:!0,exact:!1,message:_.maxLength.message}),K.dirty()}if($.common.async)return Promise.all([...$.data].map((O,Y)=>{return _.type._parseAsync(new C6($,O,$.path,Y))})).then((O)=>{return G8.mergeArray(K,O)});let P=[...$.data].map((O,Y)=>{return _.type._parseSync(new C6($,O,$.path,Y))});return G8.mergeArray(K,P)}get element(){return this._def.type}min(q,$){return new M6({...this._def,minLength:{value:q,message:aq.toString($)}})}max(q,$){return new M6({...this._def,maxLength:{value:q,message:aq.toString($)}})}length(q,$){return new M6({...this._def,exactLength:{value:q,message:aq.toString($)}})}nonempty(q){return this.min(1,q)}}M6.create=(q,$)=>{return new M6({type:q,minLength:null,maxLength:null,exactLength:null,typeName:_$.ZodArray,...v$($)})};function F_(q){if(q instanceof p$){let $={};for(let K in q.shape){let _=q.shape[K];$[K]=S6.create(F_(_))}return new p$({...q._def,shape:()=>$})}else if(q instanceof M6)return new M6({...q._def,type:F_(q.element)});else if(q instanceof S6)return S6.create(F_(q.unwrap()));else if(q instanceof zK)return zK.create(F_(q.unwrap()));else if(q instanceof l6)return l6.create(q.items.map(($)=>F_($)));else return q}class p$ extends f${constructor(){super(...arguments);this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;let q=this._def.shape(),$=Z$.objectKeys(q);return this._cached={shape:q,keys:$},this._cached}_parse(q){if(this._getType(q)!==dq.object){let v=this._getOrReturnCtx(q);return nq(v,{code:xq.invalid_type,expected:dq.object,received:v.parsedType}),$$}let{status:K,ctx:_}=this._processInputParams(q),{shape:P,keys:O}=this._getCached(),Y=[];if(!(this._def.catchall instanceof c6&&this._def.unknownKeys==="strip")){for(let v in _.data)if(!O.includes(v))Y.push(v)}let H=[];for(let v of O){let X=P[v],Z=_.data[v];H.push({key:{status:"valid",value:v},value:X._parse(new C6(_,Z,_.path,v)),alwaysSet:v in _.data})}if(this._def.catchall instanceof c6){let v=this._def.unknownKeys;if(v==="passthrough")for(let X of Y)H.push({key:{status:"valid",value:X},value:{status:"valid",value:_.data[X]}});else if(v==="strict"){if(Y.length>0)nq(_,{code:xq.unrecognized_keys,keys:Y}),K.dirty()}else if(v==="strip");else throw Error("Internal ZodObject error: invalid unknownKeys value.")}else{let v=this._def.catchall;for(let X of Y){let Z=_.data[X];H.push({key:{status:"valid",value:X},value:v._parse(new C6(_,Z,_.path,X)),alwaysSet:X in _.data})}}if(_.common.async)return Promise.resolve().then(async()=>{let v=[];for(let X of H){let Z=await X.key,k=await X.value;v.push({key:Z,value:k,alwaysSet:X.alwaysSet})}return v}).then((v)=>{return G8.mergeObjectSync(K,v)});else return G8.mergeObjectSync(K,H)}get shape(){return this._def.shape()}strict(q){return aq.errToObj,new p$({...this._def,unknownKeys:"strict",...q!==void 0?{errorMap:($,K)=>{let _=this._def.errorMap?.($,K).message??K.defaultError;if($.code==="unrecognized_keys")return{message:aq.errToObj(q).message??_};return{message:_}}}:{}})}strip(){return new p$({...this._def,unknownKeys:"strip"})}passthrough(){return new p$({...this._def,unknownKeys:"passthrough"})}extend(q){return new p$({...this._def,shape:()=>({...this._def.shape(),...q})})}merge(q){return new p$({unknownKeys:q._def.unknownKeys,catchall:q._def.catchall,shape:()=>({...this._def.shape(),...q._def.shape()}),typeName:_$.ZodObject})}setKey(q,$){return this.augment({[q]:$})}catchall(q){return new p$({...this._def,catchall:q})}pick(q){let $={};for(let K of Z$.objectKeys(q))if(q[K]&&this.shape[K])$[K]=this.shape[K];return new p$({...this._def,shape:()=>$})}omit(q){let $={};for(let K of Z$.objectKeys(this.shape))if(!q[K])$[K]=this.shape[K];return new p$({...this._def,shape:()=>$})}deepPartial(){return F_(this)}partial(q){let $={};for(let K of Z$.objectKeys(this.shape)){let _=this.shape[K];if(q&&!q[K])$[K]=_;else $[K]=_.optional()}return new p$({...this._def,shape:()=>$})}required(q){let $={};for(let K of Z$.objectKeys(this.shape))if(q&&!q[K])$[K]=this.shape[K];else{let P=this.shape[K];while(P instanceof S6)P=P._def.innerType;$[K]=P}return new p$({...this._def,shape:()=>$})}keyof(){return Mj(Z$.objectKeys(this.shape))}}p$.create=(q,$)=>{return new p$({shape:()=>q,unknownKeys:"strip",catchall:c6.create(),typeName:_$.ZodObject,...v$($)})};p$.strictCreate=(q,$)=>{return new p$({shape:()=>q,unknownKeys:"strict",catchall:c6.create(),typeName:_$.ZodObject,...v$($)})};p$.lazycreate=(q,$)=>{return new p$({shape:q,unknownKeys:"strip",catchall:c6.create(),typeName:_$.ZodObject,...v$($)})};class s_ extends f${_parse(q){let{ctx:$}=this._processInputParams(q),K=this._def.options;function _(P){for(let Y of P)if(Y.result.status==="valid")return Y.result;for(let Y of P)if(Y.result.status==="dirty")return $.common.issues.push(...Y.ctx.common.issues),Y.result;let O=P.map((Y)=>new r8(Y.ctx.common.issues));return nq($,{code:xq.invalid_union,unionErrors:O}),$$}if($.common.async)return Promise.all(K.map(async(P)=>{let O={...$,common:{...$.common,issues:[]},parent:null};return{result:await P._parseAsync({data:$.data,path:$.path,parent:O}),ctx:O}})).then(_);else{let P=void 0,O=[];for(let H of K){let v={...$,common:{...$.common,issues:[]},parent:null},X=H._parseSync({data:$.data,path:$.path,parent:v});if(X.status==="valid")return X;else if(X.status==="dirty"&&!P)P={result:X,ctx:v};if(v.common.issues.length)O.push(v.common.issues)}if(P)return $.common.issues.push(...P.ctx.common.issues),P.result;let Y=O.map((H)=>new r8(H));return nq($,{code:xq.invalid_union,unionErrors:Y}),$$}}get options(){return this._def.options}}s_.create=(q,$)=>{return new s_({options:q,typeName:_$.ZodUnion,...v$($)})};var HK=(q)=>{if(q instanceof $4)return HK(q.schema);else if(q instanceof N6)return HK(q.innerType());else if(q instanceof K4)return[q.value];else if(q instanceof cK)return q.options;else if(q instanceof _4)return Z$.objectValues(q.enum);else if(q instanceof P4)return HK(q._def.innerType);else if(q instanceof a_)return[void 0];else if(q instanceof e_)return[null];else if(q instanceof S6)return[void 0,...HK(q.unwrap())];else if(q instanceof zK)return[null,...HK(q.unwrap())];else if(q instanceof eP)return HK(q.unwrap());else if(q instanceof j4)return HK(q.unwrap());else if(q instanceof Y4)return HK(q._def.innerType);else return[]};class aP extends f${_parse(q){let{ctx:$}=this._processInputParams(q);if($.parsedType!==dq.object)return nq($,{code:xq.invalid_type,expected:dq.object,received:$.parsedType}),$$;let K=this.discriminator,_=$.data[K],P=this.optionsMap.get(_);if(!P)return nq($,{code:xq.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[K]}),$$;if($.common.async)return P._parseAsync({data:$.data,path:$.path,parent:$});else return P._parseSync({data:$.data,path:$.path,parent:$})}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(q,$,K){let _=new Map;for(let P of $){let O=HK(P.shape[q]);if(!O.length)throw Error(`A discriminator value for key \`${q}\` could not be extracted from all schema options`);for(let Y of O){if(_.has(Y))throw Error(`Discriminator property ${String(q)} has duplicate value ${String(Y)}`);_.set(Y,P)}}return new aP({typeName:_$.ZodDiscriminatedUnion,discriminator:q,options:$,optionsMap:_,...v$(K)})}}function G5(q,$){let K=m6(q),_=m6($);if(q===$)return{valid:!0,data:q};else if(K===dq.object&&_===dq.object){let P=Z$.objectKeys($),O=Z$.objectKeys(q).filter((H)=>P.indexOf(H)!==-1),Y={...q,...$};for(let H of O){let v=G5(q[H],$[H]);if(!v.valid)return{valid:!1};Y[H]=v.data}return{valid:!0,data:Y}}else if(K===dq.array&&_===dq.array){if(q.length!==$.length)return{valid:!1};let P=[];for(let O=0;O<q.length;O++){let Y=q[O],H=$[O],v=G5(Y,H);if(!v.valid)return{valid:!1};P.push(v.data)}return{valid:!0,data:P}}else if(K===dq.date&&_===dq.date&&+q===+$)return{valid:!0,data:q};else return{valid:!1}}class q4 extends f${_parse(q){let{status:$,ctx:K}=this._processInputParams(q),_=(P,O)=>{if(tP(P)||tP(O))return $$;let Y=G5(P.value,O.value);if(!Y.valid)return nq(K,{code:xq.invalid_intersection_types}),$$;if(QP(P)||QP(O))$.dirty();return{status:$.value,value:Y.data}};if(K.common.async)return Promise.all([this._def.left._parseAsync({data:K.data,path:K.path,parent:K}),this._def.right._parseAsync({data:K.data,path:K.path,parent:K})]).then(([P,O])=>_(P,O));else return _(this._def.left._parseSync({data:K.data,path:K.path,parent:K}),this._def.right._parseSync({data:K.data,path:K.path,parent:K}))}}q4.create=(q,$,K)=>{return new q4({left:q,right:$,typeName:_$.ZodIntersection,...v$(K)})};class l6 extends f${_parse(q){let{status:$,ctx:K}=this._processInputParams(q);if(K.parsedType!==dq.array)return nq(K,{code:xq.invalid_type,expected:dq.array,received:K.parsedType}),$$;if(K.data.length<this._def.items.length)return nq(K,{code:xq.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),$$;if(!this._def.rest&&K.data.length>this._def.items.length)nq(K,{code:xq.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),$.dirty();let P=[...K.data].map((O,Y)=>{let H=this._def.items[Y]||this._def.rest;if(!H)return null;return H._parse(new C6(K,O,K.path,Y))}).filter((O)=>!!O);if(K.common.async)return Promise.all(P).then((O)=>{return G8.mergeArray($,O)});else return G8.mergeArray($,P)}get items(){return this._def.items}rest(q){return new l6({...this._def,rest:q})}}l6.create=(q,$)=>{if(!Array.isArray(q))throw Error("You must pass an array of schemas to z.tuple([ ... ])");return new l6({items:q,typeName:_$.ZodTuple,rest:null,...v$($)})};class G7 extends f${get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(q){let{status:$,ctx:K}=this._processInputParams(q);if(K.parsedType!==dq.object)return nq(K,{code:xq.invalid_type,expected:dq.object,received:K.parsedType}),$$;let _=[],P=this._def.keyType,O=this._def.valueType;for(let Y in K.data)_.push({key:P._parse(new C6(K,Y,K.path,Y)),value:O._parse(new C6(K,K.data[Y],K.path,Y)),alwaysSet:Y in K.data});if(K.common.async)return G8.mergeObjectAsync($,_);else return G8.mergeObjectSync($,_)}get element(){return this._def.valueType}static create(q,$,K){if($ instanceof f$)return new G7({keyType:q,valueType:$,typeName:_$.ZodRecord,...v$(K)});return new G7({keyType:V6.create(),valueType:q,typeName:_$.ZodRecord,...v$($)})}}class Z7 extends f${get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(q){let{status:$,ctx:K}=this._processInputParams(q);if(K.parsedType!==dq.map)return nq(K,{code:xq.invalid_type,expected:dq.map,received:K.parsedType}),$$;let _=this._def.keyType,P=this._def.valueType,O=[...K.data.entries()].map(([Y,H],v)=>{return{key:_._parse(new C6(K,Y,K.path,[v,"key"])),value:P._parse(new C6(K,H,K.path,[v,"value"]))}});if(K.common.async){let Y=new Map;return Promise.resolve().then(async()=>{for(let H of O){let v=await H.key,X=await H.value;if(v.status==="aborted"||X.status==="aborted")return $$;if(v.status==="dirty"||X.status==="dirty")$.dirty();Y.set(v.value,X.value)}return{status:$.value,value:Y}})}else{let Y=new Map;for(let H of O){let{key:v,value:X}=H;if(v.status==="aborted"||X.status==="aborted")return $$;if(v.status==="dirty"||X.status==="dirty")$.dirty();Y.set(v.value,X.value)}return{status:$.value,value:Y}}}}Z7.create=(q,$,K)=>{return new Z7({valueType:$,keyType:q,typeName:_$.ZodMap,...v$(K)})};class z_ extends f${_parse(q){let{status:$,ctx:K}=this._processInputParams(q);if(K.parsedType!==dq.set)return nq(K,{code:xq.invalid_type,expected:dq.set,received:K.parsedType}),$$;let _=this._def;if(_.minSize!==null){if(K.data.size<_.minSize.value)nq(K,{code:xq.too_small,minimum:_.minSize.value,type:"set",inclusive:!0,exact:!1,message:_.minSize.message}),$.dirty()}if(_.maxSize!==null){if(K.data.size>_.maxSize.value)nq(K,{code:xq.too_big,maximum:_.maxSize.value,type:"set",inclusive:!0,exact:!1,message:_.maxSize.message}),$.dirty()}let P=this._def.valueType;function O(H){let v=new Set;for(let X of H){if(X.status==="aborted")return $$;if(X.status==="dirty")$.dirty();v.add(X.value)}return{status:$.value,value:v}}let Y=[...K.data.values()].map((H,v)=>P._parse(new C6(K,H,K.path,v)));if(K.common.async)return Promise.all(Y).then((H)=>O(H));else return O(Y)}min(q,$){return new z_({...this._def,minSize:{value:q,message:aq.toString($)}})}max(q,$){return new z_({...this._def,maxSize:{value:q,message:aq.toString($)}})}size(q,$){return this.min(q,$).max(q,$)}nonempty(q){return this.min(1,q)}}z_.create=(q,$)=>{return new z_({valueType:q,minSize:null,maxSize:null,typeName:_$.ZodSet,...v$($)})};class t_ extends f${constructor(){super(...arguments);this.validate=this.implement}_parse(q){let{ctx:$}=this._processInputParams(q);if($.parsedType!==dq.function)return nq($,{code:xq.invalid_type,expected:dq.function,received:$.parsedType}),$$;function K(Y,H){return f7({data:Y,path:$.path,errorMaps:[$.common.contextualErrorMap,$.schemaErrorMap,i_(),WK].filter((v)=>!!v),issueData:{code:xq.invalid_arguments,argumentsError:H}})}function _(Y,H){return f7({data:Y,path:$.path,errorMaps:[$.common.contextualErrorMap,$.schemaErrorMap,i_(),WK].filter((v)=>!!v),issueData:{code:xq.invalid_return_type,returnTypeError:H}})}let P={errorMap:$.common.contextualErrorMap},O=$.data;if(this._def.returns instanceof J_){let Y=this;return b8(async function(...H){let v=new r8([]),X=await Y._def.args.parseAsync(H,P).catch((G)=>{throw v.addIssue(K(H,G)),v}),Z=await Reflect.apply(O,this,X);return await Y._def.returns._def.type.parseAsync(Z,P).catch((G)=>{throw v.addIssue(_(Z,G)),v})})}else{let Y=this;return b8(function(...H){let v=Y._def.args.safeParse(H,P);if(!v.success)throw new r8([K(H,v.error)]);let X=Reflect.apply(O,this,v.data),Z=Y._def.returns.safeParse(X,P);if(!Z.success)throw new r8([_(X,Z.error)]);return Z.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...q){return new t_({...this._def,args:l6.create(q).rest(xK.create())})}returns(q){return new t_({...this._def,returns:q})}implement(q){return this.parse(q)}strictImplement(q){return this.parse(q)}static create(q,$,K){return new t_({args:q?q:l6.create([]).rest(xK.create()),returns:$||xK.create(),typeName:_$.ZodFunction,...v$(K)})}}class $4 extends f${get schema(){return this._def.getter()}_parse(q){let{ctx:$}=this._processInputParams(q);return this._def.getter()._parse({data:$.data,path:$.path,parent:$})}}$4.create=(q,$)=>{return new $4({getter:q,typeName:_$.ZodLazy,...v$($)})};class K4 extends f${_parse(q){if(q.data!==this._def.value){let $=this._getOrReturnCtx(q);return nq($,{received:$.data,code:xq.invalid_literal,expected:this._def.value}),$$}return{status:"valid",value:q.data}}get value(){return this._def.value}}K4.create=(q,$)=>{return new K4({value:q,typeName:_$.ZodLiteral,...v$($)})};function Mj(q,$){return new cK({values:q,typeName:_$.ZodEnum,...v$($)})}class cK extends f${_parse(q){if(typeof q.data!=="string"){let $=this._getOrReturnCtx(q),K=this._def.values;return nq($,{expected:Z$.joinValues(K),received:$.parsedType,code:xq.invalid_type}),$$}if(!this._cache)this._cache=new Set(this._def.values);if(!this._cache.has(q.data)){let $=this._getOrReturnCtx(q),K=this._def.values;return nq($,{received:$.data,code:xq.invalid_enum_value,options:K}),$$}return b8(q.data)}get options(){return this._def.values}get enum(){let q={};for(let $ of this._def.values)q[$]=$;return q}get Values(){let q={};for(let $ of this._def.values)q[$]=$;return q}get Enum(){let q={};for(let $ of this._def.values)q[$]=$;return q}extract(q,$=this._def){return cK.create(q,{...this._def,...$})}exclude(q,$=this._def){return cK.create(this.options.filter((K)=>!q.includes(K)),{...this._def,...$})}}cK.create=Mj;class _4 extends f${_parse(q){let $=Z$.getValidEnumValues(this._def.values),K=this._getOrReturnCtx(q);if(K.parsedType!==dq.string&&K.parsedType!==dq.number){let _=Z$.objectValues($);return nq(K,{expected:Z$.joinValues(_),received:K.parsedType,code:xq.invalid_type}),$$}if(!this._cache)this._cache=new Set(Z$.getValidEnumValues(this._def.values));if(!this._cache.has(q.data)){let _=Z$.objectValues($);return nq(K,{received:K.data,code:xq.invalid_enum_value,options:_}),$$}return b8(q.data)}get enum(){return this._def.values}}_4.create=(q,$)=>{return new _4({values:q,typeName:_$.ZodNativeEnum,...v$($)})};class J_ extends f${unwrap(){return this._def.type}_parse(q){let{ctx:$}=this._processInputParams(q);if($.parsedType!==dq.promise&&$.common.async===!1)return nq($,{code:xq.invalid_type,expected:dq.promise,received:$.parsedType}),$$;let K=$.parsedType===dq.promise?$.data:Promise.resolve($.data);return b8(K.then((_)=>{return this._def.type.parseAsync(_,{path:$.path,errorMap:$.common.contextualErrorMap})}))}}J_.create=(q,$)=>{return new J_({type:q,typeName:_$.ZodPromise,...v$($)})};class N6 extends f${innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===_$.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(q){let{status:$,ctx:K}=this._processInputParams(q),_=this._def.effect||null,P={addIssue:(O)=>{if(nq(K,O),O.fatal)$.abort();else $.dirty()},get path(){return K.path}};if(P.addIssue=P.addIssue.bind(P),_.type==="preprocess"){let O=_.transform(K.data,P);if(K.common.async)return Promise.resolve(O).then(async(Y)=>{if($.value==="aborted")return $$;let H=await this._def.schema._parseAsync({data:Y,path:K.path,parent:K});if(H.status==="aborted")return $$;if(H.status==="dirty")return O_(H.value);if($.value==="dirty")return O_(H.value);return H});else{if($.value==="aborted")return $$;let Y=this._def.schema._parseSync({data:O,path:K.path,parent:K});if(Y.status==="aborted")return $$;if(Y.status==="dirty")return O_(Y.value);if($.value==="dirty")return O_(Y.value);return Y}}if(_.type==="refinement"){let O=(Y)=>{let H=_.refinement(Y,P);if(K.common.async)return Promise.resolve(H);if(H instanceof Promise)throw Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return Y};if(K.common.async===!1){let Y=this._def.schema._parseSync({data:K.data,path:K.path,parent:K});if(Y.status==="aborted")return $$;if(Y.status==="dirty")$.dirty();return O(Y.value),{status:$.value,value:Y.value}}else return this._def.schema._parseAsync({data:K.data,path:K.path,parent:K}).then((Y)=>{if(Y.status==="aborted")return $$;if(Y.status==="dirty")$.dirty();return O(Y.value).then(()=>{return{status:$.value,value:Y.value}})})}if(_.type==="transform")if(K.common.async===!1){let O=this._def.schema._parseSync({data:K.data,path:K.path,parent:K});if(!pK(O))return $$;let Y=_.transform(O.value,P);if(Y instanceof Promise)throw Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:$.value,value:Y}}else return this._def.schema._parseAsync({data:K.data,path:K.path,parent:K}).then((O)=>{if(!pK(O))return $$;return Promise.resolve(_.transform(O.value,P)).then((Y)=>({status:$.value,value:Y}))});Z$.assertNever(_)}}N6.create=(q,$,K)=>{return new N6({schema:q,typeName:_$.ZodEffects,effect:$,...v$(K)})};N6.createWithPreprocess=(q,$,K)=>{return new N6({schema:$,effect:{type:"preprocess",transform:q},typeName:_$.ZodEffects,...v$(K)})};class S6 extends f${_parse(q){if(this._getType(q)===dq.undefined)return b8(void 0);return this._def.innerType._parse(q)}unwrap(){return this._def.innerType}}S6.create=(q,$)=>{return new S6({innerType:q,typeName:_$.ZodOptional,...v$($)})};class zK extends f${_parse(q){if(this._getType(q)===dq.null)return b8(null);return this._def.innerType._parse(q)}unwrap(){return this._def.innerType}}zK.create=(q,$)=>{return new zK({innerType:q,typeName:_$.ZodNullable,...v$($)})};class P4 extends f${_parse(q){let{ctx:$}=this._processInputParams(q),K=$.data;if($.parsedType===dq.undefined)K=this._def.defaultValue();return this._def.innerType._parse({data:K,path:$.path,parent:$})}removeDefault(){return this._def.innerType}}P4.create=(q,$)=>{return new P4({innerType:q,typeName:_$.ZodDefault,defaultValue:typeof $.default==="function"?$.default:()=>$.default,...v$($)})};class Y4 extends f${_parse(q){let{ctx:$}=this._processInputParams(q),K={...$,common:{...$.common,issues:[]}},_=this._def.innerType._parse({data:K.data,path:K.path,parent:{...K}});if(U_(_))return _.then((P)=>{return{status:"valid",value:P.status==="valid"?P.value:this._def.catchValue({get error(){return new r8(K.common.issues)},input:K.data})}});else return{status:"valid",value:_.status==="valid"?_.value:this._def.catchValue({get error(){return new r8(K.common.issues)},input:K.data})}}removeCatch(){return this._def.innerType}}Y4.create=(q,$)=>{return new Y4({innerType:q,typeName:_$.ZodCatch,catchValue:typeof $.catch==="function"?$.catch:()=>$.catch,...v$($)})};class V7 extends f${_parse(q){if(this._getType(q)!==dq.nan){let K=this._getOrReturnCtx(q);return nq(K,{code:xq.invalid_type,expected:dq.nan,received:K.parsedType}),$$}return{status:"valid",value:q.data}}}V7.create=(q)=>{return new V7({typeName:_$.ZodNaN,...v$(q)})};var mA=Symbol("zod_brand");class eP extends f${_parse(q){let{ctx:$}=this._processInputParams(q),K=$.data;return this._def.type._parse({data:K,path:$.path,parent:$})}unwrap(){return this._def.type}}class M7 extends f${_parse(q){let{status:$,ctx:K}=this._processInputParams(q);if(K.common.async)return(async()=>{let P=await this._def.in._parseAsync({data:K.data,path:K.path,parent:K});if(P.status==="aborted")return $$;if(P.status==="dirty")return $.dirty(),O_(P.value);else return this._def.out._parseAsync({data:P.value,path:K.path,parent:K})})();else{let _=this._def.in._parseSync({data:K.data,path:K.path,parent:K});if(_.status==="aborted")return $$;if(_.status==="dirty")return $.dirty(),{status:"dirty",value:_.value};else return this._def.out._parseSync({data:_.value,path:K.path,parent:K})}}static create(q,$){return new M7({in:q,out:$,typeName:_$.ZodPipeline})}}class j4 extends f${_parse(q){let $=this._def.innerType._parse(q),K=(_)=>{if(pK(_))_.value=Object.freeze(_.value);return _};return U_($)?$.then((_)=>K(_)):K($)}unwrap(){return this._def.innerType}}j4.create=(q,$)=>{return new j4({innerType:q,typeName:_$.ZodReadonly,...v$($)})};function kj(q,$){let K=typeof q==="function"?q($):typeof q==="string"?{message:q}:q;return typeof K==="string"?{message:K}:K}function Sj(q,$={},K){if(q)return H_.create().superRefine((_,P)=>{let O=q(_);if(O instanceof Promise)return O.then((Y)=>{if(!Y){let H=kj($,_),v=H.fatal??K??!0;P.addIssue({code:"custom",...H,fatal:v})}});if(!O){let Y=kj($,_),H=Y.fatal??K??!0;P.addIssue({code:"custom",...Y,fatal:H})}return});return H_.create()}var cA={object:p$.lazycreate},_$;(function(q){q.ZodString="ZodString",q.ZodNumber="ZodNumber",q.ZodNaN="ZodNaN",q.ZodBigInt="ZodBigInt",q.ZodBoolean="ZodBoolean",q.ZodDate="ZodDate",q.ZodSymbol="ZodSymbol",q.ZodUndefined="ZodUndefined",q.ZodNull="ZodNull",q.ZodAny="ZodAny",q.ZodUnknown="ZodUnknown",q.ZodNever="ZodNever",q.ZodVoid="ZodVoid",q.ZodArray="ZodArray",q.ZodObject="ZodObject",q.ZodUnion="ZodUnion",q.ZodDiscriminatedUnion="ZodDiscriminatedUnion",q.ZodIntersection="ZodIntersection",q.ZodTuple="ZodTuple",q.ZodRecord="ZodRecord",q.ZodMap="ZodMap",q.ZodSet="ZodSet",q.ZodFunction="ZodFunction",q.ZodLazy="ZodLazy",q.ZodLiteral="ZodLiteral",q.ZodEnum="ZodEnum",q.ZodEffects="ZodEffects",q.ZodNativeEnum="ZodNativeEnum",q.ZodOptional="ZodOptional",q.ZodNullable="ZodNullable",q.ZodDefault="ZodDefault",q.ZodCatch="ZodCatch",q.ZodPromise="ZodPromise",q.ZodBranded="ZodBranded",q.ZodPipeline="ZodPipeline",q.ZodReadonly="ZodReadonly"})(_$||(_$={}));var lA=(q,$={message:`Input not instance of ${q.name}`})=>Sj((K)=>K instanceof q,$),Cj=V6.create,Nj=uK.create,dA=V7.create,oA=mK.create,Ej=Q_.create,nA=W_.create,rA=A7.create,BA=a_.create,iA=e_.create,UA=H_.create,FA=xK.create,tA=c6.create,QA=k7.create,aA=M6.create,eA=p$.create,sA=p$.strictCreate,qk=s_.create,$k=aP.create,Kk=q4.create,_k=l6.create,Pk=G7.create,Yk=Z7.create,jk=z_.create,Ok=t_.create,Wk=$4.create,Hk=K4.create,zk=cK.create,Jk=_4.create,vk=J_.create,wk=N6.create,Tk=S6.create,Xk=zK.create,fk=N6.createWithPreprocess,Ak=M7.create,kk=()=>Cj().optional(),Gk=()=>Nj().optional(),Zk=()=>Ej().optional(),Vk={string:(q)=>V6.create({...q,coerce:!0}),number:(q)=>uK.create({...q,coerce:!0}),boolean:(q)=>Q_.create({...q,coerce:!0}),bigint:(q)=>mK.create({...q,coerce:!0}),date:(q)=>W_.create({...q,coerce:!0})};var Mk=$$;var UY=K6(q9(),1);var bj=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-8][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/i;function bk(q){return typeof q==="string"&&bj.test(q)}var O4=bk;var Z8=[];for(S7=0;S7<256;++S7)Z8.push((S7+256).toString(16).slice(1));var S7;function gj(q,$=0){return(Z8[q[$+0]]+Z8[q[$+1]]+Z8[q[$+2]]+Z8[q[$+3]]+"-"+Z8[q[$+4]]+Z8[q[$+5]]+"-"+Z8[q[$+6]]+Z8[q[$+7]]+"-"+Z8[q[$+8]]+Z8[q[$+9]]+"-"+Z8[q[$+10]]+Z8[q[$+11]]+Z8[q[$+12]]+Z8[q[$+13]]+Z8[q[$+14]]+Z8[q[$+15]]).toLowerCase()}var $9,gk=new Uint8Array(16);function V5(){if(!$9){if($9=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!$9)throw Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported")}return $9(gk)}var yk=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),M5={randomUUID:yk};function pk(q,$,K){if(M5.randomUUID&&!$&&!q)return M5.randomUUID();q=q||{};var _=q.random||(q.rng||V5)();if(_[6]=_[6]&15|64,_[8]=_[8]&63|128,$){K=K||0;for(var P=0;P<16;++P)$[K+P]=_[P];return $}return gj(_)}var B8=pk;class yj{getStore(){return}run(q,$){return $()}}var S5=Symbol.for("ls:tracing_async_local_storage"),uk=new yj;class pj{getInstance(){return globalThis[S5]??uk}initializeGlobalInstance(q){if(globalThis[S5]===void 0)globalThis[S5]=q}}var mk=new pj;function xj(q=!1){let $=mk.getInstance().getStore();if(!q&&$===void 0)throw Error(`Could not get the current run tree.

Please make sure you are calling this method within a traceable function and that tracing is enabled.`);return $}function K9(q){return typeof q==="function"&&"langsmith:traceable"in q}var C5={};yK(C5,{validator:()=>O9,validate:()=>lj,getValueByPointer:()=>j9,deepClone:()=>lk,applyReducer:()=>ok,applyPatch:()=>T_,applyOperation:()=>w_,_areEquals:()=>N7,JsonPatchError:()=>c$});/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2022 Joachim Wester
 * MIT licensed
 */var ck=Object.prototype.hasOwnProperty;function mj(q,$){return ck.call(q,$)}function cj(q){if(Array.isArray(q)){let K=Array(q.length);for(let _=0;_<K.length;_++)K[_]=""+_;return K}if(Object.keys)return Object.keys(q);let $=[];for(let K in q)if(mj(q,K))$.push(K);return $}function z6(q){switch(typeof q){case"object":return JSON.parse(JSON.stringify(q));case"undefined":return null;default:return q}}function P9(q){let $=0,K=q.length,_;while($<K){if(_=q.charCodeAt($),_>=48&&_<=57){$++;continue}return!1}return!0}function Y9(q){if(q.indexOf("/")===-1&&q.indexOf("~")===-1)return q;return q.replace(/~/g,"~0").replace(/\//g,"~1")}function C7(q){return q.replace(/~1/g,"/").replace(/~0/g,"~")}function _9(q){if(q===void 0)return!0;if(q){if(Array.isArray(q)){for(let K=0,_=q.length;K<_;K++)if(_9(q[K]))return!0}else if(typeof q==="object"){let K=cj(q),_=K.length;for(var $=0;$<_;$++)if(_9(q[K[$]]))return!0}}return!1}function uj(q,$){let K=[q];for(let _ in $){let P=typeof $[_]==="object"?JSON.stringify($[_],null,2):$[_];if(typeof P<"u")K.push(`${_}: ${P}`)}return K.join(`
`)}class W4 extends Error{constructor(q,$,K,_,P){super(uj(q,{name:$,index:K,operation:_,tree:P}));Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:$}),Object.defineProperty(this,"index",{enumerable:!0,configurable:!0,writable:!0,value:K}),Object.defineProperty(this,"operation",{enumerable:!0,configurable:!0,writable:!0,value:_}),Object.defineProperty(this,"tree",{enumerable:!0,configurable:!0,writable:!0,value:P}),Object.setPrototypeOf(this,new.target.prototype),this.message=uj(q,{name:$,index:K,operation:_,tree:P})}}var c$=W4,lk=z6,H4={add:function(q,$,K){return q[$]=this.value,{newDocument:K}},remove:function(q,$,K){var _=q[$];return delete q[$],{newDocument:K,removed:_}},replace:function(q,$,K){var _=q[$];return q[$]=this.value,{newDocument:K,removed:_}},move:function(q,$,K){let _=j9(K,this.path);if(_)_=z6(_);let P=w_(K,{op:"remove",path:this.from}).removed;return w_(K,{op:"add",path:this.path,value:P}),{newDocument:K,removed:_}},copy:function(q,$,K){let _=j9(K,this.from);return w_(K,{op:"add",path:this.path,value:z6(_)}),{newDocument:K}},test:function(q,$,K){return{newDocument:K,test:N7(q[$],this.value)}},_get:function(q,$,K){return this.value=q[$],{newDocument:K}}},dk={add:function(q,$,K){if(P9($))q.splice($,0,this.value);else q[$]=this.value;return{newDocument:K,index:$}},remove:function(q,$,K){var _=q.splice($,1);return{newDocument:K,removed:_[0]}},replace:function(q,$,K){var _=q[$];return q[$]=this.value,{newDocument:K,removed:_}},move:H4.move,copy:H4.copy,test:H4.test,_get:H4._get};function j9(q,$){if($=="")return q;var K={op:"_get",path:$};return w_(q,K),K.value}function w_(q,$,K=!1,_=!0,P=!0,O=0){if(K)if(typeof K=="function")K($,0,q,$.path);else O9($,0);if($.path===""){let Y={newDocument:q};if($.op==="add")return Y.newDocument=$.value,Y;else if($.op==="replace")return Y.newDocument=$.value,Y.removed=q,Y;else if($.op==="move"||$.op==="copy"){if(Y.newDocument=j9(q,$.from),$.op==="move")Y.removed=q;return Y}else if($.op==="test"){if(Y.test=N7(q,$.value),Y.test===!1)throw new c$("Test operation failed","TEST_OPERATION_FAILED",O,$,q);return Y.newDocument=q,Y}else if($.op==="remove")return Y.removed=q,Y.newDocument=null,Y;else if($.op==="_get")return $.value=q,Y;else if(K)throw new c$("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",O,$,q);else return Y}else{if(!_)q=z6(q);let H=($.path||"").split("/"),v=q,X=1,Z=H.length,k=void 0,G,S;if(typeof K=="function")S=K;else S=O9;while(!0){if(G=H[X],G&&G.indexOf("~")!=-1)G=C7(G);if(P&&(G=="__proto__"||G=="prototype"&&X>0&&H[X-1]=="constructor"))throw TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(K){if(k===void 0){if(v[G]===void 0)k=H.slice(0,X).join("/");else if(X==Z-1)k=$.path;if(k!==void 0)S($,0,q,k)}}if(X++,Array.isArray(v)){if(G==="-")G=v.length;else if(K&&!P9(G))throw new c$("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",O,$,q);else if(P9(G))G=~~G;if(X>=Z){if(K&&$.op==="add"&&G>v.length)throw new c$("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",O,$,q);let N=dk[$.op].call($,v,G,q);if(N.test===!1)throw new c$("Test operation failed","TEST_OPERATION_FAILED",O,$,q);return N}}else if(X>=Z){let N=H4[$.op].call($,v,G,q);if(N.test===!1)throw new c$("Test operation failed","TEST_OPERATION_FAILED",O,$,q);return N}if(v=v[G],K&&X<Z&&(!v||typeof v!=="object"))throw new c$("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",O,$,q)}}}function T_(q,$,K,_=!0,P=!0){if(K){if(!Array.isArray($))throw new c$("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY")}if(!_)q=z6(q);let O=Array($.length);for(let Y=0,H=$.length;Y<H;Y++)O[Y]=w_(q,$[Y],K,!0,P,Y),q=O[Y].newDocument;return O.newDocument=q,O}function ok(q,$,K){let _=w_(q,$);if(_.test===!1)throw new c$("Test operation failed","TEST_OPERATION_FAILED",K,$,q);return _.newDocument}function O9(q,$,K,_){if(typeof q!=="object"||q===null||Array.isArray(q))throw new c$("Operation is not an object","OPERATION_NOT_AN_OBJECT",$,q,K);else if(!H4[q.op])throw new c$("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",$,q,K);else if(typeof q.path!=="string")throw new c$("Operation `path` property is not a string","OPERATION_PATH_INVALID",$,q,K);else if(q.path.indexOf("/")!==0&&q.path.length>0)throw new c$('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",$,q,K);else if((q.op==="move"||q.op==="copy")&&typeof q.from!=="string")throw new c$("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",$,q,K);else if((q.op==="add"||q.op==="replace"||q.op==="test")&&q.value===void 0)throw new c$("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",$,q,K);else if((q.op==="add"||q.op==="replace"||q.op==="test")&&_9(q.value))throw new c$("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",$,q,K);else if(K){if(q.op=="add"){var P=q.path.split("/").length,O=_.split("/").length;if(P!==O+1&&P!==O)throw new c$("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",$,q,K)}else if(q.op==="replace"||q.op==="remove"||q.op==="_get"){if(q.path!==_)throw new c$("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",$,q,K)}else if(q.op==="move"||q.op==="copy"){var Y={op:"_get",path:q.from,value:void 0},H=lj([Y],K);if(H&&H.name==="OPERATION_PATH_UNRESOLVABLE")throw new c$("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",$,q,K)}}}function lj(q,$,K){try{if(!Array.isArray(q))throw new c$("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if($)T_(z6($),z6(q),K||!0);else{K=K||O9;for(var _=0;_<q.length;_++)K(q[_],_,$,void 0)}}catch(P){if(P instanceof c$)return P;else throw P}}function N7(q,$){if(q===$)return!0;if(q&&$&&typeof q=="object"&&typeof $=="object"){var K=Array.isArray(q),_=Array.isArray($),P,O,Y;if(K&&_){if(O=q.length,O!=$.length)return!1;for(P=O;P--!==0;)if(!N7(q[P],$[P]))return!1;return!0}if(K!=_)return!1;var H=Object.keys(q);if(O=H.length,O!==Object.keys($).length)return!1;for(P=O;P--!==0;)if(!$.hasOwnProperty(H[P]))return!1;for(P=O;P--!==0;)if(Y=H[P],!N7(q[Y],$[Y]))return!1;return!0}return q!==q&&$!==$}/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2013-2021 Joachim Wester
 * MIT license
 */var ax={...C5,JsonPatchError:W4,deepClone:z6,escapePathComponent:Y9,unescapePathComponent:C7};var dj=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-8][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/i;function nk(q){return typeof q==="string"&&dj.test(q)}var oj=nk;function rk(q){if(!oj(q))throw TypeError("Invalid UUID");var $,K=new Uint8Array(16);return K[0]=($=parseInt(q.slice(0,8),16))>>>24,K[1]=$>>>16&255,K[2]=$>>>8&255,K[3]=$&255,K[4]=($=parseInt(q.slice(9,13),16))>>>8,K[5]=$&255,K[6]=($=parseInt(q.slice(14,18),16))>>>8,K[7]=$&255,K[8]=($=parseInt(q.slice(19,23),16))>>>8,K[9]=$&255,K[10]=($=parseInt(q.slice(24,36),16))/1099511627776&255,K[11]=$/4294967296&255,K[12]=$>>>24&255,K[13]=$>>>16&255,K[14]=$>>>8&255,K[15]=$&255,K}var nj=rk;var V8=[];for(E7=0;E7<256;++E7)V8.push((E7+256).toString(16).slice(1));var E7;function W9(q,$=0){return(V8[q[$+0]]+V8[q[$+1]]+V8[q[$+2]]+V8[q[$+3]]+"-"+V8[q[$+4]]+V8[q[$+5]]+"-"+V8[q[$+6]]+V8[q[$+7]]+"-"+V8[q[$+8]]+V8[q[$+9]]+"-"+V8[q[$+10]]+V8[q[$+11]]+V8[q[$+12]]+V8[q[$+13]]+V8[q[$+14]]+V8[q[$+15]]).toLowerCase()}var H9,Bk=new Uint8Array(16);function N5(){if(!H9){if(H9=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!H9)throw Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported")}return H9(Bk)}function ik(q){q=unescape(encodeURIComponent(q));var $=[];for(var K=0;K<q.length;++K)$.push(q.charCodeAt(K));return $}var Uk="6ba7b810-9dad-11d1-80b4-00c04fd430c8",Fk="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function E5(q,$,K){function _(P,O,Y,H){var v;if(typeof P==="string")P=ik(P);if(typeof O==="string")O=nj(O);if(((v=O)===null||v===void 0?void 0:v.length)!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var X=new Uint8Array(16+P.length);if(X.set(O),X.set(P,O.length),X=K(X),X[6]=X[6]&15|$,X[8]=X[8]&63|128,Y){H=H||0;for(var Z=0;Z<16;++Z)Y[H+Z]=X[Z];return Y}return W9(X)}try{_.name=q}catch(P){}return _.DNS=Uk,_.URL=Fk,_}var tk=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),R5={randomUUID:tk};function Qk(q,$,K){if(R5.randomUUID&&!$&&!q)return R5.randomUUID();q=q||{};var _=q.random||(q.rng||N5)();if(_[6]=_[6]&15|64,_[8]=_[8]&63|128,$){K=K||0;for(var P=0;P<16;++P)$[K+P]=_[P];return $}return W9(_)}var JK=Qk;function ak(q,$,K,_){switch(q){case 0:return $&K^~$&_;case 1:return $^K^_;case 2:return $&K^$&_^K&_;case 3:return $^K^_}}function h5(q,$){return q<<$|q>>>32-$}function ek(q){var $=[1518500249,1859775393,2400959708,3395469782],K=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof q==="string"){var _=unescape(encodeURIComponent(q));q=[];for(var P=0;P<_.length;++P)q.push(_.charCodeAt(P))}else if(!Array.isArray(q))q=Array.prototype.slice.call(q);q.push(128);var O=q.length/4+2,Y=Math.ceil(O/16),H=Array(Y);for(var v=0;v<Y;++v){var X=new Uint32Array(16);for(var Z=0;Z<16;++Z)X[Z]=q[v*64+Z*4]<<24|q[v*64+Z*4+1]<<16|q[v*64+Z*4+2]<<8|q[v*64+Z*4+3];H[v]=X}H[Y-1][14]=(q.length-1)*8/Math.pow(2,32),H[Y-1][14]=Math.floor(H[Y-1][14]),H[Y-1][15]=(q.length-1)*8&4294967295;for(var k=0;k<Y;++k){var G=new Uint32Array(80);for(var S=0;S<16;++S)G[S]=H[k][S];for(var N=16;N<80;++N)G[N]=h5(G[N-3]^G[N-8]^G[N-14]^G[N-16],1);var E=K[0],h=K[1],D=K[2],I=K[3],g=K[4];for(var y=0;y<80;++y){var p=Math.floor(y/20),m=h5(E,5)+ak(p,h,D,I)+g+$[p]+G[y]>>>0;g=I,I=D,D=h5(h,30)>>>0,h=E,E=m}K[0]=K[0]+E>>>0,K[1]=K[1]+h>>>0,K[2]=K[2]+D>>>0,K[3]=K[3]+I>>>0,K[4]=K[4]+g>>>0}return[K[0]>>24&255,K[0]>>16&255,K[0]>>8&255,K[0]&255,K[1]>>24&255,K[1]>>16&255,K[1]>>8&255,K[1]&255,K[2]>>24&255,K[2]>>16&255,K[2]>>8&255,K[2]&255,K[3]>>24&255,K[3]>>16&255,K[3]>>8&255,K[3]&255,K[4]>>24&255,K[4]>>16&255,K[4]>>8&255,K[4]&255]}var rj=ek;var sk=E5("v5",80,rj),z9=sk;var ij="gen_ai.operation.name",Uj="gen_ai.system",D5="gen_ai.request.model",Fj="gen_ai.response.model",I5="gen_ai.usage.input_tokens",L5="gen_ai.usage.output_tokens",b5="gen_ai.usage.total_tokens",tj="gen_ai.request.max_tokens",Qj="gen_ai.request.temperature",aj="gen_ai.request.top_p",ej="gen_ai.request.frequency_penalty",sj="gen_ai.request.presence_penalty",qO="gen_ai.response.finish_reasons",$O="gen_ai.prompt",KO="gen_ai.completion",_O="gen_ai.request.extra_query",PO="gen_ai.request.extra_body",YO="gen_ai.serialized.name",jO="gen_ai.serialized.signature",OO="gen_ai.serialized.doc",WO="gen_ai.response.id",HO="gen_ai.response.service_tier",zO="gen_ai.response.system_fingerprint",JO="gen_ai.usage.input_token_details",vO="gen_ai.usage.output_token_details",wO="langsmith.trace.session_id",TO="langsmith.trace.session_name",XO="langsmith.span.kind",fO="langsmith.trace.name",AO="langsmith.metadata",g5="langsmith.span.tags";var kO="langsmith.request.streaming",GO="langsmith.request.headers";var $G=(...q)=>fetch(...q),ZO=Symbol.for("ls:fetch_implementation");var VO=()=>{let q=globalThis[ZO];if(!q)return!1;return typeof q==="function"&&"Headers"in q&&"Request"in q&&"Response"in q},MO=(q)=>{return async(...$)=>{if(q||B$("DEBUG")==="true"){let[_,P]=$;console.log(` ${P?.method||"GET"} ${_}`)}let K=await(globalThis[ZO]??$G)(...$);if(q||B$("DEBUG")==="true")console.log(` ${K.status} ${K.statusText} ${K.url}`);return K}};var R7=()=>{return B$("PROJECT")??_6("LANGCHAIN_SESSION")??"default"};var J9="0.3.68";var d6,KG=()=>typeof window<"u"&&typeof window.document<"u",_G=()=>typeof globalThis==="object"&&globalThis.constructor&&globalThis.constructor.name==="DedicatedWorkerGlobalScope",PG=()=>typeof window<"u"&&window.name==="nodejs"||typeof navigator<"u"&&navigator.userAgent.includes("jsdom"),SO=()=>typeof Deno<"u",YG=()=>typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"&&!SO(),x5=()=>{if(d6)return d6;if(typeof Bun<"u")d6="bun";else if(KG())d6="browser";else if(YG())d6="node";else if(_G())d6="webworker";else if(PG())d6="jsdom";else if(SO())d6="deno";else d6="other";return d6},y5;function v9(){if(y5===void 0){let q=x5(),$=OG();y5={library:"langsmith",runtime:q,sdk:"langsmith-js",sdk_version:J9,...$}}return y5}function CO(){let q=jG()||{},$={},K=["LANGCHAIN_API_KEY","LANGCHAIN_ENDPOINT","LANGCHAIN_TRACING_V2","LANGCHAIN_PROJECT","LANGCHAIN_SESSION","LANGSMITH_API_KEY","LANGSMITH_ENDPOINT","LANGSMITH_TRACING_V2","LANGSMITH_PROJECT","LANGSMITH_SESSION"];for(let[_,P]of Object.entries(q))if((_.startsWith("LANGCHAIN_")||_.startsWith("LANGSMITH_"))&&typeof P==="string"&&!K.includes(_)&&!_.toLowerCase().includes("key")&&!_.toLowerCase().includes("secret")&&!_.toLowerCase().includes("token"))if(_==="LANGCHAIN_REVISION_ID")$.revision_id=P;else $[_]=P;return $}function jG(){try{if(typeof process<"u"&&process.env)return Object.entries(process.env).reduce((q,[$,K])=>{return q[$]=String(K),q},{});return}catch(q){return}}function _6(q){try{return typeof process<"u"?process.env?.[q]:void 0}catch($){return}}function B$(q){return _6(`LANGSMITH_${q}`)||_6(`LANGCHAIN_${q}`)}var p5;function OG(){if(p5!==void 0)return p5;let q=["VERCEL_GIT_COMMIT_SHA","NEXT_PUBLIC_VERCEL_GIT_COMMIT_SHA","COMMIT_REF","RENDER_GIT_COMMIT","CI_COMMIT_SHA","CIRCLE_SHA1","CF_PAGES_COMMIT_SHA","REACT_APP_GIT_SHA","SOURCE_VERSION","GITHUB_SHA","TRAVIS_COMMIT","GIT_COMMIT","BUILD_VCS_NUMBER","bamboo_planRepository_revision","Build.SourceVersion","BITBUCKET_COMMIT","DRONE_COMMIT_SHA","SEMAPHORE_GIT_SHA","BUILDKITE_COMMIT"],$={};for(let K of q){let _=_6(K);if(_!==void 0)$[K]=_}return p5=$,$}function w9(){return _6("OTEL_ENABLED")==="true"||B$("OTEL_ENABLED")==="true"}class EO{constructor(){Object.defineProperty(this,"hasWarned",{enumerable:!0,configurable:!0,writable:!0,value:!1})}startActiveSpan(q,...$){if(!this.hasWarned&&w9())console.warn('You have enabled OTEL export via the `OTEL_ENABLED` or `LANGSMITH_OTEL_ENABLED` environment variable, but have not initialized the required OTEL instances. Please add:\n```\nimport { initializeOTEL } from "langsmith/experimental/otel/setup";\ninitializeOTEL();\n```\nat the beginning of your code.'),this.hasWarned=!0;let K;if($.length===1&&typeof $[0]==="function")K=$[0];else if($.length===2&&typeof $[1]==="function")K=$[1];else if($.length===3&&typeof $[2]==="function")K=$[2];if(typeof K==="function")return K();return}}class RO{constructor(){Object.defineProperty(this,"mockTracer",{enumerable:!0,configurable:!0,writable:!0,value:new EO})}getTracer(q,$){return this.mockTracer}getActiveSpan(){return}setSpan(q,$){return q}getSpan(q){return}setSpanContext(q,$){return q}getTracerProvider(){return}setGlobalTracerProvider(q){return!1}}class hO{active(){return{}}with(q,$){return $()}}var u5=Symbol.for("ls:otel_trace"),m5=Symbol.for("ls:otel_context"),NO=Symbol.for("ls:otel_get_default_otlp_tracer_provider"),WG=new RO,HG=new hO;class DO{getTraceInstance(){return globalThis[u5]??WG}getContextInstance(){return globalThis[m5]??HG}initializeGlobalInstances(q){if(globalThis[u5]===void 0)globalThis[u5]=q.trace;if(globalThis[m5]===void 0)globalThis[m5]=q.context}setDefaultOTLPTracerComponents(q){globalThis[NO]=q}getDefaultOTLPTracerComponents(){return globalThis[NO]??void 0}}var c5=new DO;function T9(){return c5.getTraceInstance()}function IO(){return c5.getContextInstance()}function LO(){return c5.getDefaultOTLPTracerComponents()}var zG={llm:"chat",tool:"execute_tool",retriever:"embeddings",embedding:"embeddings",prompt:"chat"};function JG(q){return zG[q]||q}class l5{constructor(){Object.defineProperty(this,"spans",{enumerable:!0,configurable:!0,writable:!0,value:new Map})}exportBatch(q,$){for(let K of q)try{if(!K.run)continue;if(K.operation==="post"){let _=this.createSpanForRun(K,K.run,$.get(K.id));if(_&&!K.run.end_time)this.spans.set(K.id,_)}else this.updateSpanForRun(K,K.run)}catch(_){console.error(`Error processing operation ${K.id}:`,_)}}createSpanForRun(q,$,K){let _=K&&T9().getSpan(K);if(!_)return;try{return this.finishSpanSetup(_,$,q)}catch(P){console.error(`Failed to create span for run ${q.id}:`,P);return}}finishSpanSetup(q,$,K){if(this.setSpanAttributes(q,$,K),$.error)q.setStatus({code:2}),q.recordException(Error($.error));else q.setStatus({code:1});if($.end_time)q.end(new Date($.end_time));return q}updateSpanForRun(q,$){try{let K=this.spans.get(q.id);if(!K){console.debug(`No span found for run ${q.id} during update`);return}if(this.setSpanAttributes(K,$,q),$.error)K.setStatus({code:2}),K.recordException(Error($.error));else K.setStatus({code:1});let _=$.end_time;if(_)K.end(new Date(_)),this.spans.delete(q.id)}catch(K){console.error(`Failed to update span for run ${q.id}:`,K)}}extractModelName(q){if(q.extra?.metadata){let $=q.extra.metadata;if($.ls_model_name)return $.ls_model_name;if($.invocation_params){let K=$.invocation_params;if(K.model)return K.model;else if(K.model_name)return K.model_name}}return}setSpanAttributes(q,$,K){if("run_type"in $&&$.run_type){q.setAttribute(XO,$.run_type);let Y=JG($.run_type||"chain");q.setAttribute(ij,Y)}if("name"in $&&$.name)q.setAttribute(fO,$.name);if("session_id"in $&&$.session_id)q.setAttribute(wO,$.session_id);if("session_name"in $&&$.session_name)q.setAttribute(TO,$.session_name);this.setGenAiSystem(q,$);let _=this.extractModelName($);if(_)q.setAttribute(D5,_);if("prompt_tokens"in $&&typeof $.prompt_tokens==="number")q.setAttribute(I5,$.prompt_tokens);if("completion_tokens"in $&&typeof $.completion_tokens==="number")q.setAttribute(L5,$.completion_tokens);if("total_tokens"in $&&typeof $.total_tokens==="number")q.setAttribute(b5,$.total_tokens);this.setInvocationParameters(q,$);let P=$.extra?.metadata||{};for(let[Y,H]of Object.entries(P))if(H!==null&&H!==void 0)q.setAttribute(`${AO}.${Y}`,String(H));let O=$.tags;if(O&&Array.isArray(O))q.setAttribute(g5,O.join(", "));else if(O)q.setAttribute(g5,String(O));if("serialized"in $&&typeof $.serialized==="object"){let Y=$.serialized;if(Y.name)q.setAttribute(YO,String(Y.name));if(Y.signature)q.setAttribute(jO,String(Y.signature));if(Y.doc)q.setAttribute(OO,String(Y.doc))}this.setIOAttributes(q,K)}setGenAiSystem(q,$){let K="langchain",_=this.extractModelName($);if(_){let P=_.toLowerCase();if(P.includes("anthropic")||P.startsWith("claude"))K="anthropic";else if(P.includes("bedrock"))K="aws.bedrock";else if(P.includes("azure")&&P.includes("openai"))K="az.ai.openai";else if(P.includes("azure")&&P.includes("inference"))K="az.ai.inference";else if(P.includes("cohere"))K="cohere";else if(P.includes("deepseek"))K="deepseek";else if(P.includes("gemini"))K="gemini";else if(P.includes("groq"))K="groq";else if(P.includes("watson")||P.includes("ibm"))K="ibm.watsonx.ai";else if(P.includes("mistral"))K="mistral_ai";else if(P.includes("gpt")||P.includes("openai"))K="openai";else if(P.includes("perplexity")||P.includes("sonar"))K="perplexity";else if(P.includes("vertex"))K="vertex_ai";else if(P.includes("xai")||P.includes("grok"))K="xai"}q.setAttribute(Uj,K)}setInvocationParameters(q,$){if(!$.extra?.metadata?.invocation_params)return;let K=$.extra.metadata.invocation_params;if(K.max_tokens!==void 0)q.setAttribute(tj,K.max_tokens);if(K.temperature!==void 0)q.setAttribute(Qj,K.temperature);if(K.top_p!==void 0)q.setAttribute(aj,K.top_p);if(K.frequency_penalty!==void 0)q.setAttribute(ej,K.frequency_penalty);if(K.presence_penalty!==void 0)q.setAttribute(sj,K.presence_penalty)}setIOAttributes(q,$){if($.run.inputs)try{let K=$.run.inputs;if(typeof K==="object"&&K!==null){if(K.model&&Array.isArray(K.messages))q.setAttribute(D5,K.model);if(K.stream!==void 0)q.setAttribute(kO,K.stream);if(K.extra_headers)q.setAttribute(GO,JSON.stringify(K.extra_headers));if(K.extra_query)q.setAttribute(_O,JSON.stringify(K.extra_query));if(K.extra_body)q.setAttribute(PO,JSON.stringify(K.extra_body))}q.setAttribute($O,JSON.stringify(K))}catch(K){console.debug(`Failed to process inputs for run ${$.id}`,K)}if($.run.outputs)try{let K=$.run.outputs,_=this.getUnifiedRunTokens(K);if(_)q.setAttribute(I5,_[0]),q.setAttribute(L5,_[1]),q.setAttribute(b5,_[0]+_[1]);if(K&&typeof K==="object"){if(K.model)q.setAttribute(Fj,String(K.model));if(K.id)q.setAttribute(WO,K.id);if(K.choices&&Array.isArray(K.choices)){let P=K.choices.map((O)=>O.finish_reason).filter((O)=>O).map(String);if(P.length>0)q.setAttribute(qO,P.join(", "))}if(K.service_tier)q.setAttribute(HO,K.service_tier);if(K.system_fingerprint)q.setAttribute(zO,K.system_fingerprint);if(K.usage_metadata&&typeof K.usage_metadata==="object"){let P=K.usage_metadata;if(P.input_token_details)q.setAttribute(JO,JSON.stringify(P.input_token_details));if(P.output_token_details)q.setAttribute(vO,JSON.stringify(P.output_token_details))}}q.setAttribute(KO,JSON.stringify(K))}catch(K){console.debug(`Failed to process outputs for run ${$.id}`,K)}}getUnifiedRunTokens(q){if(!q)return null;let $=this.extractUnifiedRunTokens(q.usage_metadata);if($)return $;let K=Object.keys(q);for(let O of K){let Y=q[O];if(!Y||typeof Y!=="object")continue;if($=this.extractUnifiedRunTokens(Y.usage_metadata),$)return $;if(Y.lc===1&&Y.kwargs&&typeof Y.kwargs==="object"){if($=this.extractUnifiedRunTokens(Y.kwargs.usage_metadata),$)return $}}let _=q.generations||[];if(!Array.isArray(_))return null;let P=Array.isArray(_[0])?_.flat():_;for(let O of P)if(typeof O==="object"&&O.message&&typeof O.message==="object"&&O.message.kwargs&&typeof O.message.kwargs==="object"){if($=this.extractUnifiedRunTokens(O.message.kwargs.usage_metadata),$)return $}return null}extractUnifiedRunTokens(q){if(!q||typeof q!=="object")return null;if(typeof q.input_tokens!=="number"||typeof q.output_tokens!=="number")return null;return[q.input_tokens,q.output_tokens]}}var iO=K6(q9(),1),G9=K6(k9(),1),SG=[429,500,502,503,504];class Z9{constructor(q){if(Object.defineProperty(this,"maxConcurrency",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"maxRetries",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"queue",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"onFailedResponseHook",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxConcurrency=q.maxConcurrency??1/0,this.maxRetries=q.maxRetries??6,"default"in G9.default)this.queue=new G9.default.default({concurrency:this.maxConcurrency});else this.queue=new G9.default({concurrency:this.maxConcurrency});this.onFailedResponseHook=q?.onFailedResponseHook}call(q,...$){let K=this.onFailedResponseHook;return this.queue.add(()=>iO.default(()=>q(...$).catch((_)=>{if(_ instanceof Error)throw _;else throw Error(_)}),{async onFailedAttempt(_){if(_.message.startsWith("Cancel")||_.message.startsWith("TimeoutError")||_.name==="TimeoutError"||_.message.startsWith("AbortError"))throw _;if(_?.code==="ECONNABORTED")throw _;let P=_?.response;if(K){if(await K(P))return}let O=P?.status??_?.status;if(O){if(!SG.includes(+O))throw _}},retries:this.maxRetries,randomize:!0}),{throwOnTimeout:!0})}callWithOptions(q,$,...K){if(q.signal)return Promise.race([this.call($,...K),new Promise((_,P)=>{q.signal?.addEventListener("abort",()=>{P(Error("AbortError"))})})]);return this.call($,...K)}}function n5(q){return typeof q?._getType==="function"}function r5(q){let $={type:q._getType(),data:{content:q.content}};if(q?.additional_kwargs&&Object.keys(q.additional_kwargs).length>0)$.data.additional_kwargs={...q.additional_kwargs};return $}var CG=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;function W$(q,$){if(!CG.test(q)){let K=$!==void 0?`Invalid UUID for ${$}: ${q}`:`Invalid UUID: ${q}`;throw Error(K)}return q}var UO={};function V9(q){if(!UO[q])console.warn(q),UO[q]=!0}var AM=K6(uH(),1);function vK(q){if(!q||q.split("/").length>2||q.startsWith("/")||q.endsWith("/")||q.split(":").length>2)throw Error(`Invalid identifier format: ${q}`);let[$,K]=q.split(":"),_=K||"latest";if($.includes("/")){let[P,O]=$.split("/",2);if(!P||!O)throw Error(`Invalid identifier format: ${q}`);return[P,O,_]}else{if(!$)throw Error(`Invalid identifier format: ${q}`);return["-",$,_]}}class mH extends Error{constructor(q){super(q);Object.defineProperty(this,"status",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name="LangSmithConflictError",this.status=409}}async function q$(q,$,K){let _;if(q.ok){if(K)_=await q.text();return}if(q.status===403)try{if((await q.json())?.error==="org_scoped_key_requires_workspace")_="This API key is org-scoped and requires workspace specification. Please provide 'workspaceId' parameter, or set LANGSMITH_WORKSPACE_ID environment variable."}catch(Y){let H=Error(`${q.status} ${q.statusText}`);throw H.status=q?.status,H}if(_===void 0)try{_=await q.text()}catch(Y){_=""}let P=`Failed to ${$}. Received status [${q.status}]: ${q.statusText}. Message: ${_}`;if(q.status===409)throw new mH(P);let O=Error(P);throw O.status=q.status,O}var cH="ERR_CONFLICTING_ENDPOINTS";class YY extends Error{constructor(){super("You cannot provide both LANGSMITH_ENDPOINT / LANGCHAIN_ENDPOINT and LANGSMITH_RUNS_ENDPOINTS.");Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:cH}),this.name="ConflictingEndpointsError"}}function lH(q){return typeof q==="object"&&q!==null&&q.code===cH}var dH="[...]",kM={result:"[Circular]"},x9=[],v4=[],GM=new TextEncoder;function ZM(){return{depthLimit:Number.MAX_SAFE_INTEGER,edgesLimit:Number.MAX_SAFE_INTEGER}}function p9(q){return GM.encode(q)}function oH(q){if(q&&typeof q==="object"&&q!==null){if(q instanceof Map)return Object.fromEntries(q);else if(q instanceof Set)return Array.from(q);else if(q instanceof Date)return q.toISOString();else if(q instanceof RegExp)return q.toString();else if(q instanceof Error)return{name:q.name,message:q.message}}else if(typeof q==="bigint")return q.toString();return q}function VM(q){return function($,K){if(q){let _=q.call(this,$,K);if(_!==void 0)return _}return oH(K)}}function U8(q,$,K,_,P){try{let O=JSON.stringify(q,VM(K),_);return p9(O)}catch(O){if(!O.message?.includes("Converting circular structure to JSON"))return console.warn(`[WARNING]: LangSmith received unserializable value.${$?`
Context: ${$}`:""}`),p9("[Unserializable]");if(B$("SUPPRESS_CIRCULAR_JSON_WARNINGS")!=="true"&&console.warn(`[WARNING]: LangSmith received circular JSON. This will decrease tracer performance. ${$?`
Context: ${$}`:""}`),typeof P>"u")P=ZM();OY(q,"",0,[],void 0,0,P);let Y;try{if(v4.length===0)Y=JSON.stringify(q,K,_);else Y=JSON.stringify(q,MM(K),_)}catch(H){return p9("[unable to serialize, circular reference is too complex to analyze]")}finally{while(x9.length!==0){let H=x9.pop();if(H.length===4)Object.defineProperty(H[0],H[1],H[3]);else H[0][H[1]]=H[2]}}return p9(Y)}}function jY(q,$,K,_){var P=Object.getOwnPropertyDescriptor(_,K);if(P.get!==void 0)if(P.configurable)Object.defineProperty(_,K,{value:q}),x9.push([_,K,$,P]);else v4.push([$,K,q]);else _[K]=q,x9.push([_,K,$])}function OY(q,$,K,_,P,O,Y){O+=1;var H;if(typeof q==="object"&&q!==null){for(H=0;H<_.length;H++)if(_[H]===q){jY(kM,q,$,P);return}if(typeof Y.depthLimit<"u"&&O>Y.depthLimit){jY(dH,q,$,P);return}if(typeof Y.edgesLimit<"u"&&K+1>Y.edgesLimit){jY(dH,q,$,P);return}if(_.push(q),Array.isArray(q))for(H=0;H<q.length;H++)OY(q[H],H,H,_,q,O,Y);else{q=oH(q);var v=Object.keys(q);for(H=0;H<v.length;H++){var X=v[H];OY(q[X],X,H,_,q,O,Y)}}_.pop()}}function MM(q){return q=typeof q<"u"?q:function($,K){return K},function($,K){if(v4.length>0)for(var _=0;_<v4.length;_++){var P=v4[_];if(P[1]===$&&P[0]===K){K=P[2],v4.splice(_,1);break}}return q.call(this,$,K)}}function nH(q){let $=v9(),K=CO(),_=q.extra??{},P=_.metadata;return q.extra={..._,runtime:{...$,..._?.runtime},metadata:{...K,...K.revision_id||"revision_id"in q&&q.revision_id?{revision_id:("revision_id"in q?q.revision_id:void 0)??K.revision_id}:{},...P}},q}var SM=(q)=>{let $=q?.toString()??B$("TRACING_SAMPLING_RATE");if($===void 0)return;let K=parseFloat($);if(K<0||K>1)throw Error(`LANGSMITH_TRACING_SAMPLING_RATE must be between 0 and 1 if set. Got: ${K}`);return K},CM=(q)=>{let K=q.replace("http://","").replace("https://","").split("/")[0].split(":")[0];return K==="localhost"||K==="127.0.0.1"||K==="::1"};async function NM(q){let $=[];for await(let K of q)$.push(K);return $}function u9(q){if(q===void 0)return;return q.trim().replace(/^"(.*)"$/,"$1").replace(/^'(.*)'$/,"$1")}var EM=async(q)=>{if(q?.status===429){let $=parseInt(q.headers.get("retry-after")??"10",10)*1000;if($>0)return await new Promise((K)=>setTimeout(K,$)),!0}return!1};function rH(q){if(typeof q==="number")return Number(q.toFixed(4));return q}class UH{constructor(){Object.defineProperty(this,"items",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"sizeBytes",{enumerable:!0,configurable:!0,writable:!0,value:0})}peek(){return this.items[0]}push(q){let $,K=new Promise((P)=>{$=P}),_=U8(q.item,`Serializing run with id: ${q.item.id}`).length;return this.items.push({action:q.action,payload:q.item,otelContext:q.otelContext,apiKey:q.apiKey,apiUrl:q.apiUrl,itemPromiseResolve:$,itemPromise:K,size:_}),this.sizeBytes+=_,K}pop(q){if(q<1)throw Error("Number of bytes to pop off may not be less than 1.");let $=[],K=0;while(K+(this.peek()?.size??0)<q&&this.items.length>0){let _=this.items.shift();if(_)$.push(_),K+=_.size,this.sizeBytes-=_.size}if($.length===0&&this.items.length>0){let _=this.items.shift();$.push(_),K+=_.size,this.sizeBytes-=_.size}return[$.map((_)=>({action:_.action,item:_.payload,otelContext:_.otelContext,apiKey:_.apiKey,apiUrl:_.apiUrl})),()=>$.forEach((_)=>_.itemPromiseResolve())]}}var RM=25165824,hM=1e4,BH="https://api.smith.langchain.com";class lK{get _fetch(){return this.fetchImplementation||MO(this.debug)}constructor(q={}){Object.defineProperty(this,"apiKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"apiUrl",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"webUrl",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"workspaceId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"caller",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"batchIngestCaller",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"timeout_ms",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_tenantId",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"hideInputs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"hideOutputs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tracingSampleRate",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"filteredPostUuids",{enumerable:!0,configurable:!0,writable:!0,value:new Set}),Object.defineProperty(this,"autoBatchTracing",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"autoBatchQueue",{enumerable:!0,configurable:!0,writable:!0,value:new UH}),Object.defineProperty(this,"autoBatchTimeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"autoBatchAggregationDelayMs",{enumerable:!0,configurable:!0,writable:!0,value:250}),Object.defineProperty(this,"batchSizeBytesLimit",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"fetchOptions",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"settings",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"blockOnRootRunFinalization",{enumerable:!0,configurable:!0,writable:!0,value:_6("LANGSMITH_TRACING_BACKGROUND")==="false"}),Object.defineProperty(this,"traceBatchConcurrency",{enumerable:!0,configurable:!0,writable:!0,value:5}),Object.defineProperty(this,"_serverInfo",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_getServerInfoPromise",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"manualFlushMode",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"langSmithToOTELTranslator",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"fetchImplementation",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"multipartStreamingDisabled",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"debug",{enumerable:!0,configurable:!0,writable:!0,value:_6("LANGSMITH_DEBUG")==="true"});let $=lK.getDefaultClientConfig();if(this.tracingSampleRate=SM(q.tracingSamplingRate),this.apiUrl=u9(q.apiUrl??$.apiUrl)??"",this.apiUrl.endsWith("/"))this.apiUrl=this.apiUrl.slice(0,-1);if(this.apiKey=u9(q.apiKey??$.apiKey),this.webUrl=u9(q.webUrl??$.webUrl),this.webUrl?.endsWith("/"))this.webUrl=this.webUrl.slice(0,-1);if(this.workspaceId=u9(q.workspaceId??B$("WORKSPACE_ID")),this.timeout_ms=q.timeout_ms??90000,this.caller=new Z9({...q.callerOptions??{},maxRetries:4,debug:q.debug??this.debug}),this.traceBatchConcurrency=q.traceBatchConcurrency??this.traceBatchConcurrency,this.traceBatchConcurrency<1)throw Error("Trace batch concurrency must be positive.");if(this.debug=q.debug??this.debug,this.fetchImplementation=q.fetchImplementation,this.batchIngestCaller=new Z9({maxRetries:2,maxConcurrency:this.traceBatchConcurrency,...q.callerOptions??{},onFailedResponseHook:EM,debug:q.debug??this.debug}),this.hideInputs=q.hideInputs??q.anonymizer??$.hideInputs,this.hideOutputs=q.hideOutputs??q.anonymizer??$.hideOutputs,this.autoBatchTracing=q.autoBatchTracing??this.autoBatchTracing,this.blockOnRootRunFinalization=q.blockOnRootRunFinalization??this.blockOnRootRunFinalization,this.batchSizeBytesLimit=q.batchSizeBytesLimit,this.fetchOptions=q.fetchOptions||{},this.manualFlushMode=q.manualFlushMode??this.manualFlushMode,w9())this.langSmithToOTELTranslator=new l5}static getDefaultClientConfig(){let q=B$("API_KEY"),$=B$("ENDPOINT")??BH,K=B$("HIDE_INPUTS")==="true",_=B$("HIDE_OUTPUTS")==="true";return{apiUrl:$,apiKey:q,webUrl:void 0,hideInputs:K,hideOutputs:_}}getHostUrl(){if(this.webUrl)return this.webUrl;else if(CM(this.apiUrl))return this.webUrl="http://localhost:3000",this.webUrl;else if(this.apiUrl.endsWith("/api/v1"))return this.webUrl=this.apiUrl.replace("/api/v1",""),this.webUrl;else if(this.apiUrl.includes("/api")&&!this.apiUrl.split(".",1)[0].endsWith("api"))return this.webUrl=this.apiUrl.replace("/api",""),this.webUrl;else if(this.apiUrl.split(".",1)[0].includes("dev"))return this.webUrl="https://dev.smith.langchain.com",this.webUrl;else if(this.apiUrl.split(".",1)[0].includes("eu"))return this.webUrl="https://eu.smith.langchain.com",this.webUrl;else if(this.apiUrl.split(".",1)[0].includes("beta"))return this.webUrl="https://beta.smith.langchain.com",this.webUrl;else return this.webUrl="https://smith.langchain.com",this.webUrl}get headers(){let q={"User-Agent":`langsmith-js/${J9}`};if(this.apiKey)q["x-api-key"]=`${this.apiKey}`;if(this.workspaceId)q["x-tenant-id"]=this.workspaceId;return q}_getPlatformEndpointPath(q){return this.apiUrl.slice(-3)!=="/v1"&&this.apiUrl.slice(-4)!=="/v1/"?`/v1/platform/${q}`:`/platform/${q}`}async processInputs(q){if(this.hideInputs===!1)return q;if(this.hideInputs===!0)return{};if(typeof this.hideInputs==="function")return this.hideInputs(q);return q}async processOutputs(q){if(this.hideOutputs===!1)return q;if(this.hideOutputs===!0)return{};if(typeof this.hideOutputs==="function")return this.hideOutputs(q);return q}async prepareRunCreateOrUpdateInputs(q){let $={...q};if($.inputs!==void 0)$.inputs=await this.processInputs($.inputs);if($.outputs!==void 0)$.outputs=await this.processOutputs($.outputs);return $}async _getResponse(q,$){let K=$?.toString()??"",_=`${this.apiUrl}${q}?${K}`;return await this.caller.call(async()=>{let O=await this._fetch(_,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await q$(O,`fetch ${q}`),O})}async _get(q,$){return(await this._getResponse(q,$)).json()}async*_getPaginated(q,$=new URLSearchParams,K){let _=Number($.get("offset"))||0,P=Number($.get("limit"))||100;while(!0){$.set("offset",String(_)),$.set("limit",String(P));let O=`${this.apiUrl}${q}?${$}`,Y=await this.caller.call(async()=>{let v=await this._fetch(O,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await q$(v,`fetch ${q}`),v}),H=K?K(await Y.json()):await Y.json();if(H.length===0)break;if(yield H,H.length<P)break;_+=H.length}}async*_getCursorPaginatedList(q,$=null,K="POST",_="runs"){let P=$?{...$}:{};while(!0){let O=JSON.stringify(P),H=await(await this.caller.call(async()=>{let X=await this._fetch(`${this.apiUrl}${q}`,{method:K,headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:O});return await q$(X,`fetch ${q}`),X})).json();if(!H)break;if(!H[_])break;yield H[_];let v=H.cursors;if(!v)break;if(!v.next)break;P.cursor=v.next}}_shouldSample(){if(this.tracingSampleRate===void 0)return!0;return Math.random()<this.tracingSampleRate}_filterForSampling(q,$=!1){if(this.tracingSampleRate===void 0)return q;if($){let K=[];for(let _ of q)if(!this.filteredPostUuids.has(_.trace_id))K.push(_);else if(_.id===_.trace_id)this.filteredPostUuids.delete(_.trace_id);return K}else{let K=[];for(let _ of q){let P=_.trace_id??_.id;if(this.filteredPostUuids.has(P))continue;if(_.id===P)if(this._shouldSample())K.push(_);else this.filteredPostUuids.add(P);else K.push(_)}return K}}async _getBatchSizeLimitBytes(){let q=await this._ensureServerInfo();return this.batchSizeBytesLimit??q.batch_ingest_config?.size_limit_bytes??RM}async _getDatasetExamplesMultiPartSupport(){return(await this._ensureServerInfo()).instance_flags?.dataset_examples_multipart_enabled??!1}drainAutoBatchQueue(q){let $=[];while(this.autoBatchQueue.items.length>0){let[K,_]=this.autoBatchQueue.pop(q);if(!K.length){_();break}let P=K.reduce((H,v)=>{let X=v.apiUrl??this.apiUrl,Z=v.apiKey??this.apiKey,G=v.apiKey===this.apiKey&&v.apiUrl===this.apiUrl?"default":`${X}|${Z}`;if(!H[G])H[G]=[];return H[G].push(v),H},{}),O=[];for(let[H,v]of Object.entries(P)){let X=this._processBatch(v,{apiUrl:H==="default"?void 0:H.split("|")[0],apiKey:H==="default"?void 0:H.split("|")[1]});O.push(X)}let Y=Promise.all(O).finally(_);$.push(Y)}return Promise.all($)}async _processBatch(q,$){if(!q.length)return;try{if(this.langSmithToOTELTranslator!==void 0)this._sendBatchToOTELTranslator(q);else{let K={runCreates:q.filter((P)=>P.action==="create").map((P)=>P.item),runUpdates:q.filter((P)=>P.action==="update").map((P)=>P.item)},_=await this._ensureServerInfo();if(_?.batch_ingest_config?.use_multipart_endpoint){let P=_?.instance_flags?.gzip_body_enabled;await this.multipartIngestRuns(K,{...$,useGzip:P})}else await this.batchIngestRuns(K,$)}}catch(K){console.error("Error exporting batch:",K)}}_sendBatchToOTELTranslator(q){if(this.langSmithToOTELTranslator!==void 0){let $=new Map,K=[];for(let _ of q)if(_.item.id&&_.otelContext)if($.set(_.item.id,_.otelContext),_.action==="create")K.push({operation:"post",id:_.item.id,trace_id:_.item.trace_id??_.item.id,run:_.item});else K.push({operation:"patch",id:_.item.id,trace_id:_.item.trace_id??_.item.id,run:_.item});this.langSmithToOTELTranslator.exportBatch(K,$)}}async processRunOperation(q){clearTimeout(this.autoBatchTimeout),this.autoBatchTimeout=void 0,q.item=nH(q.item);let $=this.autoBatchQueue.push(q);if(this.manualFlushMode)return $;let K=await this._getBatchSizeLimitBytes();if(this.autoBatchQueue.sizeBytes>K)this.drainAutoBatchQueue(K);if(this.autoBatchQueue.items.length>0)this.autoBatchTimeout=setTimeout(()=>{this.autoBatchTimeout=void 0,this.drainAutoBatchQueue(K)},this.autoBatchAggregationDelayMs);return $}async _getServerInfo(){let $=await(await this.caller.call(async()=>{let K=await this._fetch(`${this.apiUrl}/info`,{method:"GET",headers:{Accept:"application/json"},signal:AbortSignal.timeout(hM),...this.fetchOptions});return await q$(K,"get server info"),K})).json();if(this.debug)console.log(`
=== LangSmith Server Configuration ===
`+JSON.stringify($,null,2)+`
`);return $}async _ensureServerInfo(){if(this._getServerInfoPromise===void 0)this._getServerInfoPromise=(async()=>{if(this._serverInfo===void 0)try{this._serverInfo=await this._getServerInfo()}catch(q){console.warn(`[LANGSMITH]: Failed to fetch info on supported operations. Falling back to batch operations and default limits. Info: ${q.status??"Unspecified status code"} ${q.message}`)}return this._serverInfo??{}})();return this._getServerInfoPromise.then((q)=>{if(this._serverInfo===void 0)this._getServerInfoPromise=void 0;return q})}async _getSettings(){if(!this.settings)this.settings=this._get("/settings");return await this.settings}async flush(){let q=await this._getBatchSizeLimitBytes();await this.drainAutoBatchQueue(q)}_cloneCurrentOTELContext(){let q=T9(),$=IO();if(this.langSmithToOTELTranslator!==void 0){let K=q.getActiveSpan();if(K)return q.setSpan($.active(),K)}return}async createRun(q,$){if(!this._filterForSampling([q]).length)return;let K={...this.headers,"Content-Type":"application/json"},_=q.project_name;delete q.project_name;let P=await this.prepareRunCreateOrUpdateInputs({session_name:_,...q,start_time:q.start_time??Date.now()});if(this.autoBatchTracing&&P.trace_id!==void 0&&P.dotted_order!==void 0){let H=this._cloneCurrentOTELContext();this.processRunOperation({action:"create",item:P,otelContext:H,apiKey:$?.apiKey,apiUrl:$?.apiUrl}).catch(console.error);return}let O=nH(P);if($?.apiKey!==void 0)K["x-api-key"]=$.apiKey;if($?.workspaceId!==void 0)K["x-tenant-id"]=$.workspaceId;let Y=U8(O,`Creating run with id: ${O.id}`);await this.caller.call(async()=>{let H=await this._fetch(`${$?.apiUrl??this.apiUrl}/runs`,{method:"POST",headers:K,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:Y});return await q$(H,"create run",!0),H})}async batchIngestRuns({runCreates:q,runUpdates:$},K){if(q===void 0&&$===void 0)return;let _=await Promise.all(q?.map((H)=>this.prepareRunCreateOrUpdateInputs(H))??[]),P=await Promise.all($?.map((H)=>this.prepareRunCreateOrUpdateInputs(H))??[]);if(_.length>0&&P.length>0){let H=_.reduce((X,Z)=>{if(!Z.id)return X;return X[Z.id]=Z,X},{}),v=[];for(let X of P)if(X.id!==void 0&&H[X.id])H[X.id]={...H[X.id],...X};else v.push(X);_=Object.values(H),P=v}let O={post:_,patch:P};if(!O.post.length&&!O.patch.length)return;let Y={post:[],patch:[]};for(let H of["post","patch"]){let v=H,X=O[v].reverse(),Z=X.pop();while(Z!==void 0)Y[v].push(Z),Z=X.pop()}if(Y.post.length>0||Y.patch.length>0){let H=Y.post.map((v)=>v.id).concat(Y.patch.map((v)=>v.id)).join(",");await this._postBatchIngestRuns(U8(Y,`Ingesting runs with ids: ${H}`),K)}}async _postBatchIngestRuns(q,$){let K={...this.headers,"Content-Type":"application/json",Accept:"application/json"};if($?.apiKey!==void 0)K["x-api-key"]=$.apiKey;await this.batchIngestCaller.call(async()=>{let _=await this._fetch(`${$?.apiUrl??this.apiUrl}/runs/batch`,{method:"POST",headers:K,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:q});return await q$(_,"batch create run",!0),_})}async multipartIngestRuns({runCreates:q,runUpdates:$},K){if(q===void 0&&$===void 0)return;let _={},P=[];for(let Z of q??[]){let k=await this.prepareRunCreateOrUpdateInputs(Z);if(k.id!==void 0&&k.attachments!==void 0)_[k.id]=k.attachments;delete k.attachments,P.push(k)}let O=[];for(let Z of $??[])O.push(await this.prepareRunCreateOrUpdateInputs(Z));if(P.find((Z)=>{return Z.trace_id===void 0||Z.dotted_order===void 0})!==void 0)throw Error('Multipart ingest requires "trace_id" and "dotted_order" to be set when creating a run');if(O.find((Z)=>{return Z.trace_id===void 0||Z.dotted_order===void 0})!==void 0)throw Error('Multipart ingest requires "trace_id" and "dotted_order" to be set when updating a run');if(P.length>0&&O.length>0){let Z=P.reduce((G,S)=>{if(!S.id)return G;return G[S.id]=S,G},{}),k=[];for(let G of O)if(G.id!==void 0&&Z[G.id])Z[G.id]={...Z[G.id],...G};else k.push(G);P=Object.values(Z),O=k}if(P.length===0&&O.length===0)return;let v=[],X=[];for(let[Z,k]of[["post",P],["patch",O]])for(let G of k){let{inputs:S,outputs:N,events:E,extra:h,error:D,serialized:I,attachments:g,...y}=G,p={inputs:S,outputs:N,events:E,extra:h,error:D,serialized:I},m=U8(y,`Serializing for multipart ingestion of run with id: ${y.id}`);X.push({name:`${Z}.${y.id}`,payload:new Blob([m],{type:`application/json; length=${m.length}`})});for(let[c,$q]of Object.entries(p)){if($q===void 0)continue;let e=U8($q,`Serializing ${c} for multipart ingestion of run with id: ${y.id}`);X.push({name:`${Z}.${y.id}.${c}`,payload:new Blob([e],{type:`application/json; length=${e.length}`})})}if(y.id!==void 0){let c=_[y.id];if(c){delete _[y.id];for(let[$q,e]of Object.entries(c)){let d,n;if(Array.isArray(e))[d,n]=e;else d=e.mimeType,n=e.data;if($q.includes(".")){console.warn(`Skipping attachment '${$q}' for run ${y.id}: Invalid attachment name. Attachment names must not contain periods ('.'). Please rename the attachment and try again.`);continue}X.push({name:`attachment.${y.id}.${$q}`,payload:new Blob([n],{type:`${d}; length=${n.byteLength}`})})}}}v.push(`trace=${y.trace_id},id=${y.id}`)}await this._sendMultipartRequest(X,v.join("; "),K)}async _createNodeFetchBody(q,$){let K=[];for(let O of q)K.push(new Blob([`--${$}\r
`])),K.push(new Blob([`Content-Disposition: form-data; name="${O.name}"\r
`,`Content-Type: ${O.payload.type}\r
\r
`])),K.push(O.payload),K.push(new Blob([`\r
`]));return K.push(new Blob([`--${$}--\r
`])),await new Blob(K).arrayBuffer()}async _createMultipartStream(q,$){let K=new TextEncoder;return new ReadableStream({async start(P){let O=async(Y)=>{if(typeof Y==="string")P.enqueue(K.encode(Y));else P.enqueue(Y)};for(let Y of q){await O(`--${$}\r
`),await O(`Content-Disposition: form-data; name="${Y.name}"\r
`),await O(`Content-Type: ${Y.payload.type}\r
\r
`);let v=Y.payload.stream().getReader();try{let X;while(!(X=await v.read()).done)P.enqueue(X.value)}finally{v.releaseLock()}await O(`\r
`)}await O(`--${$}--\r
`),P.close()}})}async _sendMultipartRequest(q,$,K){let _="----LangSmithFormBoundary"+Math.random().toString(36).slice(2),P=VO(),O=()=>this._createNodeFetchBody(q,_),Y=()=>this._createMultipartStream(q,_),H=async(v)=>{return this.batchIngestCaller.call(async()=>{let X=await v(),Z={...this.headers,"Content-Type":`multipart/form-data; boundary=${_}`};if(K?.apiKey!==void 0)Z["x-api-key"]=K.apiKey;let k=X;if(K?.useGzip&&typeof X==="object"&&"pipeThrough"in X)k=X.pipeThrough(new CompressionStream("gzip")),Z["Content-Encoding"]="gzip";let G=await this._fetch(`${K?.apiUrl??this.apiUrl}/runs/multipart`,{method:"POST",headers:Z,body:k,duplex:"half",signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await q$(G,"Failed to send multipart request",!0),G})};try{let v,X=!1;if(!P&&!this.multipartStreamingDisabled&&x5()!=="bun")X=!0,v=await H(Y);else v=await H(O);if((!this.multipartStreamingDisabled||X)&&v.status===422&&(K?.apiUrl??this.apiUrl)!==BH)console.warn(`Streaming multipart upload to ${K?.apiUrl??this.apiUrl}/runs/multipart failed. This usually means the host does not support chunked uploads. Retrying with a buffered upload for operation "${$}".`),this.multipartStreamingDisabled=!0,v=await H(O)}catch(v){console.warn(`${v.message.trim()}

Context: ${$}`)}}async updateRun(q,$,K){if(W$(q),$.inputs)$.inputs=await this.processInputs($.inputs);if($.outputs)$.outputs=await this.processOutputs($.outputs);let _={...$,id:q};if(!this._filterForSampling([_],!0).length)return;if(this.autoBatchTracing&&_.trace_id!==void 0&&_.dotted_order!==void 0){let Y=this._cloneCurrentOTELContext();if($.end_time!==void 0&&_.parent_run_id===void 0&&this.blockOnRootRunFinalization&&!this.manualFlushMode){await this.processRunOperation({action:"update",item:_,otelContext:Y,apiKey:K?.apiKey,apiUrl:K?.apiUrl}).catch(console.error);return}else this.processRunOperation({action:"update",item:_,otelContext:Y,apiKey:K?.apiKey,apiUrl:K?.apiUrl}).catch(console.error);return}let P={...this.headers,"Content-Type":"application/json"};if(K?.apiKey!==void 0)P["x-api-key"]=K.apiKey;if(K?.workspaceId!==void 0)P["x-tenant-id"]=K.workspaceId;let O=U8($,`Serializing payload to update run with id: ${q}`);await this.caller.call(async()=>{let Y=await this._fetch(`${K?.apiUrl??this.apiUrl}/runs/${q}`,{method:"PATCH",headers:P,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:O});return await q$(Y,"update run",!0),Y})}async readRun(q,{loadChildRuns:$}={loadChildRuns:!1}){W$(q);let K=await this._get(`/runs/${q}`);if($)K=await this._loadChildRuns(K);return K}async getRunUrl({runId:q,run:$,projectOpts:K}){if($!==void 0){let _;if($.session_id)_=$.session_id;else if(K?.projectName)_=(await this.readProject({projectName:K?.projectName})).id;else if(K?.projectId)_=K?.projectId;else _=(await this.readProject({projectName:B$("PROJECT")||"default"})).id;let P=await this._getTenantId();return`${this.getHostUrl()}/o/${P}/projects/p/${_}/r/${$.id}?poll=true`}else if(q!==void 0){let _=await this.readRun(q);if(!_.app_path)throw Error(`Run ${q} has no app_path`);return`${this.getHostUrl()}${_.app_path}`}else throw Error("Must provide either runId or run")}async _loadChildRuns(q){let $=await NM(this.listRuns({isRoot:!1,projectId:q.session_id,traceId:q.trace_id})),K={},_={};$.sort((P,O)=>(P?.dotted_order??"").localeCompare(O?.dotted_order??""));for(let P of $){if(P.parent_run_id===null||P.parent_run_id===void 0)throw Error(`Child run ${P.id} has no parent`);if(P.dotted_order?.startsWith(q.dotted_order??"")&&P.id!==q.id){if(!(P.parent_run_id in K))K[P.parent_run_id]=[];K[P.parent_run_id].push(P),_[P.id]=P}}q.child_runs=K[q.id]||[];for(let P in K)if(P!==q.id)_[P].child_runs=K[P];return q}async*listRuns(q){let{projectId:$,projectName:K,parentRunId:_,traceId:P,referenceExampleId:O,startTime:Y,executionOrder:H,isRoot:v,runType:X,error:Z,id:k,query:G,filter:S,traceFilter:N,treeFilter:E,limit:h,select:D,order:I}=q,g=[];if($)g=Array.isArray($)?$:[$];if(K){let c=Array.isArray(K)?K:[K],$q=await Promise.all(c.map((e)=>this.readProject({projectName:e}).then((d)=>d.id)));g.push(...$q)}let y=["app_path","completion_cost","completion_tokens","dotted_order","end_time","error","events","extra","feedback_stats","first_token_time","id","inputs","name","outputs","parent_run_id","parent_run_ids","prompt_cost","prompt_tokens","reference_example_id","run_type","session_id","start_time","status","tags","total_cost","total_tokens","trace_id"],p={session:g.length?g:null,run_type:X,reference_example:O,query:G,filter:S,trace_filter:N,tree_filter:E,execution_order:H,parent_run:_,start_time:Y?Y.toISOString():null,error:Z,id:k,limit:h,trace:P,select:D?D:y,is_root:v,order:I},m=0;for await(let c of this._getCursorPaginatedList("/runs/query",p))if(h){if(m>=h)break;if(c.length+m>h){yield*c.slice(0,h-m);break}m+=c.length,yield*c}else yield*c}async*listGroupRuns(q){let{projectId:$,projectName:K,groupBy:_,filter:P,startTime:O,endTime:Y,limit:H,offset:v}=q,Z={session_id:$||(await this.readProject({projectName:K})).id,group_by:_,filter:P,start_time:O?O.toISOString():null,end_time:Y?Y.toISOString():null,limit:Number(H)||100},k=Number(v)||0,G="/runs/group",S=`${this.apiUrl}${G}`;while(!0){let N={...Z,offset:k},E=Object.fromEntries(Object.entries(N).filter(([p,m])=>m!==void 0)),h=JSON.stringify(E),I=await(await this.caller.call(async()=>{let p=await this._fetch(S,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:h});return await q$(p,`Failed to fetch ${G}`),p})).json(),{groups:g,total:y}=I;if(g.length===0)break;for(let p of g)yield p;if(k+=g.length,k>=y)break}}async getRunStats({id:q,trace:$,parentRun:K,runType:_,projectNames:P,projectIds:O,referenceExampleIds:Y,startTime:H,endTime:v,error:X,query:Z,filter:k,traceFilter:G,treeFilter:S,isRoot:N,dataSourceType:E}){let h=O||[];if(P)h=[...O||[],...await Promise.all(P.map((m)=>this.readProject({projectName:m}).then((c)=>c.id)))];let I=Object.fromEntries(Object.entries({id:q,trace:$,parent_run:K,run_type:_,session:h,reference_example:Y,start_time:H,end_time:v,error:X,query:Z,filter:k,trace_filter:G,tree_filter:S,is_root:N,data_source_type:E}).filter(([m,c])=>c!==void 0)),g=JSON.stringify(I);return await(await this.caller.call(async()=>{let m=await this._fetch(`${this.apiUrl}/runs/stats`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:g});return await q$(m,"get run stats"),m})).json()}async shareRun(q,{shareId:$}={}){let K={run_id:q,share_token:$||JK()};W$(q);let _=JSON.stringify(K),O=await(await this.caller.call(async()=>{let Y=await this._fetch(`${this.apiUrl}/runs/${q}/share`,{method:"PUT",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:_});return await q$(Y,"share run"),Y})).json();if(O===null||!("share_token"in O))throw Error("Invalid response from server");return`${this.getHostUrl()}/public/${O.share_token}/r`}async unshareRun(q){W$(q),await this.caller.call(async()=>{let $=await this._fetch(`${this.apiUrl}/runs/${q}/share`,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await q$($,"unshare run",!0),$})}async readRunSharedLink(q){W$(q);let K=await(await this.caller.call(async()=>{let _=await this._fetch(`${this.apiUrl}/runs/${q}/share`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await q$(_,"read run shared link"),_})).json();if(K===null||!("share_token"in K))return;return`${this.getHostUrl()}/public/${K.share_token}/r`}async listSharedRuns(q,{runIds:$}={}){let K=new URLSearchParams({share_token:q});if($!==void 0)for(let O of $)K.append("id",O);return W$(q),await(await this.caller.call(async()=>{let O=await this._fetch(`${this.apiUrl}/public/${q}/runs${K}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await q$(O,"list shared runs"),O})).json()}async readDatasetSharedSchema(q,$){if(!q&&!$)throw Error("Either datasetId or datasetName must be given");if(!q)q=(await this.readDataset({datasetName:$})).id;W$(q);let _=await(await this.caller.call(async()=>{let P=await this._fetch(`${this.apiUrl}/datasets/${q}/share`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await q$(P,"read dataset shared schema"),P})).json();return _.url=`${this.getHostUrl()}/public/${_.share_token}/d`,_}async shareDataset(q,$){if(!q&&!$)throw Error("Either datasetId or datasetName must be given");if(!q)q=(await this.readDataset({datasetName:$})).id;let K={dataset_id:q};W$(q);let _=JSON.stringify(K),O=await(await this.caller.call(async()=>{let Y=await this._fetch(`${this.apiUrl}/datasets/${q}/share`,{method:"PUT",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:_});return await q$(Y,"share dataset"),Y})).json();return O.url=`${this.getHostUrl()}/public/${O.share_token}/d`,O}async unshareDataset(q){W$(q),await this.caller.call(async()=>{let $=await this._fetch(`${this.apiUrl}/datasets/${q}/share`,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await q$($,"unshare dataset",!0),$})}async readSharedDataset(q){return W$(q),await(await this.caller.call(async()=>{let _=await this._fetch(`${this.apiUrl}/public/${q}/datasets`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await q$(_,"read shared dataset"),_})).json()}async listSharedExamples(q,$){let K={};if($?.exampleIds)K.id=$.exampleIds;let _=new URLSearchParams;Object.entries(K).forEach(([Y,H])=>{if(Array.isArray(H))H.forEach((v)=>_.append(Y,v));else _.append(Y,H)});let P=await this.caller.call(async()=>{let Y=await this._fetch(`${this.apiUrl}/public/${q}/examples?${_.toString()}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await q$(Y,"list shared examples"),Y}),O=await P.json();if(!P.ok){if("detail"in O)throw Error(`Failed to list shared examples.
Status: ${P.status}
Message: ${Array.isArray(O.detail)?O.detail.join(`
`):"Unspecified error"}`);throw Error(`Failed to list shared examples: ${P.status} ${P.statusText}`)}return O.map((Y)=>({...Y,_hostUrl:this.getHostUrl()}))}async createProject({projectName:q,description:$=null,metadata:K=null,upsert:_=!1,projectExtra:P=null,referenceDatasetId:O=null}){let Y=_?"?upsert=true":"",H=`${this.apiUrl}/sessions${Y}`,v=P||{};if(K)v.metadata=K;let X={name:q,extra:v,description:$};if(O!==null)X.reference_dataset_id=O;let Z=JSON.stringify(X);return await(await this.caller.call(async()=>{let S=await this._fetch(H,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:Z});return await q$(S,"create project"),S})).json()}async updateProject(q,{name:$=null,description:K=null,metadata:_=null,projectExtra:P=null,endTime:O=null}){let Y=`${this.apiUrl}/sessions/${q}`,H=P;if(_)H={...H||{},metadata:_};let v=JSON.stringify({name:$,extra:H,description:K,end_time:O?new Date(O).toISOString():null});return await(await this.caller.call(async()=>{let k=await this._fetch(Y,{method:"PATCH",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:v});return await q$(k,"update project"),k})).json()}async hasProject({projectId:q,projectName:$}){let K="/sessions",_=new URLSearchParams;if(q!==void 0&&$!==void 0)throw Error("Must provide either projectName or projectId, not both");else if(q!==void 0)W$(q),K+=`/${q}`;else if($!==void 0)_.append("name",$);else throw Error("Must provide projectName or projectId");let P=await this.caller.call(async()=>{let O=await this._fetch(`${this.apiUrl}${K}?${_}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await q$(O,"has project"),O});try{let O=await P.json();if(!P.ok)return!1;if(Array.isArray(O))return O.length>0;return!0}catch(O){return!1}}async readProject({projectId:q,projectName:$,includeStats:K}){let _="/sessions",P=new URLSearchParams;if(q!==void 0&&$!==void 0)throw Error("Must provide either projectName or projectId, not both");else if(q!==void 0)W$(q),_+=`/${q}`;else if($!==void 0)P.append("name",$);else throw Error("Must provide projectName or projectId");if(K!==void 0)P.append("include_stats",K.toString());let O=await this._get(_,P),Y;if(Array.isArray(O)){if(O.length===0)throw Error(`Project[id=${q}, name=${$}] not found`);Y=O[0]}else Y=O;return Y}async getProjectUrl({projectId:q,projectName:$}){if(q===void 0&&$===void 0)throw Error("Must provide either projectName or projectId");let K=await this.readProject({projectId:q,projectName:$}),_=await this._getTenantId();return`${this.getHostUrl()}/o/${_}/projects/p/${K.id}`}async getDatasetUrl({datasetId:q,datasetName:$}){if(q===void 0&&$===void 0)throw Error("Must provide either datasetName or datasetId");let K=await this.readDataset({datasetId:q,datasetName:$}),_=await this._getTenantId();return`${this.getHostUrl()}/o/${_}/datasets/${K.id}`}async _getTenantId(){if(this._tenantId!==null)return this._tenantId;let q=new URLSearchParams({limit:"1"});for await(let $ of this._getPaginated("/sessions",q))return this._tenantId=$[0].tenant_id,$[0].tenant_id;throw Error("No projects found to resolve tenant.")}async*listProjects({projectIds:q,name:$,nameContains:K,referenceDatasetId:_,referenceDatasetName:P,includeStats:O,datasetVersion:Y,referenceFree:H,metadata:v}={}){let X=new URLSearchParams;if(q!==void 0)for(let Z of q)X.append("id",Z);if($!==void 0)X.append("name",$);if(K!==void 0)X.append("name_contains",K);if(_!==void 0)X.append("reference_dataset",_);else if(P!==void 0){let Z=await this.readDataset({datasetName:P});X.append("reference_dataset",Z.id)}if(O!==void 0)X.append("include_stats",O.toString());if(Y!==void 0)X.append("dataset_version",Y);if(H!==void 0)X.append("reference_free",H.toString());if(v!==void 0)X.append("metadata",JSON.stringify(v));for await(let Z of this._getPaginated("/sessions",X))yield*Z}async deleteProject({projectId:q,projectName:$}){let K;if(q===void 0&&$===void 0)throw Error("Must provide projectName or projectId");else if(q!==void 0&&$!==void 0)throw Error("Must provide either projectName or projectId, not both");else if(q===void 0)K=(await this.readProject({projectName:$})).id;else K=q;W$(K),await this.caller.call(async()=>{let _=await this._fetch(`${this.apiUrl}/sessions/${K}`,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await q$(_,`delete session ${K} (${$})`,!0),_})}async uploadCsv({csvFile:q,fileName:$,inputKeys:K,outputKeys:_,description:P,dataType:O,name:Y}){let H=`${this.apiUrl}/datasets/upload`,v=new FormData;if(v.append("file",q,$),K.forEach((k)=>{v.append("input_keys",k)}),_.forEach((k)=>{v.append("output_keys",k)}),P)v.append("description",P);if(O)v.append("data_type",O);if(Y)v.append("name",Y);return await(await this.caller.call(async()=>{let k=await this._fetch(H,{method:"POST",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:v});return await q$(k,"upload CSV"),k})).json()}async createDataset(q,{description:$,dataType:K,inputsSchema:_,outputsSchema:P,metadata:O}={}){let Y={name:q,description:$,extra:O?{metadata:O}:void 0};if(K)Y.data_type=K;if(_)Y.inputs_schema_definition=_;if(P)Y.outputs_schema_definition=P;let H=JSON.stringify(Y);return await(await this.caller.call(async()=>{let Z=await this._fetch(`${this.apiUrl}/datasets`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:H});return await q$(Z,"create dataset"),Z})).json()}async readDataset({datasetId:q,datasetName:$}){let K="/datasets",_=new URLSearchParams({limit:"1"});if(q&&$)throw Error("Must provide either datasetName or datasetId, not both");else if(q)W$(q),K+=`/${q}`;else if($)_.append("name",$);else throw Error("Must provide datasetName or datasetId");let P=await this._get(K,_),O;if(Array.isArray(P)){if(P.length===0)throw Error(`Dataset[id=${q}, name=${$}] not found`);O=P[0]}else O=P;return O}async hasDataset({datasetId:q,datasetName:$}){try{return await this.readDataset({datasetId:q,datasetName:$}),!0}catch(K){if(K instanceof Error&&K.message.toLocaleLowerCase().includes("not found"))return!1;throw K}}async diffDatasetVersions({datasetId:q,datasetName:$,fromVersion:K,toVersion:_}){let P=q;if(P===void 0&&$===void 0)throw Error("Must provide either datasetName or datasetId");else if(P!==void 0&&$!==void 0)throw Error("Must provide either datasetName or datasetId, not both");else if(P===void 0)P=(await this.readDataset({datasetName:$})).id;let O=new URLSearchParams({from_version:typeof K==="string"?K:K.toISOString(),to_version:typeof _==="string"?_:_.toISOString()});return await this._get(`/datasets/${P}/versions/diff`,O)}async readDatasetOpenaiFinetuning({datasetId:q,datasetName:$}){if(q!==void 0);else if($!==void 0)q=(await this.readDataset({datasetName:$})).id;else throw Error("Must provide either datasetName or datasetId");return(await(await this._getResponse(`/datasets/${q}/openai_ft`)).text()).trim().split(`
`).map((Y)=>JSON.parse(Y))}async*listDatasets({limit:q=100,offset:$=0,datasetIds:K,datasetName:_,datasetNameContains:P,metadata:O}={}){let H=new URLSearchParams({limit:q.toString(),offset:$.toString()});if(K!==void 0)for(let v of K)H.append("id",v);if(_!==void 0)H.append("name",_);if(P!==void 0)H.append("name_contains",P);if(O!==void 0)H.append("metadata",JSON.stringify(O));for await(let v of this._getPaginated("/datasets",H))yield*v}async updateDataset(q){let{datasetId:$,datasetName:K,..._}=q;if(!$&&!K)throw Error("Must provide either datasetName or datasetId");let P=$??(await this.readDataset({datasetName:K})).id;W$(P);let O=JSON.stringify(_);return await(await this.caller.call(async()=>{let H=await this._fetch(`${this.apiUrl}/datasets/${P}`,{method:"PATCH",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:O});return await q$(H,"update dataset"),H})).json()}async updateDatasetTag(q){let{datasetId:$,datasetName:K,asOf:_,tag:P}=q;if(!$&&!K)throw Error("Must provide either datasetName or datasetId");let O=$??(await this.readDataset({datasetName:K})).id;W$(O);let Y=JSON.stringify({as_of:typeof _==="string"?_:_.toISOString(),tag:P});await this.caller.call(async()=>{let H=await this._fetch(`${this.apiUrl}/datasets/${O}/tags`,{method:"PUT",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:Y});return await q$(H,"update dataset tags",!0),H})}async deleteDataset({datasetId:q,datasetName:$}){let K="/datasets",_=q;if(q!==void 0&&$!==void 0)throw Error("Must provide either datasetName or datasetId, not both");else if($!==void 0)_=(await this.readDataset({datasetName:$})).id;if(_!==void 0)W$(_),K+=`/${_}`;else throw Error("Must provide datasetName or datasetId");await this.caller.call(async()=>{let P=await this._fetch(this.apiUrl+K,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await q$(P,`delete ${K}`,!0),P})}async indexDataset({datasetId:q,datasetName:$,tag:K}){let _=q;if(!_&&!$)throw Error("Must provide either datasetName or datasetId");else if(_&&$)throw Error("Must provide either datasetName or datasetId, not both");else if(!_)_=(await this.readDataset({datasetName:$})).id;W$(_);let O=JSON.stringify({tag:K});await(await this.caller.call(async()=>{let H=await this._fetch(`${this.apiUrl}/datasets/${_}/index`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:O});return await q$(H,"index dataset"),H})).json()}async similarExamples(q,$,K,{filter:_}={}){let P={limit:K,inputs:q};if(_!==void 0)P.filter=_;W$($);let O=JSON.stringify(P);return(await(await this.caller.call(async()=>{let v=await this._fetch(`${this.apiUrl}/datasets/${$}/search`,{headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,method:"POST",body:O});return await q$(v,"fetch similar examples"),v})).json()).examples}async createExample(q,$,K){if(iH(q)){if($!==void 0||K!==void 0)throw Error("Cannot provide outputs or options when using ExampleCreate object")}let _=$?K?.datasetId:q.dataset_id,P=$?K?.datasetName:q.dataset_name;if(_===void 0&&P===void 0)throw Error("Must provide either datasetName or datasetId");else if(_!==void 0&&P!==void 0)throw Error("Must provide either datasetName or datasetId, not both");else if(_===void 0)_=(await this.readDataset({datasetName:P})).id;let O=($?K?.createdAt:q.created_at)||new Date,Y;if(!iH(q))Y={inputs:q,outputs:$,created_at:O?.toISOString(),id:K?.exampleId,metadata:K?.metadata,split:K?.split,source_run_id:K?.sourceRunId,use_source_run_io:K?.useSourceRunIO,use_source_run_attachments:K?.useSourceRunAttachments,attachments:K?.attachments};else Y=q;let H=await this._uploadExamplesMultipart(_,[Y]);return await this.readExample(H.example_ids?.[0]??JK())}async createExamples(q){if(Array.isArray(q)){if(q.length===0)return[];let D=q,I=D[0].dataset_id,g=D[0].dataset_name;if(I===void 0&&g===void 0)throw Error("Must provide either datasetName or datasetId");else if(I!==void 0&&g!==void 0)throw Error("Must provide either datasetName or datasetId, not both");else if(I===void 0)I=(await this.readDataset({datasetName:g})).id;let y=await this._uploadExamplesMultipart(I,D);return await Promise.all(y.example_ids.map((m)=>this.readExample(m)))}let{inputs:$,outputs:K,metadata:_,splits:P,sourceRunIds:O,useSourceRunIOs:Y,useSourceRunAttachments:H,attachments:v,exampleIds:X,datasetId:Z,datasetName:k}=q;if($===void 0)throw Error("Must provide inputs when using legacy parameters");let G=Z,S=k;if(G===void 0&&S===void 0)throw Error("Must provide either datasetName or datasetId");else if(G!==void 0&&S!==void 0)throw Error("Must provide either datasetName or datasetId, not both");else if(G===void 0)G=(await this.readDataset({datasetName:S})).id;let N=$.map((D,I)=>{return{dataset_id:G,inputs:D,outputs:K?.[I],metadata:_?.[I],split:P?.[I],id:X?.[I],attachments:v?.[I],source_run_id:O?.[I],use_source_run_io:Y?.[I],use_source_run_attachments:H?.[I]}}),E=await this._uploadExamplesMultipart(G,N);return await Promise.all(E.example_ids.map((D)=>this.readExample(D)))}async createLLMExample(q,$,K){return this.createExample({input:q},{output:$},K)}async createChatExample(q,$,K){let _=q.map((O)=>{if(n5(O))return r5(O);return O}),P=n5($)?r5($):$;return this.createExample({input:_},{output:P},K)}async readExample(q){W$(q);let $=`/examples/${q}`,K=await this._get($),{attachment_urls:_,...P}=K,O=P;if(_)O.attachments=Object.entries(_).reduce((Y,[H,v])=>{return Y[H.slice(11)]={presigned_url:v.presigned_url,mime_type:v.mime_type},Y},{});return O}async*listExamples({datasetId:q,datasetName:$,exampleIds:K,asOf:_,splits:P,inlineS3Urls:O,metadata:Y,limit:H,offset:v,filter:X,includeAttachments:Z}={}){let k;if(q!==void 0&&$!==void 0)throw Error("Must provide either datasetName or datasetId, not both");else if(q!==void 0)k=q;else if($!==void 0)k=(await this.readDataset({datasetName:$})).id;else throw Error("Must provide a datasetName or datasetId");let G=new URLSearchParams({dataset:k}),S=_?typeof _==="string"?_:_?.toISOString():void 0;if(S)G.append("as_of",S);let N=O??!0;if(G.append("inline_s3_urls",N.toString()),K!==void 0)for(let h of K)G.append("id",h);if(P!==void 0)for(let h of P)G.append("splits",h);if(Y!==void 0){let h=JSON.stringify(Y);G.append("metadata",h)}if(H!==void 0)G.append("limit",H.toString());if(v!==void 0)G.append("offset",v.toString());if(X!==void 0)G.append("filter",X);if(Z===!0)["attachment_urls","outputs","metadata"].forEach((h)=>G.append("select",h));let E=0;for await(let h of this._getPaginated("/examples",G)){for(let D of h){let{attachment_urls:I,...g}=D,y=g;if(I)y.attachments=Object.entries(I).reduce((p,[m,c])=>{return p[m.slice(11)]={presigned_url:c.presigned_url,mime_type:c.mime_type||void 0},p},{});yield y,E++}if(H!==void 0&&E>=H)break}}async deleteExample(q){W$(q);let $=`/examples/${q}`;await this.caller.call(async()=>{let K=await this._fetch(this.apiUrl+$,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await q$(K,`delete ${$}`,!0),K})}async updateExample(q,$){let K;if($)K=q;else K=q.id;W$(K);let _;if($)_={id:K,...$};else _=q;let P;if(_.dataset_id!==void 0)P=_.dataset_id;else P=(await this.readExample(K)).dataset_id;return this._updateExamplesMultipart(P,[_])}async updateExamples(q){let $;if(q[0].dataset_id===void 0)$=(await this.readExample(q[0].id)).dataset_id;else $=q[0].dataset_id;return this._updateExamplesMultipart($,q)}async readDatasetVersion({datasetId:q,datasetName:$,asOf:K,tag:_}){let P;if(!q)P=(await this.readDataset({datasetName:$})).id;else P=q;if(W$(P),K&&_||!K&&!_)throw Error("Exactly one of asOf and tag must be specified.");let O=new URLSearchParams;if(K!==void 0)O.append("as_of",typeof K==="string"?K:K.toISOString());if(_!==void 0)O.append("tag",_);return await(await this.caller.call(async()=>{let H=await this._fetch(`${this.apiUrl}/datasets/${P}/version?${O.toString()}`,{method:"GET",headers:{...this.headers},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await q$(H,"read dataset version"),H})).json()}async listDatasetSplits({datasetId:q,datasetName:$,asOf:K}){let _;if(q===void 0&&$===void 0)throw Error("Must provide dataset name or ID");else if(q!==void 0&&$!==void 0)throw Error("Must provide either datasetName or datasetId, not both");else if(q===void 0)_=(await this.readDataset({datasetName:$})).id;else _=q;W$(_);let P=new URLSearchParams,O=K?typeof K==="string"?K:K?.toISOString():void 0;if(O)P.append("as_of",O);return await this._get(`/datasets/${_}/splits`,P)}async updateDatasetSplits({datasetId:q,datasetName:$,splitName:K,exampleIds:_,remove:P=!1}){let O;if(q===void 0&&$===void 0)throw Error("Must provide dataset name or ID");else if(q!==void 0&&$!==void 0)throw Error("Must provide either datasetName or datasetId, not both");else if(q===void 0)O=(await this.readDataset({datasetName:$})).id;else O=q;W$(O);let Y={split_name:K,examples:_.map((v)=>{return W$(v),v}),remove:P},H=JSON.stringify(Y);await this.caller.call(async()=>{let v=await this._fetch(`${this.apiUrl}/datasets/${O}/splits`,{method:"PUT",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:H});return await q$(v,"update dataset splits",!0),v})}async evaluateRun(q,$,{sourceInfo:K,loadChildRuns:_,referenceExample:P}={loadChildRuns:!1}){V9("This method is deprecated and will be removed in future LangSmith versions, use `evaluate` from `langsmith/evaluation` instead.");let O;if(typeof q==="string")O=await this.readRun(q,{loadChildRuns:_});else if(typeof q==="object"&&"id"in q)O=q;else throw Error(`Invalid run type: ${typeof q}`);if(O.reference_example_id!==null&&O.reference_example_id!==void 0)P=await this.readExample(O.reference_example_id);let Y=await $.evaluateRun(O,P),[H,v]=await this._logEvaluationFeedback(Y,O,K);return v[0]}async createFeedback(q,$,{score:K,value:_,correction:P,comment:O,sourceInfo:Y,feedbackSourceType:H="api",sourceRunId:v,feedbackId:X,feedbackConfig:Z,projectId:k,comparativeExperimentId:G}){if(!q&&!k)throw Error("One of runId or projectId must be provided");if(q&&k)throw Error("Only one of runId or projectId can be provided");let S={type:H??"api",metadata:Y??{}};if(v!==void 0&&S?.metadata!==void 0&&!S.metadata.__run)S.metadata.__run={run_id:v};if(S?.metadata!==void 0&&S.metadata.__run?.run_id!==void 0)W$(S.metadata.__run.run_id);let N={id:X??JK(),run_id:q,key:$,score:rH(K),value:_,correction:P,comment:O,feedback_source:S,comparative_experiment_id:G,feedbackConfig:Z,session_id:k},E=JSON.stringify(N),h=`${this.apiUrl}/feedback`;return await this.caller.call(async()=>{let D=await this._fetch(h,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:E});return await q$(D,"create feedback",!0),D}),N}async updateFeedback(q,{score:$,value:K,correction:_,comment:P}){let O={};if($!==void 0&&$!==null)O.score=rH($);if(K!==void 0&&K!==null)O.value=K;if(_!==void 0&&_!==null)O.correction=_;if(P!==void 0&&P!==null)O.comment=P;W$(q);let Y=JSON.stringify(O);await this.caller.call(async()=>{let H=await this._fetch(`${this.apiUrl}/feedback/${q}`,{method:"PATCH",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:Y});return await q$(H,"update feedback",!0),H})}async readFeedback(q){W$(q);let $=`/feedback/${q}`;return await this._get($)}async deleteFeedback(q){W$(q);let $=`/feedback/${q}`;await this.caller.call(async()=>{let K=await this._fetch(this.apiUrl+$,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await q$(K,`delete ${$}`,!0),K})}async*listFeedback({runIds:q,feedbackKeys:$,feedbackSourceTypes:K}={}){let _=new URLSearchParams;if(q)for(let P of q)W$(P),_.append("run",P);if($)for(let P of $)_.append("key",P);if(K)for(let P of K)_.append("source",P);for await(let P of this._getPaginated("/feedback",_))yield*P}async createPresignedFeedbackToken(q,$,{expiration:K,feedbackConfig:_}={}){let P={run_id:q,feedback_key:$,feedback_config:_};if(K){if(typeof K==="string")P.expires_at=K;else if(K?.hours||K?.minutes||K?.days)P.expires_in=K}else P.expires_in={hours:3};let O=JSON.stringify(P);return await(await this.caller.call(async()=>{let H=await this._fetch(`${this.apiUrl}/feedback/tokens`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:O});return await q$(H,"create presigned feedback token"),H})).json()}async createComparativeExperiment({name:q,experimentIds:$,referenceDatasetId:K,createdAt:_,description:P,metadata:O,id:Y}){if($.length===0)throw Error("At least one experiment is required");if(!K)K=(await this.readProject({projectId:$[0]})).reference_dataset_id;if(!K==null)throw Error("A reference dataset is required");let H={id:Y,name:q,experiment_ids:$,reference_dataset_id:K,description:P,created_at:(_??new Date)?.toISOString(),extra:{}};if(O)H.extra.metadata=O;let v=JSON.stringify(H);return(await this.caller.call(async()=>{let Z=await this._fetch(`${this.apiUrl}/datasets/comparative`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:v});return await q$(Z,"create comparative experiment"),Z})).json()}async*listPresignedFeedbackTokens(q){W$(q);let $=new URLSearchParams({run_id:q});for await(let K of this._getPaginated("/feedback/tokens",$))yield*K}_selectEvalResults(q){let $;if("results"in q)$=q.results;else if(Array.isArray(q))$=q;else $=[q];return $}async _logEvaluationFeedback(q,$,K){let _=this._selectEvalResults(q),P=[];for(let O of _){let Y=K||{};if(O.evaluatorInfo)Y={...O.evaluatorInfo,...Y};let H=null;if(O.targetRunId)H=O.targetRunId;else if($)H=$.id;P.push(await this.createFeedback(H,O.key,{score:O.score,value:O.value,comment:O.comment,correction:O.correction,sourceInfo:Y,sourceRunId:O.sourceRunId,feedbackConfig:O.feedbackConfig,feedbackSourceType:"model"}))}return[_,P]}async logEvaluationFeedback(q,$,K){let[_]=await this._logEvaluationFeedback(q,$,K);return _}async*listAnnotationQueues(q={}){let{queueIds:$,name:K,nameContains:_,limit:P}=q,O=new URLSearchParams;if($)$.forEach((H,v)=>{W$(H,`queueIds[${v}]`),O.append("ids",H)});if(K)O.append("name",K);if(_)O.append("name_contains",_);O.append("limit",(P!==void 0?Math.min(P,100):100).toString());let Y=0;for await(let H of this._getPaginated("/annotation-queues",O))if(yield*H,Y++,P!==void 0&&Y>=P)break}async createAnnotationQueue(q){let{name:$,description:K,queueId:_,rubricInstructions:P}=q,O={name:$,description:K,id:_||JK(),rubric_instructions:P},Y=JSON.stringify(Object.fromEntries(Object.entries(O).filter(([v,X])=>X!==void 0)));return(await this.caller.call(async()=>{let v=await this._fetch(`${this.apiUrl}/annotation-queues`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:Y});return await q$(v,"create annotation queue"),v})).json()}async readAnnotationQueue(q){return(await this.caller.call(async()=>{let K=await this._fetch(`${this.apiUrl}/annotation-queues/${W$(q,"queueId")}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await q$(K,"read annotation queue"),K})).json()}async updateAnnotationQueue(q,$){let{name:K,description:_,rubricInstructions:P}=$,O=JSON.stringify({name:K,description:_,rubric_instructions:P});await this.caller.call(async()=>{let Y=await this._fetch(`${this.apiUrl}/annotation-queues/${W$(q,"queueId")}`,{method:"PATCH",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:O});return await q$(Y,"update annotation queue",!0),Y})}async deleteAnnotationQueue(q){await this.caller.call(async()=>{let $=await this._fetch(`${this.apiUrl}/annotation-queues/${W$(q,"queueId")}`,{method:"DELETE",headers:{...this.headers,Accept:"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await q$($,"delete annotation queue",!0),$})}async addRunsToAnnotationQueue(q,$){let K=JSON.stringify($.map((_,P)=>W$(_,`runIds[${P}]`).toString()));await this.caller.call(async()=>{let _=await this._fetch(`${this.apiUrl}/annotation-queues/${W$(q,"queueId")}/runs`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:K});return await q$(_,"add runs to annotation queue",!0),_})}async getRunFromAnnotationQueue(q,$){let K=`/annotation-queues/${W$(q,"queueId")}/run`;return(await this.caller.call(async()=>{let P=await this._fetch(`${this.apiUrl}${K}/${$}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await q$(P,"get run from annotation queue"),P})).json()}async deleteRunFromAnnotationQueue(q,$){await this.caller.call(async()=>{let K=await this._fetch(`${this.apiUrl}/annotation-queues/${W$(q,"queueId")}/runs/${W$($,"queueRunId")}`,{method:"DELETE",headers:{...this.headers,Accept:"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await q$(K,"delete run from annotation queue",!0),K})}async getSizeFromAnnotationQueue(q){return(await this.caller.call(async()=>{let K=await this._fetch(`${this.apiUrl}/annotation-queues/${W$(q,"queueId")}/size`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await q$(K,"get size from annotation queue"),K})).json()}async _currentTenantIsOwner(q){let $=await this._getSettings();return q=="-"||$.tenant_handle===q}async _ownerConflictError(q,$){let K=await this._getSettings();return Error(`Cannot ${q} for another tenant.

      Current tenant: ${K.tenant_handle}

      Requested tenant: ${$}`)}async _getLatestCommitHash(q){let K=await(await this.caller.call(async()=>{let _=await this._fetch(`${this.apiUrl}/commits/${q}/?limit=1&offset=0`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await q$(_,"get latest commit hash"),_})).json();if(K.commits.length===0)return;return K.commits[0].commit_hash}async _likeOrUnlikePrompt(q,$){let[K,_,P]=vK(q),O=JSON.stringify({like:$});return(await this.caller.call(async()=>{let H=await this._fetch(`${this.apiUrl}/likes/${K}/${_}`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:O});return await q$(H,`${$?"like":"unlike"} prompt`),H})).json()}async _getPromptUrl(q){let[$,K,_]=vK(q);if(!await this._currentTenantIsOwner($))if(_!=="latest")return`${this.getHostUrl()}/hub/${$}/${K}/${_.substring(0,8)}`;else return`${this.getHostUrl()}/hub/${$}/${K}`;else{let P=await this._getSettings();if(_!=="latest")return`${this.getHostUrl()}/prompts/${K}/${_.substring(0,8)}?organizationId=${P.id}`;else return`${this.getHostUrl()}/prompts/${K}?organizationId=${P.id}`}}async promptExists(q){return!!await this.getPrompt(q)}async likePrompt(q){return this._likeOrUnlikePrompt(q,!0)}async unlikePrompt(q){return this._likeOrUnlikePrompt(q,!1)}async*listCommits(q){for await(let $ of this._getPaginated(`/commits/${q}/`,new URLSearchParams,(K)=>K.commits))yield*$}async*listPrompts(q){let $=new URLSearchParams;if($.append("sort_field",q?.sortField??"updated_at"),$.append("sort_direction","desc"),$.append("is_archived",(!!q?.isArchived).toString()),q?.isPublic!==void 0)$.append("is_public",q.isPublic.toString());if(q?.query)$.append("query",q.query);for await(let K of this._getPaginated("/repos",$,(_)=>_.repos))yield*K}async getPrompt(q){let[$,K,_]=vK(q),O=await(await this.caller.call(async()=>{let Y=await this._fetch(`${this.apiUrl}/repos/${$}/${K}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});if(Y?.status===404)return null;return await q$(Y,"get prompt"),Y}))?.json();if(O?.repo)return O.repo;else return null}async createPrompt(q,$){let K=await this._getSettings();if($?.isPublic&&!K.tenant_handle)throw Error(`Cannot create a public prompt without first

        creating a LangChain Hub handle.
        You can add a handle by creating a public prompt at:

        https://smith.langchain.com/prompts`);let[_,P,O]=vK(q);if(!await this._currentTenantIsOwner(_))throw await this._ownerConflictError("create a prompt",_);let Y={repo_handle:P,...$?.description&&{description:$.description},...$?.readme&&{readme:$.readme},...$?.tags&&{tags:$.tags},is_public:!!$?.isPublic},H=JSON.stringify(Y),v=await this.caller.call(async()=>{let Z=await this._fetch(`${this.apiUrl}/repos/`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:H});return await q$(Z,"create prompt"),Z}),{repo:X}=await v.json();return X}async createCommit(q,$,K){if(!await this.promptExists(q))throw Error("Prompt does not exist, you must create it first.");let[_,P,O]=vK(q),Y=K?.parentCommitHash==="latest"||!K?.parentCommitHash?await this._getLatestCommitHash(`${_}/${P}`):K?.parentCommitHash,H={manifest:JSON.parse(JSON.stringify($)),parent_commit:Y},v=JSON.stringify(H),Z=await(await this.caller.call(async()=>{let k=await this._fetch(`${this.apiUrl}/commits/${_}/${P}`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:v});return await q$(k,"create commit"),k})).json();return this._getPromptUrl(`${_}/${P}${Z.commit_hash?`:${Z.commit_hash}`:""}`)}async updateExamplesMultipart(q,$=[]){return this._updateExamplesMultipart(q,$)}async _updateExamplesMultipart(q,$=[]){if(!await this._getDatasetExamplesMultiPartSupport())throw Error("Your LangSmith deployment does not allow using the multipart examples endpoint, please upgrade your deployment to the latest version.");let K=new FormData;for(let O of $){let Y=O.id,H={...O.metadata&&{metadata:O.metadata},...O.split&&{split:O.split}},v=U8(H,`Serializing body for example with id: ${Y}`),X=new Blob([v],{type:"application/json"});if(K.append(Y,X),O.inputs){let Z=U8(O.inputs,`Serializing inputs for example with id: ${Y}`),k=new Blob([Z],{type:"application/json"});K.append(`${Y}.inputs`,k)}if(O.outputs){let Z=U8(O.outputs,`Serializing outputs whle updating example with id: ${Y}`),k=new Blob([Z],{type:"application/json"});K.append(`${Y}.outputs`,k)}if(O.attachments)for(let[Z,k]of Object.entries(O.attachments)){let G,S;if(Array.isArray(k))[G,S]=k;else G=k.mimeType,S=k.data;let N=new Blob([S],{type:`${G}; length=${S.byteLength}`});K.append(`${Y}.attachment.${Z}`,N)}if(O.attachments_operations){let Z=U8(O.attachments_operations,`Serializing attachments while updating example with id: ${Y}`),k=new Blob([Z],{type:"application/json"});K.append(`${Y}.attachments_operations`,k)}}let _=q??$[0]?.dataset_id;return(await this.caller.call(async()=>{let O=await this._fetch(`${this.apiUrl}${this._getPlatformEndpointPath(`datasets/${_}/examples`)}`,{method:"PATCH",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:K});return await q$(O,"update examples"),O})).json()}async uploadExamplesMultipart(q,$=[]){return this._uploadExamplesMultipart(q,$)}async _uploadExamplesMultipart(q,$=[]){if(!await this._getDatasetExamplesMultiPartSupport())throw Error("Your LangSmith deployment does not allow using the multipart examples endpoint, please upgrade your deployment to the latest version.");let K=new FormData;for(let P of $){let O=(P.id??JK()).toString(),Y={created_at:P.created_at,...P.metadata&&{metadata:P.metadata},...P.split&&{split:P.split},...P.source_run_id&&{source_run_id:P.source_run_id},...P.use_source_run_io&&{use_source_run_io:P.use_source_run_io},...P.use_source_run_attachments&&{use_source_run_attachments:P.use_source_run_attachments}},H=U8(Y,`Serializing body for uploaded example with id: ${O}`),v=new Blob([H],{type:"application/json"});if(K.append(O,v),P.inputs){let X=U8(P.inputs,`Serializing inputs for uploaded example with id: ${O}`),Z=new Blob([X],{type:"application/json"});K.append(`${O}.inputs`,Z)}if(P.outputs){let X=U8(P.outputs,`Serializing outputs for uploaded example with id: ${O}`),Z=new Blob([X],{type:"application/json"});K.append(`${O}.outputs`,Z)}if(P.attachments)for(let[X,Z]of Object.entries(P.attachments)){let k,G;if(Array.isArray(Z))[k,G]=Z;else k=Z.mimeType,G=Z.data;let S=new Blob([G],{type:`${k}; length=${G.byteLength}`});K.append(`${O}.attachment.${X}`,S)}}return(await this.caller.call(async()=>{let P=await this._fetch(`${this.apiUrl}${this._getPlatformEndpointPath(`datasets/${q}/examples`)}`,{method:"POST",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:K});return await q$(P,"upload examples"),P})).json()}async updatePrompt(q,$){if(!await this.promptExists(q))throw Error("Prompt does not exist, you must create it first.");let[K,_]=vK(q);if(!await this._currentTenantIsOwner(K))throw await this._ownerConflictError("update a prompt",K);let P={};if($?.description!==void 0)P.description=$.description;if($?.readme!==void 0)P.readme=$.readme;if($?.tags!==void 0)P.tags=$.tags;if($?.isPublic!==void 0)P.is_public=$.isPublic;if($?.isArchived!==void 0)P.is_archived=$.isArchived;if(Object.keys(P).length===0)throw Error("No valid update options provided");let O=JSON.stringify(P);return(await this.caller.call(async()=>{let H=await this._fetch(`${this.apiUrl}/repos/${K}/${_}`,{method:"PATCH",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:O});return await q$(H,"update prompt"),H})).json()}async deletePrompt(q){if(!await this.promptExists(q))throw Error("Prompt does not exist, you must create it first.");let[$,K,_]=vK(q);if(!await this._currentTenantIsOwner($))throw await this._ownerConflictError("delete a prompt",$);return(await this.caller.call(async()=>{let O=await this._fetch(`${this.apiUrl}/repos/${$}/${K}`,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await q$(O,"delete prompt"),O})).json()}async pullPromptCommit(q,$){let[K,_,P]=vK(q),Y=await(await this.caller.call(async()=>{let H=await this._fetch(`${this.apiUrl}/commits/${K}/${_}/${P}${$?.includeModel?"?include_model=true":""}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await q$(H,"pull prompt commit"),H})).json();return{owner:K,repo:_,commit_hash:Y.commit_hash,manifest:Y.manifest,examples:Y.examples}}async _pullPrompt(q,$){let K=await this.pullPromptCommit(q,{includeModel:$?.includeModel});return JSON.stringify(K.manifest)}async pushPrompt(q,$){if(await this.promptExists(q)){if($&&Object.keys($).some((_)=>_!=="object"))await this.updatePrompt(q,{description:$?.description,readme:$?.readme,tags:$?.tags,isPublic:$?.isPublic})}else await this.createPrompt(q,{description:$?.description,readme:$?.readme,tags:$?.tags,isPublic:$?.isPublic});if(!$?.object)return await this._getPromptUrl(q);return await this.createCommit(q,$?.object,{parentCommitHash:$?.parentCommitHash})}async clonePublicDataset(q,$={}){let{sourceApiUrl:K=this.apiUrl,datasetName:_}=$,[P,O]=this.parseTokenOrUrl(q,K),Y=new lK({apiUrl:P,apiKey:"placeholder"}),H=await Y.readSharedDataset(O),v=_||H.name;try{if(await this.hasDataset({datasetId:v})){console.log(`Dataset ${v} already exists in your tenant. Skipping.`);return}}catch(k){}let X=await Y.listSharedExamples(O),Z=await this.createDataset(v,{description:H.description,dataType:H.data_type||"kv",inputsSchema:H.inputs_schema_definition??void 0,outputsSchema:H.outputs_schema_definition??void 0});try{await this.createExamples({inputs:X.map((k)=>k.inputs),outputs:X.flatMap((k)=>k.outputs?[k.outputs]:[]),datasetId:Z.id})}catch(k){throw console.error(`An error occurred while creating dataset ${v}. You should delete it manually.`),k}}parseTokenOrUrl(q,$,K=2,_="dataset"){try{return W$(q),[$,q]}catch(P){}try{let O=new URL(q).pathname.split("/").filter((Y)=>Y!=="");if(O.length>=K){let Y=O[O.length-K];return[$,Y]}else throw Error(`Invalid public ${_} URL: ${q}`)}catch(P){throw Error(`Invalid public ${_} URL or token: ${q}`)}}async awaitPendingTraceBatches(){if(this.manualFlushMode)return console.warn("[WARNING]: When tracing in manual flush mode, you must call `await client.flush()` manually to submit trace batches."),Promise.resolve();if(await Promise.all([...this.autoBatchQueue.items.map(({itemPromise:q})=>q),this.batchIngestCaller.queue.onIdle()]),this.langSmithToOTELTranslator!==void 0)await LO()?.DEFAULT_LANGSMITH_SPAN_PROCESSOR?.forceFlush()}}function iH(q){return"dataset_id"in q||"dataset_name"in q}var FH=(q)=>{if(q!==void 0)return q;return!!["TRACING_V2","TRACING"].find((K)=>B$(K)==="true")};var m9=Symbol.for("lc:context_variables");function DM(q){return q.replace(/[-:.]/g,"")}function WY(q,$,K=1){let _=K.toFixed(0).slice(0,3).padStart(3,"0"),P=`${new Date(q).toISOString().slice(0,-1)}${_}Z`;return{dottedOrder:DM(P)+$,microsecondPrecisionDatestring:P}}class c9{constructor(q,$,K,_){Object.defineProperty(this,"metadata",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"project_name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"replicas",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.metadata=q,this.tags=$,this.project_name=K,this.replicas=_}static fromHeader(q){let $=q.split(","),K={},_=[],P,O;for(let Y of $){let[H,v]=Y.split("="),X=decodeURIComponent(v);if(H==="langsmith-metadata")K=JSON.parse(X);else if(H==="langsmith-tags")_=X.split(",");else if(H==="langsmith-project")P=X;else if(H==="langsmith-replicas")O=JSON.parse(X)}return new c9(K,_,P,O)}toHeader(){let q=[];if(this.metadata&&Object.keys(this.metadata).length>0)q.push(`langsmith-metadata=${encodeURIComponent(JSON.stringify(this.metadata))}`);if(this.tags&&this.tags.length>0)q.push(`langsmith-tags=${encodeURIComponent(this.tags.join(","))}`);if(this.project_name)q.push(`langsmith-project=${encodeURIComponent(this.project_name)}`);return q.join(",")}}class H8{constructor(q){if(Object.defineProperty(this,"id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"run_type",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"project_name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"parent_run",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"parent_run_id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"child_runs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"start_time",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"end_time",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"extra",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"error",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"serialized",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"inputs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"outputs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"reference_example_id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"client",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"events",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"trace_id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"dotted_order",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tracingEnabled",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"execution_order",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"child_execution_order",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"attachments",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"replicas",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_serialized_start_time",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),QH(q)){Object.assign(this,{...q});return}let $=H8.getDefaultConfig(),{metadata:K,..._}=q,P=_.client??H8.getSharedClient(),O={...K,..._?.extra?.metadata};if(_.extra={..._.extra,metadata:O},Object.assign(this,{...$,..._,client:P}),!this.trace_id)if(this.parent_run)this.trace_id=this.parent_run.trace_id??this.id;else this.trace_id=this.id;if(this.replicas=yM(this.replicas),this.execution_order??=1,this.child_execution_order??=1,!this.dotted_order){let{dottedOrder:Y,microsecondPrecisionDatestring:H}=WY(this.start_time,this.id,this.execution_order);if(this.parent_run)this.dotted_order=this.parent_run.dotted_order+"."+Y;else this.dotted_order=Y;this._serialized_start_time=H}}set metadata(q){this.extra={...this.extra,metadata:{...this.extra?.metadata,...q}}}get metadata(){return this.extra?.metadata}static getDefaultConfig(){return{id:JK(),run_type:"chain",project_name:R7(),child_runs:[],api_url:_6("LANGCHAIN_ENDPOINT")??"http://localhost:1984",api_key:_6("LANGCHAIN_API_KEY"),caller_options:{},start_time:Date.now(),serialized:{},inputs:{},extra:{}}}static getSharedClient(){if(!H8.sharedClient)H8.sharedClient=new lK;return H8.sharedClient}createChild(q){let $=this.child_execution_order+1,K=new H8({...q,parent_run:this,project_name:this.project_name,replicas:this.replicas,client:this.client,tracingEnabled:this.tracingEnabled,execution_order:$,child_execution_order:$});if(m9 in this)K[m9]=this[m9];let _=Symbol.for("lc:child_config"),P=q.extra?.[_]??this.extra[_];if(LM(P)){let H={...P},v=IM(H.callbacks)?H.callbacks.copy?.():void 0;if(v)Object.assign(v,{_parentRunId:K.id}),v.handlers?.find(aH)?.updateFromRunTree?.(K),H.callbacks=v;K.extra[_]=H}let O=new Set,Y=this;while(Y!=null&&!O.has(Y.id))O.add(Y.id),Y.child_execution_order=Math.max(Y.child_execution_order,$),Y=Y.parent_run;return this.child_runs.push(K),K}async end(q,$,K=Date.now(),_){if(this.outputs=this.outputs??q,this.error=this.error??$,this.end_time=this.end_time??K,_&&Object.keys(_).length>0)this.extra=this.extra?{...this.extra,metadata:{...this.extra.metadata,..._}}:{metadata:_}}_convertToCreate(q,$,K=!0){let _=q.extra??{};if(_?.runtime?.library===void 0){if(!_.runtime)_.runtime={};if($){for(let[Y,H]of Object.entries($))if(!_.runtime[Y])_.runtime[Y]=H}}let P,O;if(!K)P=q.child_runs.map((Y)=>this._convertToCreate(Y,$,K)),O=void 0;else O=q.parent_run?.id??q.parent_run_id,P=[];return{id:q.id,name:q.name,start_time:q._serialized_start_time??q.start_time,end_time:q.end_time,run_type:q.run_type,reference_example_id:q.reference_example_id,extra:_,serialized:q.serialized,error:q.error,inputs:q.inputs,outputs:q.outputs,session_name:q.project_name,child_runs:P,parent_run_id:O,trace_id:q.trace_id,dotted_order:q.dotted_order,tags:q.tags,attachments:q.attachments,events:q.events}}_remapForProject(q,$,K=!0){let _=this._convertToCreate(this,$,K);if(q===this.project_name)return _;let P=(Z)=>{return z9(`${Z}:${q}`,z9.DNS)},O=P(_.id),Y=_.trace_id?P(_.trace_id):void 0,H=_.parent_run_id?P(_.parent_run_id):void 0,v;if(_.dotted_order){let Z=bM(_.dotted_order),k=[];for(let S=0;S<Z.length-1;S++){let[N,E]=Z[S],h=P(E);k.push(N.toISOString().replace(/[-:]/g,"").replace(".","")+h)}let[G]=Z[Z.length-1];k.push(G.toISOString().replace(/[-:]/g,"").replace(".","")+O),v=k.join(".")}else v=void 0;return{..._,id:O,trace_id:Y,parent_run_id:H,dotted_order:v,session_name:q}}async postRun(q=!0){try{let $=v9();if(this.replicas&&this.replicas.length>0)for(let{projectName:K,apiKey:_,apiUrl:P,workspaceId:O}of this.replicas){let Y=this._remapForProject(K??this.project_name,$,!0);await this.client.createRun(Y,{apiKey:_,apiUrl:P,workspaceId:O})}else{let K=this._convertToCreate(this,$,q);await this.client.createRun(K)}if(!q){V9("Posting with excludeChildRuns=false is deprecated and will be removed in a future version.");for(let K of this.child_runs)await K.postRun(!1)}}catch($){console.error(`Error in postRun for run ${this.id}:`,$)}}async patchRun(q){if(this.replicas&&this.replicas.length>0)for(let{projectName:$,apiKey:K,apiUrl:_,workspaceId:P,updates:O}of this.replicas){let Y=this._remapForProject($??this.project_name),H={id:Y.id,outputs:Y.outputs,error:Y.error,parent_run_id:Y.parent_run_id,session_name:Y.session_name,reference_example_id:Y.reference_example_id,end_time:Y.end_time,dotted_order:Y.dotted_order,trace_id:Y.trace_id,events:Y.events,tags:Y.tags,extra:Y.extra,attachments:this.attachments,...O};if(!q?.excludeInputs)H.inputs=Y.inputs;await this.client.updateRun(Y.id,H,{apiKey:K,apiUrl:_,workspaceId:P})}else try{let $={end_time:this.end_time,error:this.error,outputs:this.outputs,parent_run_id:this.parent_run?.id??this.parent_run_id,reference_example_id:this.reference_example_id,extra:this.extra,events:this.events,dotted_order:this.dotted_order,trace_id:this.trace_id,tags:this.tags,attachments:this.attachments,session_name:this.project_name};if(!q?.excludeInputs)$.inputs=this.inputs;await this.client.updateRun(this.id,$)}catch($){console.error(`Error in patchRun for run ${this.id}`,$)}}toJSON(){return this._convertToCreate(this,void 0,!1)}addEvent(q){if(!this.events)this.events=[];if(typeof q==="string")this.events.push({name:"event",time:new Date().toISOString(),message:q});else this.events.push({...q,time:q.time??new Date().toISOString()})}static fromRunnableConfig(q,$){let K=q?.callbacks,_,P,O,Y=FH();if(K){let v=K?.getParentRunId?.()??"",X=K?.handlers?.find((Z)=>Z?.name=="langchain_tracer");_=X?.getRun?.(v),P=X?.projectName,O=X?.client,Y=Y||!!X}if(!_)return new H8({...$,client:O,tracingEnabled:Y,project_name:P});return new H8({name:_.name,id:_.id,trace_id:_.trace_id,dotted_order:_.dotted_order,client:O,tracingEnabled:Y,project_name:P,tags:[...new Set((_?.tags??[]).concat(q?.tags??[]))],extra:{metadata:{..._?.extra?.metadata,...q?.metadata}}}).createChild($)}static fromDottedOrder(q){return this.fromHeaders({"langsmith-trace":q})}static fromHeaders(q,$){let K="get"in q&&typeof q.get==="function"?{"langsmith-trace":q.get("langsmith-trace"),baggage:q.get("baggage")}:q,_=K["langsmith-trace"];if(!_||typeof _!=="string")return;let P=_.trim(),O=P.split(".").map((v)=>{let[X,Z]=v.split("Z");return{strTime:X,time:Date.parse(X+"Z"),uuid:Z}}),Y=O[0].uuid,H={...$,name:$?.name??"parent",run_type:$?.run_type??"chain",start_time:$?.start_time??Date.now(),id:O.at(-1)?.uuid,trace_id:Y,dotted_order:P};if(K.baggage&&typeof K.baggage==="string"){let v=c9.fromHeader(K.baggage);H.metadata=v.metadata,H.tags=v.tags,H.project_name=v.project_name,H.replicas=v.replicas}return new H8(H)}toHeaders(q){let $={"langsmith-trace":this.dotted_order,baggage:new c9(this.extra?.metadata,this.tags,this.project_name,this.replicas).toHeader()};if(q)for(let[K,_]of Object.entries($))q.set(K,_);return $}}Object.defineProperty(H8,"sharedClient",{enumerable:!0,configurable:!0,writable:!0,value:null});function QH(q){return q!=null&&typeof q.createChild==="function"&&typeof q.postRun==="function"}function aH(q){return typeof q==="object"&&q!=null&&typeof q.name==="string"&&q.name==="langchain_tracer"}function tH(q){return Array.isArray(q)&&q.some(($)=>aH($))}function IM(q){return typeof q==="object"&&q!=null&&Array.isArray(q.handlers)}function LM(q){return q!=null&&typeof q.callbacks==="object"&&(tH(q.callbacks?.handlers)||tH(q.callbacks))}function bM(q){return q.split(".").map((K)=>{let _=K.slice(0,-36),P=K.slice(-36),O=parseInt(_.slice(0,4)),Y=parseInt(_.slice(4,6))-1,H=parseInt(_.slice(6,8)),v=parseInt(_.slice(9,11)),X=parseInt(_.slice(11,13)),Z=parseInt(_.slice(13,15)),k=parseInt(_.slice(15,21));return[new Date(O,Y,H,v,X,Z,k/1000),P]})}function gM(){let q=_6("LANGSMITH_RUNS_ENDPOINTS");if(!q)return[];try{let $=JSON.parse(q);if(Array.isArray($)){let K=[];for(let _ of $){if(typeof _!=="object"||_===null){console.warn(`Invalid item type in LANGSMITH_RUNS_ENDPOINTS: expected object, got ${typeof _}`);continue}if(typeof _.api_url!=="string"){console.warn(`Invalid api_url type in LANGSMITH_RUNS_ENDPOINTS: expected string, got ${typeof _.api_url}`);continue}if(typeof _.api_key!=="string"){console.warn(`Invalid api_key type in LANGSMITH_RUNS_ENDPOINTS: expected string, got ${typeof _.api_key}`);continue}K.push({apiUrl:_.api_url.replace(/\/$/,""),apiKey:_.api_key})}return K}else if(typeof $==="object"&&$!==null){pM($);let K=[];for(let[_,P]of Object.entries($)){let O=_.replace(/\/$/,"");if(typeof P==="string")K.push({apiUrl:O,apiKey:P});else{console.warn(`Invalid value type in LANGSMITH_RUNS_ENDPOINTS for URL ${_}: expected string, got ${typeof P}`);continue}}return K}else return console.warn("Invalid LANGSMITH_RUNS_ENDPOINTS  must be valid JSON array of "+`objects with api_url and api_key properties, or object mapping url->apiKey, got ${typeof $}`),[]}catch($){if(lH($))throw $;return console.warn("Invalid LANGSMITH_RUNS_ENDPOINTS  must be valid JSON array of "+"objects with api_url and api_key properties, or object mapping url->apiKey"),[]}}function yM(q){if(q)return q.map(($)=>{if(Array.isArray($))return{projectName:$[0],updates:$[1]};return $});return gM()}function pM(q){if(Object.keys(q).length>0&&B$("ENDPOINT"))throw new YY}var Oz=K6(sH(),1),oM=K6(jz(),1);function Wz(q,$){return $?.[q]||Oz.default(q)}function Hz(q,$,K){let _={};for(let P in q)if(Object.hasOwn(q,P))_[$(P,K)]=q[P];return _}function zz(q){return Array.isArray(q)?[...q]:{...q}}function nM(q,$){let K=zz(q);for(let[_,P]of Object.entries($)){let[O,...Y]=_.split(".").reverse(),H=K;for(let v of Y.reverse()){if(H[v]===void 0)break;H[v]=zz(H[v]),H=H[v]}if(H[O]!==void 0)H[O]={lc:1,type:"secret",id:[P]}}return K}function zY(q){let $=Object.getPrototypeOf(q);if(typeof q.lc_name==="function"&&(typeof $.lc_name!=="function"||q.lc_name()!==$.lc_name()))return q.lc_name();else return q.name}class wK{static lc_name(){return this.name}get lc_id(){return[...this.lc_namespace,zY(this.constructor)]}get lc_secrets(){return}get lc_attributes(){return}get lc_aliases(){return}get lc_serializable_keys(){return}constructor(q,...$){if(Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"lc_kwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.lc_serializable_keys!==void 0)this.lc_kwargs=Object.fromEntries(Object.entries(q||{}).filter(([K])=>this.lc_serializable_keys?.includes(K)));else this.lc_kwargs=q??{}}toJSON(){if(!this.lc_serializable)return this.toJSONNotImplemented();if(this.lc_kwargs instanceof wK||typeof this.lc_kwargs!=="object"||Array.isArray(this.lc_kwargs))return this.toJSONNotImplemented();let q={},$={},K=Object.keys(this.lc_kwargs).reduce((_,P)=>{return _[P]=P in this?this[P]:this.lc_kwargs[P],_},{});for(let _=Object.getPrototypeOf(this);_;_=Object.getPrototypeOf(_))Object.assign(q,Reflect.get(_,"lc_aliases",this)),Object.assign($,Reflect.get(_,"lc_secrets",this)),Object.assign(K,Reflect.get(_,"lc_attributes",this));return Object.keys($).forEach((_)=>{let P=this,O=K,[Y,...H]=_.split(".").reverse();for(let v of H.reverse()){if(!(v in P)||P[v]===void 0)return;if(!(v in O)||O[v]===void 0){if(typeof P[v]==="object"&&P[v]!=null)O[v]={};else if(Array.isArray(P[v]))O[v]=[]}P=P[v],O=O[v]}if(Y in P&&P[Y]!==void 0)O[Y]=O[Y]||P[Y]}),{lc:1,type:"constructor",id:this.lc_id,kwargs:Hz(Object.keys($).length?nM(K,$):K,Wz,q)}}toJSONNotImplemented(){return{lc:1,type:"not_implemented",id:this.lc_id}}}var rM=()=>typeof window<"u"&&typeof window.document<"u",BM=()=>typeof globalThis==="object"&&globalThis.constructor&&globalThis.constructor.name==="DedicatedWorkerGlobalScope",iM=()=>typeof window<"u"&&window.name==="nodejs"||typeof navigator<"u"&&navigator.userAgent.includes("jsdom"),vY=()=>typeof Deno<"u",UM=()=>typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"&&!vY(),FM=()=>{let q;if(rM())q="browser";else if(UM())q="node";else if(BM())q="webworker";else if(iM())q="jsdom";else if(vY())q="deno";else q="other";return q},JY;function Jz(){if(JY===void 0)JY={library:"langchain-js",runtime:FM()};return JY}function n6(q){try{if(typeof process<"u")return process.env?.[q];else if(vY())return Deno?.env.get(q);else return}catch($){return}}class vz{}class f_ extends vz{get lc_namespace(){return["langchain_core","callbacks",this.name]}get lc_secrets(){return}get lc_attributes(){return}get lc_aliases(){return}get lc_serializable_keys(){return}static lc_name(){return this.name}get lc_id(){return[...this.lc_namespace,zY(this.constructor)]}constructor(q){super();if(Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"lc_kwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"ignoreLLM",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"ignoreChain",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"ignoreAgent",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"ignoreRetriever",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"ignoreCustomEvent",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"raiseError",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"awaitHandlers",{enumerable:!0,configurable:!0,writable:!0,value:n6("LANGCHAIN_CALLBACKS_BACKGROUND")==="false"}),this.lc_kwargs=q||{},q)this.ignoreLLM=q.ignoreLLM??this.ignoreLLM,this.ignoreChain=q.ignoreChain??this.ignoreChain,this.ignoreAgent=q.ignoreAgent??this.ignoreAgent,this.ignoreRetriever=q.ignoreRetriever??this.ignoreRetriever,this.ignoreCustomEvent=q.ignoreCustomEvent??this.ignoreCustomEvent,this.raiseError=q.raiseError??this.raiseError,this.awaitHandlers=this.raiseError||(q._awaitHandler??this.awaitHandlers)}copy(){return new this.constructor(this)}toJSON(){return wK.prototype.toJSON.call(this)}toJSONNotImplemented(){return wK.prototype.toJSONNotImplemented.call(this)}static fromMethods(q){class $ extends f_{constructor(){super();Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:B8()}),Object.assign(this,q)}}return new $}}var wz=(q)=>{let $=q;return $!==void 0&&typeof $.copy==="function"&&typeof $.name==="string"&&typeof $.awaitHandlers==="boolean"};var tM=(q)=>{if(!q)return;return q.events=q.events??[],q.child_runs=q.child_runs??[],q};function TY(q,$){if(!q)return;return new H8({...q,start_time:q._serialized_start_time??q.start_time,parent_run:TY($),child_runs:q.child_runs.map((K)=>TY(K)).filter((K)=>K!==void 0),extra:{...q.extra,runtime:Jz()},tracingEnabled:!1})}function wY(q,$){return q&&!Array.isArray(q)&&typeof q==="object"?q:{[$]:q}}function w4(q){return typeof q._addRunToRunMap==="function"}class R6 extends f_{constructor(q){super(...arguments);Object.defineProperty(this,"runMap",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(this,"runTreeMap",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(this,"usesRunTreeMap",{enumerable:!0,configurable:!0,writable:!0,value:!1})}copy(){return this}getRunById(q){if(q===void 0)return;return this.usesRunTreeMap?tM(this.runTreeMap.get(q)):this.runMap.get(q)}stringifyError(q){if(q instanceof Error)return q.message+(q?.stack?`

${q.stack}`:"");if(typeof q==="string")return q;return`${q}`}_addChildRun(q,$){q.child_runs.push($)}_addRunToRunMap(q){let{dottedOrder:$,microsecondPrecisionDatestring:K}=WY(new Date(q.start_time).getTime(),q.id,q.execution_order),_={...q},P=this.getRunById(_.parent_run_id);if(_.parent_run_id!==void 0){if(P){if(this._addChildRun(P,_),P.child_execution_order=Math.max(P.child_execution_order,_.child_execution_order),_.trace_id=P.trace_id,P.dotted_order!==void 0)_.dotted_order=[P.dotted_order,$].join("."),_._serialized_start_time=K}}else _.trace_id=_.id,_.dotted_order=$,_._serialized_start_time=K;if(this.usesRunTreeMap){let O=TY(_,P);if(O!==void 0)this.runTreeMap.set(_.id,O)}else this.runMap.set(_.id,_);return _}async _endTrace(q){let $=q.parent_run_id!==void 0&&this.getRunById(q.parent_run_id);if($)$.child_execution_order=Math.max($.child_execution_order,q.child_execution_order);else await this.persistRun(q);if(await this.onRunUpdate?.(q),this.usesRunTreeMap)this.runTreeMap.delete(q.id);else this.runMap.delete(q.id)}_getExecutionOrder(q){let $=q!==void 0&&this.getRunById(q);if(!$)return 1;return $.child_execution_order+1}_createRunForLLMStart(q,$,K,_,P,O,Y,H){let v=this._getExecutionOrder(_),X=Date.now(),Z=Y?{...P,metadata:Y}:P,k={id:K,name:H??q.id[q.id.length-1],parent_run_id:_,start_time:X,serialized:q,events:[{name:"start",time:new Date(X).toISOString()}],inputs:{prompts:$},execution_order:v,child_runs:[],child_execution_order:v,run_type:"llm",extra:Z??{},tags:O||[]};return this._addRunToRunMap(k)}async handleLLMStart(q,$,K,_,P,O,Y,H){let v=this.getRunById(K)??this._createRunForLLMStart(q,$,K,_,P,O,Y,H);return await this.onRunCreate?.(v),await this.onLLMStart?.(v),v}_createRunForChatModelStart(q,$,K,_,P,O,Y,H){let v=this._getExecutionOrder(_),X=Date.now(),Z=Y?{...P,metadata:Y}:P,k={id:K,name:H??q.id[q.id.length-1],parent_run_id:_,start_time:X,serialized:q,events:[{name:"start",time:new Date(X).toISOString()}],inputs:{messages:$},execution_order:v,child_runs:[],child_execution_order:v,run_type:"llm",extra:Z??{},tags:O||[]};return this._addRunToRunMap(k)}async handleChatModelStart(q,$,K,_,P,O,Y,H){let v=this.getRunById(K)??this._createRunForChatModelStart(q,$,K,_,P,O,Y,H);return await this.onRunCreate?.(v),await this.onLLMStart?.(v),v}async handleLLMEnd(q,$,K,_,P){let O=this.getRunById($);if(!O||O?.run_type!=="llm")throw Error("No LLM run to end.");return O.end_time=Date.now(),O.outputs=q,O.events.push({name:"end",time:new Date(O.end_time).toISOString()}),O.extra={...O.extra,...P},await this.onLLMEnd?.(O),await this._endTrace(O),O}async handleLLMError(q,$,K,_,P){let O=this.getRunById($);if(!O||O?.run_type!=="llm")throw Error("No LLM run to end.");return O.end_time=Date.now(),O.error=this.stringifyError(q),O.events.push({name:"error",time:new Date(O.end_time).toISOString()}),O.extra={...O.extra,...P},await this.onLLMError?.(O),await this._endTrace(O),O}_createRunForChainStart(q,$,K,_,P,O,Y,H){let v=this._getExecutionOrder(_),X=Date.now(),Z={id:K,name:H??q.id[q.id.length-1],parent_run_id:_,start_time:X,serialized:q,events:[{name:"start",time:new Date(X).toISOString()}],inputs:$,execution_order:v,child_execution_order:v,run_type:Y??"chain",child_runs:[],extra:O?{metadata:O}:{},tags:P||[]};return this._addRunToRunMap(Z)}async handleChainStart(q,$,K,_,P,O,Y,H){let v=this.getRunById(K)??this._createRunForChainStart(q,$,K,_,P,O,Y,H);return await this.onRunCreate?.(v),await this.onChainStart?.(v),v}async handleChainEnd(q,$,K,_,P){let O=this.getRunById($);if(!O)throw Error("No chain run to end.");if(O.end_time=Date.now(),O.outputs=wY(q,"output"),O.events.push({name:"end",time:new Date(O.end_time).toISOString()}),P?.inputs!==void 0)O.inputs=wY(P.inputs,"input");return await this.onChainEnd?.(O),await this._endTrace(O),O}async handleChainError(q,$,K,_,P){let O=this.getRunById($);if(!O)throw Error("No chain run to end.");if(O.end_time=Date.now(),O.error=this.stringifyError(q),O.events.push({name:"error",time:new Date(O.end_time).toISOString()}),P?.inputs!==void 0)O.inputs=wY(P.inputs,"input");return await this.onChainError?.(O),await this._endTrace(O),O}_createRunForToolStart(q,$,K,_,P,O,Y){let H=this._getExecutionOrder(_),v=Date.now(),X={id:K,name:Y??q.id[q.id.length-1],parent_run_id:_,start_time:v,serialized:q,events:[{name:"start",time:new Date(v).toISOString()}],inputs:{input:$},execution_order:H,child_execution_order:H,run_type:"tool",child_runs:[],extra:O?{metadata:O}:{},tags:P||[]};return this._addRunToRunMap(X)}async handleToolStart(q,$,K,_,P,O,Y){let H=this.getRunById(K)??this._createRunForToolStart(q,$,K,_,P,O,Y);return await this.onRunCreate?.(H),await this.onToolStart?.(H),H}async handleToolEnd(q,$){let K=this.getRunById($);if(!K||K?.run_type!=="tool")throw Error("No tool run to end");return K.end_time=Date.now(),K.outputs={output:q},K.events.push({name:"end",time:new Date(K.end_time).toISOString()}),await this.onToolEnd?.(K),await this._endTrace(K),K}async handleToolError(q,$){let K=this.getRunById($);if(!K||K?.run_type!=="tool")throw Error("No tool run to end");return K.end_time=Date.now(),K.error=this.stringifyError(q),K.events.push({name:"error",time:new Date(K.end_time).toISOString()}),await this.onToolError?.(K),await this._endTrace(K),K}async handleAgentAction(q,$){let K=this.getRunById($);if(!K||K?.run_type!=="chain")return;let _=K;_.actions=_.actions||[],_.actions.push(q),_.events.push({name:"agent_action",time:new Date().toISOString(),kwargs:{action:q}}),await this.onAgentAction?.(K)}async handleAgentEnd(q,$){let K=this.getRunById($);if(!K||K?.run_type!=="chain")return;K.events.push({name:"agent_end",time:new Date().toISOString(),kwargs:{action:q}}),await this.onAgentEnd?.(K)}_createRunForRetrieverStart(q,$,K,_,P,O,Y){let H=this._getExecutionOrder(_),v=Date.now(),X={id:K,name:Y??q.id[q.id.length-1],parent_run_id:_,start_time:v,serialized:q,events:[{name:"start",time:new Date(v).toISOString()}],inputs:{query:$},execution_order:H,child_execution_order:H,run_type:"retriever",child_runs:[],extra:O?{metadata:O}:{},tags:P||[]};return this._addRunToRunMap(X)}async handleRetrieverStart(q,$,K,_,P,O,Y){let H=this.getRunById(K)??this._createRunForRetrieverStart(q,$,K,_,P,O,Y);return await this.onRunCreate?.(H),await this.onRetrieverStart?.(H),H}async handleRetrieverEnd(q,$){let K=this.getRunById($);if(!K||K?.run_type!=="retriever")throw Error("No retriever run to end");return K.end_time=Date.now(),K.outputs={documents:q},K.events.push({name:"end",time:new Date(K.end_time).toISOString()}),await this.onRetrieverEnd?.(K),await this._endTrace(K),K}async handleRetrieverError(q,$){let K=this.getRunById($);if(!K||K?.run_type!=="retriever")throw Error("No retriever run to end");return K.end_time=Date.now(),K.error=this.stringifyError(q),K.events.push({name:"error",time:new Date(K.end_time).toISOString()}),await this.onRetrieverError?.(K),await this._endTrace(K),K}async handleText(q,$){let K=this.getRunById($);if(!K||K?.run_type!=="chain")return;K.events.push({name:"text",time:new Date().toISOString(),kwargs:{text:q}}),await this.onText?.(K)}async handleLLMNewToken(q,$,K,_,P,O){let Y=this.getRunById(K);if(!Y||Y?.run_type!=="llm")throw Error('Invalid "runId" provided to "handleLLMNewToken" callback.');return Y.events.push({name:"new_token",time:new Date().toISOString(),kwargs:{token:q,idx:$,chunk:O?.chunk}}),await this.onLLMNewToken?.(Y,q,{chunk:O?.chunk}),Y}}var XY=K6(Az(),1);function c8(q,$){return`${q.open}${$}${q.close}`}function w6(q,$){try{return JSON.stringify(q,null,2)}catch(K){return $}}function kz(q){if(typeof q==="string")return q.trim();if(q===null||q===void 0)return q;return w6(q,q.toString())}function dK(q){if(!q.end_time)return"";let $=q.end_time-q.start_time;if($<1000)return`${$}ms`;return`${($/1000).toFixed(2)}s`}var{color:F8}=XY.default;class l9 extends R6{constructor(){super(...arguments);Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"console_callback_handler"})}persistRun(q){return Promise.resolve()}getParents(q){let $=[],K=q;while(K.parent_run_id){let _=this.runMap.get(K.parent_run_id);if(_)$.push(_),K=_;else break}return $}getBreadcrumbs(q){let K=[...this.getParents(q).reverse(),q].map((_,P,O)=>{let Y=`${_.execution_order}:${_.run_type}:${_.name}`;return P===O.length-1?c8(XY.default.bold,Y):Y}).join(" > ");return c8(F8.grey,K)}onChainStart(q){let $=this.getBreadcrumbs(q);console.log(`${c8(F8.green,"[chain/start]")} [${$}] Entering Chain run with input: ${w6(q.inputs,"[inputs]")}`)}onChainEnd(q){let $=this.getBreadcrumbs(q);console.log(`${c8(F8.cyan,"[chain/end]")} [${$}] [${dK(q)}] Exiting Chain run with output: ${w6(q.outputs,"[outputs]")}`)}onChainError(q){let $=this.getBreadcrumbs(q);console.log(`${c8(F8.red,"[chain/error]")} [${$}] [${dK(q)}] Chain run errored with error: ${w6(q.error,"[error]")}`)}onLLMStart(q){let $=this.getBreadcrumbs(q),K="prompts"in q.inputs?{prompts:q.inputs.prompts.map((_)=>_.trim())}:q.inputs;console.log(`${c8(F8.green,"[llm/start]")} [${$}] Entering LLM run with input: ${w6(K,"[inputs]")}`)}onLLMEnd(q){let $=this.getBreadcrumbs(q);console.log(`${c8(F8.cyan,"[llm/end]")} [${$}] [${dK(q)}] Exiting LLM run with output: ${w6(q.outputs,"[response]")}`)}onLLMError(q){let $=this.getBreadcrumbs(q);console.log(`${c8(F8.red,"[llm/error]")} [${$}] [${dK(q)}] LLM run errored with error: ${w6(q.error,"[error]")}`)}onToolStart(q){let $=this.getBreadcrumbs(q);console.log(`${c8(F8.green,"[tool/start]")} [${$}] Entering Tool run with input: "${kz(q.inputs.input)}"`)}onToolEnd(q){let $=this.getBreadcrumbs(q);console.log(`${c8(F8.cyan,"[tool/end]")} [${$}] [${dK(q)}] Exiting Tool run with output: "${kz(q.outputs?.output)}"`)}onToolError(q){let $=this.getBreadcrumbs(q);console.log(`${c8(F8.red,"[tool/error]")} [${$}] [${dK(q)}] Tool run errored with error: ${w6(q.error,"[error]")}`)}onRetrieverStart(q){let $=this.getBreadcrumbs(q);console.log(`${c8(F8.green,"[retriever/start]")} [${$}] Entering Retriever run with input: ${w6(q.inputs,"[inputs]")}`)}onRetrieverEnd(q){let $=this.getBreadcrumbs(q);console.log(`${c8(F8.cyan,"[retriever/end]")} [${$}] [${dK(q)}] Exiting Retriever run with output: ${w6(q.outputs,"[outputs]")}`)}onRetrieverError(q){let $=this.getBreadcrumbs(q);console.log(`${c8(F8.red,"[retriever/error]")} [${$}] [${dK(q)}] Retriever run errored with error: ${w6(q.error,"[error]")}`)}onAgentAction(q){let $=q,K=this.getBreadcrumbs(q);console.log(`${c8(F8.blue,"[agent/action]")} [${K}] Agent selected action: ${w6($.actions[$.actions.length-1],"[action]")}`)}}function fY(q){return!!(q&&typeof q==="object"&&("type"in q)&&q.type==="tool_call")}class AY extends Error{constructor(q,$){super(q);Object.defineProperty(this,"output",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.output=$}}function Gz(q){if(typeof q>"u")return null;try{return JSON.parse(q)}catch(O){}let $="",K=[],_=!1,P=!1;for(let O of q){if(_)if(O==='"'&&!P)_=!1;else if(O===`
`&&!P)O="\\n";else if(O==="\\")P=!P;else P=!1;else if(O==='"')_=!0,P=!1;else if(O==="{")K.push("}");else if(O==="[")K.push("]");else if(O==="}"||O==="]")if(K&&K[K.length-1]===O)K.pop();else return null;$+=O}if(_)$+='"';for(let O=K.length-1;O>=0;O-=1)$+=K[O];try{return JSON.parse($)}catch(O){return null}}function kY(q){return typeof q==="object"&&q!==null&&"type"in q&&typeof q.type==="string"&&"source_type"in q&&(q.source_type==="url"||q.source_type==="base64"||q.source_type==="text"||q.source_type==="id")}function A_(q,$){if(typeof q==="string"){if(q==="")return $;if(typeof $==="string")return q+$;else if(Array.isArray($)&&$.some((K)=>kY(K)))return[{type:"text",source_type:"text",text:q},...$];else return[{type:"text",text:q},...$]}else if(Array.isArray($))return d9(q,$)??[...q,...$];else if($==="")return q;else if(Array.isArray(q)&&q.some((K)=>kY(K)))return[...q,{type:"file",source_type:"text",text:$}];else return[...q,{type:"text",text:$}]}function aM(q,$){function K(_,P){if(typeof _!=="object"||_===null||_===void 0)return _;if(P>=$){if(Array.isArray(_))return"[Array]";return"[Object]"}if(Array.isArray(_))return _.map((Y)=>K(Y,P+1));let O={};for(let Y of Object.keys(_))O[Y]=K(_[Y],P+1);return O}return JSON.stringify(K(q,0),null,2)}class TK extends wK{get lc_aliases(){return{additional_kwargs:"additional_kwargs",response_metadata:"response_metadata"}}get text(){if(typeof this.content==="string")return this.content;if(!Array.isArray(this.content))return"";return this.content.map((q)=>{if(typeof q==="string")return q;if(q.type==="text")return q.text;return""}).join("")}getType(){return this._getType()}constructor(q,$){if(typeof q==="string")q={content:q,additional_kwargs:$,response_metadata:{}};if(!q.additional_kwargs)q.additional_kwargs={};if(!q.response_metadata)q.response_metadata={};super(q);Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","messages"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"content",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"additional_kwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"response_metadata",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name=q.name,this.content=q.content,this.additional_kwargs=q.additional_kwargs,this.response_metadata=q.response_metadata,this.id=q.id}toDict(){return{type:this._getType(),data:this.toJSON().kwargs}}static lc_name(){return"BaseMessage"}get _printableFields(){return{id:this.id,content:this.content,name:this.name,additional_kwargs:this.additional_kwargs,response_metadata:this.response_metadata}}_updateId(q){this.id=q,this.lc_kwargs.id=q}get[Symbol.toStringTag](){return this.constructor.lc_name()}[Symbol.for("nodejs.util.inspect.custom")](q){if(q===null)return this;let $=aM(this._printableFields,Math.max(4,q));return`${this.constructor.lc_name()} ${$}`}}function r6(q,$){let K={...q};for(let[_,P]of Object.entries($))if(K[_]==null)K[_]=P;else if(P==null)continue;else if(typeof K[_]!==typeof P||Array.isArray(K[_])!==Array.isArray(P))throw Error(`field[${_}] already exists in the message chunk, but with a different type.`);else if(typeof K[_]==="string")if(_==="type")continue;else if(["id","name","output_version","model_provider"].includes(_))K[_]=P;else K[_]+=P;else if(typeof K[_]==="object"&&!Array.isArray(K[_]))K[_]=r6(K[_],P);else if(Array.isArray(K[_]))K[_]=d9(K[_],P);else if(K[_]===P)continue;else console.warn(`field[${_}] already exists in this message chunk and value has unsupported type.`);return K}function d9(q,$){if(q===void 0&&$===void 0)return;else if(q===void 0||$===void 0)return q||$;else{let K=[...q];for(let _ of $)if(typeof _==="object"&&_!==null&&"index"in _&&typeof _.index==="number"){let P=K.findIndex((O)=>{let Y=typeof O==="object",H="index"in O&&O.index===_.index,v="id"in O&&"id"in _&&O?.id===_?.id,X=!("id"in O)||!O?.id||!("id"in _)||!_?.id;return Y&&H&&(v||X)});if(P!==-1&&typeof K[P]==="object"&&K[P]!==null)K[P]=r6(K[P],_);else K.push(_)}else if(typeof _==="object"&&_!==null&&"text"in _&&_.text==="")continue;else K.push(_);return K}}class oK extends TK{}class k_ extends oK{constructor(q){let $;if(typeof q==="string")$={content:q,tool_calls:[],invalid_tool_calls:[],tool_call_chunks:[]};else if(q.tool_call_chunks===void 0)$={...q,tool_calls:q.tool_calls??[],invalid_tool_calls:[],tool_call_chunks:[],usage_metadata:q.usage_metadata!==void 0?q.usage_metadata:void 0};else{let K=q.tool_call_chunks.reduce((O,Y)=>{let H=O.findIndex(([v])=>{if("id"in Y&&Y.id&&"index"in Y&&Y.index!==void 0)return Y.id===v.id&&Y.index===v.index;if("id"in Y&&Y.id)return Y.id===v.id;if("index"in Y&&Y.index!==void 0)return Y.index===v.index;return!1});if(H!==-1)O[H].push(Y);else O.push([Y]);return O},[]),_=[],P=[];for(let O of K){let Y={},H=O[0]?.name??"",v=O.map((k)=>k.args||"").join(""),X=v.length?v:"{}",Z=O[0]?.id;try{if(Y=Gz(X),!Z||Y===null||typeof Y!=="object"||Array.isArray(Y))throw Error("Malformed tool call chunk args.");_.push({name:H,args:Y,id:Z,type:"tool_call"})}catch(k){P.push({name:H,args:X,id:Z,error:"Malformed args.",type:"invalid_tool_call"})}}$={...q,tool_calls:_,invalid_tool_calls:P,usage_metadata:q.usage_metadata!==void 0?q.usage_metadata:void 0}}super($);Object.defineProperty(this,"tool_calls",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"invalid_tool_calls",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"tool_call_chunks",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"usage_metadata",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.tool_call_chunks=$.tool_call_chunks??this.tool_call_chunks,this.tool_calls=$.tool_calls??this.tool_calls,this.invalid_tool_calls=$.invalid_tool_calls??this.invalid_tool_calls,this.usage_metadata=$.usage_metadata}get lc_aliases(){return{...super.lc_aliases,tool_calls:"tool_calls",invalid_tool_calls:"invalid_tool_calls",tool_call_chunks:"tool_call_chunks"}}static lc_name(){return"AIMessageChunk"}_getType(){return"ai"}get _printableFields(){return{...super._printableFields,tool_calls:this.tool_calls,tool_call_chunks:this.tool_call_chunks,invalid_tool_calls:this.invalid_tool_calls,usage_metadata:this.usage_metadata}}concat(q){let $={content:A_(this.content,q.content),additional_kwargs:r6(this.additional_kwargs,q.additional_kwargs),response_metadata:r6(this.response_metadata,q.response_metadata),tool_call_chunks:[],id:this.id??q.id};if(this.tool_call_chunks!==void 0||q.tool_call_chunks!==void 0){let K=d9(this.tool_call_chunks,q.tool_call_chunks);if(K!==void 0&&K.length>0)$.tool_call_chunks=K}if(this.usage_metadata!==void 0||q.usage_metadata!==void 0){let K={...(this.usage_metadata?.input_token_details?.audio!==void 0||q.usage_metadata?.input_token_details?.audio!==void 0)&&{audio:(this.usage_metadata?.input_token_details?.audio??0)+(q.usage_metadata?.input_token_details?.audio??0)},...(this.usage_metadata?.input_token_details?.cache_read!==void 0||q.usage_metadata?.input_token_details?.cache_read!==void 0)&&{cache_read:(this.usage_metadata?.input_token_details?.cache_read??0)+(q.usage_metadata?.input_token_details?.cache_read??0)},...(this.usage_metadata?.input_token_details?.cache_creation!==void 0||q.usage_metadata?.input_token_details?.cache_creation!==void 0)&&{cache_creation:(this.usage_metadata?.input_token_details?.cache_creation??0)+(q.usage_metadata?.input_token_details?.cache_creation??0)}},_={...(this.usage_metadata?.output_token_details?.audio!==void 0||q.usage_metadata?.output_token_details?.audio!==void 0)&&{audio:(this.usage_metadata?.output_token_details?.audio??0)+(q.usage_metadata?.output_token_details?.audio??0)},...(this.usage_metadata?.output_token_details?.reasoning!==void 0||q.usage_metadata?.output_token_details?.reasoning!==void 0)&&{reasoning:(this.usage_metadata?.output_token_details?.reasoning??0)+(q.usage_metadata?.output_token_details?.reasoning??0)}},P=this.usage_metadata??{input_tokens:0,output_tokens:0,total_tokens:0},O=q.usage_metadata??{input_tokens:0,output_tokens:0,total_tokens:0},Y={input_tokens:P.input_tokens+O.input_tokens,output_tokens:P.output_tokens+O.output_tokens,total_tokens:P.total_tokens+O.total_tokens,...Object.keys(K).length>0&&{input_token_details:K},...Object.keys(_).length>0&&{output_token_details:_}};$.usage_metadata=Y}return new k_($)}}function Zz(q,$="Human",K="AI"){let _=[];for(let P of q){let O;if(P._getType()==="human")O=$;else if(P._getType()==="ai")O=K;else if(P._getType()==="system")O="System";else if(P._getType()==="function")O="Function";else if(P._getType()==="tool")O="Tool";else if(P._getType()==="generic")O=P.role;else throw Error(`Got unsupported message type: ${P._getType()}`);let Y=P.name?`${P.name}, `:"",H=typeof P.content==="string"?P.content:JSON.stringify(P.content,null,2);_.push(`${O}: ${Y}${H}`)}return _.join(`
`)}var GY,ZY=()=>{if(GY===void 0){let q=n6("LANGCHAIN_CALLBACKS_BACKGROUND")==="false"?{blockOnRootRunFinalization:!0}:{};GY=new lK(q)}return GY};class T4 extends R6{constructor(q={}){super(q);Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"langchain_tracer"}),Object.defineProperty(this,"projectName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"exampleId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"client",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"replicas",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"usesRunTreeMap",{enumerable:!0,configurable:!0,writable:!0,value:!0});let{exampleId:$,projectName:K,client:_,replicas:P}=q;this.projectName=K??R7(),this.replicas=P,this.exampleId=$,this.client=_??ZY();let O=T4.getTraceableRunTree();if(O)this.updateFromRunTree(O)}async persistRun(q){}async onRunCreate(q){await this.getRunTreeWithTracingConfig(q.id)?.postRun()}async onRunUpdate(q){await this.getRunTreeWithTracingConfig(q.id)?.patchRun()}getRun(q){return this.runTreeMap.get(q)}updateFromRunTree(q){this.runTreeMap.set(q.id,q);let $=q,K=new Set;while($.parent_run){if(K.has($.id))break;if(K.add($.id),!$.parent_run)break;$=$.parent_run}K.clear();let _=[$];while(_.length>0){let P=_.shift();if(!P||K.has(P.id))continue;if(K.add(P.id),this.runTreeMap.set(P.id,P),P.child_runs)_.push(...P.child_runs)}this.client=q.client??this.client,this.replicas=q.replicas??this.replicas,this.projectName=q.project_name??this.projectName,this.exampleId=q.reference_example_id??this.exampleId}getRunTreeWithTracingConfig(q){let $=this.runTreeMap.get(q);if(!$)return;return new H8({...$,client:this.client,project_name:this.projectName,replicas:this.replicas,reference_example_id:this.exampleId,tracingEnabled:!0})}static getTraceableRunTree(){try{return xj(!0)}catch{return}}}var o9=K6(k9(),1);var Vz=Symbol.for("ls:tracing_async_local_storage"),G_=Symbol.for("lc:context_variables"),Mz=(q)=>{globalThis[Vz]=q},nK=()=>{return globalThis[Vz]};var u7;function eM(){return new("default"in o9.default?o9.default.default:o9.default)({autoStart:!0,concurrency:1})}function sM(){if(typeof u7>"u")u7=eM();return u7}async function n$(q,$){if($===!0){let K=nK();if(K!==void 0)await K.run(void 0,async()=>q());else await q()}else u7=sM(),u7.add(async()=>{let K=nK();if(K!==void 0)await K.run(void 0,async()=>q());else await q()})}var Sz=(q)=>{if(q!==void 0)return q;return!!["LANGSMITH_TRACING_V2","LANGCHAIN_TRACING_V2","LANGSMITH_TRACING","LANGCHAIN_TRACING"].find((K)=>n6(K)==="true")};function VY(q){let $=nK();if($===void 0)return;return $.getStore()?.[G_]?.[q]}var qS=Symbol("lc:configure_hooks"),Cz=()=>VY(qS)||[];class Nz{setHandler(q){return this.setHandlers([q])}}class c7{constructor(q,$,K,_,P,O,Y,H){Object.defineProperty(this,"runId",{enumerable:!0,configurable:!0,writable:!0,value:q}),Object.defineProperty(this,"handlers",{enumerable:!0,configurable:!0,writable:!0,value:$}),Object.defineProperty(this,"inheritableHandlers",{enumerable:!0,configurable:!0,writable:!0,value:K}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:_}),Object.defineProperty(this,"inheritableTags",{enumerable:!0,configurable:!0,writable:!0,value:P}),Object.defineProperty(this,"metadata",{enumerable:!0,configurable:!0,writable:!0,value:O}),Object.defineProperty(this,"inheritableMetadata",{enumerable:!0,configurable:!0,writable:!0,value:Y}),Object.defineProperty(this,"_parentRunId",{enumerable:!0,configurable:!0,writable:!0,value:H})}get parentRunId(){return this._parentRunId}async handleText(q){await Promise.all(this.handlers.map(($)=>n$(async()=>{try{await $.handleText?.(q,this.runId,this._parentRunId,this.tags)}catch(K){if(($.raiseError?console.error:console.warn)(`Error in handler ${$.constructor.name}, handleText: ${K}`),$.raiseError)throw K}},$.awaitHandlers)))}async handleCustomEvent(q,$,K,_,P){await Promise.all(this.handlers.map((O)=>n$(async()=>{try{await O.handleCustomEvent?.(q,$,this.runId,this.tags,this.metadata)}catch(Y){if((O.raiseError?console.error:console.warn)(`Error in handler ${O.constructor.name}, handleCustomEvent: ${Y}`),O.raiseError)throw Y}},O.awaitHandlers)))}}class Ez extends c7{getChild(q){let $=new P6(this.runId);if($.setHandlers(this.inheritableHandlers),$.addTags(this.inheritableTags),$.addMetadata(this.inheritableMetadata),q)$.addTags([q],!1);return $}async handleRetrieverEnd(q){await Promise.all(this.handlers.map(($)=>n$(async()=>{if(!$.ignoreRetriever)try{await $.handleRetrieverEnd?.(q,this.runId,this._parentRunId,this.tags)}catch(K){if(($.raiseError?console.error:console.warn)(`Error in handler ${$.constructor.name}, handleRetriever`),$.raiseError)throw K}},$.awaitHandlers)))}async handleRetrieverError(q){await Promise.all(this.handlers.map(($)=>n$(async()=>{if(!$.ignoreRetriever)try{await $.handleRetrieverError?.(q,this.runId,this._parentRunId,this.tags)}catch(K){if(($.raiseError?console.error:console.warn)(`Error in handler ${$.constructor.name}, handleRetrieverError: ${K}`),$.raiseError)throw q}},$.awaitHandlers)))}}class MY extends c7{async handleLLMNewToken(q,$,K,_,P,O){await Promise.all(this.handlers.map((Y)=>n$(async()=>{if(!Y.ignoreLLM)try{await Y.handleLLMNewToken?.(q,$??{prompt:0,completion:0},this.runId,this._parentRunId,this.tags,O)}catch(H){if((Y.raiseError?console.error:console.warn)(`Error in handler ${Y.constructor.name}, handleLLMNewToken: ${H}`),Y.raiseError)throw H}},Y.awaitHandlers)))}async handleLLMError(q,$,K,_,P){await Promise.all(this.handlers.map((O)=>n$(async()=>{if(!O.ignoreLLM)try{await O.handleLLMError?.(q,this.runId,this._parentRunId,this.tags,P)}catch(Y){if((O.raiseError?console.error:console.warn)(`Error in handler ${O.constructor.name}, handleLLMError: ${Y}`),O.raiseError)throw Y}},O.awaitHandlers)))}async handleLLMEnd(q,$,K,_,P){await Promise.all(this.handlers.map((O)=>n$(async()=>{if(!O.ignoreLLM)try{await O.handleLLMEnd?.(q,this.runId,this._parentRunId,this.tags,P)}catch(Y){if((O.raiseError?console.error:console.warn)(`Error in handler ${O.constructor.name}, handleLLMEnd: ${Y}`),O.raiseError)throw Y}},O.awaitHandlers)))}}class Rz extends c7{getChild(q){let $=new P6(this.runId);if($.setHandlers(this.inheritableHandlers),$.addTags(this.inheritableTags),$.addMetadata(this.inheritableMetadata),q)$.addTags([q],!1);return $}async handleChainError(q,$,K,_,P){await Promise.all(this.handlers.map((O)=>n$(async()=>{if(!O.ignoreChain)try{await O.handleChainError?.(q,this.runId,this._parentRunId,this.tags,P)}catch(Y){if((O.raiseError?console.error:console.warn)(`Error in handler ${O.constructor.name}, handleChainError: ${Y}`),O.raiseError)throw Y}},O.awaitHandlers)))}async handleChainEnd(q,$,K,_,P){await Promise.all(this.handlers.map((O)=>n$(async()=>{if(!O.ignoreChain)try{await O.handleChainEnd?.(q,this.runId,this._parentRunId,this.tags,P)}catch(Y){if((O.raiseError?console.error:console.warn)(`Error in handler ${O.constructor.name}, handleChainEnd: ${Y}`),O.raiseError)throw Y}},O.awaitHandlers)))}async handleAgentAction(q){await Promise.all(this.handlers.map(($)=>n$(async()=>{if(!$.ignoreAgent)try{await $.handleAgentAction?.(q,this.runId,this._parentRunId,this.tags)}catch(K){if(($.raiseError?console.error:console.warn)(`Error in handler ${$.constructor.name}, handleAgentAction: ${K}`),$.raiseError)throw K}},$.awaitHandlers)))}async handleAgentEnd(q){await Promise.all(this.handlers.map(($)=>n$(async()=>{if(!$.ignoreAgent)try{await $.handleAgentEnd?.(q,this.runId,this._parentRunId,this.tags)}catch(K){if(($.raiseError?console.error:console.warn)(`Error in handler ${$.constructor.name}, handleAgentEnd: ${K}`),$.raiseError)throw K}},$.awaitHandlers)))}}class hz extends c7{getChild(q){let $=new P6(this.runId);if($.setHandlers(this.inheritableHandlers),$.addTags(this.inheritableTags),$.addMetadata(this.inheritableMetadata),q)$.addTags([q],!1);return $}async handleToolError(q){await Promise.all(this.handlers.map(($)=>n$(async()=>{if(!$.ignoreAgent)try{await $.handleToolError?.(q,this.runId,this._parentRunId,this.tags)}catch(K){if(($.raiseError?console.error:console.warn)(`Error in handler ${$.constructor.name}, handleToolError: ${K}`),$.raiseError)throw K}},$.awaitHandlers)))}async handleToolEnd(q){await Promise.all(this.handlers.map(($)=>n$(async()=>{if(!$.ignoreAgent)try{await $.handleToolEnd?.(q,this.runId,this._parentRunId,this.tags)}catch(K){if(($.raiseError?console.error:console.warn)(`Error in handler ${$.constructor.name}, handleToolEnd: ${K}`),$.raiseError)throw K}},$.awaitHandlers)))}}class P6 extends Nz{constructor(q,$){super();Object.defineProperty(this,"handlers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"inheritableHandlers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"inheritableTags",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"metadata",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"inheritableMetadata",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"callback_manager"}),Object.defineProperty(this,"_parentRunId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.handlers=$?.handlers??this.handlers,this.inheritableHandlers=$?.inheritableHandlers??this.inheritableHandlers,this.tags=$?.tags??this.tags,this.inheritableTags=$?.inheritableTags??this.inheritableTags,this.metadata=$?.metadata??this.metadata,this.inheritableMetadata=$?.inheritableMetadata??this.inheritableMetadata,this._parentRunId=q}getParentRunId(){return this._parentRunId}async handleLLMStart(q,$,K=void 0,_=void 0,P=void 0,O=void 0,Y=void 0,H=void 0){return Promise.all($.map(async(v,X)=>{let Z=X===0&&K?K:B8();return await Promise.all(this.handlers.map((k)=>{if(k.ignoreLLM)return;if(w4(k))k._createRunForLLMStart(q,[v],Z,this._parentRunId,P,this.tags,this.metadata,H);return n$(async()=>{try{await k.handleLLMStart?.(q,[v],Z,this._parentRunId,P,this.tags,this.metadata,H)}catch(G){if((k.raiseError?console.error:console.warn)(`Error in handler ${k.constructor.name}, handleLLMStart: ${G}`),k.raiseError)throw G}},k.awaitHandlers)})),new MY(Z,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}))}async handleChatModelStart(q,$,K=void 0,_=void 0,P=void 0,O=void 0,Y=void 0,H=void 0){return Promise.all($.map(async(v,X)=>{let Z=X===0&&K?K:B8();return await Promise.all(this.handlers.map((k)=>{if(k.ignoreLLM)return;if(w4(k))k._createRunForChatModelStart(q,[v],Z,this._parentRunId,P,this.tags,this.metadata,H);return n$(async()=>{try{if(k.handleChatModelStart)await k.handleChatModelStart?.(q,[v],Z,this._parentRunId,P,this.tags,this.metadata,H);else if(k.handleLLMStart){let G=Zz(v);await k.handleLLMStart?.(q,[G],Z,this._parentRunId,P,this.tags,this.metadata,H)}}catch(G){if((k.raiseError?console.error:console.warn)(`Error in handler ${k.constructor.name}, handleLLMStart: ${G}`),k.raiseError)throw G}},k.awaitHandlers)})),new MY(Z,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}))}async handleChainStart(q,$,K=B8(),_=void 0,P=void 0,O=void 0,Y=void 0){return await Promise.all(this.handlers.map((H)=>{if(H.ignoreChain)return;if(w4(H))H._createRunForChainStart(q,$,K,this._parentRunId,this.tags,this.metadata,_,Y);return n$(async()=>{try{await H.handleChainStart?.(q,$,K,this._parentRunId,this.tags,this.metadata,_,Y)}catch(v){if((H.raiseError?console.error:console.warn)(`Error in handler ${H.constructor.name}, handleChainStart: ${v}`),H.raiseError)throw v}},H.awaitHandlers)})),new Rz(K,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}async handleToolStart(q,$,K=B8(),_=void 0,P=void 0,O=void 0,Y=void 0){return await Promise.all(this.handlers.map((H)=>{if(H.ignoreAgent)return;if(w4(H))H._createRunForToolStart(q,$,K,this._parentRunId,this.tags,this.metadata,Y);return n$(async()=>{try{await H.handleToolStart?.(q,$,K,this._parentRunId,this.tags,this.metadata,Y)}catch(v){if((H.raiseError?console.error:console.warn)(`Error in handler ${H.constructor.name}, handleToolStart: ${v}`),H.raiseError)throw v}},H.awaitHandlers)})),new hz(K,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}async handleRetrieverStart(q,$,K=B8(),_=void 0,P=void 0,O=void 0,Y=void 0){return await Promise.all(this.handlers.map((H)=>{if(H.ignoreRetriever)return;if(w4(H))H._createRunForRetrieverStart(q,$,K,this._parentRunId,this.tags,this.metadata,Y);return n$(async()=>{try{await H.handleRetrieverStart?.(q,$,K,this._parentRunId,this.tags,this.metadata,Y)}catch(v){if((H.raiseError?console.error:console.warn)(`Error in handler ${H.constructor.name}, handleRetrieverStart: ${v}`),H.raiseError)throw v}},H.awaitHandlers)})),new Ez(K,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}async handleCustomEvent(q,$,K,_,P){await Promise.all(this.handlers.map((O)=>n$(async()=>{if(!O.ignoreCustomEvent)try{await O.handleCustomEvent?.(q,$,K,this.tags,this.metadata)}catch(Y){if((O.raiseError?console.error:console.warn)(`Error in handler ${O.constructor.name}, handleCustomEvent: ${Y}`),O.raiseError)throw Y}},O.awaitHandlers)))}addHandler(q,$=!0){if(this.handlers.push(q),$)this.inheritableHandlers.push(q)}removeHandler(q){this.handlers=this.handlers.filter(($)=>$!==q),this.inheritableHandlers=this.inheritableHandlers.filter(($)=>$!==q)}setHandlers(q,$=!0){this.handlers=[],this.inheritableHandlers=[];for(let K of q)this.addHandler(K,$)}addTags(q,$=!0){if(this.removeTags(q),this.tags.push(...q),$)this.inheritableTags.push(...q)}removeTags(q){this.tags=this.tags.filter(($)=>!q.includes($)),this.inheritableTags=this.inheritableTags.filter(($)=>!q.includes($))}addMetadata(q,$=!0){if(this.metadata={...this.metadata,...q},$)this.inheritableMetadata={...this.inheritableMetadata,...q}}removeMetadata(q){for(let $ of Object.keys(q))delete this.metadata[$],delete this.inheritableMetadata[$]}copy(q=[],$=!0){let K=new P6(this._parentRunId);for(let _ of this.handlers){let P=this.inheritableHandlers.includes(_);K.addHandler(_,P)}for(let _ of this.tags){let P=this.inheritableTags.includes(_);K.addTags([_],P)}for(let _ of Object.keys(this.metadata)){let P=Object.keys(this.inheritableMetadata).includes(_);K.addMetadata({[_]:this.metadata[_]},P)}for(let _ of q){if(K.handlers.filter((P)=>P.name==="console_callback_handler").some((P)=>P.name===_.name))continue;K.addHandler(_,$)}return K}static fromHandlers(q){class $ extends f_{constructor(){super();Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:B8()}),Object.assign(this,q)}}let K=new this;return K.addHandler(new $),K}static configure(q,$,K,_,P,O,Y){return this._configureSync(q,$,K,_,P,O,Y)}static _configureSync(q,$,K,_,P,O,Y){let H;if(q||$){if(Array.isArray(q)||!q)H=new P6,H.setHandlers(q?.map(m7)??[],!0);else H=q;H=H.copy(Array.isArray($)?$.map(m7):$?.handlers,!1)}let v=n6("LANGCHAIN_VERBOSE")==="true"||Y?.verbose,X=T4.getTraceableRunTree()?.tracingEnabled||Sz(),Z=X||(n6("LANGCHAIN_TRACING")??!1);if(v||Z){if(!H)H=new P6;if(v&&!H.handlers.some((k)=>k.name===l9.prototype.name)){let k=new l9;H.addHandler(k,!0)}if(Z&&!H.handlers.some((k)=>k.name==="langchain_tracer")){if(X){let k=new T4;H.addHandler(k,!0)}}if(X){let k=T4.getTraceableRunTree();if(k&&H._parentRunId===void 0)H._parentRunId=k.id,H.handlers.find((S)=>S.name==="langchain_tracer")?.updateFromRunTree(k)}}for(let{contextVar:k,inheritable:G=!0,handlerClass:S,envVar:N}of Cz()){let E=N&&n6(N)==="true"&&S,h,D=k!==void 0?VY(k):void 0;if(D&&wz(D))h=D;else if(E)h=new S({});if(h!==void 0){if(!H)H=new P6;if(!H.handlers.some((I)=>I.name===h.name))H.addHandler(h,G)}}if(K||_){if(H)H.addTags(K??[]),H.addTags(_??[],!1)}if(P||O){if(H)H.addMetadata(P??{}),H.addMetadata(O??{},!1)}return H}}function m7(q){if("name"in q)return q;return f_.fromMethods(q)}class SY{getStore(){return}run(q,$){return $()}enterWith(q){return}}var $S=new SY,Dz=Symbol.for("lc:child_config");class Iz{getInstance(){return nK()??$S}getRunnableConfig(){return this.getInstance().getStore()?.extra?.[Dz]}runWithConfig(q,$,K){let _=P6._configureSync(q?.callbacks,void 0,q?.tags,void 0,q?.metadata),P=this.getInstance(),O=P.getStore(),Y=_?.getParentRunId(),H=_?.handlers?.find((X)=>X?.name==="langchain_tracer"),v;if(H&&Y)v=H.getRunTreeWithTracingConfig(Y);else if(!K)v=new H8({name:"<runnable_lambda>",tracingEnabled:!1});if(v)v.extra={...v.extra,[Dz]:q};if(O!==void 0&&O[G_]!==void 0){if(v===void 0)v={};v[G_]=O[G_]}return P.run(v,$)}initializeGlobalInstance(q){if(nK()===void 0)Mz(q)}}var Y6=new Iz;var n9=25;async function T6(q){return P6._configureSync(q?.callbacks,void 0,q?.tags,void 0,q?.metadata)}function CY(...q){let $={};for(let K of q.filter((_)=>!!_))for(let _ of Object.keys(K))if(_==="metadata")$[_]={...$[_],...K[_]};else if(_==="tags"){let P=$[_]??[];$[_]=[...new Set(P.concat(K[_]??[]))]}else if(_==="configurable")$[_]={...$[_],...K[_]};else if(_==="timeout"){if($.timeout===void 0)$.timeout=K.timeout;else if(K.timeout!==void 0)$.timeout=Math.min($.timeout,K.timeout)}else if(_==="signal"){if($.signal===void 0)$.signal=K.signal;else if(K.signal!==void 0)if("any"in AbortSignal)$.signal=AbortSignal.any([$.signal,K.signal]);else $.signal=K.signal}else if(_==="callbacks"){let P=$.callbacks,O=K.callbacks;if(Array.isArray(O))if(!P)$.callbacks=O;else if(Array.isArray(P))$.callbacks=P.concat(O);else{let Y=P.copy();for(let H of O)Y.addHandler(m7(H),!0);$.callbacks=Y}else if(O)if(!P)$.callbacks=O;else if(Array.isArray(P)){let Y=O.copy();for(let H of P)Y.addHandler(m7(H),!0);$.callbacks=Y}else $.callbacks=new P6(O._parentRunId,{handlers:P.handlers.concat(O.handlers),inheritableHandlers:P.inheritableHandlers.concat(O.inheritableHandlers),tags:Array.from(new Set(P.tags.concat(O.tags))),inheritableTags:Array.from(new Set(P.inheritableTags.concat(O.inheritableTags))),metadata:{...P.metadata,...O.metadata}})}else{let P=_;$[P]=K[P]??$[P]}return $}var KS=new Set(["string","number","boolean"]);function D$(q){let $=Y6.getRunnableConfig(),K={tags:[],metadata:{},recursionLimit:25,runId:void 0};if($){let{runId:_,runName:P,...O}=$;K=Object.entries(O).reduce((Y,[H,v])=>{if(v!==void 0)Y[H]=v;return Y},K)}if(q)K=Object.entries(q).reduce((_,[P,O])=>{if(O!==void 0)_[P]=O;return _},K);if(K?.configurable){for(let _ of Object.keys(K.configurable))if(KS.has(typeof K.configurable[_])&&!K.metadata?.[_]){if(!K.metadata)K.metadata={};K.metadata[_]=K.configurable[_]}}if(K.timeout!==void 0){if(K.timeout<=0)throw Error("Timeout must be a positive number");let _=AbortSignal.timeout(K.timeout);if(K.signal!==void 0){if("any"in AbortSignal)K.signal=AbortSignal.any([K.signal,_])}else K.signal=_;delete K.timeout}return K}function M8(q={},{callbacks:$,maxConcurrency:K,recursionLimit:_,runName:P,configurable:O,runId:Y}={}){let H=D$(q);if($!==void 0)delete H.runName,H.callbacks=$;if(_!==void 0)H.recursionLimit=_;if(K!==void 0)H.maxConcurrency=K;if(P!==void 0)H.runName=P;if(O!==void 0)H.configurable={...H.configurable,...O};if(Y!==void 0)delete H.runId;return H}function XK(q){return q?{configurable:q.configurable,recursionLimit:q.recursionLimit,callbacks:q.callbacks,tags:q.tags,metadata:q.metadata,maxConcurrency:q.maxConcurrency,timeout:q.timeout,signal:q.signal}:void 0}async function B6(q,$){if($===void 0)return q;let K;return Promise.race([q.catch((_)=>{if(!$?.aborted)throw _;else return}),new Promise((_,P)=>{if(K=()=>{P(Error("Aborted"))},$.addEventListener("abort",K),$.aborted)P(Error("Aborted"))})]).finally(()=>$.removeEventListener("abort",K))}class S8 extends ReadableStream{constructor(){super(...arguments);Object.defineProperty(this,"reader",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}ensureReader(){if(!this.reader)this.reader=this.getReader()}async next(){this.ensureReader();try{let q=await this.reader.read();if(q.done)return this.reader.releaseLock(),{done:!0,value:void 0};else return{done:!1,value:q.value}}catch(q){throw this.reader.releaseLock(),q}}async return(){if(this.ensureReader(),this.locked){let q=this.reader.cancel();this.reader.releaseLock(),await q}return{done:!0,value:void 0}}async throw(q){if(this.ensureReader(),this.locked){let $=this.reader.cancel();this.reader.releaseLock(),await $}throw q}[Symbol.asyncIterator](){return this}async[Symbol.asyncDispose](){await this.return()}static fromReadableStream(q){let $=q.getReader();return new S8({start(K){return _();function _(){return $.read().then(({done:P,value:O})=>{if(P){K.close();return}return K.enqueue(O),_()})}},cancel(){$.releaseLock()}})}static fromAsyncGenerator(q){return new S8({async pull($){let{value:K,done:_}=await q.next();if(_)$.close();$.enqueue(K)},async cancel($){await q.return($)}})}}function NY(q,$=2){let K=Array.from({length:$},()=>[]);return K.map(async function*(P){while(!0)if(P.length===0){let O=await q.next();for(let Y of K)Y.push(O)}else if(P[0].done)return;else yield P.shift().value})}function EY(q,$){if(Array.isArray(q)&&Array.isArray($))return q.concat($);else if(typeof q==="string"&&typeof $==="string")return q+$;else if(typeof q==="number"&&typeof $==="number")return q+$;else if("concat"in q&&typeof q.concat==="function")return q.concat($);else if(typeof q==="object"&&typeof $==="object"){let K={...q};for(let[_,P]of Object.entries($))if(_ in K&&!Array.isArray(K[_]))K[_]=EY(K[_],P);else K[_]=P;return K}else throw Error(`Cannot concat ${typeof q} and ${typeof $}`)}class rK{constructor(q){Object.defineProperty(this,"generator",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"setup",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"config",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"signal",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"firstResult",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"firstResultUsed",{enumerable:!0,configurable:!0,writable:!0,value:!1}),this.generator=q.generator,this.config=q.config,this.signal=q.signal??this.config?.signal,this.setup=new Promise(($,K)=>{Y6.runWithConfig(XK(q.config),async()=>{if(this.firstResult=q.generator.next(),q.startSetup)this.firstResult.then(q.startSetup).then($,K);else this.firstResult.then((_)=>$(void 0),K)},!0)})}async next(...q){if(this.signal?.throwIfAborted(),!this.firstResultUsed)return this.firstResultUsed=!0,this.firstResult;return Y6.runWithConfig(XK(this.config),this.signal?async()=>{return B6(this.generator.next(...q),this.signal)}:async()=>{return this.generator.next(...q)},!0)}async return(q){return this.generator.return(q)}async throw(q){return this.generator.throw(q)}[Symbol.asyncIterator](){return this}async[Symbol.asyncDispose](){await this.return()}}async function Lz(q,$,K,_,...P){let O=new rK({generator:$,startSetup:K,signal:_}),Y=await O.setup;return{output:q(O,Y,...P),setup:Y}}class i6{constructor(q){Object.defineProperty(this,"ops",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.ops=q.ops??[]}concat(q){let $=this.ops.concat(q.ops),K=T_({},$);return new X4({ops:$,state:K[K.length-1].newDocument})}}class X4 extends i6{constructor(q){super(q);Object.defineProperty(this,"state",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.state=q.state}concat(q){let $=this.ops.concat(q.ops),K=T_(this.state,q.ops);return new X4({ops:$,state:K[K.length-1].newDocument})}static fromRunLogPatch(q){let $=T_({},q.ops);return new X4({ops:q.ops,state:$[$.length-1].newDocument})}}var yz=(q)=>q.name==="log_stream_tracer";async function bz(q,$){if($==="original")throw Error("Do not assign inputs with original schema drop the key for now. When inputs are added to streamLog they should be added with standardized schema for streaming events.");let{inputs:K}=q;if(["retriever","llm","prompt"].includes(q.run_type))return K;if(Object.keys(K).length===1&&K?.input==="")return;return K.input}async function gz(q,$){let{outputs:K}=q;if($==="original")return K;if(["retriever","llm","prompt"].includes(q.run_type))return K;if(K!==void 0&&Object.keys(K).length===1&&K?.output!==void 0)return K.output;return K}function _S(q){return q!==void 0&&q.message!==void 0}class r9 extends R6{constructor(q){super({_awaitHandler:!0,...q});Object.defineProperty(this,"autoClose",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"includeNames",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"includeTypes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"includeTags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeNames",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeTypes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeTags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_schemaFormat",{enumerable:!0,configurable:!0,writable:!0,value:"original"}),Object.defineProperty(this,"rootId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"keyMapByRunId",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"counterMapByRunName",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"transformStream",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"writer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"receiveStream",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"log_stream_tracer"}),Object.defineProperty(this,"lc_prefer_streaming",{enumerable:!0,configurable:!0,writable:!0,value:!0}),this.autoClose=q?.autoClose??!0,this.includeNames=q?.includeNames,this.includeTypes=q?.includeTypes,this.includeTags=q?.includeTags,this.excludeNames=q?.excludeNames,this.excludeTypes=q?.excludeTypes,this.excludeTags=q?.excludeTags,this._schemaFormat=q?._schemaFormat??this._schemaFormat,this.transformStream=new TransformStream,this.writer=this.transformStream.writable.getWriter(),this.receiveStream=S8.fromReadableStream(this.transformStream.readable)}[Symbol.asyncIterator](){return this.receiveStream}async persistRun(q){}_includeRun(q){if(q.id===this.rootId)return!1;let $=q.tags??[],K=this.includeNames===void 0&&this.includeTags===void 0&&this.includeTypes===void 0;if(this.includeNames!==void 0)K=K||this.includeNames.includes(q.name);if(this.includeTypes!==void 0)K=K||this.includeTypes.includes(q.run_type);if(this.includeTags!==void 0)K=K||$.find((_)=>this.includeTags?.includes(_))!==void 0;if(this.excludeNames!==void 0)K=K&&!this.excludeNames.includes(q.name);if(this.excludeTypes!==void 0)K=K&&!this.excludeTypes.includes(q.run_type);if(this.excludeTags!==void 0)K=K&&$.every((_)=>!this.excludeTags?.includes(_));return K}async*tapOutputIterable(q,$){for await(let K of $){if(q!==this.rootId){let _=this.keyMapByRunId[q];if(_)await this.writer.write(new i6({ops:[{op:"add",path:`/logs/${_}/streamed_output/-`,value:K}]}))}yield K}}async onRunCreate(q){if(this.rootId===void 0)this.rootId=q.id,await this.writer.write(new i6({ops:[{op:"replace",path:"",value:{id:q.id,name:q.name,type:q.run_type,streamed_output:[],final_output:void 0,logs:{}}}]}));if(!this._includeRun(q))return;if(this.counterMapByRunName[q.name]===void 0)this.counterMapByRunName[q.name]=0;this.counterMapByRunName[q.name]+=1;let $=this.counterMapByRunName[q.name];this.keyMapByRunId[q.id]=$===1?q.name:`${q.name}:${$}`;let K={id:q.id,name:q.name,type:q.run_type,tags:q.tags??[],metadata:q.extra?.metadata??{},start_time:new Date(q.start_time).toISOString(),streamed_output:[],streamed_output_str:[],final_output:void 0,end_time:void 0};if(this._schemaFormat==="streaming_events")K.inputs=await bz(q,this._schemaFormat);await this.writer.write(new i6({ops:[{op:"add",path:`/logs/${this.keyMapByRunId[q.id]}`,value:K}]}))}async onRunUpdate(q){try{let $=this.keyMapByRunId[q.id];if($===void 0)return;let K=[];if(this._schemaFormat==="streaming_events")K.push({op:"replace",path:`/logs/${$}/inputs`,value:await bz(q,this._schemaFormat)});if(K.push({op:"add",path:`/logs/${$}/final_output`,value:await gz(q,this._schemaFormat)}),q.end_time!==void 0)K.push({op:"add",path:`/logs/${$}/end_time`,value:new Date(q.end_time).toISOString()});let _=new i6({ops:K});await this.writer.write(_)}finally{if(q.id===this.rootId){let $=new i6({ops:[{op:"replace",path:"/final_output",value:await gz(q,this._schemaFormat)}]});if(await this.writer.write($),this.autoClose)await this.writer.close()}}}async onLLMNewToken(q,$,K){let _=this.keyMapByRunId[q.id];if(_===void 0)return;let P=q.inputs.messages!==void 0,O;if(P)if(_S(K?.chunk))O=K?.chunk;else O=new k_({id:`run-${q.id}`,content:$});else O=$;let Y=new i6({ops:[{op:"add",path:`/logs/${_}/streamed_output_str/-`,value:$},{op:"add",path:`/logs/${_}/streamed_output/-`,value:O}]});await this.writer.write(Y)}}class l7{constructor(q){Object.defineProperty(this,"text",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"generationInfo",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.text=q.text,this.generationInfo=q.generationInfo}concat(q){return new l7({text:this.text+q.text,generationInfo:{...this.generationInfo,...q.generationInfo}})}}function B9({name:q,serialized:$}){if(q!==void 0)return q;if($?.name!==void 0)return $.name;else if($?.id!==void 0&&Array.isArray($?.id))return $.id[$.id.length-1];return"Unnamed"}var pz=(q)=>q.name==="event_stream_tracer";class RY extends R6{constructor(q){super({_awaitHandler:!0,...q});Object.defineProperty(this,"autoClose",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"includeNames",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"includeTypes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"includeTags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeNames",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeTypes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeTags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"runInfoMap",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(this,"tappedPromises",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(this,"transformStream",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"writer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"receiveStream",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"event_stream_tracer"}),Object.defineProperty(this,"lc_prefer_streaming",{enumerable:!0,configurable:!0,writable:!0,value:!0}),this.autoClose=q?.autoClose??!0,this.includeNames=q?.includeNames,this.includeTypes=q?.includeTypes,this.includeTags=q?.includeTags,this.excludeNames=q?.excludeNames,this.excludeTypes=q?.excludeTypes,this.excludeTags=q?.excludeTags,this.transformStream=new TransformStream,this.writer=this.transformStream.writable.getWriter(),this.receiveStream=S8.fromReadableStream(this.transformStream.readable)}[Symbol.asyncIterator](){return this.receiveStream}async persistRun(q){}_includeRun(q){let $=q.tags??[],K=this.includeNames===void 0&&this.includeTags===void 0&&this.includeTypes===void 0;if(this.includeNames!==void 0)K=K||this.includeNames.includes(q.name);if(this.includeTypes!==void 0)K=K||this.includeTypes.includes(q.runType);if(this.includeTags!==void 0)K=K||$.find((_)=>this.includeTags?.includes(_))!==void 0;if(this.excludeNames!==void 0)K=K&&!this.excludeNames.includes(q.name);if(this.excludeTypes!==void 0)K=K&&!this.excludeTypes.includes(q.runType);if(this.excludeTags!==void 0)K=K&&$.every((_)=>!this.excludeTags?.includes(_));return K}async*tapOutputIterable(q,$){let K=await $.next();if(K.done)return;let _=this.runInfoMap.get(q);if(_===void 0){yield K.value;return}function P(Y,H){if(Y==="llm"&&typeof H==="string")return new l7({text:H});return H}let O=this.tappedPromises.get(q);if(O===void 0){let Y;O=new Promise((H)=>{Y=H}),this.tappedPromises.set(q,O);try{let H={event:`on_${_.runType}_stream`,run_id:q,name:_.name,tags:_.tags,metadata:_.metadata,data:{}};await this.send({...H,data:{chunk:P(_.runType,K.value)}},_),yield K.value;for await(let v of $){if(_.runType!=="tool"&&_.runType!=="retriever")await this.send({...H,data:{chunk:P(_.runType,v)}},_);yield v}}finally{Y()}}else{yield K.value;for await(let Y of $)yield Y}}async send(q,$){if(this._includeRun($))await this.writer.write(q)}async sendEndEvent(q,$){let K=this.tappedPromises.get(q.run_id);if(K!==void 0)K.then(()=>{this.send(q,$)});else await this.send(q,$)}async onLLMStart(q){let $=B9(q),K=q.inputs.messages!==void 0?"chat_model":"llm",_={tags:q.tags??[],metadata:q.extra?.metadata??{},name:$,runType:K,inputs:q.inputs};this.runInfoMap.set(q.id,_);let P=`on_${K}_start`;await this.send({event:P,data:{input:q.inputs},name:$,tags:q.tags??[],run_id:q.id,metadata:q.extra?.metadata??{}},_)}async onLLMNewToken(q,$,K){let _=this.runInfoMap.get(q.id),P,O;if(_===void 0)throw Error(`onLLMNewToken: Run ID ${q.id} not found in run map.`);if(this.runInfoMap.size===1)return;if(_.runType==="chat_model")if(O="on_chat_model_stream",K?.chunk===void 0)P=new k_({content:$,id:`run-${q.id}`});else P=K.chunk.message;else if(_.runType==="llm")if(O="on_llm_stream",K?.chunk===void 0)P=new l7({text:$});else P=K.chunk;else throw Error(`Unexpected run type ${_.runType}`);await this.send({event:O,data:{chunk:P},run_id:q.id,name:_.name,tags:_.tags,metadata:_.metadata},_)}async onLLMEnd(q){let $=this.runInfoMap.get(q.id);this.runInfoMap.delete(q.id);let K;if($===void 0)throw Error(`onLLMEnd: Run ID ${q.id} not found in run map.`);let _=q.outputs?.generations,P;if($.runType==="chat_model"){for(let O of _??[]){if(P!==void 0)break;P=O[0]?.message}K="on_chat_model_end"}else if($.runType==="llm")P={generations:_?.map((O)=>{return O.map((Y)=>{return{text:Y.text,generationInfo:Y.generationInfo}})}),llmOutput:q.outputs?.llmOutput??{}},K="on_llm_end";else throw Error(`onLLMEnd: Unexpected run type: ${$.runType}`);await this.sendEndEvent({event:K,data:{output:P,input:$.inputs},run_id:q.id,name:$.name,tags:$.tags,metadata:$.metadata},$)}async onChainStart(q){let $=B9(q),K=q.run_type??"chain",_={tags:q.tags??[],metadata:q.extra?.metadata??{},name:$,runType:q.run_type},P={};if(q.inputs.input===""&&Object.keys(q.inputs).length===1)P={},_.inputs={};else if(q.inputs.input!==void 0)P.input=q.inputs.input,_.inputs=q.inputs.input;else P.input=q.inputs,_.inputs=q.inputs;this.runInfoMap.set(q.id,_),await this.send({event:`on_${K}_start`,data:P,name:$,tags:q.tags??[],run_id:q.id,metadata:q.extra?.metadata??{}},_)}async onChainEnd(q){let $=this.runInfoMap.get(q.id);if(this.runInfoMap.delete(q.id),$===void 0)throw Error(`onChainEnd: Run ID ${q.id} not found in run map.`);let K=`on_${q.run_type}_end`,_=q.inputs??$.inputs??{},O={output:q.outputs?.output??q.outputs,input:_};if(_.input&&Object.keys(_).length===1)O.input=_.input,$.inputs=_.input;await this.sendEndEvent({event:K,data:O,run_id:q.id,name:$.name,tags:$.tags,metadata:$.metadata??{}},$)}async onToolStart(q){let $=B9(q),K={tags:q.tags??[],metadata:q.extra?.metadata??{},name:$,runType:"tool",inputs:q.inputs??{}};this.runInfoMap.set(q.id,K),await this.send({event:"on_tool_start",data:{input:q.inputs??{}},name:$,run_id:q.id,tags:q.tags??[],metadata:q.extra?.metadata??{}},K)}async onToolEnd(q){let $=this.runInfoMap.get(q.id);if(this.runInfoMap.delete(q.id),$===void 0)throw Error(`onToolEnd: Run ID ${q.id} not found in run map.`);if($.inputs===void 0)throw Error(`onToolEnd: Run ID ${q.id} is a tool call, and is expected to have traced inputs.`);let K=q.outputs?.output===void 0?q.outputs:q.outputs.output;await this.sendEndEvent({event:"on_tool_end",data:{output:K,input:$.inputs},run_id:q.id,name:$.name,tags:$.tags,metadata:$.metadata},$)}async onRetrieverStart(q){let $=B9(q),K="retriever",_={tags:q.tags??[],metadata:q.extra?.metadata??{},name:$,runType:"retriever",inputs:{query:q.inputs.query}};this.runInfoMap.set(q.id,_),await this.send({event:"on_retriever_start",data:{input:{query:q.inputs.query}},name:$,tags:q.tags??[],run_id:q.id,metadata:q.extra?.metadata??{}},_)}async onRetrieverEnd(q){let $=this.runInfoMap.get(q.id);if(this.runInfoMap.delete(q.id),$===void 0)throw Error(`onRetrieverEnd: Run ID ${q.id} not found in run map.`);await this.sendEndEvent({event:"on_retriever_end",data:{output:q.outputs?.documents??q.outputs,input:$.inputs},run_id:q.id,name:$.name,tags:$.tags,metadata:$.metadata},$)}async handleCustomEvent(q,$,K){let _=this.runInfoMap.get(K);if(_===void 0)throw Error(`handleCustomEvent: Run ID ${K} not found in run map.`);await this.send({event:"on_custom_event",run_id:K,name:q,tags:_.tags,metadata:_.metadata,data:$},_)}async finish(){let q=[...this.tappedPromises.values()];Promise.all(q).finally(()=>{this.writer.close()})}}var xz=K6(q9(),1),i9=K6(k9(),1),PS=[400,401,402,403,404,405,406,407,409],YS=(q)=>{if(q.message.startsWith("Cancel")||q.message.startsWith("AbortError")||q.name==="AbortError")throw q;if(q?.code==="ECONNABORTED")throw q;let $=q?.response?.status??q?.status;if($&&PS.includes(+$))throw q;if(q?.error?.code==="insufficient_quota"){let K=Error(q?.message);throw K.name="InsufficientQuotaError",K}};class U9{constructor(q){Object.defineProperty(this,"maxConcurrency",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"maxRetries",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"onFailedAttempt",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"queue",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxConcurrency=q.maxConcurrency??1/0,this.maxRetries=q.maxRetries??6,this.onFailedAttempt=q.onFailedAttempt??YS;let $="default"in i9.default?i9.default.default:i9.default;this.queue=new $({concurrency:this.maxConcurrency})}call(q,...$){return this.queue.add(()=>xz.default(()=>q(...$).catch((K)=>{if(K instanceof Error)throw K;else throw Error(K)}),{onFailedAttempt:this.onFailedAttempt,retries:this.maxRetries,randomize:!0}),{throwOnTimeout:!0})}callWithOptions(q,$,...K){if(q.signal)return Promise.race([this.call($,...K),new Promise((_,P)=>{q.signal?.addEventListener("abort",()=>{P(Error("AbortError"))})})]);return this.call($,...K)}fetch(...q){return this.call(()=>fetch(...q).then(($)=>$.ok?$:Promise.reject($)))}}class F9 extends R6{constructor({config:q,onStart:$,onEnd:K,onError:_}){super({_awaitHandler:!0});Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"RootListenersTracer"}),Object.defineProperty(this,"rootId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"config",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"argOnStart",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"argOnEnd",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"argOnError",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.config=q,this.argOnStart=$,this.argOnEnd=K,this.argOnError=_}persistRun(q){return Promise.resolve()}async onRunCreate(q){if(this.rootId)return;if(this.rootId=q.id,this.argOnStart)await this.argOnStart(q,this.config)}async onRunUpdate(q){if(q.id!==this.rootId)return;if(!q.error){if(this.argOnEnd)await this.argOnEnd(q,this.config)}else if(this.argOnError)await this.argOnError(q,this.config)}}function d7(q){return q?q.lc_runnable:!1}class hY{constructor(q){Object.defineProperty(this,"includeNames",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"includeTypes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"includeTags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeNames",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeTypes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeTags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.includeNames=q.includeNames,this.includeTypes=q.includeTypes,this.includeTags=q.includeTags,this.excludeNames=q.excludeNames,this.excludeTypes=q.excludeTypes,this.excludeTags=q.excludeTags}includeEvent(q,$){let K=this.includeNames===void 0&&this.includeTypes===void 0&&this.includeTags===void 0,_=q.tags??[];if(this.includeNames!==void 0)K=K||this.includeNames.includes(q.name);if(this.includeTypes!==void 0)K=K||this.includeTypes.includes($);if(this.includeTags!==void 0)K=K||_.some((P)=>this.includeTags?.includes(P));if(this.excludeNames!==void 0)K=K&&!this.excludeNames.includes(q.name);if(this.excludeTypes!==void 0)K=K&&!this.excludeTypes.includes($);if(this.excludeTags!==void 0)K=K&&_.every((P)=>!this.excludeTags?.includes(P));return K}}function DY(q){return q.replace(/[^a-zA-Z-_0-9]/g,"_")}var jS=["*","_","`"];function OS(q){let $="";for(let[K,_]of Object.entries(q))$+=`	classDef ${K} ${_};
`;return $}function uz(q,$,K){let{firstNode:_,lastNode:P,nodeColors:O,withStyles:Y=!0,curveStyle:H="linear",wrapLabelNWords:v=9}=K??{},X=Y?`%%{init: {'flowchart': {'curve': '${H}'}}}%%
graph TD;
`:`graph TD;
`;if(Y){let N={["default"]:"{0}({1})"};if(_!==void 0)N[_]="{0}([{1}]):::first";if(P!==void 0)N[P]="{0}([{1}]):::last";for(let[E,h]of Object.entries(q)){let D=h.name.split(":").pop()??"",g=jS.some((p)=>D.startsWith(p)&&D.endsWith(p))?`<p>${D}</p>`:D;if(Object.keys(h.metadata??{}).length)g+=`<hr/><small><em>${Object.entries(h.metadata??{}).map(([p,m])=>`${p} = ${m}`).join(`
`)}</em></small>`;let y=(N[E]??N.default).replace("{0}",DY(E)).replace("{1}",g);X+=`	${y}
`}}let Z={};for(let S of $){let N=S.source.split(":"),E=S.target.split(":"),h=N.filter((D,I)=>D===E[I]).join(":");if(!Z[h])Z[h]=[];Z[h].push(S)}let k=new Set;function G(S,N){let E=S.length===1&&S[0].source===S[0].target;if(N&&!E){let h=N.split(":").pop();if(k.has(h))throw Error(`Found duplicate subgraph '${h}' -- this likely means that you're reusing a subgraph node with the same name. Please adjust your graph to have subgraph nodes with unique names.`);k.add(h),X+=`	subgraph ${h}
`}for(let h of S){let{source:D,target:I,data:g,conditional:y}=h,p="";if(g!==void 0){let m=g,c=m.split(" ");if(c.length>v)m=Array.from({length:Math.ceil(c.length/v)},($q,e)=>c.slice(e*v,(e+1)*v).join(" ")).join("&nbsp;<br>&nbsp;");p=y?` -. &nbsp;${m}&nbsp; .-> `:` -- &nbsp;${m}&nbsp; --> `}else p=y?" -.-> ":" --> ";X+=`	${DY(D)}${p}${DY(I)};
`}for(let h in Z)if(h.startsWith(`${N}:`)&&h!==N)G(Z[h],h);if(N&&!E)X+=`	end
`}G(Z[""]??[],"");for(let S in Z)if(!S.includes(":")&&S!=="")G(Z[S],S);if(Y)X+=OS(O??{});return X}async function mz(q,$){return WS(q,{...$,imageType:"png"})}async function WS(q,$){let K=$?.backgroundColor??"white",_=$?.imageType??"png",P=btoa(q);if(K!==void 0){if(!/^#(?:[0-9a-fA-F]{3}){1,2}$/.test(K))K=`!${K}`}let O=`https://mermaid.ink/img/${P}?bgColor=${K}&type=${_}`,Y=await fetch(O);if(!Y.ok)throw Error(["Failed to render the graph using the Mermaid.INK API.",`Status code: ${Y.status}`,`Status text: ${Y.statusText}`].join(`
`));return await Y.blob()}var ld=Object.freeze({status:"aborted"});function f4(q,$,K){function _(H,v){var X;Object.defineProperty(H,"_zod",{value:H._zod??{},enumerable:!1}),(X=H._zod).traits??(X.traits=new Set),H._zod.traits.add(q),$(H,v);for(let Z in Y.prototype)if(!(Z in H))Object.defineProperty(H,Z,{value:Y.prototype[Z].bind(H)});H._zod.constr=Y,H._zod.def=v}let P=K?.Parent??Object;class O extends P{}Object.defineProperty(O,"name",{value:q});function Y(H){var v;let X=K?.Parent?new O:this;_(X,H),(v=X._zod).deferred??(v.deferred=[]);for(let Z of X._zod.deferred)Z();return X}return Object.defineProperty(Y,"init",{value:_}),Object.defineProperty(Y,Symbol.hasInstance,{value:(H)=>{if(K?.Parent&&H instanceof K.Parent)return!0;return H?._zod?.traits?.has(q)}}),Object.defineProperty(Y,"name",{value:q}),Y}var dd=Symbol("zod_brand");class Z_ extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}var IY={};function o7(q){if(q)Object.assign(IY,q);return IY}function LY(q){let $=Object.values(q).filter((_)=>typeof _==="number");return Object.entries(q).filter(([_,P])=>$.indexOf(+_)===-1).map(([_,P])=>P)}function lz(q,$){if(typeof $==="bigint")return $.toString();return $}function dz(q){return{get value(){{let K=q();return Object.defineProperty(this,"value",{value:K}),K}throw Error("cached value already set")}}}var oz=Error.captureStackTrace?Error.captureStackTrace:(...q)=>{};var HS=dz(()=>{if(typeof navigator<"u"&&navigator?.userAgent?.includes("Cloudflare"))return!1;try{return new Function(""),!0}catch(q){return!1}});function A4(q,$,K){let _=new q._zod.constr($??q._zod.def);if(!$||K?.parent)_._zod.parent=q;return _}function nz(q){let $=q;if(!$)return{};if(typeof $==="string")return{error:()=>$};if($?.message!==void 0){if($?.error!==void 0)throw Error("Cannot specify both `message` and `error` params");$.error=$.message}if(delete $.message,typeof $.error==="string")return{...$,error:()=>$.error};return $}var od={safeint:[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],int32:[-2147483648,2147483647],uint32:[0,4294967295],float32:[-340282346638528860000000000000000000000,340282346638528860000000000000000000000],float64:[-Number.MAX_VALUE,Number.MAX_VALUE]};function Q9(q,$=0){for(let K=$;K<q.issues.length;K++)if(q.issues[K]?.continue!==!0)return!0;return!1}function t9(q){return typeof q==="string"?q:q?.message}function n7(q,$,K){let _={...q,path:q.path??[]};if(!q.message){let P=t9(q.inst?._zod.def?.error?.(q))??t9($?.error?.(q))??t9(K.customError?.(q))??t9(K.localeError?.(q))??"Invalid input";_.message=P}if(delete _.inst,delete _.continue,!$?.reportInput)delete _.input;return _}var rz=(q,$)=>{q.name="$ZodError",Object.defineProperty(q,"_zod",{value:q._zod,enumerable:!1}),Object.defineProperty(q,"issues",{value:$,enumerable:!1}),Object.defineProperty(q,"message",{get(){return JSON.stringify($,lz,2)},enumerable:!0}),Object.defineProperty(q,"toString",{value:()=>q.message,enumerable:!1})},Bz=f4("$ZodError",rz),a9=f4("$ZodError",rz,{Parent:Error});var JS=(q)=>($,K,_,P)=>{let O=_?Object.assign(_,{async:!1}):{async:!1},Y=$._zod.run({value:K,issues:[]},O);if(Y instanceof Promise)throw new Z_;if(Y.issues.length){let H=new(P?.Err??q)(Y.issues.map((v)=>n7(v,O,o7())));throw oz(H,P?.callee),H}return Y.value},iz=JS(a9);var vS=(q)=>($,K,_)=>{let P=_?{..._,async:!1}:{async:!1},O=$._zod.run({value:K,issues:[]},P);if(O instanceof Promise)throw new Z_;return O.issues.length?{success:!1,error:new(q??Bz)(O.issues.map((Y)=>n7(Y,P,o7())))}:{success:!0,data:O.value}},Uz=vS(a9),wS=(q)=>async($,K,_)=>{let P=_?Object.assign(_,{async:!0}):{async:!0},O=$._zod.run({value:K,issues:[]},P);if(O instanceof Promise)O=await O;return O.issues.length?{success:!1,error:new q(O.issues.map((Y)=>n7(Y,P,o7())))}:{success:!0,data:O.value}},Fz=wS(a9);var tz={major:4,minor:0,patch:0};var TS=f4("$ZodType",(q,$)=>{var K;q??(q={}),q._zod.def=$,q._zod.bag=q._zod.bag||{},q._zod.version=tz;let _=[...q._zod.def.checks??[]];if(q._zod.traits.has("$ZodCheck"))_.unshift(q);for(let P of _)for(let O of P._zod.onattach)O(q);if(_.length===0)(K=q._zod).deferred??(K.deferred=[]),q._zod.deferred?.push(()=>{q._zod.run=q._zod.parse});else{let P=(O,Y,H)=>{let v=Q9(O),X;for(let Z of Y){if(Z._zod.def.when){if(!Z._zod.def.when(O))continue}else if(v)continue;let k=O.issues.length,G=Z._zod.check(O);if(G instanceof Promise&&H?.async===!1)throw new Z_;if(X||G instanceof Promise)X=(X??Promise.resolve()).then(async()=>{if(await G,O.issues.length===k)return;if(!v)v=Q9(O,k)});else{if(O.issues.length===k)continue;if(!v)v=Q9(O,k)}}if(X)return X.then(()=>{return O});return O};q._zod.run=(O,Y)=>{let H=q._zod.parse(O,Y);if(H instanceof Promise){if(Y.async===!1)throw new Z_;return H.then((v)=>P(v,_,Y))}return P(H,_,Y)}}q["~standard"]={validate:(P)=>{try{let O=Uz(q,P);return O.success?{value:O.data}:{issues:O.error?.issues}}catch(O){return Fz(q,P).then((Y)=>Y.success?{value:Y.data}:{issues:Y.error?.issues})}},vendor:"zod",version:1}});var Qz=f4("$ZodNever",(q,$)=>{TS.init(q,$),q._zod.parse=(K,_)=>{return K.issues.push({expected:"never",code:"invalid_type",input:K.value,inst:q}),K}});var Oo=Symbol("ZodOutput"),Wo=Symbol("ZodInput");class e9{constructor(){this._map=new Map,this._idmap=new Map}add(q,...$){let K=$[0];if(this._map.set(q,K),K&&typeof K==="object"&&"id"in K){if(this._idmap.has(K.id))throw Error(`ID ${K.id} already exists in the registry`);this._idmap.set(K.id,q)}return this}clear(){return this._map=new Map,this._idmap=new Map,this}remove(q){let $=this._map.get(q);if($&&typeof $==="object"&&"id"in $)this._idmap.delete($.id);return this._map.delete(q),this}get(q){let $=q._zod.parent;if($){let K={...this.get($)??{}};return delete K.id,{...K,...this._map.get(q)}}return this._map.get(q)}has(q){return this._map.has(q)}}function XS(){return new e9}var U6=XS();function az(q,$){return new q({type:"never",...nz($)})}class bY{constructor(q){this.counter=0,this.metadataRegistry=q?.metadata??U6,this.target=q?.target??"draft-2020-12",this.unrepresentable=q?.unrepresentable??"throw",this.override=q?.override??(()=>{}),this.io=q?.io??"output",this.seen=new Map}process(q,$={path:[],schemaPath:[]}){var K;let _=q._zod.def,P={guid:"uuid",url:"uri",datetime:"date-time",json_string:"json-string",regex:""},O=this.seen.get(q);if(O){if(O.count++,$.schemaPath.includes(q))O.cycle=$.path;return O.schema}let Y={schema:{},count:1,cycle:void 0,path:$.path};this.seen.set(q,Y);let H=q._zod.toJSONSchema?.();if(H)Y.schema=H;else{let Z={...$,schemaPath:[...$.schemaPath,q],path:$.path},k=q._zod.parent;if(k)Y.ref=k,this.process(k,Z),this.seen.get(k).isParent=!0;else{let G=Y.schema;switch(_.type){case"string":{let S=G;S.type="string";let{minimum:N,maximum:E,format:h,patterns:D,contentEncoding:I}=q._zod.bag;if(typeof N==="number")S.minLength=N;if(typeof E==="number")S.maxLength=E;if(h){if(S.format=P[h]??h,S.format==="")delete S.format}if(I)S.contentEncoding=I;if(D&&D.size>0){let g=[...D];if(g.length===1)S.pattern=g[0].source;else if(g.length>1)Y.schema.allOf=[...g.map((y)=>({...this.target==="draft-7"?{type:"string"}:{},pattern:y.source}))]}break}case"number":{let S=G,{minimum:N,maximum:E,format:h,multipleOf:D,exclusiveMaximum:I,exclusiveMinimum:g}=q._zod.bag;if(typeof h==="string"&&h.includes("int"))S.type="integer";else S.type="number";if(typeof g==="number")S.exclusiveMinimum=g;if(typeof N==="number"){if(S.minimum=N,typeof g==="number")if(g>=N)delete S.minimum;else delete S.exclusiveMinimum}if(typeof I==="number")S.exclusiveMaximum=I;if(typeof E==="number"){if(S.maximum=E,typeof I==="number")if(I<=E)delete S.maximum;else delete S.exclusiveMaximum}if(typeof D==="number")S.multipleOf=D;break}case"boolean":{let S=G;S.type="boolean";break}case"bigint":{if(this.unrepresentable==="throw")throw Error("BigInt cannot be represented in JSON Schema");break}case"symbol":{if(this.unrepresentable==="throw")throw Error("Symbols cannot be represented in JSON Schema");break}case"null":{G.type="null";break}case"any":break;case"unknown":break;case"undefined":{if(this.unrepresentable==="throw")throw Error("Undefined cannot be represented in JSON Schema");break}case"void":{if(this.unrepresentable==="throw")throw Error("Void cannot be represented in JSON Schema");break}case"never":{G.not={};break}case"date":{if(this.unrepresentable==="throw")throw Error("Date cannot be represented in JSON Schema");break}case"array":{let S=G,{minimum:N,maximum:E}=q._zod.bag;if(typeof N==="number")S.minItems=N;if(typeof E==="number")S.maxItems=E;S.type="array",S.items=this.process(_.element,{...Z,path:[...Z.path,"items"]});break}case"object":{let S=G;S.type="object",S.properties={};let N=_.shape;for(let D in N)S.properties[D]=this.process(N[D],{...Z,path:[...Z.path,"properties",D]});let E=new Set(Object.keys(N)),h=new Set([...E].filter((D)=>{let I=_.shape[D]._zod;if(this.io==="input")return I.optin===void 0;else return I.optout===void 0}));if(h.size>0)S.required=Array.from(h);if(_.catchall?._zod.def.type==="never")S.additionalProperties=!1;else if(!_.catchall){if(this.io==="output")S.additionalProperties=!1}else if(_.catchall)S.additionalProperties=this.process(_.catchall,{...Z,path:[...Z.path,"additionalProperties"]});break}case"union":{let S=G;S.anyOf=_.options.map((N,E)=>this.process(N,{...Z,path:[...Z.path,"anyOf",E]}));break}case"intersection":{let S=G,N=this.process(_.left,{...Z,path:[...Z.path,"allOf",0]}),E=this.process(_.right,{...Z,path:[...Z.path,"allOf",1]}),h=(I)=>("allOf"in I)&&Object.keys(I).length===1,D=[...h(N)?N.allOf:[N],...h(E)?E.allOf:[E]];S.allOf=D;break}case"tuple":{let S=G;S.type="array";let N=_.items.map((D,I)=>this.process(D,{...Z,path:[...Z.path,"prefixItems",I]}));if(this.target==="draft-2020-12")S.prefixItems=N;else S.items=N;if(_.rest){let D=this.process(_.rest,{...Z,path:[...Z.path,"items"]});if(this.target==="draft-2020-12")S.items=D;else S.additionalItems=D}if(_.rest)S.items=this.process(_.rest,{...Z,path:[...Z.path,"items"]});let{minimum:E,maximum:h}=q._zod.bag;if(typeof E==="number")S.minItems=E;if(typeof h==="number")S.maxItems=h;break}case"record":{let S=G;S.type="object",S.propertyNames=this.process(_.keyType,{...Z,path:[...Z.path,"propertyNames"]}),S.additionalProperties=this.process(_.valueType,{...Z,path:[...Z.path,"additionalProperties"]});break}case"map":{if(this.unrepresentable==="throw")throw Error("Map cannot be represented in JSON Schema");break}case"set":{if(this.unrepresentable==="throw")throw Error("Set cannot be represented in JSON Schema");break}case"enum":{let S=G,N=LY(_.entries);if(N.every((E)=>typeof E==="number"))S.type="number";if(N.every((E)=>typeof E==="string"))S.type="string";S.enum=N;break}case"literal":{let S=G,N=[];for(let E of _.values)if(E===void 0){if(this.unrepresentable==="throw")throw Error("Literal `undefined` cannot be represented in JSON Schema")}else if(typeof E==="bigint")if(this.unrepresentable==="throw")throw Error("BigInt literals cannot be represented in JSON Schema");else N.push(Number(E));else N.push(E);if(N.length===0);else if(N.length===1){let E=N[0];S.type=E===null?"null":typeof E,S.const=E}else{if(N.every((E)=>typeof E==="number"))S.type="number";if(N.every((E)=>typeof E==="string"))S.type="string";if(N.every((E)=>typeof E==="boolean"))S.type="string";if(N.every((E)=>E===null))S.type="null";S.enum=N}break}case"file":{let S=G,N={type:"string",format:"binary",contentEncoding:"binary"},{minimum:E,maximum:h,mime:D}=q._zod.bag;if(E!==void 0)N.minLength=E;if(h!==void 0)N.maxLength=h;if(D)if(D.length===1)N.contentMediaType=D[0],Object.assign(S,N);else S.anyOf=D.map((I)=>{return{...N,contentMediaType:I}});else Object.assign(S,N);break}case"transform":{if(this.unrepresentable==="throw")throw Error("Transforms cannot be represented in JSON Schema");break}case"nullable":{let S=this.process(_.innerType,Z);G.anyOf=[S,{type:"null"}];break}case"nonoptional":{this.process(_.innerType,Z),Y.ref=_.innerType;break}case"success":{let S=G;S.type="boolean";break}case"default":{this.process(_.innerType,Z),Y.ref=_.innerType,G.default=JSON.parse(JSON.stringify(_.defaultValue));break}case"prefault":{if(this.process(_.innerType,Z),Y.ref=_.innerType,this.io==="input")G._prefault=JSON.parse(JSON.stringify(_.defaultValue));break}case"catch":{this.process(_.innerType,Z),Y.ref=_.innerType;let S;try{S=_.catchValue(void 0)}catch{throw Error("Dynamic catch values are not supported in JSON Schema")}G.default=S;break}case"nan":{if(this.unrepresentable==="throw")throw Error("NaN cannot be represented in JSON Schema");break}case"template_literal":{let S=G,N=q._zod.pattern;if(!N)throw Error("Pattern not found in template literal");S.type="string",S.pattern=N.source;break}case"pipe":{let S=this.io==="input"?_.in._zod.def.type==="transform"?_.out:_.in:_.out;this.process(S,Z),Y.ref=S;break}case"readonly":{this.process(_.innerType,Z),Y.ref=_.innerType,G.readOnly=!0;break}case"promise":{this.process(_.innerType,Z),Y.ref=_.innerType;break}case"optional":{this.process(_.innerType,Z),Y.ref=_.innerType;break}case"lazy":{let S=q._zod.innerType;this.process(S,Z),Y.ref=S;break}case"custom":{if(this.unrepresentable==="throw")throw Error("Custom types cannot be represented in JSON Schema");break}default:}}}let v=this.metadataRegistry.get(q);if(v)Object.assign(Y.schema,v);if(this.io==="input"&&z8(q))delete Y.schema.examples,delete Y.schema.default;if(this.io==="input"&&Y.schema._prefault)(K=Y.schema).default??(K.default=Y.schema._prefault);return delete Y.schema._prefault,this.seen.get(q).schema}emit(q,$){let K={cycles:$?.cycles??"ref",reused:$?.reused??"inline",external:$?.external??void 0},_=this.seen.get(q);if(!_)throw Error("Unprocessed schema. This is a bug in Zod.");let P=(X)=>{let Z=this.target==="draft-2020-12"?"$defs":"definitions";if(K.external){let N=K.external.registry.get(X[0])?.id,E=K.external.uri??((D)=>D);if(N)return{ref:E(N)};let h=X[1].defId??X[1].schema.id??`schema${this.counter++}`;return X[1].defId=h,{defId:h,ref:`${E("__shared")}#/${Z}/${h}`}}if(X[1]===_)return{ref:"#"};let G=`${"#"}/${Z}/`,S=X[1].schema.id??`__schema${this.counter++}`;return{defId:S,ref:G+S}},O=(X)=>{if(X[1].schema.$ref)return;let Z=X[1],{ref:k,defId:G}=P(X);if(Z.def={...Z.schema},G)Z.defId=G;let S=Z.schema;for(let N in S)delete S[N];S.$ref=k};if(K.cycles==="throw")for(let X of this.seen.entries()){let Z=X[1];if(Z.cycle)throw Error(`Cycle detected: #/${Z.cycle?.join("/")}/<root>

Set the \`cycles\` parameter to \`"ref"\` to resolve cyclical schemas with defs.`)}for(let X of this.seen.entries()){let Z=X[1];if(q===X[0]){O(X);continue}if(K.external){let G=K.external.registry.get(X[0])?.id;if(q!==X[0]&&G){O(X);continue}}if(this.metadataRegistry.get(X[0])?.id){O(X);continue}if(Z.cycle){O(X);continue}if(Z.count>1){if(K.reused==="ref"){O(X);continue}}}let Y=(X,Z)=>{let k=this.seen.get(X),G=k.def??k.schema,S={...G};if(k.ref===null)return;let N=k.ref;if(k.ref=null,N){Y(N,Z);let E=this.seen.get(N).schema;if(E.$ref&&Z.target==="draft-7")G.allOf=G.allOf??[],G.allOf.push(E);else Object.assign(G,E),Object.assign(G,S)}if(!k.isParent)this.override({zodSchema:X,jsonSchema:G,path:k.path??[]})};for(let X of[...this.seen.entries()].reverse())Y(X[0],{target:this.target});let H={};if(this.target==="draft-2020-12")H.$schema="https://json-schema.org/draft/2020-12/schema";else if(this.target==="draft-7")H.$schema="http://json-schema.org/draft-07/schema#";else console.warn(`Invalid target: ${this.target}`);if(K.external?.uri){let X=K.external.registry.get(q)?.id;if(!X)throw Error("Schema is missing an `id` property");H.$id=K.external.uri(X)}Object.assign(H,_.def);let v=K.external?.defs??{};for(let X of this.seen.entries()){let Z=X[1];if(Z.def&&Z.defId)v[Z.defId]=Z.def}if(K.external);else if(Object.keys(v).length>0)if(this.target==="draft-2020-12")H.$defs=v;else H.definitions=v;try{return JSON.parse(JSON.stringify(H))}catch(X){throw Error("Error converting schema to JSON.")}}}function gY(q,$){if(q instanceof e9){let _=new bY($),P={};for(let H of q._idmap.entries()){let[v,X]=H;_.process(X)}let O={},Y={registry:q,uri:$?.uri,defs:P};for(let H of q._idmap.entries()){let[v,X]=H;O[v]=_.emit(X,{...$,external:Y})}if(Object.keys(P).length>0){let H=_.target==="draft-2020-12"?"$defs":"definitions";O.__shared={[H]:P}}return{schemas:O}}let K=new bY($);return K.process(q),K.emit(q,$)}function z8(q,$){let K=$??{seen:new Set};if(K.seen.has(q))return!1;K.seen.add(q);let P=q._zod.def;switch(P.type){case"string":case"number":case"bigint":case"boolean":case"date":case"symbol":case"undefined":case"null":case"any":case"unknown":case"never":case"void":case"literal":case"enum":case"nan":case"file":case"template_literal":return!1;case"array":return z8(P.element,K);case"object":{for(let O in P.shape)if(z8(P.shape[O],K))return!0;return!1}case"union":{for(let O of P.options)if(z8(O,K))return!0;return!1}case"intersection":return z8(P.left,K)||z8(P.right,K);case"tuple":{for(let O of P.items)if(z8(O,K))return!0;if(P.rest&&z8(P.rest,K))return!0;return!1}case"record":return z8(P.keyType,K)||z8(P.valueType,K);case"map":return z8(P.keyType,K)||z8(P.valueType,K);case"set":return z8(P.valueType,K);case"promise":case"optional":case"nonoptional":case"nullable":case"readonly":return z8(P.innerType,K);case"lazy":return z8(P.getter(),K);case"default":return z8(P.innerType,K);case"prefault":return z8(P.innerType,K);case"custom":return!1;case"transform":return!0;case"pipe":return z8(P.in,K)||z8(P.out,K);case"success":return!1;case"catch":return!1;default:}throw Error(`Unknown schema type: ${P.type}`)}var sz=Symbol("Let zodToJsonSchema decide on which parser to use");var ez={name:void 0,$refStrategy:"root",basePath:["#"],effectStrategy:"input",pipeStrategy:"all",dateStrategy:"format:date-time",mapStrategy:"entries",removeAdditionalStrategy:"passthrough",allowedAdditionalProperties:!0,rejectedAdditionalProperties:!1,definitionPath:"definitions",target:"jsonSchema7",strictUnions:!1,definitions:{},errorMessages:!1,markdownDescription:!1,patternStrategy:"escape",applyRegexFlags:!1,emailStrategy:"format:email",base64Strategy:"contentEncoding:base64",nameStrategy:"ref",openAiAnyTypeName:"OpenAiAnyType"},qJ=(q)=>typeof q==="string"?{...ez,name:q}:{...ez,...q};var $J=(q)=>{let $=qJ(q),K=$.name!==void 0?[...$.basePath,$.definitionPath,$.name]:$.basePath;return{...$,flags:{hasReferencedOpenAiAnyType:!1},currentPath:K,propertyPath:void 0,seen:new Map(Object.entries($.definitions).map(([_,P])=>[P._def,{def:P._def,path:[...$.basePath,$.definitionPath,_],jsonSchema:void 0}]))}};function yY(q,$,K,_){if(!_?.errorMessages)return;if(K)q.errorMessage={...q.errorMessage,[$]:K}}function S$(q,$,K,_,P){q[$]=K,yY(q,$,_,P)}var s9=(q,$)=>{let K=0;for(;K<q.length&&K<$.length;K++)if(q[K]!==$[K])break;return[(q.length-K).toString(),...$.slice(K)].join("/")};var C$;(function(q){q.assertEqual=(P)=>P;function $(P){}q.assertIs=$;function K(P){throw Error()}q.assertNever=K,q.arrayToEnum=(P)=>{let O={};for(let Y of P)O[Y]=Y;return O},q.getValidEnumValues=(P)=>{let O=q.objectKeys(P).filter((H)=>typeof P[P[H]]!=="number"),Y={};for(let H of O)Y[H]=P[H];return q.objectValues(Y)},q.objectValues=(P)=>{return q.objectKeys(P).map(function(O){return P[O]})},q.objectKeys=typeof Object.keys==="function"?(P)=>Object.keys(P):(P)=>{let O=[];for(let Y in P)if(Object.prototype.hasOwnProperty.call(P,Y))O.push(Y);return O},q.find=(P,O)=>{for(let Y of P)if(O(Y))return Y;return},q.isInteger=typeof Number.isInteger==="function"?(P)=>Number.isInteger(P):(P)=>typeof P==="number"&&isFinite(P)&&Math.floor(P)===P;function _(P,O=" | "){return P.map((Y)=>typeof Y==="string"?`'${Y}'`:Y).join(O)}q.joinValues=_,q.jsonStringifyReplacer=(P,O)=>{if(typeof O==="bigint")return O.toString();return O}})(C$||(C$={}));var KJ;(function(q){q.mergeShapes=($,K)=>{return{...$,...K}}})(KJ||(KJ={}));var tq=C$.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),BK=(q)=>{switch(typeof q){case"undefined":return tq.undefined;case"string":return tq.string;case"number":return isNaN(q)?tq.nan:tq.number;case"boolean":return tq.boolean;case"function":return tq.function;case"bigint":return tq.bigint;case"symbol":return tq.symbol;case"object":if(Array.isArray(q))return tq.array;if(q===null)return tq.null;if(q.then&&typeof q.then==="function"&&q.catch&&typeof q.catch==="function")return tq.promise;if(typeof Map<"u"&&q instanceof Map)return tq.map;if(typeof Set<"u"&&q instanceof Set)return tq.set;if(typeof Date<"u"&&q instanceof Date)return tq.date;return tq.object;default:return tq.unknown}},mq=C$.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class X6 extends Error{get errors(){return this.issues}constructor(q){super();this.issues=[],this.addIssue=(K)=>{this.issues=[...this.issues,K]},this.addIssues=(K=[])=>{this.issues=[...this.issues,...K]};let $=new.target.prototype;if(Object.setPrototypeOf)Object.setPrototypeOf(this,$);else this.__proto__=$;this.name="ZodError",this.issues=q}format(q){let $=q||function(P){return P.message},K={_errors:[]},_=(P)=>{for(let O of P.issues)if(O.code==="invalid_union")O.unionErrors.map(_);else if(O.code==="invalid_return_type")_(O.returnTypeError);else if(O.code==="invalid_arguments")_(O.argumentsError);else if(O.path.length===0)K._errors.push($(O));else{let Y=K,H=0;while(H<O.path.length){let v=O.path[H];if(H!==O.path.length-1)Y[v]=Y[v]||{_errors:[]};else Y[v]=Y[v]||{_errors:[]},Y[v]._errors.push($(O));Y=Y[v],H++}}};return _(this),K}static assert(q){if(!(q instanceof X6))throw Error(`Not a ZodError: ${q}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,C$.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(q=($)=>$.message){let $={},K=[];for(let _ of this.issues)if(_.path.length>0)$[_.path[0]]=$[_.path[0]]||[],$[_.path[0]].push(q(_));else K.push(q(_));return{formErrors:K,fieldErrors:$}}get formErrors(){return this.flatten()}}X6.create=(q)=>{return new X6(q)};var t7=(q,$)=>{let K;switch(q.code){case mq.invalid_type:if(q.received===tq.undefined)K="Required";else K=`Expected ${q.expected}, received ${q.received}`;break;case mq.invalid_literal:K=`Invalid literal value, expected ${JSON.stringify(q.expected,C$.jsonStringifyReplacer)}`;break;case mq.unrecognized_keys:K=`Unrecognized key(s) in object: ${C$.joinValues(q.keys,", ")}`;break;case mq.invalid_union:K="Invalid input";break;case mq.invalid_union_discriminator:K=`Invalid discriminator value. Expected ${C$.joinValues(q.options)}`;break;case mq.invalid_enum_value:K=`Invalid enum value. Expected ${C$.joinValues(q.options)}, received '${q.received}'`;break;case mq.invalid_arguments:K="Invalid function arguments";break;case mq.invalid_return_type:K="Invalid function return type";break;case mq.invalid_date:K="Invalid date";break;case mq.invalid_string:if(typeof q.validation==="object")if("includes"in q.validation){if(K=`Invalid input: must include "${q.validation.includes}"`,typeof q.validation.position==="number")K=`${K} at one or more positions greater than or equal to ${q.validation.position}`}else if("startsWith"in q.validation)K=`Invalid input: must start with "${q.validation.startsWith}"`;else if("endsWith"in q.validation)K=`Invalid input: must end with "${q.validation.endsWith}"`;else C$.assertNever(q.validation);else if(q.validation!=="regex")K=`Invalid ${q.validation}`;else K="Invalid";break;case mq.too_small:if(q.type==="array")K=`Array must contain ${q.exact?"exactly":q.inclusive?"at least":"more than"} ${q.minimum} element(s)`;else if(q.type==="string")K=`String must contain ${q.exact?"exactly":q.inclusive?"at least":"over"} ${q.minimum} character(s)`;else if(q.type==="number")K=`Number must be ${q.exact?"exactly equal to ":q.inclusive?"greater than or equal to ":"greater than "}${q.minimum}`;else if(q.type==="date")K=`Date must be ${q.exact?"exactly equal to ":q.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(q.minimum))}`;else K="Invalid input";break;case mq.too_big:if(q.type==="array")K=`Array must contain ${q.exact?"exactly":q.inclusive?"at most":"less than"} ${q.maximum} element(s)`;else if(q.type==="string")K=`String must contain ${q.exact?"exactly":q.inclusive?"at most":"under"} ${q.maximum} character(s)`;else if(q.type==="number")K=`Number must be ${q.exact?"exactly":q.inclusive?"less than or equal to":"less than"} ${q.maximum}`;else if(q.type==="bigint")K=`BigInt must be ${q.exact?"exactly":q.inclusive?"less than or equal to":"less than"} ${q.maximum}`;else if(q.type==="date")K=`Date must be ${q.exact?"exactly":q.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(q.maximum))}`;else K="Invalid input";break;case mq.custom:K="Invalid input";break;case mq.invalid_intersection_types:K="Intersection results could not be merged";break;case mq.not_multiple_of:K=`Number must be a multiple of ${q.multipleOf}`;break;case mq.not_finite:K="Number must be finite";break;default:K=$.defaultError,C$.assertNever(q)}return{message:K}},fS=t7;function xY(){return fS}var uY=(q)=>{let{data:$,path:K,errorMaps:_,issueData:P}=q,O=[...K,...P.path||[]],Y={...P,path:O};if(P.message!==void 0)return{...P,path:O,message:P.message};let H="",v=_.filter((X)=>!!X).slice().reverse();for(let X of v)H=X(Y,{data:$,defaultError:H}).message;return{...P,path:O,message:H}};function Bq(q,$){let K=xY(),_=uY({issueData:$,data:q.data,path:q.path,errorMaps:[q.common.contextualErrorMap,q.schemaErrorMap,K,K===t7?void 0:t7].filter((P)=>!!P)});q.common.issues.push(_)}class l8{constructor(){this.value="valid"}dirty(){if(this.value==="valid")this.value="dirty"}abort(){if(this.value!=="aborted")this.value="aborted"}static mergeArray(q,$){let K=[];for(let _ of $){if(_.status==="aborted")return j$;if(_.status==="dirty")q.dirty();K.push(_.value)}return{status:q.value,value:K}}static async mergeObjectAsync(q,$){let K=[];for(let _ of $){let P=await _.key,O=await _.value;K.push({key:P,value:O})}return l8.mergeObjectSync(q,K)}static mergeObjectSync(q,$){let K={};for(let _ of $){let{key:P,value:O}=_;if(P.status==="aborted")return j$;if(O.status==="aborted")return j$;if(P.status==="dirty")q.dirty();if(O.status==="dirty")q.dirty();if(P.value!=="__proto__"&&(typeof O.value<"u"||_.alwaysSet))K[P.value]=O.value}return{status:q.value,value:K}}}var j$=Object.freeze({status:"aborted"}),B7=(q)=>({status:"dirty",value:q}),t8=(q)=>({status:"valid",value:q}),_J=(q)=>q.status==="aborted",PJ=(q)=>q.status==="dirty",G4=(q)=>q.status==="valid",q1=(q)=>typeof Promise<"u"&&q instanceof Promise;function $1(q,$,K,_){if(K==="a"&&!_)throw TypeError("Private accessor was defined without a getter");if(typeof $==="function"?q!==$||!_:!$.has(q))throw TypeError("Cannot read private member from an object whose class did not declare it");return K==="m"?_:K==="a"?_.call(q):_?_.value:$.get(q)}function jJ(q,$,K,_,P){if(_==="m")throw TypeError("Private method is not writable");if(_==="a"&&!P)throw TypeError("Private accessor was defined without a setter");if(typeof $==="function"?q!==$||!P:!$.has(q))throw TypeError("Cannot write private member to an object whose class did not declare it");return _==="a"?P.call(q,K):P?P.value=K:$.set(q,K),K}var sq;(function(q){q.errToObj=($)=>typeof $==="string"?{message:$}:$||{},q.toString=($)=>typeof $==="string"?$:$===null||$===void 0?void 0:$.message})(sq||(sq={}));var i7,U7;class h6{constructor(q,$,K,_){this._cachedPath=[],this.parent=q,this.data=$,this._path=K,this._key=_}get path(){if(!this._cachedPath.length)if(this._key instanceof Array)this._cachedPath.push(...this._path,...this._key);else this._cachedPath.push(...this._path,this._key);return this._cachedPath}}var YJ=(q,$)=>{if(G4($))return{success:!0,data:$.value};else{if(!q.common.issues.length)throw Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;let K=new X6(q.common.issues);return this._error=K,this._error}}}};function w$(q){if(!q)return{};let{errorMap:$,invalid_type_error:K,required_error:_,description:P}=q;if($&&(K||_))throw Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);if($)return{errorMap:$,description:P};return{errorMap:(Y,H)=>{var v,X;let{message:Z}=q;if(Y.code==="invalid_enum_value")return{message:Z!==null&&Z!==void 0?Z:H.defaultError};if(typeof H.data>"u")return{message:(v=Z!==null&&Z!==void 0?Z:_)!==null&&v!==void 0?v:H.defaultError};if(Y.code!=="invalid_type")return{message:H.defaultError};return{message:(X=Z!==null&&Z!==void 0?Z:K)!==null&&X!==void 0?X:H.defaultError}},description:P}}class G${get description(){return this._def.description}_getType(q){return BK(q.data)}_getOrReturnCtx(q,$){return $||{common:q.parent.common,data:q.data,parsedType:BK(q.data),schemaErrorMap:this._def.errorMap,path:q.path,parent:q.parent}}_processInputParams(q){return{status:new l8,ctx:{common:q.parent.common,data:q.data,parsedType:BK(q.data),schemaErrorMap:this._def.errorMap,path:q.path,parent:q.parent}}}_parseSync(q){let $=this._parse(q);if(q1($))throw Error("Synchronous parse encountered promise.");return $}_parseAsync(q){let $=this._parse(q);return Promise.resolve($)}parse(q,$){let K=this.safeParse(q,$);if(K.success)return K.data;throw K.error}safeParse(q,$){var K;let _={common:{issues:[],async:(K=$===null||$===void 0?void 0:$.async)!==null&&K!==void 0?K:!1,contextualErrorMap:$===null||$===void 0?void 0:$.errorMap},path:($===null||$===void 0?void 0:$.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:q,parsedType:BK(q)},P=this._parseSync({data:q,path:_.path,parent:_});return YJ(_,P)}"~validate"(q){var $,K;let _={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:q,parsedType:BK(q)};if(!this["~standard"].async)try{let P=this._parseSync({data:q,path:[],parent:_});return G4(P)?{value:P.value}:{issues:_.common.issues}}catch(P){if((K=($=P===null||P===void 0?void 0:P.message)===null||$===void 0?void 0:$.toLowerCase())===null||K===void 0?void 0:K.includes("encountered"))this["~standard"].async=!0;_.common={issues:[],async:!0}}return this._parseAsync({data:q,path:[],parent:_}).then((P)=>G4(P)?{value:P.value}:{issues:_.common.issues})}async parseAsync(q,$){let K=await this.safeParseAsync(q,$);if(K.success)return K.data;throw K.error}async safeParseAsync(q,$){let K={common:{issues:[],contextualErrorMap:$===null||$===void 0?void 0:$.errorMap,async:!0},path:($===null||$===void 0?void 0:$.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:q,parsedType:BK(q)},_=this._parse({data:q,path:K.path,parent:K}),P=await(q1(_)?_:Promise.resolve(_));return YJ(K,P)}refine(q,$){let K=(_)=>{if(typeof $==="string"||typeof $>"u")return{message:$};else if(typeof $==="function")return $(_);else return $};return this._refinement((_,P)=>{let O=q(_),Y=()=>P.addIssue({code:mq.custom,...K(_)});if(typeof Promise<"u"&&O instanceof Promise)return O.then((H)=>{if(!H)return Y(),!1;else return!0});if(!O)return Y(),!1;else return!0})}refinement(q,$){return this._refinement((K,_)=>{if(!q(K))return _.addIssue(typeof $==="function"?$(K,_):$),!1;else return!0})}_refinement(q){return new Q6({schema:this,typeName:cq.ZodEffects,effect:{type:"refinement",refinement:q}})}superRefine(q){return this._refinement(q)}constructor(q){this.spa=this.safeParseAsync,this._def=q,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:($)=>this["~validate"]($)}}optional(){return t6.create(this,this._def)}nullable(){return iK.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return F6.create(this)}promise(){return S4.create(this,this._def)}or(q){return s7.create([this,q],this._def)}and(q){return qP.create(this,q,this._def)}transform(q){return new Q6({...w$(this._def),schema:this,typeName:cq.ZodEffects,effect:{type:"transform",transform:q}})}default(q){let $=typeof q==="function"?q:()=>q;return new PP({...w$(this._def),innerType:this,defaultValue:$,typeName:cq.ZodDefault})}brand(){return new lY({typeName:cq.ZodBranded,type:this,...w$(this._def)})}catch(q){let $=typeof q==="function"?q:()=>q;return new YP({...w$(this._def),innerType:this,catchValue:$,typeName:cq.ZodCatch})}describe(q){return new this.constructor({...this._def,description:q})}pipe(q){return H1.create(this,q)}readonly(){return jP.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}var AS=/^c[^\s-]{8,}$/i,kS=/^[0-9a-z]+$/,GS=/^[0-9A-HJKMNP-TV-Z]{26}$/i,ZS=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,VS=/^[a-z0-9_-]{21}$/i,MS=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,SS=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,CS=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,NS="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$",pY,ES=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,RS=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,hS=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,DS=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,IS=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,LS=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,OJ="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",bS=new RegExp(`^${OJ}$`);function WJ(q){let $="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";if(q.precision)$=`${$}\\.\\d{${q.precision}}`;else if(q.precision==null)$=`${$}(\\.\\d+)?`;return $}function gS(q){return new RegExp(`^${WJ(q)}$`)}function yS(q){let $=`${OJ}T${WJ(q)}`,K=[];if(K.push(q.local?"Z?":"Z"),q.offset)K.push("([+-]\\d{2}:?\\d{2})");return $=`${$}(${K.join("|")})`,new RegExp(`^${$}$`)}function pS(q,$){if(($==="v4"||!$)&&ES.test(q))return!0;if(($==="v6"||!$)&&hS.test(q))return!0;return!1}function xS(q,$){if(!MS.test(q))return!1;try{let[K]=q.split("."),_=K.replace(/-/g,"+").replace(/_/g,"/").padEnd(K.length+(4-K.length%4)%4,"="),P=JSON.parse(atob(_));if(typeof P!=="object"||P===null)return!1;if(!P.typ||!P.alg)return!1;if($&&P.alg!==$)return!1;return!0}catch(K){return!1}}function uS(q,$){if(($==="v4"||!$)&&RS.test(q))return!0;if(($==="v6"||!$)&&DS.test(q))return!0;return!1}class AK extends G${_parse(q){if(this._def.coerce)q.data=String(q.data);if(this._getType(q)!==tq.string){let P=this._getOrReturnCtx(q);return Bq(P,{code:mq.invalid_type,expected:tq.string,received:P.parsedType}),j$}let K=new l8,_=void 0;for(let P of this._def.checks)if(P.kind==="min"){if(q.data.length<P.value)_=this._getOrReturnCtx(q,_),Bq(_,{code:mq.too_small,minimum:P.value,type:"string",inclusive:!0,exact:!1,message:P.message}),K.dirty()}else if(P.kind==="max"){if(q.data.length>P.value)_=this._getOrReturnCtx(q,_),Bq(_,{code:mq.too_big,maximum:P.value,type:"string",inclusive:!0,exact:!1,message:P.message}),K.dirty()}else if(P.kind==="length"){let O=q.data.length>P.value,Y=q.data.length<P.value;if(O||Y){if(_=this._getOrReturnCtx(q,_),O)Bq(_,{code:mq.too_big,maximum:P.value,type:"string",inclusive:!0,exact:!0,message:P.message});else if(Y)Bq(_,{code:mq.too_small,minimum:P.value,type:"string",inclusive:!0,exact:!0,message:P.message});K.dirty()}}else if(P.kind==="email"){if(!CS.test(q.data))_=this._getOrReturnCtx(q,_),Bq(_,{validation:"email",code:mq.invalid_string,message:P.message}),K.dirty()}else if(P.kind==="emoji"){if(!pY)pY=new RegExp(NS,"u");if(!pY.test(q.data))_=this._getOrReturnCtx(q,_),Bq(_,{validation:"emoji",code:mq.invalid_string,message:P.message}),K.dirty()}else if(P.kind==="uuid"){if(!ZS.test(q.data))_=this._getOrReturnCtx(q,_),Bq(_,{validation:"uuid",code:mq.invalid_string,message:P.message}),K.dirty()}else if(P.kind==="nanoid"){if(!VS.test(q.data))_=this._getOrReturnCtx(q,_),Bq(_,{validation:"nanoid",code:mq.invalid_string,message:P.message}),K.dirty()}else if(P.kind==="cuid"){if(!AS.test(q.data))_=this._getOrReturnCtx(q,_),Bq(_,{validation:"cuid",code:mq.invalid_string,message:P.message}),K.dirty()}else if(P.kind==="cuid2"){if(!kS.test(q.data))_=this._getOrReturnCtx(q,_),Bq(_,{validation:"cuid2",code:mq.invalid_string,message:P.message}),K.dirty()}else if(P.kind==="ulid"){if(!GS.test(q.data))_=this._getOrReturnCtx(q,_),Bq(_,{validation:"ulid",code:mq.invalid_string,message:P.message}),K.dirty()}else if(P.kind==="url")try{new URL(q.data)}catch(O){_=this._getOrReturnCtx(q,_),Bq(_,{validation:"url",code:mq.invalid_string,message:P.message}),K.dirty()}else if(P.kind==="regex"){if(P.regex.lastIndex=0,!P.regex.test(q.data))_=this._getOrReturnCtx(q,_),Bq(_,{validation:"regex",code:mq.invalid_string,message:P.message}),K.dirty()}else if(P.kind==="trim")q.data=q.data.trim();else if(P.kind==="includes"){if(!q.data.includes(P.value,P.position))_=this._getOrReturnCtx(q,_),Bq(_,{code:mq.invalid_string,validation:{includes:P.value,position:P.position},message:P.message}),K.dirty()}else if(P.kind==="toLowerCase")q.data=q.data.toLowerCase();else if(P.kind==="toUpperCase")q.data=q.data.toUpperCase();else if(P.kind==="startsWith"){if(!q.data.startsWith(P.value))_=this._getOrReturnCtx(q,_),Bq(_,{code:mq.invalid_string,validation:{startsWith:P.value},message:P.message}),K.dirty()}else if(P.kind==="endsWith"){if(!q.data.endsWith(P.value))_=this._getOrReturnCtx(q,_),Bq(_,{code:mq.invalid_string,validation:{endsWith:P.value},message:P.message}),K.dirty()}else if(P.kind==="datetime"){if(!yS(P).test(q.data))_=this._getOrReturnCtx(q,_),Bq(_,{code:mq.invalid_string,validation:"datetime",message:P.message}),K.dirty()}else if(P.kind==="date"){if(!bS.test(q.data))_=this._getOrReturnCtx(q,_),Bq(_,{code:mq.invalid_string,validation:"date",message:P.message}),K.dirty()}else if(P.kind==="time"){if(!gS(P).test(q.data))_=this._getOrReturnCtx(q,_),Bq(_,{code:mq.invalid_string,validation:"time",message:P.message}),K.dirty()}else if(P.kind==="duration"){if(!SS.test(q.data))_=this._getOrReturnCtx(q,_),Bq(_,{validation:"duration",code:mq.invalid_string,message:P.message}),K.dirty()}else if(P.kind==="ip"){if(!pS(q.data,P.version))_=this._getOrReturnCtx(q,_),Bq(_,{validation:"ip",code:mq.invalid_string,message:P.message}),K.dirty()}else if(P.kind==="jwt"){if(!xS(q.data,P.alg))_=this._getOrReturnCtx(q,_),Bq(_,{validation:"jwt",code:mq.invalid_string,message:P.message}),K.dirty()}else if(P.kind==="cidr"){if(!uS(q.data,P.version))_=this._getOrReturnCtx(q,_),Bq(_,{validation:"cidr",code:mq.invalid_string,message:P.message}),K.dirty()}else if(P.kind==="base64"){if(!IS.test(q.data))_=this._getOrReturnCtx(q,_),Bq(_,{validation:"base64",code:mq.invalid_string,message:P.message}),K.dirty()}else if(P.kind==="base64url"){if(!LS.test(q.data))_=this._getOrReturnCtx(q,_),Bq(_,{validation:"base64url",code:mq.invalid_string,message:P.message}),K.dirty()}else C$.assertNever(P);return{status:K.value,value:q.data}}_regex(q,$,K){return this.refinement((_)=>q.test(_),{validation:$,code:mq.invalid_string,...sq.errToObj(K)})}_addCheck(q){return new AK({...this._def,checks:[...this._def.checks,q]})}email(q){return this._addCheck({kind:"email",...sq.errToObj(q)})}url(q){return this._addCheck({kind:"url",...sq.errToObj(q)})}emoji(q){return this._addCheck({kind:"emoji",...sq.errToObj(q)})}uuid(q){return this._addCheck({kind:"uuid",...sq.errToObj(q)})}nanoid(q){return this._addCheck({kind:"nanoid",...sq.errToObj(q)})}cuid(q){return this._addCheck({kind:"cuid",...sq.errToObj(q)})}cuid2(q){return this._addCheck({kind:"cuid2",...sq.errToObj(q)})}ulid(q){return this._addCheck({kind:"ulid",...sq.errToObj(q)})}base64(q){return this._addCheck({kind:"base64",...sq.errToObj(q)})}base64url(q){return this._addCheck({kind:"base64url",...sq.errToObj(q)})}jwt(q){return this._addCheck({kind:"jwt",...sq.errToObj(q)})}ip(q){return this._addCheck({kind:"ip",...sq.errToObj(q)})}cidr(q){return this._addCheck({kind:"cidr",...sq.errToObj(q)})}datetime(q){var $,K;if(typeof q==="string")return this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:q});return this._addCheck({kind:"datetime",precision:typeof(q===null||q===void 0?void 0:q.precision)>"u"?null:q===null||q===void 0?void 0:q.precision,offset:($=q===null||q===void 0?void 0:q.offset)!==null&&$!==void 0?$:!1,local:(K=q===null||q===void 0?void 0:q.local)!==null&&K!==void 0?K:!1,...sq.errToObj(q===null||q===void 0?void 0:q.message)})}date(q){return this._addCheck({kind:"date",message:q})}time(q){if(typeof q==="string")return this._addCheck({kind:"time",precision:null,message:q});return this._addCheck({kind:"time",precision:typeof(q===null||q===void 0?void 0:q.precision)>"u"?null:q===null||q===void 0?void 0:q.precision,...sq.errToObj(q===null||q===void 0?void 0:q.message)})}duration(q){return this._addCheck({kind:"duration",...sq.errToObj(q)})}regex(q,$){return this._addCheck({kind:"regex",regex:q,...sq.errToObj($)})}includes(q,$){return this._addCheck({kind:"includes",value:q,position:$===null||$===void 0?void 0:$.position,...sq.errToObj($===null||$===void 0?void 0:$.message)})}startsWith(q,$){return this._addCheck({kind:"startsWith",value:q,...sq.errToObj($)})}endsWith(q,$){return this._addCheck({kind:"endsWith",value:q,...sq.errToObj($)})}min(q,$){return this._addCheck({kind:"min",value:q,...sq.errToObj($)})}max(q,$){return this._addCheck({kind:"max",value:q,...sq.errToObj($)})}length(q,$){return this._addCheck({kind:"length",value:q,...sq.errToObj($)})}nonempty(q){return this.min(1,sq.errToObj(q))}trim(){return new AK({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new AK({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new AK({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find((q)=>q.kind==="datetime")}get isDate(){return!!this._def.checks.find((q)=>q.kind==="date")}get isTime(){return!!this._def.checks.find((q)=>q.kind==="time")}get isDuration(){return!!this._def.checks.find((q)=>q.kind==="duration")}get isEmail(){return!!this._def.checks.find((q)=>q.kind==="email")}get isURL(){return!!this._def.checks.find((q)=>q.kind==="url")}get isEmoji(){return!!this._def.checks.find((q)=>q.kind==="emoji")}get isUUID(){return!!this._def.checks.find((q)=>q.kind==="uuid")}get isNANOID(){return!!this._def.checks.find((q)=>q.kind==="nanoid")}get isCUID(){return!!this._def.checks.find((q)=>q.kind==="cuid")}get isCUID2(){return!!this._def.checks.find((q)=>q.kind==="cuid2")}get isULID(){return!!this._def.checks.find((q)=>q.kind==="ulid")}get isIP(){return!!this._def.checks.find((q)=>q.kind==="ip")}get isCIDR(){return!!this._def.checks.find((q)=>q.kind==="cidr")}get isBase64(){return!!this._def.checks.find((q)=>q.kind==="base64")}get isBase64url(){return!!this._def.checks.find((q)=>q.kind==="base64url")}get minLength(){let q=null;for(let $ of this._def.checks)if($.kind==="min"){if(q===null||$.value>q)q=$.value}return q}get maxLength(){let q=null;for(let $ of this._def.checks)if($.kind==="max"){if(q===null||$.value<q)q=$.value}return q}}AK.create=(q)=>{var $;return new AK({checks:[],typeName:cq.ZodString,coerce:($=q===null||q===void 0?void 0:q.coerce)!==null&&$!==void 0?$:!1,...w$(q)})};function mS(q,$){let K=(q.toString().split(".")[1]||"").length,_=($.toString().split(".")[1]||"").length,P=K>_?K:_,O=parseInt(q.toFixed(P).replace(".","")),Y=parseInt($.toFixed(P).replace(".",""));return O%Y/Math.pow(10,P)}class Z4 extends G${constructor(){super(...arguments);this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(q){if(this._def.coerce)q.data=Number(q.data);if(this._getType(q)!==tq.number){let P=this._getOrReturnCtx(q);return Bq(P,{code:mq.invalid_type,expected:tq.number,received:P.parsedType}),j$}let K=void 0,_=new l8;for(let P of this._def.checks)if(P.kind==="int"){if(!C$.isInteger(q.data))K=this._getOrReturnCtx(q,K),Bq(K,{code:mq.invalid_type,expected:"integer",received:"float",message:P.message}),_.dirty()}else if(P.kind==="min"){if(P.inclusive?q.data<P.value:q.data<=P.value)K=this._getOrReturnCtx(q,K),Bq(K,{code:mq.too_small,minimum:P.value,type:"number",inclusive:P.inclusive,exact:!1,message:P.message}),_.dirty()}else if(P.kind==="max"){if(P.inclusive?q.data>P.value:q.data>=P.value)K=this._getOrReturnCtx(q,K),Bq(K,{code:mq.too_big,maximum:P.value,type:"number",inclusive:P.inclusive,exact:!1,message:P.message}),_.dirty()}else if(P.kind==="multipleOf"){if(mS(q.data,P.value)!==0)K=this._getOrReturnCtx(q,K),Bq(K,{code:mq.not_multiple_of,multipleOf:P.value,message:P.message}),_.dirty()}else if(P.kind==="finite"){if(!Number.isFinite(q.data))K=this._getOrReturnCtx(q,K),Bq(K,{code:mq.not_finite,message:P.message}),_.dirty()}else C$.assertNever(P);return{status:_.value,value:q.data}}gte(q,$){return this.setLimit("min",q,!0,sq.toString($))}gt(q,$){return this.setLimit("min",q,!1,sq.toString($))}lte(q,$){return this.setLimit("max",q,!0,sq.toString($))}lt(q,$){return this.setLimit("max",q,!1,sq.toString($))}setLimit(q,$,K,_){return new Z4({...this._def,checks:[...this._def.checks,{kind:q,value:$,inclusive:K,message:sq.toString(_)}]})}_addCheck(q){return new Z4({...this._def,checks:[...this._def.checks,q]})}int(q){return this._addCheck({kind:"int",message:sq.toString(q)})}positive(q){return this._addCheck({kind:"min",value:0,inclusive:!1,message:sq.toString(q)})}negative(q){return this._addCheck({kind:"max",value:0,inclusive:!1,message:sq.toString(q)})}nonpositive(q){return this._addCheck({kind:"max",value:0,inclusive:!0,message:sq.toString(q)})}nonnegative(q){return this._addCheck({kind:"min",value:0,inclusive:!0,message:sq.toString(q)})}multipleOf(q,$){return this._addCheck({kind:"multipleOf",value:q,message:sq.toString($)})}finite(q){return this._addCheck({kind:"finite",message:sq.toString(q)})}safe(q){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:sq.toString(q)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:sq.toString(q)})}get minValue(){let q=null;for(let $ of this._def.checks)if($.kind==="min"){if(q===null||$.value>q)q=$.value}return q}get maxValue(){let q=null;for(let $ of this._def.checks)if($.kind==="max"){if(q===null||$.value<q)q=$.value}return q}get isInt(){return!!this._def.checks.find((q)=>q.kind==="int"||q.kind==="multipleOf"&&C$.isInteger(q.value))}get isFinite(){let q=null,$=null;for(let K of this._def.checks)if(K.kind==="finite"||K.kind==="int"||K.kind==="multipleOf")return!0;else if(K.kind==="min"){if($===null||K.value>$)$=K.value}else if(K.kind==="max"){if(q===null||K.value<q)q=K.value}return Number.isFinite($)&&Number.isFinite(q)}}Z4.create=(q)=>{return new Z4({checks:[],typeName:cq.ZodNumber,coerce:(q===null||q===void 0?void 0:q.coerce)||!1,...w$(q)})};class V4 extends G${constructor(){super(...arguments);this.min=this.gte,this.max=this.lte}_parse(q){if(this._def.coerce)try{q.data=BigInt(q.data)}catch(P){return this._getInvalidInput(q)}if(this._getType(q)!==tq.bigint)return this._getInvalidInput(q);let K=void 0,_=new l8;for(let P of this._def.checks)if(P.kind==="min"){if(P.inclusive?q.data<P.value:q.data<=P.value)K=this._getOrReturnCtx(q,K),Bq(K,{code:mq.too_small,type:"bigint",minimum:P.value,inclusive:P.inclusive,message:P.message}),_.dirty()}else if(P.kind==="max"){if(P.inclusive?q.data>P.value:q.data>=P.value)K=this._getOrReturnCtx(q,K),Bq(K,{code:mq.too_big,type:"bigint",maximum:P.value,inclusive:P.inclusive,message:P.message}),_.dirty()}else if(P.kind==="multipleOf"){if(q.data%P.value!==BigInt(0))K=this._getOrReturnCtx(q,K),Bq(K,{code:mq.not_multiple_of,multipleOf:P.value,message:P.message}),_.dirty()}else C$.assertNever(P);return{status:_.value,value:q.data}}_getInvalidInput(q){let $=this._getOrReturnCtx(q);return Bq($,{code:mq.invalid_type,expected:tq.bigint,received:$.parsedType}),j$}gte(q,$){return this.setLimit("min",q,!0,sq.toString($))}gt(q,$){return this.setLimit("min",q,!1,sq.toString($))}lte(q,$){return this.setLimit("max",q,!0,sq.toString($))}lt(q,$){return this.setLimit("max",q,!1,sq.toString($))}setLimit(q,$,K,_){return new V4({...this._def,checks:[...this._def.checks,{kind:q,value:$,inclusive:K,message:sq.toString(_)}]})}_addCheck(q){return new V4({...this._def,checks:[...this._def.checks,q]})}positive(q){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:sq.toString(q)})}negative(q){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:sq.toString(q)})}nonpositive(q){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:sq.toString(q)})}nonnegative(q){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:sq.toString(q)})}multipleOf(q,$){return this._addCheck({kind:"multipleOf",value:q,message:sq.toString($)})}get minValue(){let q=null;for(let $ of this._def.checks)if($.kind==="min"){if(q===null||$.value>q)q=$.value}return q}get maxValue(){let q=null;for(let $ of this._def.checks)if($.kind==="max"){if(q===null||$.value<q)q=$.value}return q}}V4.create=(q)=>{var $;return new V4({checks:[],typeName:cq.ZodBigInt,coerce:($=q===null||q===void 0?void 0:q.coerce)!==null&&$!==void 0?$:!1,...w$(q)})};class K1 extends G${_parse(q){if(this._def.coerce)q.data=Boolean(q.data);if(this._getType(q)!==tq.boolean){let K=this._getOrReturnCtx(q);return Bq(K,{code:mq.invalid_type,expected:tq.boolean,received:K.parsedType}),j$}return t8(q.data)}}K1.create=(q)=>{return new K1({typeName:cq.ZodBoolean,coerce:(q===null||q===void 0?void 0:q.coerce)||!1,...w$(q)})};class Q7 extends G${_parse(q){if(this._def.coerce)q.data=new Date(q.data);if(this._getType(q)!==tq.date){let P=this._getOrReturnCtx(q);return Bq(P,{code:mq.invalid_type,expected:tq.date,received:P.parsedType}),j$}if(isNaN(q.data.getTime())){let P=this._getOrReturnCtx(q);return Bq(P,{code:mq.invalid_date}),j$}let K=new l8,_=void 0;for(let P of this._def.checks)if(P.kind==="min"){if(q.data.getTime()<P.value)_=this._getOrReturnCtx(q,_),Bq(_,{code:mq.too_small,message:P.message,inclusive:!0,exact:!1,minimum:P.value,type:"date"}),K.dirty()}else if(P.kind==="max"){if(q.data.getTime()>P.value)_=this._getOrReturnCtx(q,_),Bq(_,{code:mq.too_big,message:P.message,inclusive:!0,exact:!1,maximum:P.value,type:"date"}),K.dirty()}else C$.assertNever(P);return{status:K.value,value:new Date(q.data.getTime())}}_addCheck(q){return new Q7({...this._def,checks:[...this._def.checks,q]})}min(q,$){return this._addCheck({kind:"min",value:q.getTime(),message:sq.toString($)})}max(q,$){return this._addCheck({kind:"max",value:q.getTime(),message:sq.toString($)})}get minDate(){let q=null;for(let $ of this._def.checks)if($.kind==="min"){if(q===null||$.value>q)q=$.value}return q!=null?new Date(q):null}get maxDate(){let q=null;for(let $ of this._def.checks)if($.kind==="max"){if(q===null||$.value<q)q=$.value}return q!=null?new Date(q):null}}Q7.create=(q)=>{return new Q7({checks:[],coerce:(q===null||q===void 0?void 0:q.coerce)||!1,typeName:cq.ZodDate,...w$(q)})};class _1 extends G${_parse(q){if(this._getType(q)!==tq.symbol){let K=this._getOrReturnCtx(q);return Bq(K,{code:mq.invalid_type,expected:tq.symbol,received:K.parsedType}),j$}return t8(q.data)}}_1.create=(q)=>{return new _1({typeName:cq.ZodSymbol,...w$(q)})};class a7 extends G${_parse(q){if(this._getType(q)!==tq.undefined){let K=this._getOrReturnCtx(q);return Bq(K,{code:mq.invalid_type,expected:tq.undefined,received:K.parsedType}),j$}return t8(q.data)}}a7.create=(q)=>{return new a7({typeName:cq.ZodUndefined,...w$(q)})};class e7 extends G${_parse(q){if(this._getType(q)!==tq.null){let K=this._getOrReturnCtx(q);return Bq(K,{code:mq.invalid_type,expected:tq.null,received:K.parsedType}),j$}return t8(q.data)}}e7.create=(q)=>{return new e7({typeName:cq.ZodNull,...w$(q)})};class P1 extends G${constructor(){super(...arguments);this._any=!0}_parse(q){return t8(q.data)}}P1.create=(q)=>{return new P1({typeName:cq.ZodAny,...w$(q)})};class V_ extends G${constructor(){super(...arguments);this._unknown=!0}_parse(q){return t8(q.data)}}V_.create=(q)=>{return new V_({typeName:cq.ZodUnknown,...w$(q)})};class kK extends G${_parse(q){let $=this._getOrReturnCtx(q);return Bq($,{code:mq.invalid_type,expected:tq.never,received:$.parsedType}),j$}}kK.create=(q)=>{return new kK({typeName:cq.ZodNever,...w$(q)})};class Y1 extends G${_parse(q){if(this._getType(q)!==tq.undefined){let K=this._getOrReturnCtx(q);return Bq(K,{code:mq.invalid_type,expected:tq.void,received:K.parsedType}),j$}return t8(q.data)}}Y1.create=(q)=>{return new Y1({typeName:cq.ZodVoid,...w$(q)})};class F6 extends G${_parse(q){let{ctx:$,status:K}=this._processInputParams(q),_=this._def;if($.parsedType!==tq.array)return Bq($,{code:mq.invalid_type,expected:tq.array,received:$.parsedType}),j$;if(_.exactLength!==null){let O=$.data.length>_.exactLength.value,Y=$.data.length<_.exactLength.value;if(O||Y)Bq($,{code:O?mq.too_big:mq.too_small,minimum:Y?_.exactLength.value:void 0,maximum:O?_.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:_.exactLength.message}),K.dirty()}if(_.minLength!==null){if($.data.length<_.minLength.value)Bq($,{code:mq.too_small,minimum:_.minLength.value,type:"array",inclusive:!0,exact:!1,message:_.minLength.message}),K.dirty()}if(_.maxLength!==null){if($.data.length>_.maxLength.value)Bq($,{code:mq.too_big,maximum:_.maxLength.value,type:"array",inclusive:!0,exact:!1,message:_.maxLength.message}),K.dirty()}if($.common.async)return Promise.all([...$.data].map((O,Y)=>{return _.type._parseAsync(new h6($,O,$.path,Y))})).then((O)=>{return l8.mergeArray(K,O)});let P=[...$.data].map((O,Y)=>{return _.type._parseSync(new h6($,O,$.path,Y))});return l8.mergeArray(K,P)}get element(){return this._def.type}min(q,$){return new F6({...this._def,minLength:{value:q,message:sq.toString($)}})}max(q,$){return new F6({...this._def,maxLength:{value:q,message:sq.toString($)}})}length(q,$){return new F6({...this._def,exactLength:{value:q,message:sq.toString($)}})}nonempty(q){return this.min(1,q)}}F6.create=(q,$)=>{return new F6({type:q,minLength:null,maxLength:null,exactLength:null,typeName:cq.ZodArray,...w$($)})};function k4(q){if(q instanceof l$){let $={};for(let K in q.shape){let _=q.shape[K];$[K]=t6.create(k4(_))}return new l$({...q._def,shape:()=>$})}else if(q instanceof F6)return new F6({...q._def,type:k4(q.element)});else if(q instanceof t6)return t6.create(k4(q.unwrap()));else if(q instanceof iK)return iK.create(k4(q.unwrap()));else if(q instanceof GK)return GK.create(q.items.map(($)=>k4($)));else return q}class l$ extends G${constructor(){super(...arguments);this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;let q=this._def.shape(),$=C$.objectKeys(q);return this._cached={shape:q,keys:$}}_parse(q){if(this._getType(q)!==tq.object){let v=this._getOrReturnCtx(q);return Bq(v,{code:mq.invalid_type,expected:tq.object,received:v.parsedType}),j$}let{status:K,ctx:_}=this._processInputParams(q),{shape:P,keys:O}=this._getCached(),Y=[];if(!(this._def.catchall instanceof kK&&this._def.unknownKeys==="strip")){for(let v in _.data)if(!O.includes(v))Y.push(v)}let H=[];for(let v of O){let X=P[v],Z=_.data[v];H.push({key:{status:"valid",value:v},value:X._parse(new h6(_,Z,_.path,v)),alwaysSet:v in _.data})}if(this._def.catchall instanceof kK){let v=this._def.unknownKeys;if(v==="passthrough")for(let X of Y)H.push({key:{status:"valid",value:X},value:{status:"valid",value:_.data[X]}});else if(v==="strict"){if(Y.length>0)Bq(_,{code:mq.unrecognized_keys,keys:Y}),K.dirty()}else if(v==="strip");else throw Error("Internal ZodObject error: invalid unknownKeys value.")}else{let v=this._def.catchall;for(let X of Y){let Z=_.data[X];H.push({key:{status:"valid",value:X},value:v._parse(new h6(_,Z,_.path,X)),alwaysSet:X in _.data})}}if(_.common.async)return Promise.resolve().then(async()=>{let v=[];for(let X of H){let Z=await X.key,k=await X.value;v.push({key:Z,value:k,alwaysSet:X.alwaysSet})}return v}).then((v)=>{return l8.mergeObjectSync(K,v)});else return l8.mergeObjectSync(K,H)}get shape(){return this._def.shape()}strict(q){return sq.errToObj,new l$({...this._def,unknownKeys:"strict",...q!==void 0?{errorMap:($,K)=>{var _,P,O,Y;let H=(O=(P=(_=this._def).errorMap)===null||P===void 0?void 0:P.call(_,$,K).message)!==null&&O!==void 0?O:K.defaultError;if($.code==="unrecognized_keys")return{message:(Y=sq.errToObj(q).message)!==null&&Y!==void 0?Y:H};return{message:H}}}:{}})}strip(){return new l$({...this._def,unknownKeys:"strip"})}passthrough(){return new l$({...this._def,unknownKeys:"passthrough"})}extend(q){return new l$({...this._def,shape:()=>({...this._def.shape(),...q})})}merge(q){return new l$({unknownKeys:q._def.unknownKeys,catchall:q._def.catchall,shape:()=>({...this._def.shape(),...q._def.shape()}),typeName:cq.ZodObject})}setKey(q,$){return this.augment({[q]:$})}catchall(q){return new l$({...this._def,catchall:q})}pick(q){let $={};return C$.objectKeys(q).forEach((K)=>{if(q[K]&&this.shape[K])$[K]=this.shape[K]}),new l$({...this._def,shape:()=>$})}omit(q){let $={};return C$.objectKeys(this.shape).forEach((K)=>{if(!q[K])$[K]=this.shape[K]}),new l$({...this._def,shape:()=>$})}deepPartial(){return k4(this)}partial(q){let $={};return C$.objectKeys(this.shape).forEach((K)=>{let _=this.shape[K];if(q&&!q[K])$[K]=_;else $[K]=_.optional()}),new l$({...this._def,shape:()=>$})}required(q){let $={};return C$.objectKeys(this.shape).forEach((K)=>{if(q&&!q[K])$[K]=this.shape[K];else{let P=this.shape[K];while(P instanceof t6)P=P._def.innerType;$[K]=P}}),new l$({...this._def,shape:()=>$})}keyof(){return HJ(C$.objectKeys(this.shape))}}l$.create=(q,$)=>{return new l$({shape:()=>q,unknownKeys:"strip",catchall:kK.create(),typeName:cq.ZodObject,...w$($)})};l$.strictCreate=(q,$)=>{return new l$({shape:()=>q,unknownKeys:"strict",catchall:kK.create(),typeName:cq.ZodObject,...w$($)})};l$.lazycreate=(q,$)=>{return new l$({shape:q,unknownKeys:"strip",catchall:kK.create(),typeName:cq.ZodObject,...w$($)})};class s7 extends G${_parse(q){let{ctx:$}=this._processInputParams(q),K=this._def.options;function _(P){for(let Y of P)if(Y.result.status==="valid")return Y.result;for(let Y of P)if(Y.result.status==="dirty")return $.common.issues.push(...Y.ctx.common.issues),Y.result;let O=P.map((Y)=>new X6(Y.ctx.common.issues));return Bq($,{code:mq.invalid_union,unionErrors:O}),j$}if($.common.async)return Promise.all(K.map(async(P)=>{let O={...$,common:{...$.common,issues:[]},parent:null};return{result:await P._parseAsync({data:$.data,path:$.path,parent:O}),ctx:O}})).then(_);else{let P=void 0,O=[];for(let H of K){let v={...$,common:{...$.common,issues:[]},parent:null},X=H._parseSync({data:$.data,path:$.path,parent:v});if(X.status==="valid")return X;else if(X.status==="dirty"&&!P)P={result:X,ctx:v};if(v.common.issues.length)O.push(v.common.issues)}if(P)return $.common.issues.push(...P.ctx.common.issues),P.result;let Y=O.map((H)=>new X6(H));return Bq($,{code:mq.invalid_union,unionErrors:Y}),j$}}get options(){return this._def.options}}s7.create=(q,$)=>{return new s7({options:q,typeName:cq.ZodUnion,...w$($)})};var fK=(q)=>{if(q instanceof $P)return fK(q.schema);else if(q instanceof Q6)return fK(q.innerType());else if(q instanceof KP)return[q.value];else if(q instanceof M_)return q.options;else if(q instanceof _P)return C$.objectValues(q.enum);else if(q instanceof PP)return fK(q._def.innerType);else if(q instanceof a7)return[void 0];else if(q instanceof e7)return[null];else if(q instanceof t6)return[void 0,...fK(q.unwrap())];else if(q instanceof iK)return[null,...fK(q.unwrap())];else if(q instanceof lY)return fK(q.unwrap());else if(q instanceof jP)return fK(q.unwrap());else if(q instanceof YP)return fK(q._def.innerType);else return[]};class cY extends G${_parse(q){let{ctx:$}=this._processInputParams(q);if($.parsedType!==tq.object)return Bq($,{code:mq.invalid_type,expected:tq.object,received:$.parsedType}),j$;let K=this.discriminator,_=$.data[K],P=this.optionsMap.get(_);if(!P)return Bq($,{code:mq.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[K]}),j$;if($.common.async)return P._parseAsync({data:$.data,path:$.path,parent:$});else return P._parseSync({data:$.data,path:$.path,parent:$})}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(q,$,K){let _=new Map;for(let P of $){let O=fK(P.shape[q]);if(!O.length)throw Error(`A discriminator value for key \`${q}\` could not be extracted from all schema options`);for(let Y of O){if(_.has(Y))throw Error(`Discriminator property ${String(q)} has duplicate value ${String(Y)}`);_.set(Y,P)}}return new cY({typeName:cq.ZodDiscriminatedUnion,discriminator:q,options:$,optionsMap:_,...w$(K)})}}function mY(q,$){let K=BK(q),_=BK($);if(q===$)return{valid:!0,data:q};else if(K===tq.object&&_===tq.object){let P=C$.objectKeys($),O=C$.objectKeys(q).filter((H)=>P.indexOf(H)!==-1),Y={...q,...$};for(let H of O){let v=mY(q[H],$[H]);if(!v.valid)return{valid:!1};Y[H]=v.data}return{valid:!0,data:Y}}else if(K===tq.array&&_===tq.array){if(q.length!==$.length)return{valid:!1};let P=[];for(let O=0;O<q.length;O++){let Y=q[O],H=$[O],v=mY(Y,H);if(!v.valid)return{valid:!1};P.push(v.data)}return{valid:!0,data:P}}else if(K===tq.date&&_===tq.date&&+q===+$)return{valid:!0,data:q};else return{valid:!1}}class qP extends G${_parse(q){let{status:$,ctx:K}=this._processInputParams(q),_=(P,O)=>{if(_J(P)||_J(O))return j$;let Y=mY(P.value,O.value);if(!Y.valid)return Bq(K,{code:mq.invalid_intersection_types}),j$;if(PJ(P)||PJ(O))$.dirty();return{status:$.value,value:Y.data}};if(K.common.async)return Promise.all([this._def.left._parseAsync({data:K.data,path:K.path,parent:K}),this._def.right._parseAsync({data:K.data,path:K.path,parent:K})]).then(([P,O])=>_(P,O));else return _(this._def.left._parseSync({data:K.data,path:K.path,parent:K}),this._def.right._parseSync({data:K.data,path:K.path,parent:K}))}}qP.create=(q,$,K)=>{return new qP({left:q,right:$,typeName:cq.ZodIntersection,...w$(K)})};class GK extends G${_parse(q){let{status:$,ctx:K}=this._processInputParams(q);if(K.parsedType!==tq.array)return Bq(K,{code:mq.invalid_type,expected:tq.array,received:K.parsedType}),j$;if(K.data.length<this._def.items.length)return Bq(K,{code:mq.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),j$;if(!this._def.rest&&K.data.length>this._def.items.length)Bq(K,{code:mq.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),$.dirty();let P=[...K.data].map((O,Y)=>{let H=this._def.items[Y]||this._def.rest;if(!H)return null;return H._parse(new h6(K,O,K.path,Y))}).filter((O)=>!!O);if(K.common.async)return Promise.all(P).then((O)=>{return l8.mergeArray($,O)});else return l8.mergeArray($,P)}get items(){return this._def.items}rest(q){return new GK({...this._def,rest:q})}}GK.create=(q,$)=>{if(!Array.isArray(q))throw Error("You must pass an array of schemas to z.tuple([ ... ])");return new GK({items:q,typeName:cq.ZodTuple,rest:null,...w$($)})};class j1 extends G${get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(q){let{status:$,ctx:K}=this._processInputParams(q);if(K.parsedType!==tq.object)return Bq(K,{code:mq.invalid_type,expected:tq.object,received:K.parsedType}),j$;let _=[],P=this._def.keyType,O=this._def.valueType;for(let Y in K.data)_.push({key:P._parse(new h6(K,Y,K.path,Y)),value:O._parse(new h6(K,K.data[Y],K.path,Y)),alwaysSet:Y in K.data});if(K.common.async)return l8.mergeObjectAsync($,_);else return l8.mergeObjectSync($,_)}get element(){return this._def.valueType}static create(q,$,K){if($ instanceof G$)return new j1({keyType:q,valueType:$,typeName:cq.ZodRecord,...w$(K)});return new j1({keyType:AK.create(),valueType:q,typeName:cq.ZodRecord,...w$($)})}}class O1 extends G${get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(q){let{status:$,ctx:K}=this._processInputParams(q);if(K.parsedType!==tq.map)return Bq(K,{code:mq.invalid_type,expected:tq.map,received:K.parsedType}),j$;let _=this._def.keyType,P=this._def.valueType,O=[...K.data.entries()].map(([Y,H],v)=>{return{key:_._parse(new h6(K,Y,K.path,[v,"key"])),value:P._parse(new h6(K,H,K.path,[v,"value"]))}});if(K.common.async){let Y=new Map;return Promise.resolve().then(async()=>{for(let H of O){let v=await H.key,X=await H.value;if(v.status==="aborted"||X.status==="aborted")return j$;if(v.status==="dirty"||X.status==="dirty")$.dirty();Y.set(v.value,X.value)}return{status:$.value,value:Y}})}else{let Y=new Map;for(let H of O){let{key:v,value:X}=H;if(v.status==="aborted"||X.status==="aborted")return j$;if(v.status==="dirty"||X.status==="dirty")$.dirty();Y.set(v.value,X.value)}return{status:$.value,value:Y}}}}O1.create=(q,$,K)=>{return new O1({valueType:$,keyType:q,typeName:cq.ZodMap,...w$(K)})};class M4 extends G${_parse(q){let{status:$,ctx:K}=this._processInputParams(q);if(K.parsedType!==tq.set)return Bq(K,{code:mq.invalid_type,expected:tq.set,received:K.parsedType}),j$;let _=this._def;if(_.minSize!==null){if(K.data.size<_.minSize.value)Bq(K,{code:mq.too_small,minimum:_.minSize.value,type:"set",inclusive:!0,exact:!1,message:_.minSize.message}),$.dirty()}if(_.maxSize!==null){if(K.data.size>_.maxSize.value)Bq(K,{code:mq.too_big,maximum:_.maxSize.value,type:"set",inclusive:!0,exact:!1,message:_.maxSize.message}),$.dirty()}let P=this._def.valueType;function O(H){let v=new Set;for(let X of H){if(X.status==="aborted")return j$;if(X.status==="dirty")$.dirty();v.add(X.value)}return{status:$.value,value:v}}let Y=[...K.data.values()].map((H,v)=>P._parse(new h6(K,H,K.path,v)));if(K.common.async)return Promise.all(Y).then((H)=>O(H));else return O(Y)}min(q,$){return new M4({...this._def,minSize:{value:q,message:sq.toString($)}})}max(q,$){return new M4({...this._def,maxSize:{value:q,message:sq.toString($)}})}size(q,$){return this.min(q,$).max(q,$)}nonempty(q){return this.min(1,q)}}M4.create=(q,$)=>{return new M4({valueType:q,minSize:null,maxSize:null,typeName:cq.ZodSet,...w$($)})};class F7 extends G${constructor(){super(...arguments);this.validate=this.implement}_parse(q){let{ctx:$}=this._processInputParams(q);if($.parsedType!==tq.function)return Bq($,{code:mq.invalid_type,expected:tq.function,received:$.parsedType}),j$;function K(Y,H){return uY({data:Y,path:$.path,errorMaps:[$.common.contextualErrorMap,$.schemaErrorMap,xY(),t7].filter((v)=>!!v),issueData:{code:mq.invalid_arguments,argumentsError:H}})}function _(Y,H){return uY({data:Y,path:$.path,errorMaps:[$.common.contextualErrorMap,$.schemaErrorMap,xY(),t7].filter((v)=>!!v),issueData:{code:mq.invalid_return_type,returnTypeError:H}})}let P={errorMap:$.common.contextualErrorMap},O=$.data;if(this._def.returns instanceof S4){let Y=this;return t8(async function(...H){let v=new X6([]),X=await Y._def.args.parseAsync(H,P).catch((G)=>{throw v.addIssue(K(H,G)),v}),Z=await Reflect.apply(O,this,X);return await Y._def.returns._def.type.parseAsync(Z,P).catch((G)=>{throw v.addIssue(_(Z,G)),v})})}else{let Y=this;return t8(function(...H){let v=Y._def.args.safeParse(H,P);if(!v.success)throw new X6([K(H,v.error)]);let X=Reflect.apply(O,this,v.data),Z=Y._def.returns.safeParse(X,P);if(!Z.success)throw new X6([_(X,Z.error)]);return Z.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...q){return new F7({...this._def,args:GK.create(q).rest(V_.create())})}returns(q){return new F7({...this._def,returns:q})}implement(q){return this.parse(q)}strictImplement(q){return this.parse(q)}static create(q,$,K){return new F7({args:q?q:GK.create([]).rest(V_.create()),returns:$||V_.create(),typeName:cq.ZodFunction,...w$(K)})}}class $P extends G${get schema(){return this._def.getter()}_parse(q){let{ctx:$}=this._processInputParams(q);return this._def.getter()._parse({data:$.data,path:$.path,parent:$})}}$P.create=(q,$)=>{return new $P({getter:q,typeName:cq.ZodLazy,...w$($)})};class KP extends G${_parse(q){if(q.data!==this._def.value){let $=this._getOrReturnCtx(q);return Bq($,{received:$.data,code:mq.invalid_literal,expected:this._def.value}),j$}return{status:"valid",value:q.data}}get value(){return this._def.value}}KP.create=(q,$)=>{return new KP({value:q,typeName:cq.ZodLiteral,...w$($)})};function HJ(q,$){return new M_({values:q,typeName:cq.ZodEnum,...w$($)})}class M_ extends G${constructor(){super(...arguments);i7.set(this,void 0)}_parse(q){if(typeof q.data!=="string"){let $=this._getOrReturnCtx(q),K=this._def.values;return Bq($,{expected:C$.joinValues(K),received:$.parsedType,code:mq.invalid_type}),j$}if(!$1(this,i7,"f"))jJ(this,i7,new Set(this._def.values),"f");if(!$1(this,i7,"f").has(q.data)){let $=this._getOrReturnCtx(q),K=this._def.values;return Bq($,{received:$.data,code:mq.invalid_enum_value,options:K}),j$}return t8(q.data)}get options(){return this._def.values}get enum(){let q={};for(let $ of this._def.values)q[$]=$;return q}get Values(){let q={};for(let $ of this._def.values)q[$]=$;return q}get Enum(){let q={};for(let $ of this._def.values)q[$]=$;return q}extract(q,$=this._def){return M_.create(q,{...this._def,...$})}exclude(q,$=this._def){return M_.create(this.options.filter((K)=>!q.includes(K)),{...this._def,...$})}}i7=new WeakMap;M_.create=HJ;class _P extends G${constructor(){super(...arguments);U7.set(this,void 0)}_parse(q){let $=C$.getValidEnumValues(this._def.values),K=this._getOrReturnCtx(q);if(K.parsedType!==tq.string&&K.parsedType!==tq.number){let _=C$.objectValues($);return Bq(K,{expected:C$.joinValues(_),received:K.parsedType,code:mq.invalid_type}),j$}if(!$1(this,U7,"f"))jJ(this,U7,new Set(C$.getValidEnumValues(this._def.values)),"f");if(!$1(this,U7,"f").has(q.data)){let _=C$.objectValues($);return Bq(K,{received:K.data,code:mq.invalid_enum_value,options:_}),j$}return t8(q.data)}get enum(){return this._def.values}}U7=new WeakMap;_P.create=(q,$)=>{return new _P({values:q,typeName:cq.ZodNativeEnum,...w$($)})};class S4 extends G${unwrap(){return this._def.type}_parse(q){let{ctx:$}=this._processInputParams(q);if($.parsedType!==tq.promise&&$.common.async===!1)return Bq($,{code:mq.invalid_type,expected:tq.promise,received:$.parsedType}),j$;let K=$.parsedType===tq.promise?$.data:Promise.resolve($.data);return t8(K.then((_)=>{return this._def.type.parseAsync(_,{path:$.path,errorMap:$.common.contextualErrorMap})}))}}S4.create=(q,$)=>{return new S4({type:q,typeName:cq.ZodPromise,...w$($)})};class Q6 extends G${innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===cq.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(q){let{status:$,ctx:K}=this._processInputParams(q),_=this._def.effect||null,P={addIssue:(O)=>{if(Bq(K,O),O.fatal)$.abort();else $.dirty()},get path(){return K.path}};if(P.addIssue=P.addIssue.bind(P),_.type==="preprocess"){let O=_.transform(K.data,P);if(K.common.async)return Promise.resolve(O).then(async(Y)=>{if($.value==="aborted")return j$;let H=await this._def.schema._parseAsync({data:Y,path:K.path,parent:K});if(H.status==="aborted")return j$;if(H.status==="dirty")return B7(H.value);if($.value==="dirty")return B7(H.value);return H});else{if($.value==="aborted")return j$;let Y=this._def.schema._parseSync({data:O,path:K.path,parent:K});if(Y.status==="aborted")return j$;if(Y.status==="dirty")return B7(Y.value);if($.value==="dirty")return B7(Y.value);return Y}}if(_.type==="refinement"){let O=(Y)=>{let H=_.refinement(Y,P);if(K.common.async)return Promise.resolve(H);if(H instanceof Promise)throw Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return Y};if(K.common.async===!1){let Y=this._def.schema._parseSync({data:K.data,path:K.path,parent:K});if(Y.status==="aborted")return j$;if(Y.status==="dirty")$.dirty();return O(Y.value),{status:$.value,value:Y.value}}else return this._def.schema._parseAsync({data:K.data,path:K.path,parent:K}).then((Y)=>{if(Y.status==="aborted")return j$;if(Y.status==="dirty")$.dirty();return O(Y.value).then(()=>{return{status:$.value,value:Y.value}})})}if(_.type==="transform")if(K.common.async===!1){let O=this._def.schema._parseSync({data:K.data,path:K.path,parent:K});if(!G4(O))return O;let Y=_.transform(O.value,P);if(Y instanceof Promise)throw Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:$.value,value:Y}}else return this._def.schema._parseAsync({data:K.data,path:K.path,parent:K}).then((O)=>{if(!G4(O))return O;return Promise.resolve(_.transform(O.value,P)).then((Y)=>({status:$.value,value:Y}))});C$.assertNever(_)}}Q6.create=(q,$,K)=>{return new Q6({schema:q,typeName:cq.ZodEffects,effect:$,...w$(K)})};Q6.createWithPreprocess=(q,$,K)=>{return new Q6({schema:$,effect:{type:"preprocess",transform:q},typeName:cq.ZodEffects,...w$(K)})};class t6 extends G${_parse(q){if(this._getType(q)===tq.undefined)return t8(void 0);return this._def.innerType._parse(q)}unwrap(){return this._def.innerType}}t6.create=(q,$)=>{return new t6({innerType:q,typeName:cq.ZodOptional,...w$($)})};class iK extends G${_parse(q){if(this._getType(q)===tq.null)return t8(null);return this._def.innerType._parse(q)}unwrap(){return this._def.innerType}}iK.create=(q,$)=>{return new iK({innerType:q,typeName:cq.ZodNullable,...w$($)})};class PP extends G${_parse(q){let{ctx:$}=this._processInputParams(q),K=$.data;if($.parsedType===tq.undefined)K=this._def.defaultValue();return this._def.innerType._parse({data:K,path:$.path,parent:$})}removeDefault(){return this._def.innerType}}PP.create=(q,$)=>{return new PP({innerType:q,typeName:cq.ZodDefault,defaultValue:typeof $.default==="function"?$.default:()=>$.default,...w$($)})};class YP extends G${_parse(q){let{ctx:$}=this._processInputParams(q),K={...$,common:{...$.common,issues:[]}},_=this._def.innerType._parse({data:K.data,path:K.path,parent:{...K}});if(q1(_))return _.then((P)=>{return{status:"valid",value:P.status==="valid"?P.value:this._def.catchValue({get error(){return new X6(K.common.issues)},input:K.data})}});else return{status:"valid",value:_.status==="valid"?_.value:this._def.catchValue({get error(){return new X6(K.common.issues)},input:K.data})}}removeCatch(){return this._def.innerType}}YP.create=(q,$)=>{return new YP({innerType:q,typeName:cq.ZodCatch,catchValue:typeof $.catch==="function"?$.catch:()=>$.catch,...w$($)})};class W1 extends G${_parse(q){if(this._getType(q)!==tq.nan){let K=this._getOrReturnCtx(q);return Bq(K,{code:mq.invalid_type,expected:tq.nan,received:K.parsedType}),j$}return{status:"valid",value:q.data}}}W1.create=(q)=>{return new W1({typeName:cq.ZodNaN,...w$(q)})};var Go=Symbol("zod_brand");class lY extends G${_parse(q){let{ctx:$}=this._processInputParams(q),K=$.data;return this._def.type._parse({data:K,path:$.path,parent:$})}unwrap(){return this._def.type}}class H1 extends G${_parse(q){let{status:$,ctx:K}=this._processInputParams(q);if(K.common.async)return(async()=>{let P=await this._def.in._parseAsync({data:K.data,path:K.path,parent:K});if(P.status==="aborted")return j$;if(P.status==="dirty")return $.dirty(),B7(P.value);else return this._def.out._parseAsync({data:P.value,path:K.path,parent:K})})();else{let _=this._def.in._parseSync({data:K.data,path:K.path,parent:K});if(_.status==="aborted")return j$;if(_.status==="dirty")return $.dirty(),{status:"dirty",value:_.value};else return this._def.out._parseSync({data:_.value,path:K.path,parent:K})}}static create(q,$){return new H1({in:q,out:$,typeName:cq.ZodPipeline})}}class jP extends G${_parse(q){let $=this._def.innerType._parse(q),K=(_)=>{if(G4(_))_.value=Object.freeze(_.value);return _};return q1($)?$.then((_)=>K(_)):K($)}unwrap(){return this._def.innerType}}jP.create=(q,$)=>{return new jP({innerType:q,typeName:cq.ZodReadonly,...w$($)})};var Zo={object:l$.lazycreate},cq;(function(q){q.ZodString="ZodString",q.ZodNumber="ZodNumber",q.ZodNaN="ZodNaN",q.ZodBigInt="ZodBigInt",q.ZodBoolean="ZodBoolean",q.ZodDate="ZodDate",q.ZodSymbol="ZodSymbol",q.ZodUndefined="ZodUndefined",q.ZodNull="ZodNull",q.ZodAny="ZodAny",q.ZodUnknown="ZodUnknown",q.ZodNever="ZodNever",q.ZodVoid="ZodVoid",q.ZodArray="ZodArray",q.ZodObject="ZodObject",q.ZodUnion="ZodUnion",q.ZodDiscriminatedUnion="ZodDiscriminatedUnion",q.ZodIntersection="ZodIntersection",q.ZodTuple="ZodTuple",q.ZodRecord="ZodRecord",q.ZodMap="ZodMap",q.ZodSet="ZodSet",q.ZodFunction="ZodFunction",q.ZodLazy="ZodLazy",q.ZodLiteral="ZodLiteral",q.ZodEnum="ZodEnum",q.ZodEffects="ZodEffects",q.ZodNativeEnum="ZodNativeEnum",q.ZodOptional="ZodOptional",q.ZodNullable="ZodNullable",q.ZodDefault="ZodDefault",q.ZodCatch="ZodCatch",q.ZodPromise="ZodPromise",q.ZodBranded="ZodBranded",q.ZodPipeline="ZodPipeline",q.ZodReadonly="ZodReadonly"})(cq||(cq={}));var Vo=AK.create,Mo=Z4.create,So=W1.create,Co=V4.create,No=K1.create,Eo=Q7.create,Ro=_1.create,ho=a7.create,Do=e7.create,Io=P1.create,Lo=V_.create,bo=kK.create,go=Y1.create,yo=F6.create,po=l$.create,xo=l$.strictCreate,uo=s7.create,mo=cY.create,co=qP.create,lo=GK.create,oo=j1.create,no=O1.create,ro=M4.create,Bo=F7.create,io=$P.create,Uo=KP.create,Fo=M_.create,to=_P.create,Qo=S4.create,ao=Q6.create,eo=t6.create,so=iK.create,qn=Q6.createWithPreprocess,$n=H1.create;function y$(q){if(q.target!=="openAi")return{};let $=[...q.basePath,q.definitionPath,q.openAiAnyTypeName];return q.flags.hasReferencedOpenAiAnyType=!0,{$ref:q.$refStrategy==="relative"?s9($,q.currentPath):$.join("/")}}function zJ(q,$){let K={type:"array"};if(q.type?._def&&q.type?._def?.typeName!==cq.ZodAny)K.items=P$(q.type._def,{...$,currentPath:[...$.currentPath,"items"]});if(q.minLength)S$(K,"minItems",q.minLength.value,q.minLength.message,$);if(q.maxLength)S$(K,"maxItems",q.maxLength.value,q.maxLength.message,$);if(q.exactLength)S$(K,"minItems",q.exactLength.value,q.exactLength.message,$),S$(K,"maxItems",q.exactLength.value,q.exactLength.message,$);return K}function JJ(q,$){let K={type:"integer",format:"int64"};if(!q.checks)return K;for(let _ of q.checks)switch(_.kind){case"min":if($.target==="jsonSchema7")if(_.inclusive)S$(K,"minimum",_.value,_.message,$);else S$(K,"exclusiveMinimum",_.value,_.message,$);else{if(!_.inclusive)K.exclusiveMinimum=!0;S$(K,"minimum",_.value,_.message,$)}break;case"max":if($.target==="jsonSchema7")if(_.inclusive)S$(K,"maximum",_.value,_.message,$);else S$(K,"exclusiveMaximum",_.value,_.message,$);else{if(!_.inclusive)K.exclusiveMaximum=!0;S$(K,"maximum",_.value,_.message,$)}break;case"multipleOf":S$(K,"multipleOf",_.value,_.message,$);break}return K}function vJ(){return{type:"boolean"}}function z1(q,$){return P$(q.type._def,$)}var wJ=(q,$)=>{return P$(q.innerType._def,$)};function dY(q,$,K){let _=K??$.dateStrategy;if(Array.isArray(_))return{anyOf:_.map((P,O)=>dY(q,$,P))};switch(_){case"string":case"format:date-time":return{type:"string",format:"date-time"};case"format:date":return{type:"string",format:"date"};case"integer":return cS(q,$)}}var cS=(q,$)=>{let K={type:"integer",format:"unix-time"};if($.target==="openApi3")return K;for(let _ of q.checks)switch(_.kind){case"min":S$(K,"minimum",_.value,_.message,$);break;case"max":S$(K,"maximum",_.value,_.message,$);break}return K};function TJ(q,$){return{...P$(q.innerType._def,$),default:q.defaultValue()}}function XJ(q,$){return $.effectStrategy==="input"?P$(q.schema._def,$):y$($)}function fJ(q){return{type:"string",enum:Array.from(q.values)}}var lS=(q)=>{if("type"in q&&q.type==="string")return!1;return"allOf"in q};function AJ(q,$){let K=[P$(q.left._def,{...$,currentPath:[...$.currentPath,"allOf","0"]}),P$(q.right._def,{...$,currentPath:[...$.currentPath,"allOf","1"]})].filter((O)=>!!O),_=$.target==="jsonSchema2019-09"?{unevaluatedProperties:!1}:void 0,P=[];return K.forEach((O)=>{if(lS(O)){if(P.push(...O.allOf),O.unevaluatedProperties===void 0)_=void 0}else{let Y=O;if("additionalProperties"in O&&O.additionalProperties===!1){let{additionalProperties:H,...v}=O;Y=v}else _=void 0;P.push(Y)}}),P.length?{allOf:P,..._}:void 0}function kJ(q,$){let K=typeof q.value;if(K!=="bigint"&&K!=="number"&&K!=="boolean"&&K!=="string")return{type:Array.isArray(q.value)?"array":"object"};if($.target==="openApi3")return{type:K==="bigint"?"integer":K,enum:[q.value]};return{type:K==="bigint"?"integer":K,const:q.value}}var oY=void 0,D6={cuid:/^[cC][^\s-]{8,}$/,cuid2:/^[0-9a-z]+$/,ulid:/^[0-9A-HJKMNP-TV-Z]{26}$/,email:/^(?!\.)(?!.*\.\.)([a-zA-Z0-9_'+\-\.]*)[a-zA-Z0-9_+-]@([a-zA-Z0-9][a-zA-Z0-9\-]*\.)+[a-zA-Z]{2,}$/,emoji:()=>{if(oY===void 0)oY=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u");return oY},uuid:/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/,ipv4:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ipv4Cidr:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,ipv6:/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,ipv6Cidr:/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,base64:/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,base64url:/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,nanoid:/^[a-zA-Z0-9_-]{21}$/,jwt:/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/};function J1(q,$){let K={type:"string"};if(q.checks)for(let _ of q.checks)switch(_.kind){case"min":S$(K,"minLength",typeof K.minLength==="number"?Math.max(K.minLength,_.value):_.value,_.message,$);break;case"max":S$(K,"maxLength",typeof K.maxLength==="number"?Math.min(K.maxLength,_.value):_.value,_.message,$);break;case"email":switch($.emailStrategy){case"format:email":I6(K,"email",_.message,$);break;case"format:idn-email":I6(K,"idn-email",_.message,$);break;case"pattern:zod":d8(K,D6.email,_.message,$);break}break;case"url":I6(K,"uri",_.message,$);break;case"uuid":I6(K,"uuid",_.message,$);break;case"regex":d8(K,_.regex,_.message,$);break;case"cuid":d8(K,D6.cuid,_.message,$);break;case"cuid2":d8(K,D6.cuid2,_.message,$);break;case"startsWith":d8(K,RegExp(`^${nY(_.value,$)}`),_.message,$);break;case"endsWith":d8(K,RegExp(`${nY(_.value,$)}$`),_.message,$);break;case"datetime":I6(K,"date-time",_.message,$);break;case"date":I6(K,"date",_.message,$);break;case"time":I6(K,"time",_.message,$);break;case"duration":I6(K,"duration",_.message,$);break;case"length":S$(K,"minLength",typeof K.minLength==="number"?Math.max(K.minLength,_.value):_.value,_.message,$),S$(K,"maxLength",typeof K.maxLength==="number"?Math.min(K.maxLength,_.value):_.value,_.message,$);break;case"includes":{d8(K,RegExp(nY(_.value,$)),_.message,$);break}case"ip":{if(_.version!=="v6")I6(K,"ipv4",_.message,$);if(_.version!=="v4")I6(K,"ipv6",_.message,$);break}case"base64url":d8(K,D6.base64url,_.message,$);break;case"jwt":d8(K,D6.jwt,_.message,$);break;case"cidr":{if(_.version!=="v6")d8(K,D6.ipv4Cidr,_.message,$);if(_.version!=="v4")d8(K,D6.ipv6Cidr,_.message,$);break}case"emoji":d8(K,D6.emoji(),_.message,$);break;case"ulid":{d8(K,D6.ulid,_.message,$);break}case"base64":{switch($.base64Strategy){case"format:binary":{I6(K,"binary",_.message,$);break}case"contentEncoding:base64":{S$(K,"contentEncoding","base64",_.message,$);break}case"pattern:zod":{d8(K,D6.base64,_.message,$);break}}break}case"nanoid":d8(K,D6.nanoid,_.message,$);case"toLowerCase":case"toUpperCase":case"trim":break;default:((P)=>{})(_)}return K}function nY(q,$){return $.patternStrategy==="escape"?oS(q):q}var dS=new Set("ABCDEFGHIJKLMNOPQRSTUVXYZabcdefghijklmnopqrstuvxyz0123456789");function oS(q){let $="";for(let K=0;K<q.length;K++){if(!dS.has(q[K]))$+="\\";$+=q[K]}return $}function I6(q,$,K,_){if(q.format||q.anyOf?.some((P)=>P.format)){if(!q.anyOf)q.anyOf=[];if(q.format){if(q.anyOf.push({format:q.format,...q.errorMessage&&_.errorMessages&&{errorMessage:{format:q.errorMessage.format}}}),delete q.format,q.errorMessage){if(delete q.errorMessage.format,Object.keys(q.errorMessage).length===0)delete q.errorMessage}}q.anyOf.push({format:$,...K&&_.errorMessages&&{errorMessage:{format:K}}})}else S$(q,"format",$,K,_)}function d8(q,$,K,_){if(q.pattern||q.allOf?.some((P)=>P.pattern)){if(!q.allOf)q.allOf=[];if(q.pattern){if(q.allOf.push({pattern:q.pattern,...q.errorMessage&&_.errorMessages&&{errorMessage:{pattern:q.errorMessage.pattern}}}),delete q.pattern,q.errorMessage){if(delete q.errorMessage.pattern,Object.keys(q.errorMessage).length===0)delete q.errorMessage}}q.allOf.push({pattern:GJ($,_),...K&&_.errorMessages&&{errorMessage:{pattern:K}}})}else S$(q,"pattern",GJ($,_),K,_)}function GJ(q,$){if(!$.applyRegexFlags||!q.flags)return q.source;let K={i:q.flags.includes("i"),m:q.flags.includes("m"),s:q.flags.includes("s")},_=K.i?q.source.toLowerCase():q.source,P="",O=!1,Y=!1,H=!1;for(let v=0;v<_.length;v++){if(O){P+=_[v],O=!1;continue}if(K.i){if(Y){if(_[v].match(/[a-z]/)){if(H)P+=_[v],P+=`${_[v-2]}-${_[v]}`.toUpperCase(),H=!1;else if(_[v+1]==="-"&&_[v+2]?.match(/[a-z]/))P+=_[v],H=!0;else P+=`${_[v]}${_[v].toUpperCase()}`;continue}}else if(_[v].match(/[a-z]/)){P+=`[${_[v]}${_[v].toUpperCase()}]`;continue}}if(K.m){if(_[v]==="^"){P+=`(^|(?<=[\r
]))`;continue}else if(_[v]==="$"){P+=`($|(?=[\r
]))`;continue}}if(K.s&&_[v]==="."){P+=Y?`${_[v]}\r
`:`[${_[v]}\r
]`;continue}if(P+=_[v],_[v]==="\\")O=!0;else if(Y&&_[v]==="]")Y=!1;else if(!Y&&_[v]==="[")Y=!0}try{new RegExp(P)}catch{return console.warn(`Could not convert regex pattern at ${$.currentPath.join("/")} to a flag-independent form! Falling back to the flag-ignorant source`),q.source}return P}function v1(q,$){if($.target==="openAi")console.warn("Warning: OpenAI may not support records in schemas! Try an array of key-value pairs instead.");if($.target==="openApi3"&&q.keyType?._def.typeName===cq.ZodEnum)return{type:"object",required:q.keyType._def.values,properties:q.keyType._def.values.reduce((_,P)=>({..._,[P]:P$(q.valueType._def,{...$,currentPath:[...$.currentPath,"properties",P]})??y$($)}),{}),additionalProperties:$.rejectedAdditionalProperties};let K={type:"object",additionalProperties:P$(q.valueType._def,{...$,currentPath:[...$.currentPath,"additionalProperties"]})??$.allowedAdditionalProperties};if($.target==="openApi3")return K;if(q.keyType?._def.typeName===cq.ZodString&&q.keyType._def.checks?.length){let{type:_,...P}=J1(q.keyType._def,$);return{...K,propertyNames:P}}else if(q.keyType?._def.typeName===cq.ZodEnum)return{...K,propertyNames:{enum:q.keyType._def.values}};else if(q.keyType?._def.typeName===cq.ZodBranded&&q.keyType._def.type._def.typeName===cq.ZodString&&q.keyType._def.type._def.checks?.length){let{type:_,...P}=z1(q.keyType._def,$);return{...K,propertyNames:P}}return K}function ZJ(q,$){if($.mapStrategy==="record")return v1(q,$);let K=P$(q.keyType._def,{...$,currentPath:[...$.currentPath,"items","items","0"]})||y$($),_=P$(q.valueType._def,{...$,currentPath:[...$.currentPath,"items","items","1"]})||y$($);return{type:"array",maxItems:125,items:{type:"array",items:[K,_],minItems:2,maxItems:2}}}function VJ(q){let $=q.values,_=Object.keys(q.values).filter((O)=>{return typeof $[$[O]]!=="number"}).map((O)=>$[O]),P=Array.from(new Set(_.map((O)=>typeof O)));return{type:P.length===1?P[0]==="string"?"string":"number":["string","number"],enum:_}}function MJ(q){return q.target==="openAi"?void 0:{not:y$({...q,currentPath:[...q.currentPath,"not"]})}}function SJ(q){return q.target==="openApi3"?{enum:["null"],nullable:!0}:{type:"null"}}var OP={ZodString:"string",ZodNumber:"number",ZodBigInt:"integer",ZodBoolean:"boolean",ZodNull:"null"};function NJ(q,$){if($.target==="openApi3")return CJ(q,$);let K=q.options instanceof Map?Array.from(q.options.values()):q.options;if(K.every((_)=>(_._def.typeName in OP)&&(!_._def.checks||!_._def.checks.length))){let _=K.reduce((P,O)=>{let Y=OP[O._def.typeName];return Y&&!P.includes(Y)?[...P,Y]:P},[]);return{type:_.length>1?_:_[0]}}else if(K.every((_)=>_._def.typeName==="ZodLiteral"&&!_.description)){let _=K.reduce((P,O)=>{let Y=typeof O._def.value;switch(Y){case"string":case"number":case"boolean":return[...P,Y];case"bigint":return[...P,"integer"];case"object":if(O._def.value===null)return[...P,"null"];case"symbol":case"undefined":case"function":default:return P}},[]);if(_.length===K.length){let P=_.filter((O,Y,H)=>H.indexOf(O)===Y);return{type:P.length>1?P:P[0],enum:K.reduce((O,Y)=>{return O.includes(Y._def.value)?O:[...O,Y._def.value]},[])}}}else if(K.every((_)=>_._def.typeName==="ZodEnum"))return{type:"string",enum:K.reduce((_,P)=>[..._,...P._def.values.filter((O)=>!_.includes(O))],[])};return CJ(q,$)}var CJ=(q,$)=>{let K=(q.options instanceof Map?Array.from(q.options.values()):q.options).map((_,P)=>P$(_._def,{...$,currentPath:[...$.currentPath,"anyOf",`${P}`]})).filter((_)=>!!_&&(!$.strictUnions||typeof _==="object"&&Object.keys(_).length>0));return K.length?{anyOf:K}:void 0};function EJ(q,$){if(["ZodString","ZodNumber","ZodBigInt","ZodBoolean","ZodNull"].includes(q.innerType._def.typeName)&&(!q.innerType._def.checks||!q.innerType._def.checks.length)){if($.target==="openApi3")return{type:OP[q.innerType._def.typeName],nullable:!0};return{type:[OP[q.innerType._def.typeName],"null"]}}if($.target==="openApi3"){let _=P$(q.innerType._def,{...$,currentPath:[...$.currentPath]});if(_&&"$ref"in _)return{allOf:[_],nullable:!0};return _&&{..._,nullable:!0}}let K=P$(q.innerType._def,{...$,currentPath:[...$.currentPath,"anyOf","0"]});return K&&{anyOf:[K,{type:"null"}]}}function RJ(q,$){let K={type:"number"};if(!q.checks)return K;for(let _ of q.checks)switch(_.kind){case"int":K.type="integer",yY(K,"type",_.message,$);break;case"min":if($.target==="jsonSchema7")if(_.inclusive)S$(K,"minimum",_.value,_.message,$);else S$(K,"exclusiveMinimum",_.value,_.message,$);else{if(!_.inclusive)K.exclusiveMinimum=!0;S$(K,"minimum",_.value,_.message,$)}break;case"max":if($.target==="jsonSchema7")if(_.inclusive)S$(K,"maximum",_.value,_.message,$);else S$(K,"exclusiveMaximum",_.value,_.message,$);else{if(!_.inclusive)K.exclusiveMaximum=!0;S$(K,"maximum",_.value,_.message,$)}break;case"multipleOf":S$(K,"multipleOf",_.value,_.message,$);break}return K}function hJ(q,$){let K=$.target==="openAi",_={type:"object",properties:{}},P=[],O=q.shape();for(let H in O){let v=O[H];if(v===void 0||v._def===void 0)continue;let X=rS(v);if(X&&K){if(v._def.typeName==="ZodOptional")v=v._def.innerType;if(!v.isNullable())v=v.nullable();X=!1}let Z=P$(v._def,{...$,currentPath:[...$.currentPath,"properties",H],propertyPath:[...$.currentPath,"properties",H]});if(Z===void 0)continue;if(_.properties[H]=Z,!X)P.push(H)}if(P.length)_.required=P;let Y=nS(q,$);if(Y!==void 0)_.additionalProperties=Y;return _}function nS(q,$){if(q.catchall._def.typeName!=="ZodNever")return P$(q.catchall._def,{...$,currentPath:[...$.currentPath,"additionalProperties"]});switch(q.unknownKeys){case"passthrough":return $.allowedAdditionalProperties;case"strict":return $.rejectedAdditionalProperties;case"strip":return $.removeAdditionalStrategy==="strict"?$.allowedAdditionalProperties:$.rejectedAdditionalProperties}}function rS(q){try{return q.isOptional()}catch{return!0}}var DJ=(q,$)=>{if($.currentPath.toString()===$.propertyPath?.toString())return P$(q.innerType._def,$);let K=P$(q.innerType._def,{...$,currentPath:[...$.currentPath,"anyOf","1"]});return K?{anyOf:[{not:y$($)},K]}:y$($)};var IJ=(q,$)=>{if($.pipeStrategy==="input")return P$(q.in._def,$);else if($.pipeStrategy==="output")return P$(q.out._def,$);let K=P$(q.in._def,{...$,currentPath:[...$.currentPath,"allOf","0"]}),_=P$(q.out._def,{...$,currentPath:[...$.currentPath,"allOf",K?"1":"0"]});return{allOf:[K,_].filter((P)=>P!==void 0)}};function LJ(q,$){return P$(q.type._def,$)}function bJ(q,$){let _={type:"array",uniqueItems:!0,items:P$(q.valueType._def,{...$,currentPath:[...$.currentPath,"items"]})};if(q.minSize)S$(_,"minItems",q.minSize.value,q.minSize.message,$);if(q.maxSize)S$(_,"maxItems",q.maxSize.value,q.maxSize.message,$);return _}function gJ(q,$){if(q.rest)return{type:"array",minItems:q.items.length,items:q.items.map((K,_)=>P$(K._def,{...$,currentPath:[...$.currentPath,"items",`${_}`]})).reduce((K,_)=>_===void 0?K:[...K,_],[]),additionalItems:P$(q.rest._def,{...$,currentPath:[...$.currentPath,"additionalItems"]})};else return{type:"array",minItems:q.items.length,maxItems:q.items.length,items:q.items.map((K,_)=>P$(K._def,{...$,currentPath:[...$.currentPath,"items",`${_}`]})).reduce((K,_)=>_===void 0?K:[...K,_],[])}}function yJ(q){return{not:y$(q)}}function pJ(q){return y$(q)}var xJ=(q,$)=>{return P$(q.innerType._def,$)};var uJ=(q,$,K)=>{switch($){case cq.ZodString:return J1(q,K);case cq.ZodNumber:return RJ(q,K);case cq.ZodObject:return hJ(q,K);case cq.ZodBigInt:return JJ(q,K);case cq.ZodBoolean:return vJ();case cq.ZodDate:return dY(q,K);case cq.ZodUndefined:return yJ(K);case cq.ZodNull:return SJ(K);case cq.ZodArray:return zJ(q,K);case cq.ZodUnion:case cq.ZodDiscriminatedUnion:return NJ(q,K);case cq.ZodIntersection:return AJ(q,K);case cq.ZodTuple:return gJ(q,K);case cq.ZodRecord:return v1(q,K);case cq.ZodLiteral:return kJ(q,K);case cq.ZodEnum:return fJ(q);case cq.ZodNativeEnum:return VJ(q);case cq.ZodNullable:return EJ(q,K);case cq.ZodOptional:return DJ(q,K);case cq.ZodMap:return ZJ(q,K);case cq.ZodSet:return bJ(q,K);case cq.ZodLazy:return()=>q.getter()._def;case cq.ZodPromise:return LJ(q,K);case cq.ZodNaN:case cq.ZodNever:return MJ(K);case cq.ZodEffects:return XJ(q,K);case cq.ZodAny:return y$(K);case cq.ZodUnknown:return pJ(K);case cq.ZodDefault:return TJ(q,K);case cq.ZodBranded:return z1(q,K);case cq.ZodReadonly:return xJ(q,K);case cq.ZodCatch:return wJ(q,K);case cq.ZodPipeline:return IJ(q,K);case cq.ZodFunction:case cq.ZodVoid:case cq.ZodSymbol:return;default:return((_)=>{return})($)}};function P$(q,$,K=!1){let _=$.seen.get(q);if($.override){let H=$.override?.(q,$,_,K);if(H!==sz)return H}if(_&&!K){let H=BS(_,$);if(H!==void 0)return H}let P={def:q,path:$.currentPath,jsonSchema:void 0};$.seen.set(q,P);let O=uJ(q,q.typeName,$),Y=typeof O==="function"?P$(O(),$):O;if(Y)iS(q,$,Y);if($.postProcess){let H=$.postProcess(Y,q,$);return P.jsonSchema=Y,H}return P.jsonSchema=Y,Y}var BS=(q,$)=>{switch($.$refStrategy){case"root":return{$ref:q.path.join("/")};case"relative":return{$ref:s9($.currentPath,q.path)};case"none":case"seen":{if(q.path.length<$.currentPath.length&&q.path.every((K,_)=>$.currentPath[_]===K))return console.warn(`Recursive reference detected at ${$.currentPath.join("/")}! Defaulting to any`),y$($);return $.$refStrategy==="seen"?y$($):void 0}}},iS=(q,$,K)=>{if(q.description){if(K.description=q.description,$.markdownDescription)K.markdownDescription=q.description}return K};var rY=(q,$)=>{let K=$J($),_=typeof $==="object"&&$.definitions?Object.entries($.definitions).reduce((v,[X,Z])=>({...v,[X]:P$(Z._def,{...K,currentPath:[...K.basePath,K.definitionPath,X]},!0)??y$(K)}),{}):void 0,P=typeof $==="string"?$:$?.nameStrategy==="title"?void 0:$?.name,O=P$(q._def,P===void 0?K:{...K,currentPath:[...K.basePath,K.definitionPath,P]},!1)??y$(K),Y=typeof $==="object"&&$.name!==void 0&&$.nameStrategy==="title"?$.name:void 0;if(Y!==void 0)O.title=Y;if(K.flags.hasReferencedOpenAiAnyType){if(!_)_={};if(!_[K.openAiAnyTypeName])_[K.openAiAnyTypeName]={type:["string","number","integer","boolean","array","null"],items:{$ref:K.$refStrategy==="relative"?"1":[...K.basePath,K.definitionPath,K.openAiAnyTypeName].join("/")}}}let H=P===void 0?_?{...O,[K.definitionPath]:_}:O:{$ref:[...K.$refStrategy==="relative"?[]:K.basePath,K.definitionPath,P].join("/"),[K.definitionPath]:{..._,[P]:O}};if(K.target==="jsonSchema7")H.$schema="http://json-schema.org/draft-07/schema#";else if(K.target==="jsonSchema2019-09"||K.target==="openAi")H.$schema="https://json-schema.org/draft/2019-09/schema#";if(K.target==="openAi"&&(("anyOf"in H)||("oneOf"in H)||("allOf"in H)||("type"in H)&&Array.isArray(H.type)))console.warn("Warning: OpenAI may not support schemas with unions as roots! Try wrapping it in an object property.");return H};function a6(q){if(typeof q!=="object"||q===null)return!1;let $=q;if(!("_zod"in $))return!1;let K=$._zod;return typeof K==="object"&&K!==null&&"def"in K}function ZK(q){if(typeof q!=="object"||q===null)return!1;let $=q;if(!("_def"in $)||"_zod"in $)return!1;let K=$._def;return typeof K==="object"&&K!=null&&"typeName"in K}function US(q){if(!q)return!1;if(typeof q!=="object")return!1;if(Array.isArray(q))return!1;if(a6(q)||ZK(q))return!0;return!1}async function mJ(q,$){if(a6(q))return iz(q,$);if(ZK(q))return q.parse($);throw Error("Schema must be an instance of z3.ZodType or z4.$ZodType")}function cJ(q){if(a6(q))return U6.get(q)?.description;if(ZK(q))return q.description;if("description"in q&&typeof q.description==="string")return q.description;return}function lJ(q){if(!US(q))return!1;if(ZK(q))return q._def.typeName==="ZodString";if(a6(q))return q._zod.def.type==="string";return!1}function N4(q){if(!a6(q))return!1;if(typeof q==="object"&&q!==null&&"_zod"in q&&typeof q._zod==="object"&&q._zod!==null&&"def"in q._zod&&typeof q._zod.def==="object"&&q._zod.def!==null&&"type"in q._zod.def&&q._zod.def.type==="object")return!0;return!1}function dJ(q){if(!a6(q))return!1;if(typeof q==="object"&&q!==null&&"_zod"in q&&typeof q._zod==="object"&&q._zod!==null&&"def"in q._zod&&typeof q._zod.def==="object"&&q._zod.def!==null&&"type"in q._zod.def&&q._zod.def.type==="array")return!0;return!1}function w1(q,$=!1){if(ZK(q))return q.strict();if(N4(q)){let K=q._zod.def.shape;if($)for(let[O,Y]of Object.entries(q._zod.def.shape)){if(N4(Y)){let v=w1(Y,$);K[O]=v}else if(dJ(Y)){let v=Y._zod.def.element;if(N4(v))v=w1(v,$);K[O]=A4(Y,{...Y._zod.def,element:v})}else K[O]=Y;let H=U6.get(Y);if(H)U6.add(K[O],H)}let _=A4(q,{...q._zod.def,shape:K,catchall:az(Qz)}),P=U6.get(q);if(P)U6.add(_,P);return _}throw Error("Schema must be an instance of z3.ZodObject or z4.$ZodObject")}function FS(q){return ZK(q)&&"typeName"in q._def&&q._def.typeName==="ZodEffects"}function tS(q){return a6(q)&&q._zod.def.type==="pipe"}function C4(q,$=!1){if(ZK(q)){if(FS(q))return C4(q._def.schema,$);return q}if(a6(q)){let K=q;if(tS(q))K=C4(q._zod.def.in,$);if($){if(N4(K)){let P=K._zod.def.shape;for(let[O,Y]of Object.entries(K._zod.def.shape))P[O]=C4(Y,$);K=A4(K,{...K._zod.def,shape:P})}else if(dJ(K)){let P=C4(K._zod.def.element,$);K=A4(K,{...K._zod.def,element:P})}}let _=U6.get(q);if(_)U6.add(K,_);return K}throw Error("Schema must be an instance of z3.ZodType or z4.$ZodType")}function oJ(q){if(a6(q)){let $=C4(q,!0);if(N4($)){let K=w1($,!0);return gY(K)}else return gY(q)}if(ZK(q))return rY(q);return q}function QS(q,$){if(q!==void 0&&!O4(q))return q;else if(d7($))try{let K=$.getName();return K=K.startsWith("Runnable")?K.slice(8):K,K}catch(K){return $.getName()}else return $.name??"UnknownSchema"}function aS(q){if(d7(q.data))return{type:"runnable",data:{id:q.data.lc_id,name:q.data.getName()}};else return{type:"schema",data:{...oJ(q.data.schema),title:q.data.name}}}class WP{constructor(q){Object.defineProperty(this,"nodes",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"edges",{enumerable:!0,configurable:!0,writable:!0,value:[]}),this.nodes=q?.nodes??this.nodes,this.edges=q?.edges??this.edges}toJSON(){let q={};return Object.values(this.nodes).forEach(($,K)=>{q[$.id]=O4($.id)?K:$.id}),{nodes:Object.values(this.nodes).map(($)=>({id:q[$.id],...aS($)})),edges:this.edges.map(($)=>{let K={source:q[$.source],target:q[$.target]};if(typeof $.data<"u")K.data=$.data;if(typeof $.conditional<"u")K.conditional=$.conditional;return K})}}addNode(q,$,K){if($!==void 0&&this.nodes[$]!==void 0)throw Error(`Node with id ${$} already exists`);let _=$??B8(),P={id:_,data:q,name:QS($,q),metadata:K};return this.nodes[_]=P,P}removeNode(q){delete this.nodes[q.id],this.edges=this.edges.filter(($)=>$.source!==q.id&&$.target!==q.id)}addEdge(q,$,K,_){if(this.nodes[q.id]===void 0)throw Error(`Source node ${q.id} not in graph`);if(this.nodes[$.id]===void 0)throw Error(`Target node ${$.id} not in graph`);let P={source:q.id,target:$.id,data:K,conditional:_};return this.edges.push(P),P}firstNode(){return nJ(this)}lastNode(){return rJ(this)}extend(q,$=""){let K=$;if(Object.values(q.nodes).map((v)=>v.id).every(O4))K="";let P=(v)=>{return K?`${K}:${v}`:v};Object.entries(q.nodes).forEach(([v,X])=>{this.nodes[P(v)]={...X,id:P(v)}});let O=q.edges.map((v)=>{return{...v,source:P(v.source),target:P(v.target)}});this.edges=[...this.edges,...O];let Y=q.firstNode(),H=q.lastNode();return[Y?{id:P(Y.id),data:Y.data}:void 0,H?{id:P(H.id),data:H.data}:void 0]}trimFirstNode(){let q=this.firstNode();if(q&&nJ(this,[q.id]))this.removeNode(q)}trimLastNode(){let q=this.lastNode();if(q&&rJ(this,[q.id]))this.removeNode(q)}reid(){let q=Object.fromEntries(Object.values(this.nodes).map((_)=>[_.id,_.name])),$=new Map;Object.values(q).forEach((_)=>{$.set(_,($.get(_)||0)+1)});let K=(_)=>{let P=q[_];if(O4(_)&&$.get(P)===1)return P;else return _};return new WP({nodes:Object.fromEntries(Object.entries(this.nodes).map(([_,P])=>[K(_),{...P,id:K(_)}])),edges:this.edges.map((_)=>({..._,source:K(_.source),target:K(_.target)}))})}drawMermaid(q){let{withStyles:$,curveStyle:K,nodeColors:_={default:"fill:#f2f0ff,line-height:1.2",first:"fill-opacity:0",last:"fill:#bfb6fc"},wrapLabelNWords:P}=q??{},O=this.reid(),Y=O.firstNode(),H=O.lastNode();return uz(O.nodes,O.edges,{firstNode:Y?.id,lastNode:H?.id,withStyles:$,curveStyle:K,nodeColors:_,wrapLabelNWords:P})}async drawMermaidPng(q){let $=this.drawMermaid(q);return mz($,{backgroundColor:q?.backgroundColor})}}function nJ(q,$=[]){let K=new Set(q.edges.filter((P)=>!$.includes(P.source)).map((P)=>P.target)),_=[];for(let P of Object.values(q.nodes))if(!$.includes(P.id)&&!K.has(P.id))_.push(P);return _.length===1?_[0]:void 0}function rJ(q,$=[]){let K=new Set(q.edges.filter((P)=>!$.includes(P.target)).map((P)=>P.source)),_=[];for(let P of Object.values(q.nodes))if(!$.includes(P.id)&&!K.has(P.id))_.push(P);return _.length===1?_[0]:void 0}function BJ(q){let $=new TextEncoder,K=new ReadableStream({async start(_){for await(let P of q)_.enqueue($.encode(`event: data
data: ${JSON.stringify(P)}

`));_.enqueue($.encode(`event: end

`)),_.close()}});return S8.fromReadableStream(K)}function BY(q){return typeof q==="object"&&q!==null&&typeof q[Symbol.iterator]==="function"&&typeof q.next==="function"}var iJ=(q)=>q!=null&&typeof q==="object"&&("next"in q)&&typeof q.next==="function";function T1(q){return typeof q==="object"&&q!==null&&typeof q[Symbol.asyncIterator]==="function"}function*iY(q,$){while(!0){let{value:K,done:_}=Y6.runWithConfig(XK(q),$.next.bind($),!0);if(_)break;else yield K}}async function*X1(q,$){let K=$[Symbol.asyncIterator]();while(!0){let{value:_,done:P}=await Y6.runWithConfig(XK(q),K.next.bind($),!0);if(P)break;else yield _}}function J8(q,$){return q&&!Array.isArray(q)&&!(q instanceof Date)&&typeof q==="object"?q:{[$]:q}}class C8 extends wK{constructor(){super(...arguments);Object.defineProperty(this,"lc_runnable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}getName(q){let $=this.name??this.constructor.lc_name()??this.constructor.name;return q?`${$}${q}`:$}bind(q){return new N_({bound:this,kwargs:q,config:{}})}map(){return new f1({bound:this})}withRetry(q){return new tY({bound:this,kwargs:{},config:{},maxAttemptNumber:q?.stopAfterAttempt,...q})}withConfig(q){return new N_({bound:this,config:q,kwargs:{}})}withFallbacks(q){let $=Array.isArray(q)?q:q.fallbacks;return new UJ({runnable:this,fallbacks:$})}_getOptionsList(q,$=0){if(Array.isArray(q)&&q.length!==$)throw Error(`Passed "options" must be an array with the same length as the inputs, but got ${q.length} options for ${$} inputs`);if(Array.isArray(q))return q.map(D$);if($>1&&!Array.isArray(q)&&q.runId){console.warn("Provided runId will be used only for the first element of the batch.");let K=Object.fromEntries(Object.entries(q).filter(([_])=>_!=="runId"));return Array.from({length:$},(_,P)=>D$(P===0?q:K))}return Array.from({length:$},()=>D$(q))}async batch(q,$,K){let _=this._getOptionsList($??{},q.length),P=_[0]?.maxConcurrency??K?.maxConcurrency,O=new U9({maxConcurrency:P,onFailedAttempt:(H)=>{throw H}}),Y=q.map((H,v)=>O.call(async()=>{try{return await this.invoke(H,_[v])}catch(X){if(K?.returnExceptions)return X;throw X}}));return Promise.all(Y)}async*_streamIterator(q,$){yield this.invoke(q,$)}async stream(q,$){let K=D$($),_=new rK({generator:this._streamIterator(q,K),config:K});return await _.setup,S8.fromAsyncGenerator(_)}_separateRunnableConfigFromCallOptions(q){let $;if(q===void 0)$=D$(q);else $=D$({callbacks:q.callbacks,tags:q.tags,metadata:q.metadata,runName:q.runName,configurable:q.configurable,recursionLimit:q.recursionLimit,maxConcurrency:q.maxConcurrency,runId:q.runId,timeout:q.timeout,signal:q.signal});let K={...q};return delete K.callbacks,delete K.tags,delete K.metadata,delete K.runName,delete K.configurable,delete K.recursionLimit,delete K.maxConcurrency,delete K.runId,delete K.timeout,delete K.signal,[$,K]}async _callWithConfig(q,$,K){let _=D$(K),O=await(await T6(_))?.handleChainStart(this.toJSON(),J8($,"input"),_.runId,_?.runType,void 0,void 0,_?.runName??this.getName());delete _.runId;let Y;try{let H=q.call(this,$,_,O);Y=await B6(H,K?.signal)}catch(H){throw await O?.handleChainError(H),H}return await O?.handleChainEnd(J8(Y,"output")),Y}async _batchWithConfig(q,$,K,_){let P=this._getOptionsList(K??{},$.length),O=await Promise.all(P.map(T6)),Y=await Promise.all(O.map(async(v,X)=>{let Z=await v?.handleChainStart(this.toJSON(),J8($[X],"input"),P[X].runId,P[X].runType,void 0,void 0,P[X].runName??this.getName());return delete P[X].runId,Z})),H;try{let v=q.call(this,$,P,Y,_);H=await B6(v,P?.[0]?.signal)}catch(v){throw await Promise.all(Y.map((X)=>X?.handleChainError(v))),v}return await Promise.all(Y.map((v)=>v?.handleChainEnd(J8(H,"output")))),H}_concatOutputChunks(q,$){return EY(q,$)}async*_transformStreamWithConfig(q,$,K){let _,P=!0,O,Y=!0,H=D$(K),v=await T6(H),X=this;async function*Z(){for await(let G of q){if(P)if(_===void 0)_=G;else try{_=X._concatOutputChunks(_,G)}catch{_=void 0,P=!1}yield G}}let k;try{let G=await Lz($.bind(this),Z(),async()=>v?.handleChainStart(this.toJSON(),{input:""},H.runId,H.runType,void 0,void 0,H.runName??this.getName()),K?.signal,H);delete H.runId,k=G.setup;let S=k?.handlers.find(pz),N=G.output;if(S!==void 0&&k!==void 0)N=S.tapOutputIterable(k.runId,N);let E=k?.handlers.find(yz);if(E!==void 0&&k!==void 0)N=E.tapOutputIterable(k.runId,N);for await(let h of N)if(yield h,Y)if(O===void 0)O=h;else try{O=this._concatOutputChunks(O,h)}catch{O=void 0,Y=!1}}catch(G){throw await k?.handleChainError(G,void 0,void 0,void 0,{inputs:J8(_,"input")}),G}await k?.handleChainEnd(O??{},void 0,void 0,void 0,{inputs:J8(_,"input")})}getGraph(q){let $=new WP,K=$.addNode({name:`${this.getName()}Input`,schema:v_.any()}),_=$.addNode(this),P=$.addNode({name:`${this.getName()}Output`,schema:v_.any()});return $.addEdge(K,_),$.addEdge(_,P),$}pipe(q){return new S_({first:this,last:C_(q)})}pick(q){return this.pipe(new tJ(q))}assign(q){return this.pipe(new FJ(new HP({steps:q})))}async*transform(q,$){let K;for await(let _ of q)if(K===void 0)K=_;else K=this._concatOutputChunks(K,_);yield*this._streamIterator(K,D$($))}async*streamLog(q,$,K){let _=new r9({...K,autoClose:!1,_schemaFormat:"original"}),P=D$($);yield*this._streamLog(q,_,P)}async*_streamLog(q,$,K){let{callbacks:_}=K;if(_===void 0)K.callbacks=[$];else if(Array.isArray(_))K.callbacks=_.concat([$]);else{let H=_.copy();H.addHandler($,!0),K.callbacks=H}let P=this.stream(q,K);async function O(){try{let H=await P;for await(let v of H){let X=new i6({ops:[{op:"add",path:"/streamed_output/-",value:v}]});await $.writer.write(X)}}finally{await $.writer.close()}}let Y=O();try{for await(let H of $)yield H}finally{await Y}}streamEvents(q,$,K){let _;if($.version==="v1")_=this._streamEventsV1(q,$,K);else if($.version==="v2")_=this._streamEventsV2(q,$,K);else throw Error('Only versions "v1" and "v2" of the schema are currently supported.');if($.encoding==="text/event-stream")return BJ(_);else return S8.fromAsyncGenerator(_)}async*_streamEventsV2(q,$,K){let _=new RY({...K,autoClose:!1}),P=D$($),O=P.runId??B8();P.runId=O;let Y=P.callbacks;if(Y===void 0)P.callbacks=[_];else if(Array.isArray(Y))P.callbacks=Y.concat(_);else{let S=Y.copy();S.addHandler(_,!0),P.callbacks=S}let H=new AbortController,v=this;async function X(){let S,N=null;try{if($?.signal)if("any"in AbortSignal)S=AbortSignal.any([H.signal,$.signal]);else S=$.signal,N=()=>{H.abort()},$.signal.addEventListener("abort",N,{once:!0});else S=H.signal;let E=await v.stream(q,{...P,signal:S}),h=_.tapOutputIterable(O,E);for await(let D of h)if(H.signal.aborted)break}finally{if(await _.finish(),S&&N)S.removeEventListener("abort",N)}}let Z=X(),k=!1,G;try{for await(let S of _){if(!k){S.data.input=q,k=!0,G=S.run_id,yield S;continue}if(S.run_id===G&&S.event.endsWith("_end")){if(S.data?.input)delete S.data.input}yield S}}finally{H.abort(),await Z}}async*_streamEventsV1(q,$,K){let _,P=!1,O=D$($),Y=O.tags??[],H=O.metadata??{},v=O.runName??this.getName(),X=new r9({...K,autoClose:!1,_schemaFormat:"streaming_events"}),Z=new hY({...K}),k=this._streamLog(q,X,O);for await(let S of k){if(!_)_=X4.fromRunLogPatch(S);else _=_.concat(S);if(_.state===void 0)throw Error('Internal error: "streamEvents" state is missing. Please open a bug report.');if(!P){P=!0;let D={..._.state},I={run_id:D.id,event:`on_${D.type}_start`,name:v,tags:Y,metadata:H,data:{input:q}};if(Z.includeEvent(I,D.type))yield I}let N=S.ops.filter((D)=>D.path.startsWith("/logs/")).map((D)=>D.path.split("/")[2]),E=[...new Set(N)];for(let D of E){let I,g={},y=_.state.logs[D];if(y.end_time===void 0)if(y.streamed_output.length>0)I="stream";else I="start";else I="end";if(I==="start"){if(y.inputs!==void 0)g.input=y.inputs}else if(I==="end"){if(y.inputs!==void 0)g.input=y.inputs;g.output=y.final_output}else if(I==="stream"){let p=y.streamed_output.length;if(p!==1)throw Error(`Expected exactly one chunk of streamed output, got ${p} instead. Encountered in: "${y.name}"`);g={chunk:y.streamed_output[0]},y.streamed_output=[]}yield{event:`on_${y.type}_${I}`,name:y.name,run_id:y.id,tags:y.tags,metadata:y.metadata,data:g}}let{state:h}=_;if(h.streamed_output.length>0){let D=h.streamed_output.length;if(D!==1)throw Error(`Expected exactly one chunk of streamed output, got ${D} instead. Encountered in: "${h.name}"`);let I={chunk:h.streamed_output[0]};h.streamed_output=[];let g={event:`on_${h.type}_stream`,run_id:h.id,tags:Y,metadata:H,name:v,data:I};if(Z.includeEvent(g,h.type))yield g}}let G=_?.state;if(G!==void 0){let S={event:`on_${G.type}_end`,name:v,run_id:G.id,tags:Y,metadata:H,data:{output:G.final_output}};if(Z.includeEvent(S,G.type))yield S}}static isRunnable(q){return d7(q)}withListeners({onStart:q,onEnd:$,onError:K}){return new N_({bound:this,config:{},configFactories:[(_)=>({callbacks:[new F9({config:_,onStart:q,onEnd:$,onError:K})]})]})}asTool(q){return sS(this,q)}}class N_ extends C8{static lc_name(){return"RunnableBinding"}constructor(q){super(q);Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"bound",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"config",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"kwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"configFactories",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.bound=q.bound,this.kwargs=q.kwargs,this.config=q.config,this.configFactories=q.configFactories}getName(q){return this.bound.getName(q)}async _mergeConfig(...q){let $=CY(this.config,...q);return CY($,...this.configFactories?await Promise.all(this.configFactories.map(async(K)=>await K($))):[])}bind(q){return new this.constructor({bound:this.bound,kwargs:{...this.kwargs,...q},config:this.config})}withConfig(q){return new this.constructor({bound:this.bound,kwargs:this.kwargs,config:{...this.config,...q}})}withRetry(q){return new tY({bound:this.bound,kwargs:this.kwargs,config:this.config,maxAttemptNumber:q?.stopAfterAttempt,...q})}async invoke(q,$){return this.bound.invoke(q,await this._mergeConfig(D$($),this.kwargs))}async batch(q,$,K){let _=Array.isArray($)?await Promise.all($.map(async(P)=>this._mergeConfig(D$(P),this.kwargs))):await this._mergeConfig(D$($),this.kwargs);return this.bound.batch(q,_,K)}_concatOutputChunks(q,$){return this.bound._concatOutputChunks(q,$)}async*_streamIterator(q,$){yield*this.bound._streamIterator(q,await this._mergeConfig(D$($),this.kwargs))}async stream(q,$){return this.bound.stream(q,await this._mergeConfig(D$($),this.kwargs))}async*transform(q,$){yield*this.bound.transform(q,await this._mergeConfig(D$($),this.kwargs))}streamEvents(q,$,K){let _=this,P=async function*(){yield*_.bound.streamEvents(q,{...await _._mergeConfig(D$($),_.kwargs),version:$.version},K)};return S8.fromAsyncGenerator(P())}static isRunnableBinding(q){return q.bound&&C8.isRunnable(q.bound)}withListeners({onStart:q,onEnd:$,onError:K}){return new N_({bound:this.bound,kwargs:this.kwargs,config:this.config,configFactories:[(_)=>({callbacks:[new F9({config:_,onStart:q,onEnd:$,onError:K})]})]})}}class f1 extends C8{static lc_name(){return"RunnableEach"}constructor(q){super(q);Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"bound",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.bound=q.bound}bind(q){return new f1({bound:this.bound.bind(q)})}async invoke(q,$){return this._callWithConfig(this._invoke.bind(this),q,$)}async _invoke(q,$,K){return this.bound.batch(q,M8($,{callbacks:K?.getChild()}))}withListeners({onStart:q,onEnd:$,onError:K}){return new f1({bound:this.bound.withListeners({onStart:q,onEnd:$,onError:K})})}}class tY extends N_{static lc_name(){return"RunnableRetry"}constructor(q){super(q);Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"maxAttemptNumber",{enumerable:!0,configurable:!0,writable:!0,value:3}),Object.defineProperty(this,"onFailedAttempt",{enumerable:!0,configurable:!0,writable:!0,value:()=>{}}),this.maxAttemptNumber=q.maxAttemptNumber??this.maxAttemptNumber,this.onFailedAttempt=q.onFailedAttempt??this.onFailedAttempt}_patchConfigForRetry(q,$,K){let _=q>1?`retry:attempt:${q}`:void 0;return M8($,{callbacks:K?.getChild(_)})}async _invoke(q,$,K){return UY.default((_)=>super.invoke(q,this._patchConfigForRetry(_,$,K)),{onFailedAttempt:(_)=>this.onFailedAttempt(_,q),retries:Math.max(this.maxAttemptNumber-1,0),randomize:!0})}async invoke(q,$){return this._callWithConfig(this._invoke.bind(this),q,$)}async _batch(q,$,K,_){let P={};try{await UY.default(async(O)=>{let Y=q.map((k,G)=>G).filter((k)=>P[k.toString()]===void 0||P[k.toString()]instanceof Error),H=Y.map((k)=>q[k]),v=Y.map((k)=>this._patchConfigForRetry(O,$?.[k],K?.[k])),X=await super.batch(H,v,{..._,returnExceptions:!0}),Z;for(let k=0;k<X.length;k+=1){let G=X[k],S=Y[k];if(G instanceof Error){if(Z===void 0)Z=G,Z.input=H[k]}P[S.toString()]=G}if(Z)throw Z;return X},{onFailedAttempt:(O)=>this.onFailedAttempt(O,O.input),retries:Math.max(this.maxAttemptNumber-1,0),randomize:!0})}catch(O){if(_?.returnExceptions!==!0)throw O}return Object.keys(P).sort((O,Y)=>parseInt(O,10)-parseInt(Y,10)).map((O)=>P[parseInt(O,10)])}async batch(q,$,K){return this._batchWithConfig(this._batch.bind(this),q,$,K)}}class S_ extends C8{static lc_name(){return"RunnableSequence"}constructor(q){super(q);Object.defineProperty(this,"first",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"middle",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"last",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"omitSequenceTags",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),this.first=q.first,this.middle=q.middle??this.middle,this.last=q.last,this.name=q.name,this.omitSequenceTags=q.omitSequenceTags??this.omitSequenceTags}get steps(){return[this.first,...this.middle,this.last]}async invoke(q,$){let K=D$($),P=await(await T6(K))?.handleChainStart(this.toJSON(),J8(q,"input"),K.runId,void 0,void 0,void 0,K?.runName);delete K.runId;let O=q,Y;try{let H=[this.first,...this.middle];for(let v=0;v<H.length;v+=1){let Z=H[v].invoke(O,M8(K,{callbacks:P?.getChild(this.omitSequenceTags?void 0:`seq:step:${v+1}`)}));O=await B6(Z,$?.signal)}if($?.signal?.aborted)throw Error("Aborted");Y=await this.last.invoke(O,M8(K,{callbacks:P?.getChild(this.omitSequenceTags?void 0:`seq:step:${this.steps.length}`)}))}catch(H){throw await P?.handleChainError(H),H}return await P?.handleChainEnd(J8(Y,"output")),Y}async batch(q,$,K){let _=this._getOptionsList($??{},q.length),P=await Promise.all(_.map(T6)),O=await Promise.all(P.map(async(H,v)=>{let X=await H?.handleChainStart(this.toJSON(),J8(q[v],"input"),_[v].runId,void 0,void 0,void 0,_[v].runName);return delete _[v].runId,X})),Y=q;try{for(let H=0;H<this.steps.length;H+=1){let X=this.steps[H].batch(Y,O.map((Z,k)=>{let G=Z?.getChild(this.omitSequenceTags?void 0:`seq:step:${H+1}`);return M8(_[k],{callbacks:G})}),K);Y=await B6(X,_[0]?.signal)}}catch(H){throw await Promise.all(O.map((v)=>v?.handleChainError(H))),H}return await Promise.all(O.map((H)=>H?.handleChainEnd(J8(Y,"output")))),Y}_concatOutputChunks(q,$){return this.last._concatOutputChunks(q,$)}async*_streamIterator(q,$){let K=await T6($),{runId:_,...P}=$??{},O=await K?.handleChainStart(this.toJSON(),J8(q,"input"),_,void 0,void 0,void 0,P?.runName),Y=[this.first,...this.middle,this.last],H=!0,v;async function*X(){yield q}try{let Z=Y[0].transform(X(),M8(P,{callbacks:O?.getChild(this.omitSequenceTags?void 0:"seq:step:1")}));for(let k=1;k<Y.length;k+=1)Z=await Y[k].transform(Z,M8(P,{callbacks:O?.getChild(this.omitSequenceTags?void 0:`seq:step:${k+1}`)}));for await(let k of Z)if($?.signal?.throwIfAborted(),yield k,H)if(v===void 0)v=k;else try{v=this._concatOutputChunks(v,k)}catch(G){v=void 0,H=!1}}catch(Z){throw await O?.handleChainError(Z),Z}await O?.handleChainEnd(J8(v,"output"))}getGraph(q){let $=new WP,K=null;return this.steps.forEach((_,P)=>{let O=_.getGraph(q);if(P!==0)O.trimFirstNode();if(P!==this.steps.length-1)O.trimLastNode();$.extend(O);let Y=O.firstNode();if(!Y)throw Error(`Runnable ${_} has no first node`);if(K)$.addEdge(K,Y);K=O.lastNode()}),$}pipe(q){if(S_.isRunnableSequence(q))return new S_({first:this.first,middle:this.middle.concat([this.last,q.first,...q.middle]),last:q.last,name:this.name??q.name});else return new S_({first:this.first,middle:[...this.middle,this.last],last:C_(q),name:this.name})}static isRunnableSequence(q){return Array.isArray(q.middle)&&C8.isRunnable(q)}static from([q,...$],K){let _={};if(typeof K==="string")_.name=K;else if(K!==void 0)_=K;return new S_({..._,first:C_(q),middle:$.slice(0,-1).map(C_),last:C_($[$.length-1])})}}class HP extends C8{static lc_name(){return"RunnableMap"}getStepsKeys(){return Object.keys(this.steps)}constructor(q){super(q);Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"steps",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.steps={};for(let[$,K]of Object.entries(q.steps))this.steps[$]=C_(K)}static from(q){return new HP({steps:q})}async invoke(q,$){let K=D$($),P=await(await T6(K))?.handleChainStart(this.toJSON(),{input:q},K.runId,void 0,void 0,void 0,K?.runName);delete K.runId;let O={};try{let Y=Object.entries(this.steps).map(async([H,v])=>{O[H]=await v.invoke(q,M8(K,{callbacks:P?.getChild(`map:key:${H}`)}))});await B6(Promise.all(Y),$?.signal)}catch(Y){throw await P?.handleChainError(Y),Y}return await P?.handleChainEnd(O),O}async*_transform(q,$,K){let _={...this.steps},P=NY(q,Object.keys(_).length),O=new Map(Object.entries(_).map(([Y,H],v)=>{let X=H.transform(P[v],M8(K,{callbacks:$?.getChild(`map:key:${Y}`)}));return[Y,X.next().then((Z)=>({key:Y,gen:X,result:Z}))]}));while(O.size){let Y=Promise.race(O.values()),{key:H,result:v,gen:X}=await B6(Y,K?.signal);if(O.delete(H),!v.done)yield{[H]:v.value},O.set(H,X.next().then((Z)=>({key:H,gen:X,result:Z})))}}transform(q,$){return this._transformStreamWithConfig(q,this._transform.bind(this),$)}async stream(q,$){async function*K(){yield q}let _=D$($),P=new rK({generator:this.transform(K(),_),config:_});return await P.setup,S8.fromAsyncGenerator(P)}}class QY extends C8{constructor(q){super(q);if(Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"func",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),!K9(q.func))throw Error("RunnableTraceable requires a function that is wrapped in traceable higher-order function");this.func=q.func}async invoke(q,$){let[K]=this._getOptionsList($??{},1),_=await T6(K),P=this.func(M8(K,{callbacks:_}),q);return B6(P,K?.signal)}async*_streamIterator(q,$){let[K]=this._getOptionsList($??{},1),_=await this.invoke(q,$);if(T1(_)){for await(let P of _)K?.signal?.throwIfAborted(),yield P;return}if(iJ(_)){while(!0){K?.signal?.throwIfAborted();let P=_.next();if(P.done)break;yield P.value}return}yield _}static from(q){return new QY({func:q})}}function eS(q){if(K9(q))throw Error("RunnableLambda requires a function that is not wrapped in traceable higher-order function. This shouldn't happen.")}class A1 extends C8{static lc_name(){return"RunnableLambda"}constructor(q){if(K9(q.func))return QY.from(q.func);super(q);Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"func",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),eS(q.func),this.func=q.func}static from(q){return new A1({func:q})}async _invoke(q,$,K){return new Promise((_,P)=>{let O=M8($,{callbacks:K?.getChild(),recursionLimit:($?.recursionLimit??n9)-1});Y6.runWithConfig(XK(O),async()=>{try{let Y=await this.func(q,{...O});if(Y&&C8.isRunnable(Y)){if($?.recursionLimit===0)throw Error("Recursion limit reached.");Y=await Y.invoke(q,{...O,recursionLimit:(O.recursionLimit??n9)-1})}else if(T1(Y)){let H;for await(let v of X1(O,Y))if($?.signal?.throwIfAborted(),H===void 0)H=v;else try{H=this._concatOutputChunks(H,v)}catch(X){H=v}Y=H}else if(BY(Y)){let H;for(let v of iY(O,Y))if($?.signal?.throwIfAborted(),H===void 0)H=v;else try{H=this._concatOutputChunks(H,v)}catch(X){H=v}Y=H}_(Y)}catch(Y){P(Y)}})})}async invoke(q,$){return this._callWithConfig(this._invoke.bind(this),q,$)}async*_transform(q,$,K){let _;for await(let Y of q)if(_===void 0)_=Y;else try{_=this._concatOutputChunks(_,Y)}catch(H){_=Y}let P=M8(K,{callbacks:$?.getChild(),recursionLimit:(K?.recursionLimit??n9)-1}),O=await new Promise((Y,H)=>{Y6.runWithConfig(XK(P),async()=>{try{let v=await this.func(_,{...P,config:P});Y(v)}catch(v){H(v)}})});if(O&&C8.isRunnable(O)){if(K?.recursionLimit===0)throw Error("Recursion limit reached.");let Y=await O.stream(_,P);for await(let H of Y)yield H}else if(T1(O))for await(let Y of X1(P,O))K?.signal?.throwIfAborted(),yield Y;else if(BY(O))for(let Y of iY(P,O))K?.signal?.throwIfAborted(),yield Y;else yield O}transform(q,$){return this._transformStreamWithConfig(q,this._transform.bind(this),$)}async stream(q,$){async function*K(){yield q}let _=D$($),P=new rK({generator:this.transform(K(),_),config:_});return await P.setup,S8.fromAsyncGenerator(P)}}class UJ extends C8{static lc_name(){return"RunnableWithFallbacks"}constructor(q){super(q);Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"runnable",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"fallbacks",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.runnable=q.runnable,this.fallbacks=q.fallbacks}*runnables(){yield this.runnable;for(let q of this.fallbacks)yield q}async invoke(q,$){let K=D$($),_=await T6(K),{runId:P,...O}=K,Y=await _?.handleChainStart(this.toJSON(),J8(q,"input"),P,void 0,void 0,void 0,O?.runName),H=M8(O,{callbacks:Y?.getChild()});return await Y6.runWithConfig(H,async()=>{let X;for(let Z of this.runnables()){K?.signal?.throwIfAborted();try{let k=await Z.invoke(q,H);return await Y?.handleChainEnd(J8(k,"output")),k}catch(k){if(X===void 0)X=k}}if(X===void 0)throw Error("No error stored at end of fallback.");throw await Y?.handleChainError(X),X})}async*_streamIterator(q,$){let K=D$($),_=await T6(K),{runId:P,...O}=K,Y=await _?.handleChainStart(this.toJSON(),J8(q,"input"),P,void 0,void 0,void 0,O?.runName),H,v;for(let Z of this.runnables()){K?.signal?.throwIfAborted();let k=M8(O,{callbacks:Y?.getChild()});try{let G=await Z.stream(q,k);v=X1(k,G);break}catch(G){if(H===void 0)H=G}}if(v===void 0){let Z=H??Error("No error stored at end of fallback.");throw await Y?.handleChainError(Z),Z}let X;try{for await(let Z of v){yield Z;try{X=X===void 0?X:this._concatOutputChunks(X,Z)}catch(k){X=void 0}}}catch(Z){throw await Y?.handleChainError(Z),Z}await Y?.handleChainEnd(J8(X,"output"))}async batch(q,$,K){if(K?.returnExceptions)throw Error("Not implemented.");let _=this._getOptionsList($??{},q.length),P=await Promise.all(_.map((H)=>T6(H))),O=await Promise.all(P.map(async(H,v)=>{let X=await H?.handleChainStart(this.toJSON(),J8(q[v],"input"),_[v].runId,void 0,void 0,void 0,_[v].runName);return delete _[v].runId,X})),Y;for(let H of this.runnables()){_[0].signal?.throwIfAborted();try{let v=await H.batch(q,O.map((X,Z)=>M8(_[Z],{callbacks:X?.getChild()})),K);return await Promise.all(O.map((X,Z)=>X?.handleChainEnd(J8(v[Z],"output")))),v}catch(v){if(Y===void 0)Y=v}}if(!Y)throw Error("No error stored at end of fallbacks.");throw await Promise.all(O.map((H)=>H?.handleChainError(Y))),Y}}function C_(q){if(typeof q==="function")return new A1({func:q});else if(C8.isRunnable(q))return q;else if(!Array.isArray(q)&&typeof q==="object"){let $={};for(let[K,_]of Object.entries(q))$[K]=C_(_);return new HP({steps:$})}else throw Error(`Expected a Runnable, function or object.
Instead got an unsupported type.`)}class FJ extends C8{static lc_name(){return"RunnableAssign"}constructor(q){if(q instanceof HP)q={mapper:q};super(q);Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"mapper",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.mapper=q.mapper}async invoke(q,$){let K=await this.mapper.invoke(q,$);return{...q,...K}}async*_transform(q,$,K){let _=this.mapper.getStepsKeys(),[P,O]=NY(q),Y=this.mapper.transform(O,M8(K,{callbacks:$?.getChild()})),H=Y.next();for await(let v of P){if(typeof v!=="object"||Array.isArray(v))throw Error(`RunnableAssign can only be used with objects as input, got ${typeof v}`);let X=Object.fromEntries(Object.entries(v).filter(([Z])=>!_.includes(Z)));if(Object.keys(X).length>0)yield X}yield(await H).value;for await(let v of Y)yield v}transform(q,$){return this._transformStreamWithConfig(q,this._transform.bind(this),$)}async stream(q,$){async function*K(){yield q}let _=D$($),P=new rK({generator:this.transform(K(),_),config:_});return await P.setup,S8.fromAsyncGenerator(P)}}class tJ extends C8{static lc_name(){return"RunnablePick"}constructor(q){if(typeof q==="string"||Array.isArray(q))q={keys:q};super(q);Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"keys",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.keys=q.keys}async _pick(q){if(typeof this.keys==="string")return q[this.keys];else{let $=this.keys.map((K)=>[K,q[K]]).filter((K)=>K[1]!==void 0);return $.length===0?void 0:Object.fromEntries($)}}async invoke(q,$){return this._callWithConfig(this._pick.bind(this),q,$)}async*_transform(q){for await(let $ of q){let K=await this._pick($);if(K!==void 0)yield K}}transform(q,$){return this._transformStreamWithConfig(q,this._transform.bind(this),$)}async stream(q,$){async function*K(){yield q}let _=D$($),P=new rK({generator:this.transform(K(),_),config:_});return await P.setup,S8.fromAsyncGenerator(P)}}class FY extends N_{constructor(q){let $=S_.from([A1.from(async(K)=>{let _;if(fY(K))try{_=await mJ(this.schema,K.args)}catch(P){throw new AY("Received tool input did not match expected schema",JSON.stringify(K.args))}else _=K;return _}).withConfig({runName:`${q.name}:parse_input`}),q.bound]).withConfig({runName:q.name});super({bound:$,config:q.config??{}});Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"description",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"schema",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name=q.name,this.description=q.description,this.schema=q.schema}static lc_name(){return"RunnableToolLike"}}function sS(q,$){let K=$.name??q.getName(),_=$.description??cJ($.schema);if(lJ($.schema))return new FY({name:K,description:_,schema:v_.object({input:v_.string()}).transform((P)=>P.input),bound:q});return new FY({name:K,description:_,schema:$.schema,bound:q})}class aY extends C8{constructor(){super(...arguments);Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","documents","transformers"]})}invoke(q,$){return this.transformDocuments(q)}}var eJ=K6(aJ(),1),J0=Object.defineProperty,v0=(q,$,K)=>($ in q)?J0(q,$,{enumerable:!0,configurable:!0,writable:!0,value:K}):q[$]=K,w0=(q,$,K)=>{return v0(q,typeof $!=="symbol"?$+"":$,K),K};function T0(q,$){let K=Array.from({length:q.length},(_,P)=>({start:P,end:P+1}));while(K.length>1){let _=null;for(let P=0;P<K.length-1;P++){let O=q.slice(K[P].start,K[P+1].end),Y=$.get(O.join(","));if(Y==null)continue;if(_==null||Y<_[0])_=[Y,P]}if(_!=null){let P=_[1];K[P]={start:K[P].start,end:K[P+1].end},K.splice(P+1,1)}else break}return K}function X0(q,$){if(q.length===1)return[$.get(q.join(","))];return T0(q,$).map((K)=>$.get(q.slice(K.start,K.end).join(","))).filter((K)=>K!=null)}function f0(q){return q.replace(/[\\^$*+?.()|[\]{}]/g,"\\$&")}var q2=class{specialTokens;inverseSpecialTokens;patStr;textEncoder=new TextEncoder;textDecoder=new TextDecoder("utf-8");rankMap=new Map;textMap=new Map;constructor(q,$){this.patStr=q.pat_str;let K=q.bpe_ranks.split(`
`).filter(Boolean).reduce((_,P)=>{let[O,Y,...H]=P.split(" "),v=Number.parseInt(Y,10);return H.forEach((X,Z)=>_[X]=v+Z),_},{});for(let[_,P]of Object.entries(K)){let O=eJ.default.toByteArray(_);this.rankMap.set(O.join(","),P),this.textMap.set(P,O)}this.specialTokens={...q.special_tokens,...$},this.inverseSpecialTokens=Object.entries(this.specialTokens).reduce((_,[P,O])=>{return _[O]=this.textEncoder.encode(P),_},{})}encode(q,$=[],K="all"){let _=new RegExp(this.patStr,"ug"),P=q2.specialTokenRegex(Object.keys(this.specialTokens)),O=[],Y=new Set($==="all"?Object.keys(this.specialTokens):$),H=new Set(K==="all"?Object.keys(this.specialTokens).filter((X)=>!Y.has(X)):K);if(H.size>0){let X=q2.specialTokenRegex([...H]),Z=q.match(X);if(Z!=null)throw Error(`The text contains a special token that is not allowed: ${Z[0]}`)}let v=0;while(!0){let X=null,Z=v;while(!0){if(P.lastIndex=Z,X=P.exec(q),X==null||Y.has(X[0]))break;Z=X.index+1}let k=X?.index??q.length;for(let S of q.substring(v,k).matchAll(_)){let N=this.textEncoder.encode(S[0]),E=this.rankMap.get(N.join(","));if(E!=null){O.push(E);continue}O.push(...X0(N,this.rankMap))}if(X==null)break;let G=this.specialTokens[X[0]];O.push(G),v=X.index+X[0].length}return O}decode(q){let $=[],K=0;for(let O=0;O<q.length;++O){let Y=q[O],H=this.textMap.get(Y)??this.inverseSpecialTokens[Y];if(H!=null)$.push(H),K+=H.length}let _=new Uint8Array(K),P=0;for(let O of $)_.set(O,P),P+=O.length;return this.textDecoder.decode(_)}},$2=q2;w0($2,"specialTokenRegex",(q)=>{return new RegExp(q.map(($)=>f0($)).join("|"),"g")});class sJ extends aY{constructor(q){super(q);if(Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","document_transformers","text_splitters"]}),Object.defineProperty(this,"chunkSize",{enumerable:!0,configurable:!0,writable:!0,value:1000}),Object.defineProperty(this,"chunkOverlap",{enumerable:!0,configurable:!0,writable:!0,value:200}),Object.defineProperty(this,"keepSeparator",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"lengthFunction",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.chunkSize=q?.chunkSize??this.chunkSize,this.chunkOverlap=q?.chunkOverlap??this.chunkOverlap,this.keepSeparator=q?.keepSeparator??this.keepSeparator,this.lengthFunction=q?.lengthFunction??(($)=>$.length),this.chunkOverlap>=this.chunkSize)throw Error("Cannot have chunkOverlap >= chunkSize")}async transformDocuments(q,$={}){return this.splitDocuments(q,$)}splitOnSeparator(q,$){let K;if($)if(this.keepSeparator){let _=$.replace(/[/\-\\^$*+?.()|[\]{}]/g,"\\$&");K=q.split(new RegExp(`(?=${_})`))}else K=q.split($);else K=q.split("");return K.filter((_)=>_!=="")}async createDocuments(q,$=[],K={}){let _=$.length>0?$:[...Array(q.length)].map(()=>({})),{chunkHeader:P="",chunkOverlapHeader:O="(cont'd) ",appendChunkOverlapHeader:Y=!1}=K,H=[];for(let v=0;v<q.length;v+=1){let X=q[v],Z=1,k=null,G=-1;for(let S of await this.splitText(X)){let N=P,E=X.indexOf(S,G+1);if(k===null){let g=this.numberOfNewLines(X,0,E);Z+=g}else{let g=G+await this.lengthFunction(k);if(g<E){let y=this.numberOfNewLines(X,g,E);Z+=y}else if(g>E){let y=this.numberOfNewLines(X,E,g);Z-=y}if(Y)N+=O}let h=this.numberOfNewLines(S),D=_[v].loc&&typeof _[v].loc==="object"?{..._[v].loc}:{};D.lines={from:Z,to:Z+h};let I={..._[v],loc:D};N+=S,H.push(new f5({pageContent:N,metadata:I})),Z+=h,k=S,G=E}}return H}numberOfNewLines(q,$,K){return(q.slice($,K).match(/\n/g)||[]).length}async splitDocuments(q,$={}){let K=q.filter((O)=>O.pageContent!==void 0),_=K.map((O)=>O.pageContent),P=K.map((O)=>O.metadata);return this.createDocuments(_,P,$)}joinDocs(q,$){let K=q.join($).trim();return K===""?null:K}async mergeSplits(q,$){let K=[],_=[],P=0;for(let Y of q){let H=await this.lengthFunction(Y);if(P+H+_.length*$.length>this.chunkSize){if(P>this.chunkSize)console.warn(`Created a chunk of size ${P}, +
which is longer than the specified ${this.chunkSize}`);if(_.length>0){let v=this.joinDocs(_,$);if(v!==null)K.push(v);while(P>this.chunkOverlap||P+H+_.length*$.length>this.chunkSize&&P>0)P-=await this.lengthFunction(_[0]),_.shift()}}_.push(Y),P+=H}let O=this.joinDocs(_,$);if(O!==null)K.push(O);return K}}class zP extends sJ{static lc_name(){return"RecursiveCharacterTextSplitter"}constructor(q){super(q);Object.defineProperty(this,"separators",{enumerable:!0,configurable:!0,writable:!0,value:[`

`,`
`," ",""]}),this.separators=q?.separators??this.separators,this.keepSeparator=q?.keepSeparator??!0}async _splitText(q,$){let K=[],_=$[$.length-1],P;for(let v=0;v<$.length;v+=1){let X=$[v];if(X===""){_=X;break}if(q.includes(X)){_=X,P=$.slice(v+1);break}}let O=this.splitOnSeparator(q,_),Y=[],H=this.keepSeparator?"":_;for(let v of O)if(await this.lengthFunction(v)<this.chunkSize)Y.push(v);else{if(Y.length){let X=await this.mergeSplits(Y,H);K.push(...X),Y=[]}if(!P)K.push(v);else{let X=await this._splitText(v,P);K.push(...X)}}if(Y.length){let v=await this.mergeSplits(Y,H);K.push(...v)}return K}async splitText(q){return this._splitText(q,this.separators)}static fromLanguage(q,$){return new zP({...$,separators:zP.getSeparatorsForLanguage(q)})}static getSeparatorsForLanguage(q){if(q==="cpp")return[`
class `,`
void `,`
int `,`
float `,`
double `,`
if `,`
for `,`
while `,`
switch `,`
case `,`

`,`
`," ",""];else if(q==="go")return[`
func `,`
var `,`
const `,`
type `,`
if `,`
for `,`
switch `,`
case `,`

`,`
`," ",""];else if(q==="java")return[`
class `,`
public `,`
protected `,`
private `,`
static `,`
if `,`
for `,`
while `,`
switch `,`
case `,`

`,`
`," ",""];else if(q==="js")return[`
function `,`
const `,`
let `,`
var `,`
class `,`
if `,`
for `,`
while `,`
switch `,`
case `,`
default `,`

`,`
`," ",""];else if(q==="php")return[`
function `,`
class `,`
if `,`
foreach `,`
while `,`
do `,`
switch `,`
case `,`

`,`
`," ",""];else if(q==="proto")return[`
message `,`
service `,`
enum `,`
option `,`
import `,`
syntax `,`

`,`
`," ",""];else if(q==="python")return[`
class `,`
def `,`
	def `,`

`,`
`," ",""];else if(q==="rst")return[`
===
`,`
---
`,`
***
`,`
.. `,`

`,`
`," ",""];else if(q==="ruby")return[`
def `,`
class `,`
if `,`
unless `,`
while `,`
for `,`
do `,`
begin `,`
rescue `,`

`,`
`," ",""];else if(q==="rust")return[`
fn `,`
const `,`
let `,`
if `,`
while `,`
for `,`
loop `,`
match `,`
const `,`

`,`
`," ",""];else if(q==="scala")return[`
class `,`
object `,`
def `,`
val `,`
var `,`
if `,`
for `,`
while `,`
match `,`
case `,`

`,`
`," ",""];else if(q==="swift")return[`
func `,`
class `,`
struct `,`
enum `,`
if `,`
for `,`
while `,`
do `,`
switch `,`
case `,`

`,`
`," ",""];else if(q==="markdown")return[`
## `,`
### `,`
#### `,`
##### `,`
###### `,"```\n\n",`

***

`,`

---

`,`

___

`,`

`,`
`," ",""];else if(q==="latex")return[`
\\chapter{`,`
\\section{`,`
\\subsection{`,`
\\subsubsection{`,`
\\begin{enumerate}`,`
\\begin{itemize}`,`
\\begin{description}`,`
\\begin{list}`,`
\\begin{quote}`,`
\\begin{quotation}`,`
\\begin{verse}`,`
\\begin{verbatim}`,`
\\begin{align}`,"$$","$",`

`,`
`," ",""];else if(q==="html")return["<body>","<div>","<p>","<br>","<li>","<h1>","<h2>","<h3>","<h4>","<h5>","<h6>","<span>","<table>","<tr>","<td>","<th>","<ul>","<ol>","<header>","<footer>","<nav>","<head>","<style>","<script>","<meta>","<title>"," ",""];else if(q==="sol")return[`
pragma `,`
using `,`
contract `,`
interface `,`
library `,`
constructor `,`
type `,`
function `,`
event `,`
modifier `,`
error `,`
struct `,`
enum `,`
if `,`
for `,`
while `,`
do while `,`
assembly `,`

`,`
`," ",""];else throw Error(`Language ${q} is not supported.`)}}var S3=K6(YT(),1);var jT=(q)=>{q=1831565813+(q|=0)|0;let $=Math.imul(q^q>>>15,1|q);return $=$+Math.imul($^$>>>7,61|$)^$,(($^$>>>14)>>>0)/4294967296};class WT{constructor(q){this.dictionaries=void 0,this.length=void 0,this.separator=void 0,this.style=void 0,this.seed=void 0;let{length:$,separator:K,dictionaries:_,style:P,seed:O}=q;this.dictionaries=_,this.separator=K,this.length=$,this.style=P,this.seed=O}generate(){if(!this.dictionaries)throw Error('Cannot find any dictionary. Please provide at least one, or leave the "dictionary" field empty in the config object');if(this.length<=0)throw Error("Invalid length provided");if(this.length>this.dictionaries.length)throw Error(`The length cannot be bigger than the number of dictionaries.
Length provided: ${this.length}. Number of dictionaries provided: ${this.dictionaries.length}`);let q=this.seed;return this.dictionaries.slice(0,this.length).reduce(($,K)=>{let _;q?(_=((O)=>{if(typeof O=="string"){let Y=O.split("").map((v)=>v.charCodeAt(0)).reduce((v,X)=>v+X,1),H=Math.floor(Number(Y));return jT(H)}return jT(O)})(q),q=4294967296*_):_=Math.random();let P=K[Math.floor(_*K.length)]||"";if(this.style==="lowerCase")P=P.toLowerCase();else if(this.style==="capital"){let[O,...Y]=P.split("");P=O.toUpperCase()+Y.join("")}else this.style==="upperCase"&&(P=P.toUpperCase());return $?`${$}${this.separator}${P}`:`${P}`},"")}}var OT={separator:"_",dictionaries:[]},I1=(q)=>{let $=[...q&&q.dictionaries||OT.dictionaries],K={...OT,...q,length:q&&q.length||$.length,dictionaries:$};if(!q||!q.dictionaries||!q.dictionaries.length)throw Error('A "dictionaries" array must be provided. This is a breaking change introduced starting from Unique Name Generator v4. Read more about the breaking change here: https://github.com/andreasonny83/unique-names-generator#migration-guide');return new WT(K).generate()};var L1=["Aaren","Aarika","Abagael","Abagail","Abbe","Abbey","Abbi","Abbie","Abby","Abbye","Abigael","Abigail","Abigale","Abra","Ada","Adah","Adaline","Adan","Adara","Adda","Addi","Addia","Addie","Addy","Adel","Adela","Adelaida","Adelaide","Adele","Adelheid","Adelice","Adelina","Adelind","Adeline","Adella","Adelle","Adena","Adey","Adi","Adiana","Adina","Adora","Adore","Adoree","Adorne","Adrea","Adria","Adriaens","Adrian","Adriana","Adriane","Adrianna","Adrianne","Adriena","Adrienne","Aeriel","Aeriela","Aeriell","Afton","Ag","Agace","Agata","Agatha","Agathe","Aggi","Aggie","Aggy","Agna","Agnella","Agnes","Agnese","Agnesse","Agneta","Agnola","Agretha","Aida","Aidan","Aigneis","Aila","Aile","Ailee","Aileen","Ailene","Ailey","Aili","Ailina","Ailis","Ailsun","Ailyn","Aime","Aimee","Aimil","Aindrea","Ainslee","Ainsley","Ainslie","Ajay","Alaine","Alameda","Alana","Alanah","Alane","Alanna","Alayne","Alberta","Albertina","Albertine","Albina","Alecia","Aleda","Aleece","Aleen","Alejandra","Alejandrina","Alena","Alene","Alessandra","Aleta","Alethea","Alex","Alexa","Alexandra","Alexandrina","Alexi","Alexia","Alexina","Alexine","Alexis","Alfi","Alfie","Alfreda","Alfy","Ali","Alia","Alica","Alice","Alicea","Alicia","Alida","Alidia","Alie","Alika","Alikee","Alina","Aline","Alis","Alisa","Alisha","Alison","Alissa","Alisun","Alix","Aliza","Alla","Alleen","Allegra","Allene","Alli","Allianora","Allie","Allina","Allis","Allison","Allissa","Allix","Allsun","Allx","Ally","Allyce","Allyn","Allys","Allyson","Alma","Almeda","Almeria","Almeta","Almira","Almire","Aloise","Aloisia","Aloysia","Alta","Althea","Alvera","Alverta","Alvina","Alvinia","Alvira","Alyce","Alyda","Alys","Alysa","Alyse","Alysia","Alyson","Alyss","Alyssa","Amabel","Amabelle","Amalea","Amalee","Amaleta","Amalia","Amalie","Amalita","Amalle","Amanda","Amandi","Amandie","Amandy","Amara","Amargo","Amata","Amber","Amberly","Ambur","Ame","Amelia","Amelie","Amelina","Ameline","Amelita","Ami","Amie","Amii","Amil","Amitie","Amity","Ammamaria","Amy","Amye","Ana","Anabal","Anabel","Anabella","Anabelle","Analiese","Analise","Anallese","Anallise","Anastasia","Anastasie","Anastassia","Anatola","Andee","Andeee","Anderea","Andi","Andie","Andra","Andrea","Andreana","Andree","Andrei","Andria","Andriana","Andriette","Andromache","Andy","Anestassia","Anet","Anett","Anetta","Anette","Ange","Angel","Angela","Angele","Angelia","Angelica","Angelika","Angelina","Angeline","Angelique","Angelita","Angelle","Angie","Angil","Angy","Ania","Anica","Anissa","Anita","Anitra","Anjanette","Anjela","Ann","Ann-marie","Anna","Anna-diana","Anna-diane","Anna-maria","Annabal","Annabel","Annabela","Annabell","Annabella","Annabelle","Annadiana","Annadiane","Annalee","Annaliese","Annalise","Annamaria","Annamarie","Anne","Anne-corinne","Anne-marie","Annecorinne","Anneliese","Annelise","Annemarie","Annetta","Annette","Anni","Annice","Annie","Annis","Annissa","Annmaria","Annmarie","Annnora","Annora","Anny","Anselma","Ansley","Anstice","Anthe","Anthea","Anthia","Anthiathia","Antoinette","Antonella","Antonetta","Antonia","Antonie","Antonietta","Antonina","Anya","Appolonia","April","Aprilette","Ara","Arabel","Arabela","Arabele","Arabella","Arabelle","Arda","Ardath","Ardeen","Ardelia","Ardelis","Ardella","Ardelle","Arden","Ardene","Ardenia","Ardine","Ardis","Ardisj","Ardith","Ardra","Ardyce","Ardys","Ardyth","Aretha","Ariadne","Ariana","Aridatha","Ariel","Ariela","Ariella","Arielle","Arlana","Arlee","Arleen","Arlen","Arlena","Arlene","Arleta","Arlette","Arleyne","Arlie","Arliene","Arlina","Arlinda","Arline","Arluene","Arly","Arlyn","Arlyne","Aryn","Ashely","Ashia","Ashien","Ashil","Ashla","Ashlan","Ashlee","Ashleigh","Ashlen","Ashley","Ashli","Ashlie","Ashly","Asia","Astra","Astrid","Astrix","Atalanta","Athena","Athene","Atlanta","Atlante","Auberta","Aubine","Aubree","Aubrette","Aubrey","Aubrie","Aubry","Audi","Audie","Audra","Audre","Audrey","Audrie","Audry","Audrye","Audy","Augusta","Auguste","Augustina","Augustine","Aundrea","Aura","Aurea","Aurel","Aurelea","Aurelia","Aurelie","Auria","Aurie","Aurilia","Aurlie","Auroora","Aurora","Aurore","Austin","Austina","Austine","Ava","Aveline","Averil","Averyl","Avie","Avis","Aviva","Avivah","Avril","Avrit","Ayn","Bab","Babara","Babb","Babbette","Babbie","Babette","Babita","Babs","Bambi","Bambie","Bamby","Barb","Barbabra","Barbara","Barbara-anne","Barbaraanne","Barbe","Barbee","Barbette","Barbey","Barbi","Barbie","Barbra","Barby","Bari","Barrie","Barry","Basia","Bathsheba","Batsheva","Bea","Beatrice","Beatrisa","Beatrix","Beatriz","Bebe","Becca","Becka","Becki","Beckie","Becky","Bee","Beilul","Beitris","Bekki","Bel","Belia","Belicia","Belinda","Belita","Bell","Bella","Bellanca","Belle","Bellina","Belva","Belvia","Bendite","Benedetta","Benedicta","Benedikta","Benetta","Benita","Benni","Bennie","Benny","Benoite","Berenice","Beret","Berget","Berna","Bernadene","Bernadette","Bernadina","Bernadine","Bernardina","Bernardine","Bernelle","Bernete","Bernetta","Bernette","Berni","Bernice","Bernie","Bernita","Berny","Berri","Berrie","Berry","Bert","Berta","Berte","Bertha","Berthe","Berti","Bertie","Bertina","Bertine","Berty","Beryl","Beryle","Bess","Bessie","Bessy","Beth","Bethanne","Bethany","Bethena","Bethina","Betsey","Betsy","Betta","Bette","Bette-ann","Betteann","Betteanne","Betti","Bettina","Bettine","Betty","Bettye","Beulah","Bev","Beverie","Beverlee","Beverley","Beverlie","Beverly","Bevvy","Bianca","Bianka","Bibbie","Bibby","Bibbye","Bibi","Biddie","Biddy","Bidget","Bili","Bill","Billi","Billie","Billy","Billye","Binni","Binnie","Binny","Bird","Birdie","Birgit","Birgitta","Blair","Blaire","Blake","Blakelee","Blakeley","Blanca","Blanch","Blancha","Blanche","Blinni","Blinnie","Blinny","Bliss","Blisse","Blithe","Blondell","Blondelle","Blondie","Blondy","Blythe","Bobbe","Bobbee","Bobbette","Bobbi","Bobbie","Bobby","Bobbye","Bobette","Bobina","Bobine","Bobinette","Bonita","Bonnee","Bonni","Bonnibelle","Bonnie","Bonny","Brana","Brandais","Brande","Brandea","Brandi","Brandice","Brandie","Brandise","Brandy","Breanne","Brear","Bree","Breena","Bren","Brena","Brenda","Brenn","Brenna","Brett","Bria","Briana","Brianna","Brianne","Bride","Bridget","Bridgette","Bridie","Brier","Brietta","Brigid","Brigida","Brigit","Brigitta","Brigitte","Brina","Briney","Brinn","Brinna","Briny","Brit","Brita","Britney","Britni","Britt","Britta","Brittan","Brittaney","Brittani","Brittany","Britte","Britteny","Brittne","Brittney","Brittni","Brook","Brooke","Brooks","Brunhilda","Brunhilde","Bryana","Bryn","Bryna","Brynn","Brynna","Brynne","Buffy","Bunni","Bunnie","Bunny","Cacilia","Cacilie","Cahra","Cairistiona","Caitlin","Caitrin","Cal","Calida","Calla","Calley","Calli","Callida","Callie","Cally","Calypso","Cam","Camala","Camel","Camella","Camellia","Cami","Camila","Camile","Camilla","Camille","Cammi","Cammie","Cammy","Candace","Candi","Candice","Candida","Candide","Candie","Candis","Candra","Candy","Caprice","Cara","Caralie","Caren","Carena","Caresa","Caressa","Caresse","Carey","Cari","Caria","Carie","Caril","Carilyn","Carin","Carina","Carine","Cariotta","Carissa","Carita","Caritta","Carla","Carlee","Carleen","Carlen","Carlene","Carley","Carlie","Carlin","Carlina","Carline","Carlita","Carlota","Carlotta","Carly","Carlye","Carlyn","Carlynn","Carlynne","Carma","Carmel","Carmela","Carmelia","Carmelina","Carmelita","Carmella","Carmelle","Carmen","Carmencita","Carmina","Carmine","Carmita","Carmon","Caro","Carol","Carol-jean","Carola","Carolan","Carolann","Carole","Carolee","Carolin","Carolina","Caroline","Caroljean","Carolyn","Carolyne","Carolynn","Caron","Carree","Carri","Carrie","Carrissa","Carroll","Carry","Cary","Caryl","Caryn","Casandra","Casey","Casi","Casie","Cass","Cassandra","Cassandre","Cassandry","Cassaundra","Cassey","Cassi","Cassie","Cassondra","Cassy","Catarina","Cate","Caterina","Catha","Catharina","Catharine","Cathe","Cathee","Catherin","Catherina","Catherine","Cathi","Cathie","Cathleen","Cathlene","Cathrin","Cathrine","Cathryn","Cathy","Cathyleen","Cati","Catie","Catina","Catlaina","Catlee","Catlin","Catrina","Catriona","Caty","Caye","Cayla","Cecelia","Cecil","Cecile","Ceciley","Cecilia","Cecilla","Cecily","Ceil","Cele","Celene","Celesta","Celeste","Celestia","Celestina","Celestine","Celestyn","Celestyna","Celia","Celie","Celina","Celinda","Celine","Celinka","Celisse","Celka","Celle","Cesya","Chad","Chanda","Chandal","Chandra","Channa","Chantal","Chantalle","Charil","Charin","Charis","Charissa","Charisse","Charita","Charity","Charla","Charlean","Charleen","Charlena","Charlene","Charline","Charlot","Charlotta","Charlotte","Charmain","Charmaine","Charmane","Charmian","Charmine","Charmion","Charo","Charyl","Chastity","Chelsae","Chelsea","Chelsey","Chelsie","Chelsy","Cher","Chere","Cherey","Cheri","Cherianne","Cherice","Cherida","Cherie","Cherilyn","Cherilynn","Cherin","Cherise","Cherish","Cherlyn","Cherri","Cherrita","Cherry","Chery","Cherye","Cheryl","Cheslie","Chiarra","Chickie","Chicky","Chiquia","Chiquita","Chlo","Chloe","Chloette","Chloris","Chris","Chrissie","Chrissy","Christa","Christabel","Christabella","Christal","Christalle","Christan","Christean","Christel","Christen","Christi","Christian","Christiana","Christiane","Christie","Christin","Christina","Christine","Christy","Christye","Christyna","Chrysa","Chrysler","Chrystal","Chryste","Chrystel","Cicely","Cicily","Ciel","Cilka","Cinda","Cindee","Cindelyn","Cinderella","Cindi","Cindie","Cindra","Cindy","Cinnamon","Cissiee","Cissy","Clair","Claire","Clara","Clarabelle","Clare","Claresta","Clareta","Claretta","Clarette","Clarey","Clari","Claribel","Clarice","Clarie","Clarinda","Clarine","Clarissa","Clarisse","Clarita","Clary","Claude","Claudelle","Claudetta","Claudette","Claudia","Claudie","Claudina","Claudine","Clea","Clem","Clemence","Clementia","Clementina","Clementine","Clemmie","Clemmy","Cleo","Cleopatra","Clerissa","Clio","Clo","Cloe","Cloris","Clotilda","Clovis","Codee","Codi","Codie","Cody","Coleen","Colene","Coletta","Colette","Colleen","Collen","Collete","Collette","Collie","Colline","Colly","Con","Concettina","Conchita","Concordia","Conni","Connie","Conny","Consolata","Constance","Constancia","Constancy","Constanta","Constantia","Constantina","Constantine","Consuela","Consuelo","Cookie","Cora","Corabel","Corabella","Corabelle","Coral","Coralie","Coraline","Coralyn","Cordelia","Cordelie","Cordey","Cordi","Cordie","Cordula","Cordy","Coreen","Corella","Corenda","Corene","Coretta","Corette","Corey","Cori","Corie","Corilla","Corina","Corine","Corinna","Corinne","Coriss","Corissa","Corliss","Corly","Cornela","Cornelia","Cornelle","Cornie","Corny","Correna","Correy","Corri","Corrianne","Corrie","Corrina","Corrine","Corrinne","Corry","Cortney","Cory","Cosetta","Cosette","Costanza","Courtenay","Courtnay","Courtney","Crin","Cris","Crissie","Crissy","Crista","Cristabel","Cristal","Cristen","Cristi","Cristie","Cristin","Cristina","Cristine","Cristionna","Cristy","Crysta","Crystal","Crystie","Cthrine","Cyb","Cybil","Cybill","Cymbre","Cynde","Cyndi","Cyndia","Cyndie","Cyndy","Cynthea","Cynthia","Cynthie","Cynthy","Dacey","Dacia","Dacie","Dacy","Dael","Daffi","Daffie","Daffy","Dagmar","Dahlia","Daile","Daisey","Daisi","Daisie","Daisy","Dale","Dalenna","Dalia","Dalila","Dallas","Daloris","Damara","Damaris","Damita","Dana","Danell","Danella","Danette","Dani","Dania","Danica","Danice","Daniela","Daniele","Daniella","Danielle","Danika","Danila","Danit","Danita","Danna","Danni","Dannie","Danny","Dannye","Danya","Danyelle","Danyette","Daphene","Daphna","Daphne","Dara","Darb","Darbie","Darby","Darcee","Darcey","Darci","Darcie","Darcy","Darda","Dareen","Darell","Darelle","Dari","Daria","Darice","Darla","Darleen","Darlene","Darline","Darlleen","Daron","Darrelle","Darryl","Darsey","Darsie","Darya","Daryl","Daryn","Dasha","Dasi","Dasie","Dasya","Datha","Daune","Daveen","Daveta","Davida","Davina","Davine","Davita","Dawn","Dawna","Dayle","Dayna","Ddene","De","Deana","Deane","Deanna","Deanne","Deb","Debbi","Debbie","Debby","Debee","Debera","Debi","Debor","Debora","Deborah","Debra","Dede","Dedie","Dedra","Dee","Deeann","Deeanne","Deedee","Deena","Deerdre","Deeyn","Dehlia","Deidre","Deina","Deirdre","Del","Dela","Delcina","Delcine","Delia","Delila","Delilah","Delinda","Dell","Della","Delly","Delora","Delores","Deloria","Deloris","Delphine","Delphinia","Demeter","Demetra","Demetria","Demetris","Dena","Deni","Denice","Denise","Denna","Denni","Dennie","Denny","Deny","Denys","Denyse","Deonne","Desdemona","Desirae","Desiree","Desiri","Deva","Devan","Devi","Devin","Devina","Devinne","Devon","Devondra","Devonna","Devonne","Devora","Di","Diahann","Dian","Diana","Diandra","Diane","Diane-marie","Dianemarie","Diann","Dianna","Dianne","Diannne","Didi","Dido","Diena","Dierdre","Dina","Dinah","Dinnie","Dinny","Dion","Dione","Dionis","Dionne","Dita","Dix","Dixie","Dniren","Dode","Dodi","Dodie","Dody","Doe","Doll","Dolley","Dolli","Dollie","Dolly","Dolores","Dolorita","Doloritas","Domeniga","Dominga","Domini","Dominica","Dominique","Dona","Donella","Donelle","Donetta","Donia","Donica","Donielle","Donna","Donnamarie","Donni","Donnie","Donny","Dora","Doralia","Doralin","Doralyn","Doralynn","Doralynne","Dore","Doreen","Dorelia","Dorella","Dorelle","Dorena","Dorene","Doretta","Dorette","Dorey","Dori","Doria","Dorian","Dorice","Dorie","Dorine","Doris","Dorisa","Dorise","Dorita","Doro","Dorolice","Dorolisa","Dorotea","Doroteya","Dorothea","Dorothee","Dorothy","Dorree","Dorri","Dorrie","Dorris","Dorry","Dorthea","Dorthy","Dory","Dosi","Dot","Doti","Dotti","Dottie","Dotty","Dre","Dreddy","Dredi","Drona","Dru","Druci","Drucie","Drucill","Drucy","Drusi","Drusie","Drusilla","Drusy","Dulce","Dulcea","Dulci","Dulcia","Dulciana","Dulcie","Dulcine","Dulcinea","Dulcy","Dulsea","Dusty","Dyan","Dyana","Dyane","Dyann","Dyanna","Dyanne","Dyna","Dynah","Eachelle","Eada","Eadie","Eadith","Ealasaid","Eartha","Easter","Eba","Ebba","Ebonee","Ebony","Eda","Eddi","Eddie","Eddy","Ede","Edee","Edeline","Eden","Edi","Edie","Edin","Edita","Edith","Editha","Edithe","Ediva","Edna","Edwina","Edy","Edyth","Edythe","Effie","Eileen","Eilis","Eimile","Eirena","Ekaterina","Elaina","Elaine","Elana","Elane","Elayne","Elberta","Elbertina","Elbertine","Eleanor","Eleanora","Eleanore","Electra","Eleen","Elena","Elene","Eleni","Elenore","Eleonora","Eleonore","Elfie","Elfreda","Elfrida","Elfrieda","Elga","Elianora","Elianore","Elicia","Elie","Elinor","Elinore","Elisa","Elisabet","Elisabeth","Elisabetta","Elise","Elisha","Elissa","Elita","Eliza","Elizabet","Elizabeth","Elka","Elke","Ella","Elladine","Elle","Ellen","Ellene","Ellette","Elli","Ellie","Ellissa","Elly","Ellyn","Ellynn","Elmira","Elna","Elnora","Elnore","Eloisa","Eloise","Elonore","Elora","Elsa","Elsbeth","Else","Elset","Elsey","Elsi","Elsie","Elsinore","Elspeth","Elsy","Elva","Elvera","Elvina","Elvira","Elwira","Elyn","Elyse","Elysee","Elysha","Elysia","Elyssa","Em","Ema","Emalee","Emalia","Emelda","Emelia","Emelina","Emeline","Emelita","Emelyne","Emera","Emilee","Emili","Emilia","Emilie","Emiline","Emily","Emlyn","Emlynn","Emlynne","Emma","Emmalee","Emmaline","Emmalyn","Emmalynn","Emmalynne","Emmeline","Emmey","Emmi","Emmie","Emmy","Emmye","Emogene","Emyle","Emylee","Engracia","Enid","Enrica","Enrichetta","Enrika","Enriqueta","Eolanda","Eolande","Eran","Erda","Erena","Erica","Ericha","Ericka","Erika","Erin","Erina","Erinn","Erinna","Erma","Ermengarde","Ermentrude","Ermina","Erminia","Erminie","Erna","Ernaline","Ernesta","Ernestine","Ertha","Eryn","Esma","Esmaria","Esme","Esmeralda","Essa","Essie","Essy","Esta","Estel","Estele","Estell","Estella","Estelle","Ester","Esther","Estrella","Estrellita","Ethel","Ethelda","Ethelin","Ethelind","Etheline","Ethelyn","Ethyl","Etta","Etti","Ettie","Etty","Eudora","Eugenia","Eugenie","Eugine","Eula","Eulalie","Eunice","Euphemia","Eustacia","Eva","Evaleen","Evangelia","Evangelin","Evangelina","Evangeline","Evania","Evanne","Eve","Eveleen","Evelina","Eveline","Evelyn","Evey","Evie","Evita","Evonne","Evvie","Evvy","Evy","Eyde","Eydie","Ezmeralda","Fae","Faina","Faith","Fallon","Fan","Fanchette","Fanchon","Fancie","Fancy","Fanechka","Fania","Fanni","Fannie","Fanny","Fanya","Fara","Farah","Farand","Farica","Farra","Farrah","Farrand","Faun","Faunie","Faustina","Faustine","Fawn","Fawne","Fawnia","Fay","Faydra","Faye","Fayette","Fayina","Fayre","Fayth","Faythe","Federica","Fedora","Felecia","Felicdad","Felice","Felicia","Felicity","Felicle","Felipa","Felisha","Felita","Feliza","Fenelia","Feodora","Ferdinanda","Ferdinande","Fern","Fernanda","Fernande","Fernandina","Ferne","Fey","Fiann","Fianna","Fidela","Fidelia","Fidelity","Fifi","Fifine","Filia","Filide","Filippa","Fina","Fiona","Fionna","Fionnula","Fiorenze","Fleur","Fleurette","Flo","Flor","Flora","Florance","Flore","Florella","Florence","Florencia","Florentia","Florenza","Florette","Flori","Floria","Florida","Florie","Florina","Florinda","Floris","Florri","Florrie","Florry","Flory","Flossi","Flossie","Flossy","Flss","Fran","Francene","Frances","Francesca","Francine","Francisca","Franciska","Francoise","Francyne","Frank","Frankie","Franky","Franni","Frannie","Franny","Frayda","Fred","Freda","Freddi","Freddie","Freddy","Fredelia","Frederica","Fredericka","Frederique","Fredi","Fredia","Fredra","Fredrika","Freida","Frieda","Friederike","Fulvia","Gabbey","Gabbi","Gabbie","Gabey","Gabi","Gabie","Gabriel","Gabriela","Gabriell","Gabriella","Gabrielle","Gabriellia","Gabrila","Gaby","Gae","Gael","Gail","Gale","Galina","Garland","Garnet","Garnette","Gates","Gavra","Gavrielle","Gay","Gaye","Gayel","Gayla","Gayle","Gayleen","Gaylene","Gaynor","Gelya","Gena","Gene","Geneva","Genevieve","Genevra","Genia","Genna","Genni","Gennie","Gennifer","Genny","Genovera","Genvieve","George","Georgeanna","Georgeanne","Georgena","Georgeta","Georgetta","Georgette","Georgia","Georgiana","Georgianna","Georgianne","Georgie","Georgina","Georgine","Geralda","Geraldine","Gerda","Gerhardine","Geri","Gerianna","Gerianne","Gerladina","Germain","Germaine","Germana","Gerri","Gerrie","Gerrilee","Gerry","Gert","Gerta","Gerti","Gertie","Gertrud","Gertruda","Gertrude","Gertrudis","Gerty","Giacinta","Giana","Gianina","Gianna","Gigi","Gilberta","Gilberte","Gilbertina","Gilbertine","Gilda","Gilemette","Gill","Gillan","Gilli","Gillian","Gillie","Gilligan","Gilly","Gina","Ginelle","Ginevra","Ginger","Ginni","Ginnie","Ginnifer","Ginny","Giorgia","Giovanna","Gipsy","Giralda","Gisela","Gisele","Gisella","Giselle","Giuditta","Giulia","Giulietta","Giustina","Gizela","Glad","Gladi","Gladys","Gleda","Glen","Glenda","Glenine","Glenn","Glenna","Glennie","Glennis","Glori","Gloria","Gloriana","Gloriane","Glory","Glyn","Glynda","Glynis","Glynnis","Gnni","Godiva","Golda","Goldarina","Goldi","Goldia","Goldie","Goldina","Goldy","Grace","Gracia","Gracie","Grata","Gratia","Gratiana","Gray","Grayce","Grazia","Greer","Greta","Gretal","Gretchen","Grete","Gretel","Grethel","Gretna","Gretta","Grier","Griselda","Grissel","Guendolen","Guenevere","Guenna","Guglielma","Gui","Guillema","Guillemette","Guinevere","Guinna","Gunilla","Gus","Gusella","Gussi","Gussie","Gussy","Gusta","Gusti","Gustie","Gusty","Gwen","Gwendolen","Gwendolin","Gwendolyn","Gweneth","Gwenette","Gwenneth","Gwenni","Gwennie","Gwenny","Gwenora","Gwenore","Gwyn","Gwyneth","Gwynne","Gypsy","Hadria","Hailee","Haily","Haleigh","Halette","Haley","Hali","Halie","Halimeda","Halley","Halli","Hallie","Hally","Hana","Hanna","Hannah","Hanni","Hannie","Hannis","Hanny","Happy","Harlene","Harley","Harli","Harlie","Harmonia","Harmonie","Harmony","Harri","Harrie","Harriet","Harriett","Harrietta","Harriette","Harriot","Harriott","Hatti","Hattie","Hatty","Hayley","Hazel","Heath","Heather","Heda","Hedda","Heddi","Heddie","Hedi","Hedvig","Hedvige","Hedwig","Hedwiga","Hedy","Heida","Heidi","Heidie","Helaina","Helaine","Helen","Helen-elizabeth","Helena","Helene","Helenka","Helga","Helge","Helli","Heloise","Helsa","Helyn","Hendrika","Henka","Henrie","Henrieta","Henrietta","Henriette","Henryetta","Hephzibah","Hermia","Hermina","Hermine","Herminia","Hermione","Herta","Hertha","Hester","Hesther","Hestia","Hetti","Hettie","Hetty","Hilary","Hilda","Hildagard","Hildagarde","Hilde","Hildegaard","Hildegarde","Hildy","Hillary","Hilliary","Hinda","Holli","Hollie","Holly","Holly-anne","Hollyanne","Honey","Honor","Honoria","Hope","Horatia","Hortense","Hortensia","Hulda","Hyacinth","Hyacintha","Hyacinthe","Hyacinthia","Hyacinthie","Hynda","Ianthe","Ibbie","Ibby","Ida","Idalia","Idalina","Idaline","Idell","Idelle","Idette","Ileana","Ileane","Ilene","Ilise","Ilka","Illa","Ilsa","Ilse","Ilysa","Ilyse","Ilyssa","Imelda","Imogen","Imogene","Imojean","Ina","Indira","Ines","Inesita","Inessa","Inez","Inga","Ingaberg","Ingaborg","Inge","Ingeberg","Ingeborg","Inger","Ingrid","Ingunna","Inna","Iolande","Iolanthe","Iona","Iormina","Ira","Irena","Irene","Irina","Iris","Irita","Irma","Isa","Isabel","Isabelita","Isabella","Isabelle","Isadora","Isahella","Iseabal","Isidora","Isis","Isobel","Issi","Issie","Issy","Ivett","Ivette","Ivie","Ivonne","Ivory","Ivy","Izabel","Jacenta","Jacinda","Jacinta","Jacintha","Jacinthe","Jackelyn","Jacki","Jackie","Jacklin","Jacklyn","Jackquelin","Jackqueline","Jacky","Jaclin","Jaclyn","Jacquelin","Jacqueline","Jacquelyn","Jacquelynn","Jacquenetta","Jacquenette","Jacquetta","Jacquette","Jacqui","Jacquie","Jacynth","Jada","Jade","Jaime","Jaimie","Jaine","Jami","Jamie","Jamima","Jammie","Jan","Jana","Janaya","Janaye","Jandy","Jane","Janean","Janeczka","Janeen","Janel","Janela","Janella","Janelle","Janene","Janenna","Janessa","Janet","Janeta","Janetta","Janette","Janeva","Janey","Jania","Janice","Janie","Janifer","Janina","Janine","Janis","Janith","Janka","Janna","Jannel","Jannelle","Janot","Jany","Jaquelin","Jaquelyn","Jaquenetta","Jaquenette","Jaquith","Jasmin","Jasmina","Jasmine","Jayme","Jaymee","Jayne","Jaynell","Jazmin","Jean","Jeana","Jeane","Jeanelle","Jeanette","Jeanie","Jeanine","Jeanna","Jeanne","Jeannette","Jeannie","Jeannine","Jehanna","Jelene","Jemie","Jemima","Jemimah","Jemmie","Jemmy","Jen","Jena","Jenda","Jenelle","Jeni","Jenica","Jeniece","Jenifer","Jeniffer","Jenilee","Jenine","Jenn","Jenna","Jennee","Jennette","Jenni","Jennica","Jennie","Jennifer","Jennilee","Jennine","Jenny","Jeralee","Jere","Jeri","Jermaine","Jerrie","Jerrilee","Jerrilyn","Jerrine","Jerry","Jerrylee","Jess","Jessa","Jessalin","Jessalyn","Jessamine","Jessamyn","Jesse","Jesselyn","Jessi","Jessica","Jessie","Jessika","Jessy","Jewel","Jewell","Jewelle","Jill","Jillana","Jillane","Jillayne","Jilleen","Jillene","Jilli","Jillian","Jillie","Jilly","Jinny","Jo","Jo-ann","Jo-anne","Joan","Joana","Joane","Joanie","Joann","Joanna","Joanne","Joannes","Jobey","Jobi","Jobie","Jobina","Joby","Jobye","Jobyna","Jocelin","Joceline","Jocelyn","Jocelyne","Jodee","Jodi","Jodie","Jody","Joeann","Joela","Joelie","Joell","Joella","Joelle","Joellen","Joelly","Joellyn","Joelynn","Joete","Joey","Johanna","Johannah","Johna","Johnath","Johnette","Johnna","Joice","Jojo","Jolee","Joleen","Jolene","Joletta","Joli","Jolie","Joline","Joly","Jolyn","Jolynn","Jonell","Joni","Jonie","Jonis","Jordain","Jordan","Jordana","Jordanna","Jorey","Jori","Jorie","Jorrie","Jorry","Joscelin","Josee","Josefa","Josefina","Josepha","Josephina","Josephine","Josey","Josi","Josie","Josselyn","Josy","Jourdan","Joy","Joya","Joyan","Joyann","Joyce","Joycelin","Joye","Jsandye","Juana","Juanita","Judi","Judie","Judith","Juditha","Judy","Judye","Juieta","Julee","Juli","Julia","Juliana","Juliane","Juliann","Julianna","Julianne","Julie","Julienne","Juliet","Julieta","Julietta","Juliette","Julina","Juline","Julissa","Julita","June","Junette","Junia","Junie","Junina","Justina","Justine","Justinn","Jyoti","Kacey","Kacie","Kacy","Kaela","Kai","Kaia","Kaila","Kaile","Kailey","Kaitlin","Kaitlyn","Kaitlynn","Kaja","Kakalina","Kala","Kaleena","Kali","Kalie","Kalila","Kalina","Kalinda","Kalindi","Kalli","Kally","Kameko","Kamila","Kamilah","Kamillah","Kandace","Kandy","Kania","Kanya","Kara","Kara-lynn","Karalee","Karalynn","Kare","Karee","Karel","Karen","Karena","Kari","Karia","Karie","Karil","Karilynn","Karin","Karina","Karine","Kariotta","Karisa","Karissa","Karita","Karla","Karlee","Karleen","Karlen","Karlene","Karlie","Karlotta","Karlotte","Karly","Karlyn","Karmen","Karna","Karol","Karola","Karole","Karolina","Karoline","Karoly","Karon","Karrah","Karrie","Karry","Kary","Karyl","Karylin","Karyn","Kasey","Kass","Kassandra","Kassey","Kassi","Kassia","Kassie","Kat","Kata","Katalin","Kate","Katee","Katerina","Katerine","Katey","Kath","Katha","Katharina","Katharine","Katharyn","Kathe","Katherina","Katherine","Katheryn","Kathi","Kathie","Kathleen","Kathlin","Kathrine","Kathryn","Kathryne","Kathy","Kathye","Kati","Katie","Katina","Katine","Katinka","Katleen","Katlin","Katrina","Katrine","Katrinka","Katti","Kattie","Katuscha","Katusha","Katy","Katya","Kay","Kaycee","Kaye","Kayla","Kayle","Kaylee","Kayley","Kaylil","Kaylyn","Keeley","Keelia","Keely","Kelcey","Kelci","Kelcie","Kelcy","Kelila","Kellen","Kelley","Kelli","Kellia","Kellie","Kellina","Kellsie","Kelly","Kellyann","Kelsey","Kelsi","Kelsy","Kendra","Kendre","Kenna","Keri","Keriann","Kerianne","Kerri","Kerrie","Kerrill","Kerrin","Kerry","Kerstin","Kesley","Keslie","Kessia","Kessiah","Ketti","Kettie","Ketty","Kevina","Kevyn","Ki","Kiah","Kial","Kiele","Kiersten","Kikelia","Kiley","Kim","Kimberlee","Kimberley","Kimberli","Kimberly","Kimberlyn","Kimbra","Kimmi","Kimmie","Kimmy","Kinna","Kip","Kipp","Kippie","Kippy","Kira","Kirbee","Kirbie","Kirby","Kiri","Kirsten","Kirsteni","Kirsti","Kirstin","Kirstyn","Kissee","Kissiah","Kissie","Kit","Kitti","Kittie","Kitty","Kizzee","Kizzie","Klara","Klarika","Klarrisa","Konstance","Konstanze","Koo","Kora","Koral","Koralle","Kordula","Kore","Korella","Koren","Koressa","Kori","Korie","Korney","Korrie","Korry","Kris","Krissie","Krissy","Krista","Kristal","Kristan","Kriste","Kristel","Kristen","Kristi","Kristien","Kristin","Kristina","Kristine","Kristy","Kristyn","Krysta","Krystal","Krystalle","Krystle","Krystyna","Kyla","Kyle","Kylen","Kylie","Kylila","Kylynn","Kym","Kynthia","Kyrstin","Lacee","Lacey","Lacie","Lacy","Ladonna","Laetitia","Laina","Lainey","Lana","Lanae","Lane","Lanette","Laney","Lani","Lanie","Lanita","Lanna","Lanni","Lanny","Lara","Laraine","Lari","Larina","Larine","Larisa","Larissa","Lark","Laryssa","Latashia","Latia","Latisha","Latrena","Latrina","Laura","Lauraine","Laural","Lauralee","Laure","Lauree","Laureen","Laurel","Laurella","Lauren","Laurena","Laurene","Lauretta","Laurette","Lauri","Laurianne","Laurice","Laurie","Lauryn","Lavena","Laverna","Laverne","Lavina","Lavinia","Lavinie","Layla","Layne","Layney","Lea","Leah","Leandra","Leann","Leanna","Leanor","Leanora","Lebbie","Leda","Lee","Leeann","Leeanne","Leela","Leelah","Leena","Leesa","Leese","Legra","Leia","Leigh","Leigha","Leila","Leilah","Leisha","Lela","Lelah","Leland","Lelia","Lena","Lenee","Lenette","Lenka","Lenna","Lenora","Lenore","Leodora","Leoine","Leola","Leoline","Leona","Leonanie","Leone","Leonelle","Leonie","Leonora","Leonore","Leontine","Leontyne","Leora","Leshia","Lesley","Lesli","Leslie","Lesly","Lesya","Leta","Lethia","Leticia","Letisha","Letitia","Letizia","Letta","Letti","Lettie","Letty","Lexi","Lexie","Lexine","Lexis","Lexy","Leyla","Lezlie","Lia","Lian","Liana","Liane","Lianna","Lianne","Lib","Libbey","Libbi","Libbie","Libby","Licha","Lida","Lidia","Liesa","Lil","Lila","Lilah","Lilas","Lilia","Lilian","Liliane","Lilias","Lilith","Lilla","Lilli","Lillian","Lillis","Lilllie","Lilly","Lily","Lilyan","Lin","Lina","Lind","Linda","Lindi","Lindie","Lindsay","Lindsey","Lindsy","Lindy","Linea","Linell","Linet","Linette","Linn","Linnea","Linnell","Linnet","Linnie","Linzy","Lira","Lisa","Lisabeth","Lisbeth","Lise","Lisetta","Lisette","Lisha","Lishe","Lissa","Lissi","Lissie","Lissy","Lita","Liuka","Liv","Liva","Livia","Livvie","Livvy","Livvyy","Livy","Liz","Liza","Lizabeth","Lizbeth","Lizette","Lizzie","Lizzy","Loella","Lois","Loise","Lola","Loleta","Lolita","Lolly","Lona","Lonee","Loni","Lonna","Lonni","Lonnie","Lora","Lorain","Loraine","Loralee","Loralie","Loralyn","Loree","Loreen","Lorelei","Lorelle","Loren","Lorena","Lorene","Lorenza","Loretta","Lorette","Lori","Loria","Lorianna","Lorianne","Lorie","Lorilee","Lorilyn","Lorinda","Lorine","Lorita","Lorna","Lorne","Lorraine","Lorrayne","Lorri","Lorrie","Lorrin","Lorry","Lory","Lotta","Lotte","Lotti","Lottie","Lotty","Lou","Louella","Louisa","Louise","Louisette","Loutitia","Lu","Luce","Luci","Lucia","Luciana","Lucie","Lucienne","Lucila","Lucilia","Lucille","Lucina","Lucinda","Lucine","Lucita","Lucky","Lucretia","Lucy","Ludovika","Luella","Luelle","Luisa","Luise","Lula","Lulita","Lulu","Lura","Lurette","Lurleen","Lurlene","Lurline","Lusa","Luz","Lyda","Lydia","Lydie","Lyn","Lynda","Lynde","Lyndel","Lyndell","Lyndsay","Lyndsey","Lyndsie","Lyndy","Lynea","Lynelle","Lynett","Lynette","Lynn","Lynna","Lynne","Lynnea","Lynnell","Lynnelle","Lynnet","Lynnett","Lynnette","Lynsey","Lyssa","Mab","Mabel","Mabelle","Mable","Mada","Madalena","Madalyn","Maddalena","Maddi","Maddie","Maddy","Madel","Madelaine","Madeleine","Madelena","Madelene","Madelin","Madelina","Madeline","Madella","Madelle","Madelon","Madelyn","Madge","Madlen","Madlin","Madonna","Mady","Mae","Maegan","Mag","Magda","Magdaia","Magdalen","Magdalena","Magdalene","Maggee","Maggi","Maggie","Maggy","Mahala","Mahalia","Maia","Maible","Maiga","Maighdiln","Mair","Maire","Maisey","Maisie","Maitilde","Mala","Malanie","Malena","Malia","Malina","Malinda","Malinde","Malissa","Malissia","Mallissa","Mallorie","Mallory","Malorie","Malory","Malva","Malvina","Malynda","Mame","Mamie","Manda","Mandi","Mandie","Mandy","Manon","Manya","Mara","Marabel","Marcela","Marcelia","Marcella","Marcelle","Marcellina","Marcelline","Marchelle","Marci","Marcia","Marcie","Marcile","Marcille","Marcy","Mareah","Maren","Marena","Maressa","Marga","Margalit","Margalo","Margaret","Margareta","Margarete","Margaretha","Margarethe","Margaretta","Margarette","Margarita","Margaux","Marge","Margeaux","Margery","Marget","Margette","Margi","Margie","Margit","Margo","Margot","Margret","Marguerite","Margy","Mari","Maria","Mariam","Marian","Mariana","Mariann","Marianna","Marianne","Maribel","Maribelle","Maribeth","Marice","Maridel","Marie","Marie-ann","Marie-jeanne","Marieann","Mariejeanne","Mariel","Mariele","Marielle","Mariellen","Marietta","Mariette","Marigold","Marijo","Marika","Marilee","Marilin","Marillin","Marilyn","Marin","Marina","Marinna","Marion","Mariquilla","Maris","Marisa","Mariska","Marissa","Marita","Maritsa","Mariya","Marj","Marja","Marje","Marji","Marjie","Marjorie","Marjory","Marjy","Marketa","Marla","Marlane","Marleah","Marlee","Marleen","Marlena","Marlene","Marley","Marlie","Marline","Marlo","Marlyn","Marna","Marne","Marney","Marni","Marnia","Marnie","Marquita","Marrilee","Marris","Marrissa","Marsha","Marsiella","Marta","Martelle","Martguerita","Martha","Marthe","Marthena","Marti","Martica","Martie","Martina","Martita","Marty","Martynne","Mary","Marya","Maryann","Maryanna","Maryanne","Marybelle","Marybeth","Maryellen","Maryjane","Maryjo","Maryl","Marylee","Marylin","Marylinda","Marylou","Marylynne","Maryrose","Marys","Marysa","Masha","Matelda","Mathilda","Mathilde","Matilda","Matilde","Matti","Mattie","Matty","Maud","Maude","Maudie","Maura","Maure","Maureen","Maureene","Maurene","Maurine","Maurise","Maurita","Maurizia","Mavis","Mavra","Max","Maxi","Maxie","Maxine","Maxy","May","Maybelle","Maye","Mead","Meade","Meagan","Meaghan","Meara","Mechelle","Meg","Megan","Megen","Meggi","Meggie","Meggy","Meghan","Meghann","Mehetabel","Mei","Mel","Mela","Melamie","Melania","Melanie","Melantha","Melany","Melba","Melesa","Melessa","Melicent","Melina","Melinda","Melinde","Melisa","Melisande","Melisandra","Melisenda","Melisent","Melissa","Melisse","Melita","Melitta","Mella","Melli","Mellicent","Mellie","Mellisa","Mellisent","Melloney","Melly","Melodee","Melodie","Melody","Melonie","Melony","Melosa","Melva","Mercedes","Merci","Mercie","Mercy","Meredith","Meredithe","Meridel","Meridith","Meriel","Merilee","Merilyn","Meris","Merissa","Merl","Merla","Merle","Merlina","Merline","Merna","Merola","Merralee","Merridie","Merrie","Merrielle","Merrile","Merrilee","Merrili","Merrill","Merrily","Merry","Mersey","Meryl","Meta","Mia","Micaela","Michaela","Michaelina","Michaeline","Michaella","Michal","Michel","Michele","Michelina","Micheline","Michell","Michelle","Micki","Mickie","Micky","Midge","Mignon","Mignonne","Miguela","Miguelita","Mikaela","Mil","Mildred","Mildrid","Milena","Milicent","Milissent","Milka","Milli","Millicent","Millie","Millisent","Milly","Milzie","Mimi","Min","Mina","Minda","Mindy","Minerva","Minetta","Minette","Minna","Minnaminnie","Minne","Minni","Minnie","Minnnie","Minny","Minta","Miquela","Mira","Mirabel","Mirabella","Mirabelle","Miran","Miranda","Mireielle","Mireille","Mirella","Mirelle","Miriam","Mirilla","Mirna","Misha","Missie","Missy","Misti","Misty","Mitzi","Modesta","Modestia","Modestine","Modesty","Moina","Moira","Moll","Mollee","Molli","Mollie","Molly","Mommy","Mona","Monah","Monica","Monika","Monique","Mora","Moreen","Morena","Morgan","Morgana","Morganica","Morganne","Morgen","Moria","Morissa","Morna","Moselle","Moyna","Moyra","Mozelle","Muffin","Mufi","Mufinella","Muire","Mureil","Murial","Muriel","Murielle","Myra","Myrah","Myranda","Myriam","Myrilla","Myrle","Myrlene","Myrna","Myrta","Myrtia","Myrtice","Myrtie","Myrtle","Nada","Nadean","Nadeen","Nadia","Nadine","Nadiya","Nady","Nadya","Nalani","Nan","Nana","Nananne","Nance","Nancee","Nancey","Nanci","Nancie","Nancy","Nanete","Nanette","Nani","Nanice","Nanine","Nannette","Nanni","Nannie","Nanny","Nanon","Naoma","Naomi","Nara","Nari","Nariko","Nat","Nata","Natala","Natalee","Natalie","Natalina","Nataline","Natalya","Natasha","Natassia","Nathalia","Nathalie","Natividad","Natka","Natty","Neala","Neda","Nedda","Nedi","Neely","Neila","Neile","Neilla","Neille","Nelia","Nelie","Nell","Nelle","Nelli","Nellie","Nelly","Nerissa","Nerita","Nert","Nerta","Nerte","Nerti","Nertie","Nerty","Nessa","Nessi","Nessie","Nessy","Nesta","Netta","Netti","Nettie","Nettle","Netty","Nevsa","Neysa","Nichol","Nichole","Nicholle","Nicki","Nickie","Nicky","Nicol","Nicola","Nicole","Nicolea","Nicolette","Nicoli","Nicolina","Nicoline","Nicolle","Nikaniki","Nike","Niki","Nikki","Nikkie","Nikoletta","Nikolia","Nina","Ninetta","Ninette","Ninnetta","Ninnette","Ninon","Nissa","Nisse","Nissie","Nissy","Nita","Nixie","Noami","Noel","Noelani","Noell","Noella","Noelle","Noellyn","Noelyn","Noemi","Nola","Nolana","Nolie","Nollie","Nomi","Nona","Nonah","Noni","Nonie","Nonna","Nonnah","Nora","Norah","Norean","Noreen","Norene","Norina","Norine","Norma","Norri","Norrie","Norry","Novelia","Nydia","Nyssa","Octavia","Odele","Odelia","Odelinda","Odella","Odelle","Odessa","Odetta","Odette","Odilia","Odille","Ofelia","Ofella","Ofilia","Ola","Olenka","Olga","Olia","Olimpia","Olive","Olivette","Olivia","Olivie","Oliy","Ollie","Olly","Olva","Olwen","Olympe","Olympia","Olympie","Ondrea","Oneida","Onida","Oona","Opal","Opalina","Opaline","Ophelia","Ophelie","Ora","Oralee","Oralia","Oralie","Oralla","Oralle","Orel","Orelee","Orelia","Orelie","Orella","Orelle","Oriana","Orly","Orsa","Orsola","Ortensia","Otha","Othelia","Othella","Othilia","Othilie","Ottilie","Page","Paige","Paloma","Pam","Pamela","Pamelina","Pamella","Pammi","Pammie","Pammy","Pandora","Pansie","Pansy","Paola","Paolina","Papagena","Pat","Patience","Patrica","Patrice","Patricia","Patrizia","Patsy","Patti","Pattie","Patty","Paula","Paule","Pauletta","Paulette","Pauli","Paulie","Paulina","Pauline","Paulita","Pauly","Pavia","Pavla","Pearl","Pearla","Pearle","Pearline","Peg","Pegeen","Peggi","Peggie","Peggy","Pen","Penelopa","Penelope","Penni","Pennie","Penny","Pepi","Pepita","Peri","Peria","Perl","Perla","Perle","Perri","Perrine","Perry","Persis","Pet","Peta","Petra","Petrina","Petronella","Petronia","Petronilla","Petronille","Petunia","Phaedra","Phaidra","Phebe","Phedra","Phelia","Phil","Philipa","Philippa","Philippe","Philippine","Philis","Phillida","Phillie","Phillis","Philly","Philomena","Phoebe","Phylis","Phyllida","Phyllis","Phyllys","Phylys","Pia","Pier","Pierette","Pierrette","Pietra","Piper","Pippa","Pippy","Polly","Pollyanna","Pooh","Poppy","Portia","Pris","Prisca","Priscella","Priscilla","Prissie","Pru","Prudence","Prudi","Prudy","Prue","Queenie","Quentin","Querida","Quinn","Quinta","Quintana","Quintilla","Quintina","Rachael","Rachel","Rachele","Rachelle","Rae","Raeann","Raf","Rafa","Rafaela","Rafaelia","Rafaelita","Rahal","Rahel","Raina","Raine","Rakel","Ralina","Ramona","Ramonda","Rana","Randa","Randee","Randene","Randi","Randie","Randy","Ranee","Rani","Rania","Ranice","Ranique","Ranna","Raphaela","Raquel","Raquela","Rasia","Rasla","Raven","Ray","Raychel","Raye","Rayna","Raynell","Rayshell","Rea","Reba","Rebbecca","Rebe","Rebeca","Rebecca","Rebecka","Rebeka","Rebekah","Rebekkah","Ree","Reeba","Reena","Reeta","Reeva","Regan","Reggi","Reggie","Regina","Regine","Reiko","Reina","Reine","Remy","Rena","Renae","Renata","Renate","Rene","Renee","Renell","Renelle","Renie","Rennie","Reta","Retha","Revkah","Rey","Reyna","Rhea","Rheba","Rheta","Rhetta","Rhiamon","Rhianna","Rhianon","Rhoda","Rhodia","Rhodie","Rhody","Rhona","Rhonda","Riane","Riannon","Rianon","Rica","Ricca","Rici","Ricki","Rickie","Ricky","Riki","Rikki","Rina","Risa","Rita","Riva","Rivalee","Rivi","Rivkah","Rivy","Roana","Roanna","Roanne","Robbi","Robbie","Robbin","Robby","Robbyn","Robena","Robenia","Roberta","Robin","Robina","Robinet","Robinett","Robinetta","Robinette","Robinia","Roby","Robyn","Roch","Rochell","Rochella","Rochelle","Rochette","Roda","Rodi","Rodie","Rodina","Rois","Romola","Romona","Romonda","Romy","Rona","Ronalda","Ronda","Ronica","Ronna","Ronni","Ronnica","Ronnie","Ronny","Roobbie","Rora","Rori","Rorie","Rory","Ros","Rosa","Rosabel","Rosabella","Rosabelle","Rosaleen","Rosalia","Rosalie","Rosalind","Rosalinda","Rosalinde","Rosaline","Rosalyn","Rosalynd","Rosamond","Rosamund","Rosana","Rosanna","Rosanne","Rose","Roseann","Roseanna","Roseanne","Roselia","Roselin","Roseline","Rosella","Roselle","Rosemaria","Rosemarie","Rosemary","Rosemonde","Rosene","Rosetta","Rosette","Roshelle","Rosie","Rosina","Rosita","Roslyn","Rosmunda","Rosy","Row","Rowe","Rowena","Roxana","Roxane","Roxanna","Roxanne","Roxi","Roxie","Roxine","Roxy","Roz","Rozalie","Rozalin","Rozamond","Rozanna","Rozanne","Roze","Rozele","Rozella","Rozelle","Rozina","Rubetta","Rubi","Rubia","Rubie","Rubina","Ruby","Ruperta","Ruth","Ruthann","Ruthanne","Ruthe","Ruthi","Ruthie","Ruthy","Ryann","Rycca","Saba","Sabina","Sabine","Sabra","Sabrina","Sacha","Sada","Sadella","Sadie","Sadye","Saidee","Sal","Salaidh","Sallee","Salli","Sallie","Sally","Sallyann","Sallyanne","Saloma","Salome","Salomi","Sam","Samantha","Samara","Samaria","Sammy","Sande","Sandi","Sandie","Sandra","Sandy","Sandye","Sapphira","Sapphire","Sara","Sara-ann","Saraann","Sarah","Sarajane","Saree","Sarena","Sarene","Sarette","Sari","Sarina","Sarine","Sarita","Sascha","Sasha","Sashenka","Saudra","Saundra","Savina","Sayre","Scarlet","Scarlett","Sean","Seana","Seka","Sela","Selena","Selene","Selestina","Selia","Selie","Selina","Selinda","Seline","Sella","Selle","Selma","Sena","Sephira","Serena","Serene","Shae","Shaina","Shaine","Shalna","Shalne","Shana","Shanda","Shandee","Shandeigh","Shandie","Shandra","Shandy","Shane","Shani","Shanie","Shanna","Shannah","Shannen","Shannon","Shanon","Shanta","Shantee","Shara","Sharai","Shari","Sharia","Sharity","Sharl","Sharla","Sharleen","Sharlene","Sharline","Sharon","Sharona","Sharron","Sharyl","Shaun","Shauna","Shawn","Shawna","Shawnee","Shay","Shayla","Shaylah","Shaylyn","Shaylynn","Shayna","Shayne","Shea","Sheba","Sheela","Sheelagh","Sheelah","Sheena","Sheeree","Sheila","Sheila-kathryn","Sheilah","Shel","Shela","Shelagh","Shelba","Shelbi","Shelby","Shelia","Shell","Shelley","Shelli","Shellie","Shelly","Shena","Sher","Sheree","Sheri","Sherie","Sherill","Sherilyn","Sherline","Sherri","Sherrie","Sherry","Sherye","Sheryl","Shina","Shir","Shirl","Shirlee","Shirleen","Shirlene","Shirley","Shirline","Shoshana","Shoshanna","Siana","Sianna","Sib","Sibbie","Sibby","Sibeal","Sibel","Sibella","Sibelle","Sibilla","Sibley","Sibyl","Sibylla","Sibylle","Sidoney","Sidonia","Sidonnie","Sigrid","Sile","Sileas","Silva","Silvana","Silvia","Silvie","Simona","Simone","Simonette","Simonne","Sindee","Siobhan","Sioux","Siouxie","Sisely","Sisile","Sissie","Sissy","Siusan","Sofia","Sofie","Sondra","Sonia","Sonja","Sonni","Sonnie","Sonnnie","Sonny","Sonya","Sophey","Sophi","Sophia","Sophie","Sophronia","Sorcha","Sosanna","Stace","Stacee","Stacey","Staci","Stacia","Stacie","Stacy","Stafani","Star","Starla","Starlene","Starlin","Starr","Stefa","Stefania","Stefanie","Steffane","Steffi","Steffie","Stella","Stepha","Stephana","Stephani","Stephanie","Stephannie","Stephenie","Stephi","Stephie","Stephine","Stesha","Stevana","Stevena","Stoddard","Storm","Stormi","Stormie","Stormy","Sue","Suellen","Sukey","Suki","Sula","Sunny","Sunshine","Susan","Susana","Susanetta","Susann","Susanna","Susannah","Susanne","Susette","Susi","Susie","Susy","Suzann","Suzanna","Suzanne","Suzette","Suzi","Suzie","Suzy","Sybil","Sybila","Sybilla","Sybille","Sybyl","Sydel","Sydelle","Sydney","Sylvia","Tabatha","Tabbatha","Tabbi","Tabbie","Tabbitha","Tabby","Tabina","Tabitha","Taffy","Talia","Tallia","Tallie","Tallou","Tallulah","Tally","Talya","Talyah","Tamar","Tamara","Tamarah","Tamarra","Tamera","Tami","Tamiko","Tamma","Tammara","Tammi","Tammie","Tammy","Tamqrah","Tamra","Tana","Tandi","Tandie","Tandy","Tanhya","Tani","Tania","Tanitansy","Tansy","Tanya","Tara","Tarah","Tarra","Tarrah","Taryn","Tasha","Tasia","Tate","Tatiana","Tatiania","Tatum","Tawnya","Tawsha","Ted","Tedda","Teddi","Teddie","Teddy","Tedi","Tedra","Teena","Teirtza","Teodora","Tera","Teresa","Terese","Teresina","Teresita","Teressa","Teri","Teriann","Terra","Terri","Terrie","Terrijo","Terry","Terrye","Tersina","Terza","Tess","Tessa","Tessi","Tessie","Tessy","Thalia","Thea","Theadora","Theda","Thekla","Thelma","Theo","Theodora","Theodosia","Theresa","Therese","Theresina","Theresita","Theressa","Therine","Thia","Thomasa","Thomasin","Thomasina","Thomasine","Tiena","Tierney","Tiertza","Tiff","Tiffani","Tiffanie","Tiffany","Tiffi","Tiffie","Tiffy","Tilda","Tildi","Tildie","Tildy","Tillie","Tilly","Tim","Timi","Timmi","Timmie","Timmy","Timothea","Tina","Tine","Tiphani","Tiphanie","Tiphany","Tish","Tisha","Tobe","Tobey","Tobi","Toby","Tobye","Toinette","Toma","Tomasina","Tomasine","Tomi","Tommi","Tommie","Tommy","Toni","Tonia","Tonie","Tony","Tonya","Tonye","Tootsie","Torey","Tori","Torie","Torrie","Tory","Tova","Tove","Tracee","Tracey","Traci","Tracie","Tracy","Trenna","Tresa","Trescha","Tressa","Tricia","Trina","Trish","Trisha","Trista","Trix","Trixi","Trixie","Trixy","Truda","Trude","Trudey","Trudi","Trudie","Trudy","Trula","Tuesday","Twila","Twyla","Tybi","Tybie","Tyne","Ula","Ulla","Ulrica","Ulrika","Ulrikaumeko","Ulrike","Umeko","Una","Ursa","Ursala","Ursola","Ursula","Ursulina","Ursuline","Uta","Val","Valaree","Valaria","Vale","Valeda","Valencia","Valene","Valenka","Valentia","Valentina","Valentine","Valera","Valeria","Valerie","Valery","Valerye","Valida","Valina","Valli","Vallie","Vally","Valma","Valry","Van","Vanda","Vanessa","Vania","Vanna","Vanni","Vannie","Vanny","Vanya","Veda","Velma","Velvet","Venita","Venus","Vera","Veradis","Vere","Verena","Verene","Veriee","Verile","Verina","Verine","Verla","Verna","Vernice","Veronica","Veronika","Veronike","Veronique","Vevay","Vi","Vicki","Vickie","Vicky","Victoria","Vida","Viki","Vikki","Vikky","Vilhelmina","Vilma","Vin","Vina","Vinita","Vinni","Vinnie","Vinny","Viola","Violante","Viole","Violet","Violetta","Violette","Virgie","Virgina","Virginia","Virginie","Vita","Vitia","Vitoria","Vittoria","Viv","Viva","Vivi","Vivia","Vivian","Viviana","Vivianna","Vivianne","Vivie","Vivien","Viviene","Vivienne","Viviyan","Vivyan","Vivyanne","Vonni","Vonnie","Vonny","Vyky","Wallie","Wallis","Walliw","Wally","Waly","Wanda","Wandie","Wandis","Waneta","Wanids","Wenda","Wendeline","Wendi","Wendie","Wendy","Wendye","Wenona","Wenonah","Whitney","Wileen","Wilhelmina","Wilhelmine","Wilie","Willa","Willabella","Willamina","Willetta","Willette","Willi","Willie","Willow","Willy","Willyt","Wilma","Wilmette","Wilona","Wilone","Wilow","Windy","Wini","Winifred","Winna","Winnah","Winne","Winni","Winnie","Winnifred","Winny","Winona","Winonah","Wren","Wrennie","Wylma","Wynn","Wynne","Wynnie","Wynny","Xaviera","Xena","Xenia","Xylia","Xylina","Yalonda","Yasmeen","Yasmin","Yelena","Yetta","Yettie","Yetty","Yevette","Ynes","Ynez","Yoko","Yolanda","Yolande","Yolane","Yolanthe","Yoshi","Yoshiko","Yovonnda","Ysabel","Yvette","Yvonne","Zabrina","Zahara","Zandra","Zaneta","Zara","Zarah","Zaria","Zarla","Zea","Zelda","Zelma","Zena","Zenia","Zia","Zilvia","Zita","Zitella","Zoe","Zola","Zonda","Zondra","Zonnya","Zora","Zorah","Zorana","Zorina","Zorine","Zsazsa","Zulema","Zuzana"];var iq={};yK(iq,{void:()=>cD,util:()=>V$,unknown:()=>uD,union:()=>nD,undefined:()=>yD,tuple:()=>iD,transformer:()=>KI,symbol:()=>gD,string:()=>AT,strictObject:()=>oD,setErrorMap:()=>PD,set:()=>tD,record:()=>UD,quotelessJson:()=>KD,promise:()=>$I,preprocess:()=>YI,pipeline:()=>jI,ostring:()=>OI,optional:()=>_I,onumber:()=>WI,oboolean:()=>HI,objectUtil:()=>r2,object:()=>dD,number:()=>kT,nullable:()=>PI,null:()=>pD,never:()=>mD,nativeEnum:()=>qI,nan:()=>ID,map:()=>FD,makeIssue:()=>VP,literal:()=>eD,lazy:()=>aD,late:()=>hD,isValid:()=>tK,isDirty:()=>g1,isAsync:()=>x4,isAborted:()=>b1,intersection:()=>BD,instanceof:()=>DD,getParsedType:()=>qK,getErrorMap:()=>p4,function:()=>QD,enum:()=>sD,effect:()=>KI,discriminatedUnion:()=>rD,defaultErrorMap:()=>NK,datetimeRegex:()=>TT,date:()=>bD,custom:()=>fT,coerce:()=>zI,boolean:()=>GT,bigint:()=>LD,array:()=>lD,any:()=>xD,addIssueToContext:()=>rq,ZodVoid:()=>SP,ZodUnknown:()=>QK,ZodUnion:()=>o4,ZodUndefined:()=>l4,ZodType:()=>A$,ZodTuple:()=>KK,ZodTransformer:()=>x6,ZodSymbol:()=>MP,ZodString:()=>b6,ZodSet:()=>y_,ZodSchema:()=>A$,ZodRecord:()=>CP,ZodReadonly:()=>t4,ZodPromise:()=>p_,ZodPipeline:()=>RP,ZodParsedType:()=>oq,ZodOptional:()=>y6,ZodObject:()=>x$,ZodNumber:()=>aK,ZodNullable:()=>RK,ZodNull:()=>d4,ZodNever:()=>$K,ZodNativeEnum:()=>i4,ZodNaN:()=>EP,ZodMap:()=>NP,ZodLiteral:()=>B4,ZodLazy:()=>r4,ZodIssueCode:()=>uq,ZodIntersection:()=>n4,ZodFunction:()=>m4,ZodFirstPartyTypeKind:()=>Y$,ZodError:()=>Q8,ZodEnum:()=>sK,ZodEffects:()=>x6,ZodDiscriminatedUnion:()=>y1,ZodDefault:()=>U4,ZodDate:()=>b_,ZodCatch:()=>F4,ZodBranded:()=>p1,ZodBoolean:()=>c4,ZodBigInt:()=>eK,ZodArray:()=>g6,ZodAny:()=>g_,Schema:()=>A$,ParseStatus:()=>E8,OK:()=>p8,NEVER:()=>JI,INVALID:()=>K$,EMPTY_PATH:()=>YD,DIRTY:()=>L_,BRAND:()=>RD});var V$;(function(q){q.assertEqual=(P)=>{};function $(P){}q.assertIs=$;function K(P){throw Error()}q.assertNever=K,q.arrayToEnum=(P)=>{let O={};for(let Y of P)O[Y]=Y;return O},q.getValidEnumValues=(P)=>{let O=q.objectKeys(P).filter((H)=>typeof P[P[H]]!=="number"),Y={};for(let H of O)Y[H]=P[H];return q.objectValues(Y)},q.objectValues=(P)=>{return q.objectKeys(P).map(function(O){return P[O]})},q.objectKeys=typeof Object.keys==="function"?(P)=>Object.keys(P):(P)=>{let O=[];for(let Y in P)if(Object.prototype.hasOwnProperty.call(P,Y))O.push(Y);return O},q.find=(P,O)=>{for(let Y of P)if(O(Y))return Y;return},q.isInteger=typeof Number.isInteger==="function"?(P)=>Number.isInteger(P):(P)=>typeof P==="number"&&Number.isFinite(P)&&Math.floor(P)===P;function _(P,O=" | "){return P.map((Y)=>typeof Y==="string"?`'${Y}'`:Y).join(O)}q.joinValues=_,q.jsonStringifyReplacer=(P,O)=>{if(typeof O==="bigint")return O.toString();return O}})(V$||(V$={}));var r2;(function(q){q.mergeShapes=($,K)=>{return{...$,...K}}})(r2||(r2={}));var oq=V$.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),qK=(q)=>{switch(typeof q){case"undefined":return oq.undefined;case"string":return oq.string;case"number":return Number.isNaN(q)?oq.nan:oq.number;case"boolean":return oq.boolean;case"function":return oq.function;case"bigint":return oq.bigint;case"symbol":return oq.symbol;case"object":if(Array.isArray(q))return oq.array;if(q===null)return oq.null;if(q.then&&typeof q.then==="function"&&q.catch&&typeof q.catch==="function")return oq.promise;if(typeof Map<"u"&&q instanceof Map)return oq.map;if(typeof Set<"u"&&q instanceof Set)return oq.set;if(typeof Date<"u"&&q instanceof Date)return oq.date;return oq.object;default:return oq.unknown}};var uq=V$.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),KD=(q)=>{return JSON.stringify(q,null,2).replace(/"([^"]+)":/g,"$1:")};class Q8 extends Error{get errors(){return this.issues}constructor(q){super();this.issues=[],this.addIssue=(K)=>{this.issues=[...this.issues,K]},this.addIssues=(K=[])=>{this.issues=[...this.issues,...K]};let $=new.target.prototype;if(Object.setPrototypeOf)Object.setPrototypeOf(this,$);else this.__proto__=$;this.name="ZodError",this.issues=q}format(q){let $=q||function(P){return P.message},K={_errors:[]},_=(P)=>{for(let O of P.issues)if(O.code==="invalid_union")O.unionErrors.map(_);else if(O.code==="invalid_return_type")_(O.returnTypeError);else if(O.code==="invalid_arguments")_(O.argumentsError);else if(O.path.length===0)K._errors.push($(O));else{let Y=K,H=0;while(H<O.path.length){let v=O.path[H];if(H!==O.path.length-1)Y[v]=Y[v]||{_errors:[]};else Y[v]=Y[v]||{_errors:[]},Y[v]._errors.push($(O));Y=Y[v],H++}}};return _(this),K}static assert(q){if(!(q instanceof Q8))throw Error(`Not a ZodError: ${q}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,V$.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(q=($)=>$.message){let $={},K=[];for(let _ of this.issues)if(_.path.length>0){let P=_.path[0];$[P]=$[P]||[],$[P].push(q(_))}else K.push(q(_));return{formErrors:K,fieldErrors:$}}get formErrors(){return this.flatten()}}Q8.create=(q)=>{return new Q8(q)};var _D=(q,$)=>{let K;switch(q.code){case uq.invalid_type:if(q.received===oq.undefined)K="Required";else K=`Expected ${q.expected}, received ${q.received}`;break;case uq.invalid_literal:K=`Invalid literal value, expected ${JSON.stringify(q.expected,V$.jsonStringifyReplacer)}`;break;case uq.unrecognized_keys:K=`Unrecognized key(s) in object: ${V$.joinValues(q.keys,", ")}`;break;case uq.invalid_union:K="Invalid input";break;case uq.invalid_union_discriminator:K=`Invalid discriminator value. Expected ${V$.joinValues(q.options)}`;break;case uq.invalid_enum_value:K=`Invalid enum value. Expected ${V$.joinValues(q.options)}, received '${q.received}'`;break;case uq.invalid_arguments:K="Invalid function arguments";break;case uq.invalid_return_type:K="Invalid function return type";break;case uq.invalid_date:K="Invalid date";break;case uq.invalid_string:if(typeof q.validation==="object")if("includes"in q.validation){if(K=`Invalid input: must include "${q.validation.includes}"`,typeof q.validation.position==="number")K=`${K} at one or more positions greater than or equal to ${q.validation.position}`}else if("startsWith"in q.validation)K=`Invalid input: must start with "${q.validation.startsWith}"`;else if("endsWith"in q.validation)K=`Invalid input: must end with "${q.validation.endsWith}"`;else V$.assertNever(q.validation);else if(q.validation!=="regex")K=`Invalid ${q.validation}`;else K="Invalid";break;case uq.too_small:if(q.type==="array")K=`Array must contain ${q.exact?"exactly":q.inclusive?"at least":"more than"} ${q.minimum} element(s)`;else if(q.type==="string")K=`String must contain ${q.exact?"exactly":q.inclusive?"at least":"over"} ${q.minimum} character(s)`;else if(q.type==="number")K=`Number must be ${q.exact?"exactly equal to ":q.inclusive?"greater than or equal to ":"greater than "}${q.minimum}`;else if(q.type==="bigint")K=`Number must be ${q.exact?"exactly equal to ":q.inclusive?"greater than or equal to ":"greater than "}${q.minimum}`;else if(q.type==="date")K=`Date must be ${q.exact?"exactly equal to ":q.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(q.minimum))}`;else K="Invalid input";break;case uq.too_big:if(q.type==="array")K=`Array must contain ${q.exact?"exactly":q.inclusive?"at most":"less than"} ${q.maximum} element(s)`;else if(q.type==="string")K=`String must contain ${q.exact?"exactly":q.inclusive?"at most":"under"} ${q.maximum} character(s)`;else if(q.type==="number")K=`Number must be ${q.exact?"exactly":q.inclusive?"less than or equal to":"less than"} ${q.maximum}`;else if(q.type==="bigint")K=`BigInt must be ${q.exact?"exactly":q.inclusive?"less than or equal to":"less than"} ${q.maximum}`;else if(q.type==="date")K=`Date must be ${q.exact?"exactly":q.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(q.maximum))}`;else K="Invalid input";break;case uq.custom:K="Invalid input";break;case uq.invalid_intersection_types:K="Intersection results could not be merged";break;case uq.not_multiple_of:K=`Number must be a multiple of ${q.multipleOf}`;break;case uq.not_finite:K="Number must be finite";break;default:K=$.defaultError,V$.assertNever(q)}return{message:K}},NK=_D;var HT=NK;function PD(q){HT=q}function p4(){return HT}var VP=(q)=>{let{data:$,path:K,errorMaps:_,issueData:P}=q,O=[...K,...P.path||[]],Y={...P,path:O};if(P.message!==void 0)return{...P,path:O,message:P.message};let H="",v=_.filter((X)=>!!X).slice().reverse();for(let X of v)H=X(Y,{data:$,defaultError:H}).message;return{...P,path:O,message:H}},YD=[];function rq(q,$){let K=p4(),_=VP({issueData:$,data:q.data,path:q.path,errorMaps:[q.common.contextualErrorMap,q.schemaErrorMap,K,K===NK?void 0:NK].filter((P)=>!!P)});q.common.issues.push(_)}class E8{constructor(){this.value="valid"}dirty(){if(this.value==="valid")this.value="dirty"}abort(){if(this.value!=="aborted")this.value="aborted"}static mergeArray(q,$){let K=[];for(let _ of $){if(_.status==="aborted")return K$;if(_.status==="dirty")q.dirty();K.push(_.value)}return{status:q.value,value:K}}static async mergeObjectAsync(q,$){let K=[];for(let _ of $){let P=await _.key,O=await _.value;K.push({key:P,value:O})}return E8.mergeObjectSync(q,K)}static mergeObjectSync(q,$){let K={};for(let _ of $){let{key:P,value:O}=_;if(P.status==="aborted")return K$;if(O.status==="aborted")return K$;if(P.status==="dirty")q.dirty();if(O.status==="dirty")q.dirty();if(P.value!=="__proto__"&&(typeof O.value<"u"||_.alwaysSet))K[P.value]=O.value}return{status:q.value,value:K}}}var K$=Object.freeze({status:"aborted"}),L_=(q)=>({status:"dirty",value:q}),p8=(q)=>({status:"valid",value:q}),b1=(q)=>q.status==="aborted",g1=(q)=>q.status==="dirty",tK=(q)=>q.status==="valid",x4=(q)=>typeof Promise<"u"&&q instanceof Promise;var eq;(function(q){q.errToObj=($)=>typeof $==="string"?{message:$}:$||{},q.toString=($)=>typeof $==="string"?$:$?.message})(eq||(eq={}));class p6{constructor(q,$,K,_){this._cachedPath=[],this.parent=q,this.data=$,this._path=K,this._key=_}get path(){if(!this._cachedPath.length)if(Array.isArray(this._key))this._cachedPath.push(...this._path,...this._key);else this._cachedPath.push(...this._path,this._key);return this._cachedPath}}var zT=(q,$)=>{if(tK($))return{success:!0,data:$.value};else{if(!q.common.issues.length)throw Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;let K=new Q8(q.common.issues);return this._error=K,this._error}}}};function T$(q){if(!q)return{};let{errorMap:$,invalid_type_error:K,required_error:_,description:P}=q;if($&&(K||_))throw Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);if($)return{errorMap:$,description:P};return{errorMap:(Y,H)=>{let{message:v}=q;if(Y.code==="invalid_enum_value")return{message:v??H.defaultError};if(typeof H.data>"u")return{message:v??_??H.defaultError};if(Y.code!=="invalid_type")return{message:H.defaultError};return{message:v??K??H.defaultError}},description:P}}class A${get description(){return this._def.description}_getType(q){return qK(q.data)}_getOrReturnCtx(q,$){return $||{common:q.parent.common,data:q.data,parsedType:qK(q.data),schemaErrorMap:this._def.errorMap,path:q.path,parent:q.parent}}_processInputParams(q){return{status:new E8,ctx:{common:q.parent.common,data:q.data,parsedType:qK(q.data),schemaErrorMap:this._def.errorMap,path:q.path,parent:q.parent}}}_parseSync(q){let $=this._parse(q);if(x4($))throw Error("Synchronous parse encountered promise.");return $}_parseAsync(q){let $=this._parse(q);return Promise.resolve($)}parse(q,$){let K=this.safeParse(q,$);if(K.success)return K.data;throw K.error}safeParse(q,$){let K={common:{issues:[],async:$?.async??!1,contextualErrorMap:$?.errorMap},path:$?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:q,parsedType:qK(q)},_=this._parseSync({data:q,path:K.path,parent:K});return zT(K,_)}"~validate"(q){let $={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:q,parsedType:qK(q)};if(!this["~standard"].async)try{let K=this._parseSync({data:q,path:[],parent:$});return tK(K)?{value:K.value}:{issues:$.common.issues}}catch(K){if(K?.message?.toLowerCase()?.includes("encountered"))this["~standard"].async=!0;$.common={issues:[],async:!0}}return this._parseAsync({data:q,path:[],parent:$}).then((K)=>tK(K)?{value:K.value}:{issues:$.common.issues})}async parseAsync(q,$){let K=await this.safeParseAsync(q,$);if(K.success)return K.data;throw K.error}async safeParseAsync(q,$){let K={common:{issues:[],contextualErrorMap:$?.errorMap,async:!0},path:$?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:q,parsedType:qK(q)},_=this._parse({data:q,path:K.path,parent:K}),P=await(x4(_)?_:Promise.resolve(_));return zT(K,P)}refine(q,$){let K=(_)=>{if(typeof $==="string"||typeof $>"u")return{message:$};else if(typeof $==="function")return $(_);else return $};return this._refinement((_,P)=>{let O=q(_),Y=()=>P.addIssue({code:uq.custom,...K(_)});if(typeof Promise<"u"&&O instanceof Promise)return O.then((H)=>{if(!H)return Y(),!1;else return!0});if(!O)return Y(),!1;else return!0})}refinement(q,$){return this._refinement((K,_)=>{if(!q(K))return _.addIssue(typeof $==="function"?$(K,_):$),!1;else return!0})}_refinement(q){return new x6({schema:this,typeName:Y$.ZodEffects,effect:{type:"refinement",refinement:q}})}superRefine(q){return this._refinement(q)}constructor(q){this.spa=this.safeParseAsync,this._def=q,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:($)=>this["~validate"]($)}}optional(){return y6.create(this,this._def)}nullable(){return RK.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return g6.create(this)}promise(){return p_.create(this,this._def)}or(q){return o4.create([this,q],this._def)}and(q){return n4.create(this,q,this._def)}transform(q){return new x6({...T$(this._def),schema:this,typeName:Y$.ZodEffects,effect:{type:"transform",transform:q}})}default(q){let $=typeof q==="function"?q:()=>q;return new U4({...T$(this._def),innerType:this,defaultValue:$,typeName:Y$.ZodDefault})}brand(){return new p1({typeName:Y$.ZodBranded,type:this,...T$(this._def)})}catch(q){let $=typeof q==="function"?q:()=>q;return new F4({...T$(this._def),innerType:this,catchValue:$,typeName:Y$.ZodCatch})}describe(q){return new this.constructor({...this._def,description:q})}pipe(q){return RP.create(this,q)}readonly(){return t4.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}var jD=/^c[^\s-]{8,}$/i,OD=/^[0-9a-z]+$/,WD=/^[0-9A-HJKMNP-TV-Z]{26}$/i,HD=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,zD=/^[a-z0-9_-]{21}$/i,JD=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,vD=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,wD=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,TD="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$",B2,XD=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,fD=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,AD=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,kD=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,GD=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,ZD=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,vT="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",VD=new RegExp(`^${vT}$`);function wT(q){let $="[0-5]\\d";if(q.precision)$=`${$}\\.\\d{${q.precision}}`;else if(q.precision==null)$=`${$}(\\.\\d+)?`;let K=q.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${$})${K}`}function MD(q){return new RegExp(`^${wT(q)}$`)}function TT(q){let $=`${vT}T${wT(q)}`,K=[];if(K.push(q.local?"Z?":"Z"),q.offset)K.push("([+-]\\d{2}:?\\d{2})");return $=`${$}(${K.join("|")})`,new RegExp(`^${$}$`)}function SD(q,$){if(($==="v4"||!$)&&XD.test(q))return!0;if(($==="v6"||!$)&&AD.test(q))return!0;return!1}function CD(q,$){if(!JD.test(q))return!1;try{let[K]=q.split(".");if(!K)return!1;let _=K.replace(/-/g,"+").replace(/_/g,"/").padEnd(K.length+(4-K.length%4)%4,"="),P=JSON.parse(atob(_));if(typeof P!=="object"||P===null)return!1;if("typ"in P&&P?.typ!=="JWT")return!1;if(!P.alg)return!1;if($&&P.alg!==$)return!1;return!0}catch{return!1}}function ND(q,$){if(($==="v4"||!$)&&fD.test(q))return!0;if(($==="v6"||!$)&&kD.test(q))return!0;return!1}class b6 extends A${_parse(q){if(this._def.coerce)q.data=String(q.data);if(this._getType(q)!==oq.string){let P=this._getOrReturnCtx(q);return rq(P,{code:uq.invalid_type,expected:oq.string,received:P.parsedType}),K$}let K=new E8,_=void 0;for(let P of this._def.checks)if(P.kind==="min"){if(q.data.length<P.value)_=this._getOrReturnCtx(q,_),rq(_,{code:uq.too_small,minimum:P.value,type:"string",inclusive:!0,exact:!1,message:P.message}),K.dirty()}else if(P.kind==="max"){if(q.data.length>P.value)_=this._getOrReturnCtx(q,_),rq(_,{code:uq.too_big,maximum:P.value,type:"string",inclusive:!0,exact:!1,message:P.message}),K.dirty()}else if(P.kind==="length"){let O=q.data.length>P.value,Y=q.data.length<P.value;if(O||Y){if(_=this._getOrReturnCtx(q,_),O)rq(_,{code:uq.too_big,maximum:P.value,type:"string",inclusive:!0,exact:!0,message:P.message});else if(Y)rq(_,{code:uq.too_small,minimum:P.value,type:"string",inclusive:!0,exact:!0,message:P.message});K.dirty()}}else if(P.kind==="email"){if(!wD.test(q.data))_=this._getOrReturnCtx(q,_),rq(_,{validation:"email",code:uq.invalid_string,message:P.message}),K.dirty()}else if(P.kind==="emoji"){if(!B2)B2=new RegExp(TD,"u");if(!B2.test(q.data))_=this._getOrReturnCtx(q,_),rq(_,{validation:"emoji",code:uq.invalid_string,message:P.message}),K.dirty()}else if(P.kind==="uuid"){if(!HD.test(q.data))_=this._getOrReturnCtx(q,_),rq(_,{validation:"uuid",code:uq.invalid_string,message:P.message}),K.dirty()}else if(P.kind==="nanoid"){if(!zD.test(q.data))_=this._getOrReturnCtx(q,_),rq(_,{validation:"nanoid",code:uq.invalid_string,message:P.message}),K.dirty()}else if(P.kind==="cuid"){if(!jD.test(q.data))_=this._getOrReturnCtx(q,_),rq(_,{validation:"cuid",code:uq.invalid_string,message:P.message}),K.dirty()}else if(P.kind==="cuid2"){if(!OD.test(q.data))_=this._getOrReturnCtx(q,_),rq(_,{validation:"cuid2",code:uq.invalid_string,message:P.message}),K.dirty()}else if(P.kind==="ulid"){if(!WD.test(q.data))_=this._getOrReturnCtx(q,_),rq(_,{validation:"ulid",code:uq.invalid_string,message:P.message}),K.dirty()}else if(P.kind==="url")try{new URL(q.data)}catch{_=this._getOrReturnCtx(q,_),rq(_,{validation:"url",code:uq.invalid_string,message:P.message}),K.dirty()}else if(P.kind==="regex"){if(P.regex.lastIndex=0,!P.regex.test(q.data))_=this._getOrReturnCtx(q,_),rq(_,{validation:"regex",code:uq.invalid_string,message:P.message}),K.dirty()}else if(P.kind==="trim")q.data=q.data.trim();else if(P.kind==="includes"){if(!q.data.includes(P.value,P.position))_=this._getOrReturnCtx(q,_),rq(_,{code:uq.invalid_string,validation:{includes:P.value,position:P.position},message:P.message}),K.dirty()}else if(P.kind==="toLowerCase")q.data=q.data.toLowerCase();else if(P.kind==="toUpperCase")q.data=q.data.toUpperCase();else if(P.kind==="startsWith"){if(!q.data.startsWith(P.value))_=this._getOrReturnCtx(q,_),rq(_,{code:uq.invalid_string,validation:{startsWith:P.value},message:P.message}),K.dirty()}else if(P.kind==="endsWith"){if(!q.data.endsWith(P.value))_=this._getOrReturnCtx(q,_),rq(_,{code:uq.invalid_string,validation:{endsWith:P.value},message:P.message}),K.dirty()}else if(P.kind==="datetime"){if(!TT(P).test(q.data))_=this._getOrReturnCtx(q,_),rq(_,{code:uq.invalid_string,validation:"datetime",message:P.message}),K.dirty()}else if(P.kind==="date"){if(!VD.test(q.data))_=this._getOrReturnCtx(q,_),rq(_,{code:uq.invalid_string,validation:"date",message:P.message}),K.dirty()}else if(P.kind==="time"){if(!MD(P).test(q.data))_=this._getOrReturnCtx(q,_),rq(_,{code:uq.invalid_string,validation:"time",message:P.message}),K.dirty()}else if(P.kind==="duration"){if(!vD.test(q.data))_=this._getOrReturnCtx(q,_),rq(_,{validation:"duration",code:uq.invalid_string,message:P.message}),K.dirty()}else if(P.kind==="ip"){if(!SD(q.data,P.version))_=this._getOrReturnCtx(q,_),rq(_,{validation:"ip",code:uq.invalid_string,message:P.message}),K.dirty()}else if(P.kind==="jwt"){if(!CD(q.data,P.alg))_=this._getOrReturnCtx(q,_),rq(_,{validation:"jwt",code:uq.invalid_string,message:P.message}),K.dirty()}else if(P.kind==="cidr"){if(!ND(q.data,P.version))_=this._getOrReturnCtx(q,_),rq(_,{validation:"cidr",code:uq.invalid_string,message:P.message}),K.dirty()}else if(P.kind==="base64"){if(!GD.test(q.data))_=this._getOrReturnCtx(q,_),rq(_,{validation:"base64",code:uq.invalid_string,message:P.message}),K.dirty()}else if(P.kind==="base64url"){if(!ZD.test(q.data))_=this._getOrReturnCtx(q,_),rq(_,{validation:"base64url",code:uq.invalid_string,message:P.message}),K.dirty()}else V$.assertNever(P);return{status:K.value,value:q.data}}_regex(q,$,K){return this.refinement((_)=>q.test(_),{validation:$,code:uq.invalid_string,...eq.errToObj(K)})}_addCheck(q){return new b6({...this._def,checks:[...this._def.checks,q]})}email(q){return this._addCheck({kind:"email",...eq.errToObj(q)})}url(q){return this._addCheck({kind:"url",...eq.errToObj(q)})}emoji(q){return this._addCheck({kind:"emoji",...eq.errToObj(q)})}uuid(q){return this._addCheck({kind:"uuid",...eq.errToObj(q)})}nanoid(q){return this._addCheck({kind:"nanoid",...eq.errToObj(q)})}cuid(q){return this._addCheck({kind:"cuid",...eq.errToObj(q)})}cuid2(q){return this._addCheck({kind:"cuid2",...eq.errToObj(q)})}ulid(q){return this._addCheck({kind:"ulid",...eq.errToObj(q)})}base64(q){return this._addCheck({kind:"base64",...eq.errToObj(q)})}base64url(q){return this._addCheck({kind:"base64url",...eq.errToObj(q)})}jwt(q){return this._addCheck({kind:"jwt",...eq.errToObj(q)})}ip(q){return this._addCheck({kind:"ip",...eq.errToObj(q)})}cidr(q){return this._addCheck({kind:"cidr",...eq.errToObj(q)})}datetime(q){if(typeof q==="string")return this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:q});return this._addCheck({kind:"datetime",precision:typeof q?.precision>"u"?null:q?.precision,offset:q?.offset??!1,local:q?.local??!1,...eq.errToObj(q?.message)})}date(q){return this._addCheck({kind:"date",message:q})}time(q){if(typeof q==="string")return this._addCheck({kind:"time",precision:null,message:q});return this._addCheck({kind:"time",precision:typeof q?.precision>"u"?null:q?.precision,...eq.errToObj(q?.message)})}duration(q){return this._addCheck({kind:"duration",...eq.errToObj(q)})}regex(q,$){return this._addCheck({kind:"regex",regex:q,...eq.errToObj($)})}includes(q,$){return this._addCheck({kind:"includes",value:q,position:$?.position,...eq.errToObj($?.message)})}startsWith(q,$){return this._addCheck({kind:"startsWith",value:q,...eq.errToObj($)})}endsWith(q,$){return this._addCheck({kind:"endsWith",value:q,...eq.errToObj($)})}min(q,$){return this._addCheck({kind:"min",value:q,...eq.errToObj($)})}max(q,$){return this._addCheck({kind:"max",value:q,...eq.errToObj($)})}length(q,$){return this._addCheck({kind:"length",value:q,...eq.errToObj($)})}nonempty(q){return this.min(1,eq.errToObj(q))}trim(){return new b6({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new b6({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new b6({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find((q)=>q.kind==="datetime")}get isDate(){return!!this._def.checks.find((q)=>q.kind==="date")}get isTime(){return!!this._def.checks.find((q)=>q.kind==="time")}get isDuration(){return!!this._def.checks.find((q)=>q.kind==="duration")}get isEmail(){return!!this._def.checks.find((q)=>q.kind==="email")}get isURL(){return!!this._def.checks.find((q)=>q.kind==="url")}get isEmoji(){return!!this._def.checks.find((q)=>q.kind==="emoji")}get isUUID(){return!!this._def.checks.find((q)=>q.kind==="uuid")}get isNANOID(){return!!this._def.checks.find((q)=>q.kind==="nanoid")}get isCUID(){return!!this._def.checks.find((q)=>q.kind==="cuid")}get isCUID2(){return!!this._def.checks.find((q)=>q.kind==="cuid2")}get isULID(){return!!this._def.checks.find((q)=>q.kind==="ulid")}get isIP(){return!!this._def.checks.find((q)=>q.kind==="ip")}get isCIDR(){return!!this._def.checks.find((q)=>q.kind==="cidr")}get isBase64(){return!!this._def.checks.find((q)=>q.kind==="base64")}get isBase64url(){return!!this._def.checks.find((q)=>q.kind==="base64url")}get minLength(){let q=null;for(let $ of this._def.checks)if($.kind==="min"){if(q===null||$.value>q)q=$.value}return q}get maxLength(){let q=null;for(let $ of this._def.checks)if($.kind==="max"){if(q===null||$.value<q)q=$.value}return q}}b6.create=(q)=>{return new b6({checks:[],typeName:Y$.ZodString,coerce:q?.coerce??!1,...T$(q)})};function ED(q,$){let K=(q.toString().split(".")[1]||"").length,_=($.toString().split(".")[1]||"").length,P=K>_?K:_,O=Number.parseInt(q.toFixed(P).replace(".","")),Y=Number.parseInt($.toFixed(P).replace(".",""));return O%Y/10**P}class aK extends A${constructor(){super(...arguments);this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(q){if(this._def.coerce)q.data=Number(q.data);if(this._getType(q)!==oq.number){let P=this._getOrReturnCtx(q);return rq(P,{code:uq.invalid_type,expected:oq.number,received:P.parsedType}),K$}let K=void 0,_=new E8;for(let P of this._def.checks)if(P.kind==="int"){if(!V$.isInteger(q.data))K=this._getOrReturnCtx(q,K),rq(K,{code:uq.invalid_type,expected:"integer",received:"float",message:P.message}),_.dirty()}else if(P.kind==="min"){if(P.inclusive?q.data<P.value:q.data<=P.value)K=this._getOrReturnCtx(q,K),rq(K,{code:uq.too_small,minimum:P.value,type:"number",inclusive:P.inclusive,exact:!1,message:P.message}),_.dirty()}else if(P.kind==="max"){if(P.inclusive?q.data>P.value:q.data>=P.value)K=this._getOrReturnCtx(q,K),rq(K,{code:uq.too_big,maximum:P.value,type:"number",inclusive:P.inclusive,exact:!1,message:P.message}),_.dirty()}else if(P.kind==="multipleOf"){if(ED(q.data,P.value)!==0)K=this._getOrReturnCtx(q,K),rq(K,{code:uq.not_multiple_of,multipleOf:P.value,message:P.message}),_.dirty()}else if(P.kind==="finite"){if(!Number.isFinite(q.data))K=this._getOrReturnCtx(q,K),rq(K,{code:uq.not_finite,message:P.message}),_.dirty()}else V$.assertNever(P);return{status:_.value,value:q.data}}gte(q,$){return this.setLimit("min",q,!0,eq.toString($))}gt(q,$){return this.setLimit("min",q,!1,eq.toString($))}lte(q,$){return this.setLimit("max",q,!0,eq.toString($))}lt(q,$){return this.setLimit("max",q,!1,eq.toString($))}setLimit(q,$,K,_){return new aK({...this._def,checks:[...this._def.checks,{kind:q,value:$,inclusive:K,message:eq.toString(_)}]})}_addCheck(q){return new aK({...this._def,checks:[...this._def.checks,q]})}int(q){return this._addCheck({kind:"int",message:eq.toString(q)})}positive(q){return this._addCheck({kind:"min",value:0,inclusive:!1,message:eq.toString(q)})}negative(q){return this._addCheck({kind:"max",value:0,inclusive:!1,message:eq.toString(q)})}nonpositive(q){return this._addCheck({kind:"max",value:0,inclusive:!0,message:eq.toString(q)})}nonnegative(q){return this._addCheck({kind:"min",value:0,inclusive:!0,message:eq.toString(q)})}multipleOf(q,$){return this._addCheck({kind:"multipleOf",value:q,message:eq.toString($)})}finite(q){return this._addCheck({kind:"finite",message:eq.toString(q)})}safe(q){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:eq.toString(q)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:eq.toString(q)})}get minValue(){let q=null;for(let $ of this._def.checks)if($.kind==="min"){if(q===null||$.value>q)q=$.value}return q}get maxValue(){let q=null;for(let $ of this._def.checks)if($.kind==="max"){if(q===null||$.value<q)q=$.value}return q}get isInt(){return!!this._def.checks.find((q)=>q.kind==="int"||q.kind==="multipleOf"&&V$.isInteger(q.value))}get isFinite(){let q=null,$=null;for(let K of this._def.checks)if(K.kind==="finite"||K.kind==="int"||K.kind==="multipleOf")return!0;else if(K.kind==="min"){if($===null||K.value>$)$=K.value}else if(K.kind==="max"){if(q===null||K.value<q)q=K.value}return Number.isFinite($)&&Number.isFinite(q)}}aK.create=(q)=>{return new aK({checks:[],typeName:Y$.ZodNumber,coerce:q?.coerce||!1,...T$(q)})};class eK extends A${constructor(){super(...arguments);this.min=this.gte,this.max=this.lte}_parse(q){if(this._def.coerce)try{q.data=BigInt(q.data)}catch{return this._getInvalidInput(q)}if(this._getType(q)!==oq.bigint)return this._getInvalidInput(q);let K=void 0,_=new E8;for(let P of this._def.checks)if(P.kind==="min"){if(P.inclusive?q.data<P.value:q.data<=P.value)K=this._getOrReturnCtx(q,K),rq(K,{code:uq.too_small,type:"bigint",minimum:P.value,inclusive:P.inclusive,message:P.message}),_.dirty()}else if(P.kind==="max"){if(P.inclusive?q.data>P.value:q.data>=P.value)K=this._getOrReturnCtx(q,K),rq(K,{code:uq.too_big,type:"bigint",maximum:P.value,inclusive:P.inclusive,message:P.message}),_.dirty()}else if(P.kind==="multipleOf"){if(q.data%P.value!==BigInt(0))K=this._getOrReturnCtx(q,K),rq(K,{code:uq.not_multiple_of,multipleOf:P.value,message:P.message}),_.dirty()}else V$.assertNever(P);return{status:_.value,value:q.data}}_getInvalidInput(q){let $=this._getOrReturnCtx(q);return rq($,{code:uq.invalid_type,expected:oq.bigint,received:$.parsedType}),K$}gte(q,$){return this.setLimit("min",q,!0,eq.toString($))}gt(q,$){return this.setLimit("min",q,!1,eq.toString($))}lte(q,$){return this.setLimit("max",q,!0,eq.toString($))}lt(q,$){return this.setLimit("max",q,!1,eq.toString($))}setLimit(q,$,K,_){return new eK({...this._def,checks:[...this._def.checks,{kind:q,value:$,inclusive:K,message:eq.toString(_)}]})}_addCheck(q){return new eK({...this._def,checks:[...this._def.checks,q]})}positive(q){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:eq.toString(q)})}negative(q){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:eq.toString(q)})}nonpositive(q){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:eq.toString(q)})}nonnegative(q){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:eq.toString(q)})}multipleOf(q,$){return this._addCheck({kind:"multipleOf",value:q,message:eq.toString($)})}get minValue(){let q=null;for(let $ of this._def.checks)if($.kind==="min"){if(q===null||$.value>q)q=$.value}return q}get maxValue(){let q=null;for(let $ of this._def.checks)if($.kind==="max"){if(q===null||$.value<q)q=$.value}return q}}eK.create=(q)=>{return new eK({checks:[],typeName:Y$.ZodBigInt,coerce:q?.coerce??!1,...T$(q)})};class c4 extends A${_parse(q){if(this._def.coerce)q.data=Boolean(q.data);if(this._getType(q)!==oq.boolean){let K=this._getOrReturnCtx(q);return rq(K,{code:uq.invalid_type,expected:oq.boolean,received:K.parsedType}),K$}return p8(q.data)}}c4.create=(q)=>{return new c4({typeName:Y$.ZodBoolean,coerce:q?.coerce||!1,...T$(q)})};class b_ extends A${_parse(q){if(this._def.coerce)q.data=new Date(q.data);if(this._getType(q)!==oq.date){let P=this._getOrReturnCtx(q);return rq(P,{code:uq.invalid_type,expected:oq.date,received:P.parsedType}),K$}if(Number.isNaN(q.data.getTime())){let P=this._getOrReturnCtx(q);return rq(P,{code:uq.invalid_date}),K$}let K=new E8,_=void 0;for(let P of this._def.checks)if(P.kind==="min"){if(q.data.getTime()<P.value)_=this._getOrReturnCtx(q,_),rq(_,{code:uq.too_small,message:P.message,inclusive:!0,exact:!1,minimum:P.value,type:"date"}),K.dirty()}else if(P.kind==="max"){if(q.data.getTime()>P.value)_=this._getOrReturnCtx(q,_),rq(_,{code:uq.too_big,message:P.message,inclusive:!0,exact:!1,maximum:P.value,type:"date"}),K.dirty()}else V$.assertNever(P);return{status:K.value,value:new Date(q.data.getTime())}}_addCheck(q){return new b_({...this._def,checks:[...this._def.checks,q]})}min(q,$){return this._addCheck({kind:"min",value:q.getTime(),message:eq.toString($)})}max(q,$){return this._addCheck({kind:"max",value:q.getTime(),message:eq.toString($)})}get minDate(){let q=null;for(let $ of this._def.checks)if($.kind==="min"){if(q===null||$.value>q)q=$.value}return q!=null?new Date(q):null}get maxDate(){let q=null;for(let $ of this._def.checks)if($.kind==="max"){if(q===null||$.value<q)q=$.value}return q!=null?new Date(q):null}}b_.create=(q)=>{return new b_({checks:[],coerce:q?.coerce||!1,typeName:Y$.ZodDate,...T$(q)})};class MP extends A${_parse(q){if(this._getType(q)!==oq.symbol){let K=this._getOrReturnCtx(q);return rq(K,{code:uq.invalid_type,expected:oq.symbol,received:K.parsedType}),K$}return p8(q.data)}}MP.create=(q)=>{return new MP({typeName:Y$.ZodSymbol,...T$(q)})};class l4 extends A${_parse(q){if(this._getType(q)!==oq.undefined){let K=this._getOrReturnCtx(q);return rq(K,{code:uq.invalid_type,expected:oq.undefined,received:K.parsedType}),K$}return p8(q.data)}}l4.create=(q)=>{return new l4({typeName:Y$.ZodUndefined,...T$(q)})};class d4 extends A${_parse(q){if(this._getType(q)!==oq.null){let K=this._getOrReturnCtx(q);return rq(K,{code:uq.invalid_type,expected:oq.null,received:K.parsedType}),K$}return p8(q.data)}}d4.create=(q)=>{return new d4({typeName:Y$.ZodNull,...T$(q)})};class g_ extends A${constructor(){super(...arguments);this._any=!0}_parse(q){return p8(q.data)}}g_.create=(q)=>{return new g_({typeName:Y$.ZodAny,...T$(q)})};class QK extends A${constructor(){super(...arguments);this._unknown=!0}_parse(q){return p8(q.data)}}QK.create=(q)=>{return new QK({typeName:Y$.ZodUnknown,...T$(q)})};class $K extends A${_parse(q){let $=this._getOrReturnCtx(q);return rq($,{code:uq.invalid_type,expected:oq.never,received:$.parsedType}),K$}}$K.create=(q)=>{return new $K({typeName:Y$.ZodNever,...T$(q)})};class SP extends A${_parse(q){if(this._getType(q)!==oq.undefined){let K=this._getOrReturnCtx(q);return rq(K,{code:uq.invalid_type,expected:oq.void,received:K.parsedType}),K$}return p8(q.data)}}SP.create=(q)=>{return new SP({typeName:Y$.ZodVoid,...T$(q)})};class g6 extends A${_parse(q){let{ctx:$,status:K}=this._processInputParams(q),_=this._def;if($.parsedType!==oq.array)return rq($,{code:uq.invalid_type,expected:oq.array,received:$.parsedType}),K$;if(_.exactLength!==null){let O=$.data.length>_.exactLength.value,Y=$.data.length<_.exactLength.value;if(O||Y)rq($,{code:O?uq.too_big:uq.too_small,minimum:Y?_.exactLength.value:void 0,maximum:O?_.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:_.exactLength.message}),K.dirty()}if(_.minLength!==null){if($.data.length<_.minLength.value)rq($,{code:uq.too_small,minimum:_.minLength.value,type:"array",inclusive:!0,exact:!1,message:_.minLength.message}),K.dirty()}if(_.maxLength!==null){if($.data.length>_.maxLength.value)rq($,{code:uq.too_big,maximum:_.maxLength.value,type:"array",inclusive:!0,exact:!1,message:_.maxLength.message}),K.dirty()}if($.common.async)return Promise.all([...$.data].map((O,Y)=>{return _.type._parseAsync(new p6($,O,$.path,Y))})).then((O)=>{return E8.mergeArray(K,O)});let P=[...$.data].map((O,Y)=>{return _.type._parseSync(new p6($,O,$.path,Y))});return E8.mergeArray(K,P)}get element(){return this._def.type}min(q,$){return new g6({...this._def,minLength:{value:q,message:eq.toString($)}})}max(q,$){return new g6({...this._def,maxLength:{value:q,message:eq.toString($)}})}length(q,$){return new g6({...this._def,exactLength:{value:q,message:eq.toString($)}})}nonempty(q){return this.min(1,q)}}g6.create=(q,$)=>{return new g6({type:q,minLength:null,maxLength:null,exactLength:null,typeName:Y$.ZodArray,...T$($)})};function u4(q){if(q instanceof x$){let $={};for(let K in q.shape){let _=q.shape[K];$[K]=y6.create(u4(_))}return new x$({...q._def,shape:()=>$})}else if(q instanceof g6)return new g6({...q._def,type:u4(q.element)});else if(q instanceof y6)return y6.create(u4(q.unwrap()));else if(q instanceof RK)return RK.create(u4(q.unwrap()));else if(q instanceof KK)return KK.create(q.items.map(($)=>u4($)));else return q}class x$ extends A${constructor(){super(...arguments);this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;let q=this._def.shape(),$=V$.objectKeys(q);return this._cached={shape:q,keys:$},this._cached}_parse(q){if(this._getType(q)!==oq.object){let v=this._getOrReturnCtx(q);return rq(v,{code:uq.invalid_type,expected:oq.object,received:v.parsedType}),K$}let{status:K,ctx:_}=this._processInputParams(q),{shape:P,keys:O}=this._getCached(),Y=[];if(!(this._def.catchall instanceof $K&&this._def.unknownKeys==="strip")){for(let v in _.data)if(!O.includes(v))Y.push(v)}let H=[];for(let v of O){let X=P[v],Z=_.data[v];H.push({key:{status:"valid",value:v},value:X._parse(new p6(_,Z,_.path,v)),alwaysSet:v in _.data})}if(this._def.catchall instanceof $K){let v=this._def.unknownKeys;if(v==="passthrough")for(let X of Y)H.push({key:{status:"valid",value:X},value:{status:"valid",value:_.data[X]}});else if(v==="strict"){if(Y.length>0)rq(_,{code:uq.unrecognized_keys,keys:Y}),K.dirty()}else if(v==="strip");else throw Error("Internal ZodObject error: invalid unknownKeys value.")}else{let v=this._def.catchall;for(let X of Y){let Z=_.data[X];H.push({key:{status:"valid",value:X},value:v._parse(new p6(_,Z,_.path,X)),alwaysSet:X in _.data})}}if(_.common.async)return Promise.resolve().then(async()=>{let v=[];for(let X of H){let Z=await X.key,k=await X.value;v.push({key:Z,value:k,alwaysSet:X.alwaysSet})}return v}).then((v)=>{return E8.mergeObjectSync(K,v)});else return E8.mergeObjectSync(K,H)}get shape(){return this._def.shape()}strict(q){return eq.errToObj,new x$({...this._def,unknownKeys:"strict",...q!==void 0?{errorMap:($,K)=>{let _=this._def.errorMap?.($,K).message??K.defaultError;if($.code==="unrecognized_keys")return{message:eq.errToObj(q).message??_};return{message:_}}}:{}})}strip(){return new x$({...this._def,unknownKeys:"strip"})}passthrough(){return new x$({...this._def,unknownKeys:"passthrough"})}extend(q){return new x$({...this._def,shape:()=>({...this._def.shape(),...q})})}merge(q){return new x$({unknownKeys:q._def.unknownKeys,catchall:q._def.catchall,shape:()=>({...this._def.shape(),...q._def.shape()}),typeName:Y$.ZodObject})}setKey(q,$){return this.augment({[q]:$})}catchall(q){return new x$({...this._def,catchall:q})}pick(q){let $={};for(let K of V$.objectKeys(q))if(q[K]&&this.shape[K])$[K]=this.shape[K];return new x$({...this._def,shape:()=>$})}omit(q){let $={};for(let K of V$.objectKeys(this.shape))if(!q[K])$[K]=this.shape[K];return new x$({...this._def,shape:()=>$})}deepPartial(){return u4(this)}partial(q){let $={};for(let K of V$.objectKeys(this.shape)){let _=this.shape[K];if(q&&!q[K])$[K]=_;else $[K]=_.optional()}return new x$({...this._def,shape:()=>$})}required(q){let $={};for(let K of V$.objectKeys(this.shape))if(q&&!q[K])$[K]=this.shape[K];else{let P=this.shape[K];while(P instanceof y6)P=P._def.innerType;$[K]=P}return new x$({...this._def,shape:()=>$})}keyof(){return XT(V$.objectKeys(this.shape))}}x$.create=(q,$)=>{return new x$({shape:()=>q,unknownKeys:"strip",catchall:$K.create(),typeName:Y$.ZodObject,...T$($)})};x$.strictCreate=(q,$)=>{return new x$({shape:()=>q,unknownKeys:"strict",catchall:$K.create(),typeName:Y$.ZodObject,...T$($)})};x$.lazycreate=(q,$)=>{return new x$({shape:q,unknownKeys:"strip",catchall:$K.create(),typeName:Y$.ZodObject,...T$($)})};class o4 extends A${_parse(q){let{ctx:$}=this._processInputParams(q),K=this._def.options;function _(P){for(let Y of P)if(Y.result.status==="valid")return Y.result;for(let Y of P)if(Y.result.status==="dirty")return $.common.issues.push(...Y.ctx.common.issues),Y.result;let O=P.map((Y)=>new Q8(Y.ctx.common.issues));return rq($,{code:uq.invalid_union,unionErrors:O}),K$}if($.common.async)return Promise.all(K.map(async(P)=>{let O={...$,common:{...$.common,issues:[]},parent:null};return{result:await P._parseAsync({data:$.data,path:$.path,parent:O}),ctx:O}})).then(_);else{let P=void 0,O=[];for(let H of K){let v={...$,common:{...$.common,issues:[]},parent:null},X=H._parseSync({data:$.data,path:$.path,parent:v});if(X.status==="valid")return X;else if(X.status==="dirty"&&!P)P={result:X,ctx:v};if(v.common.issues.length)O.push(v.common.issues)}if(P)return $.common.issues.push(...P.ctx.common.issues),P.result;let Y=O.map((H)=>new Q8(H));return rq($,{code:uq.invalid_union,unionErrors:Y}),K$}}get options(){return this._def.options}}o4.create=(q,$)=>{return new o4({options:q,typeName:Y$.ZodUnion,...T$($)})};var EK=(q)=>{if(q instanceof r4)return EK(q.schema);else if(q instanceof x6)return EK(q.innerType());else if(q instanceof B4)return[q.value];else if(q instanceof sK)return q.options;else if(q instanceof i4)return V$.objectValues(q.enum);else if(q instanceof U4)return EK(q._def.innerType);else if(q instanceof l4)return[void 0];else if(q instanceof d4)return[null];else if(q instanceof y6)return[void 0,...EK(q.unwrap())];else if(q instanceof RK)return[null,...EK(q.unwrap())];else if(q instanceof p1)return EK(q.unwrap());else if(q instanceof t4)return EK(q.unwrap());else if(q instanceof F4)return EK(q._def.innerType);else return[]};class y1 extends A${_parse(q){let{ctx:$}=this._processInputParams(q);if($.parsedType!==oq.object)return rq($,{code:uq.invalid_type,expected:oq.object,received:$.parsedType}),K$;let K=this.discriminator,_=$.data[K],P=this.optionsMap.get(_);if(!P)return rq($,{code:uq.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[K]}),K$;if($.common.async)return P._parseAsync({data:$.data,path:$.path,parent:$});else return P._parseSync({data:$.data,path:$.path,parent:$})}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(q,$,K){let _=new Map;for(let P of $){let O=EK(P.shape[q]);if(!O.length)throw Error(`A discriminator value for key \`${q}\` could not be extracted from all schema options`);for(let Y of O){if(_.has(Y))throw Error(`Discriminator property ${String(q)} has duplicate value ${String(Y)}`);_.set(Y,P)}}return new y1({typeName:Y$.ZodDiscriminatedUnion,discriminator:q,options:$,optionsMap:_,...T$(K)})}}function i2(q,$){let K=qK(q),_=qK($);if(q===$)return{valid:!0,data:q};else if(K===oq.object&&_===oq.object){let P=V$.objectKeys($),O=V$.objectKeys(q).filter((H)=>P.indexOf(H)!==-1),Y={...q,...$};for(let H of O){let v=i2(q[H],$[H]);if(!v.valid)return{valid:!1};Y[H]=v.data}return{valid:!0,data:Y}}else if(K===oq.array&&_===oq.array){if(q.length!==$.length)return{valid:!1};let P=[];for(let O=0;O<q.length;O++){let Y=q[O],H=$[O],v=i2(Y,H);if(!v.valid)return{valid:!1};P.push(v.data)}return{valid:!0,data:P}}else if(K===oq.date&&_===oq.date&&+q===+$)return{valid:!0,data:q};else return{valid:!1}}class n4 extends A${_parse(q){let{status:$,ctx:K}=this._processInputParams(q),_=(P,O)=>{if(b1(P)||b1(O))return K$;let Y=i2(P.value,O.value);if(!Y.valid)return rq(K,{code:uq.invalid_intersection_types}),K$;if(g1(P)||g1(O))$.dirty();return{status:$.value,value:Y.data}};if(K.common.async)return Promise.all([this._def.left._parseAsync({data:K.data,path:K.path,parent:K}),this._def.right._parseAsync({data:K.data,path:K.path,parent:K})]).then(([P,O])=>_(P,O));else return _(this._def.left._parseSync({data:K.data,path:K.path,parent:K}),this._def.right._parseSync({data:K.data,path:K.path,parent:K}))}}n4.create=(q,$,K)=>{return new n4({left:q,right:$,typeName:Y$.ZodIntersection,...T$(K)})};class KK extends A${_parse(q){let{status:$,ctx:K}=this._processInputParams(q);if(K.parsedType!==oq.array)return rq(K,{code:uq.invalid_type,expected:oq.array,received:K.parsedType}),K$;if(K.data.length<this._def.items.length)return rq(K,{code:uq.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),K$;if(!this._def.rest&&K.data.length>this._def.items.length)rq(K,{code:uq.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),$.dirty();let P=[...K.data].map((O,Y)=>{let H=this._def.items[Y]||this._def.rest;if(!H)return null;return H._parse(new p6(K,O,K.path,Y))}).filter((O)=>!!O);if(K.common.async)return Promise.all(P).then((O)=>{return E8.mergeArray($,O)});else return E8.mergeArray($,P)}get items(){return this._def.items}rest(q){return new KK({...this._def,rest:q})}}KK.create=(q,$)=>{if(!Array.isArray(q))throw Error("You must pass an array of schemas to z.tuple([ ... ])");return new KK({items:q,typeName:Y$.ZodTuple,rest:null,...T$($)})};class CP extends A${get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(q){let{status:$,ctx:K}=this._processInputParams(q);if(K.parsedType!==oq.object)return rq(K,{code:uq.invalid_type,expected:oq.object,received:K.parsedType}),K$;let _=[],P=this._def.keyType,O=this._def.valueType;for(let Y in K.data)_.push({key:P._parse(new p6(K,Y,K.path,Y)),value:O._parse(new p6(K,K.data[Y],K.path,Y)),alwaysSet:Y in K.data});if(K.common.async)return E8.mergeObjectAsync($,_);else return E8.mergeObjectSync($,_)}get element(){return this._def.valueType}static create(q,$,K){if($ instanceof A$)return new CP({keyType:q,valueType:$,typeName:Y$.ZodRecord,...T$(K)});return new CP({keyType:b6.create(),valueType:q,typeName:Y$.ZodRecord,...T$($)})}}class NP extends A${get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(q){let{status:$,ctx:K}=this._processInputParams(q);if(K.parsedType!==oq.map)return rq(K,{code:uq.invalid_type,expected:oq.map,received:K.parsedType}),K$;let _=this._def.keyType,P=this._def.valueType,O=[...K.data.entries()].map(([Y,H],v)=>{return{key:_._parse(new p6(K,Y,K.path,[v,"key"])),value:P._parse(new p6(K,H,K.path,[v,"value"]))}});if(K.common.async){let Y=new Map;return Promise.resolve().then(async()=>{for(let H of O){let v=await H.key,X=await H.value;if(v.status==="aborted"||X.status==="aborted")return K$;if(v.status==="dirty"||X.status==="dirty")$.dirty();Y.set(v.value,X.value)}return{status:$.value,value:Y}})}else{let Y=new Map;for(let H of O){let{key:v,value:X}=H;if(v.status==="aborted"||X.status==="aborted")return K$;if(v.status==="dirty"||X.status==="dirty")$.dirty();Y.set(v.value,X.value)}return{status:$.value,value:Y}}}}NP.create=(q,$,K)=>{return new NP({valueType:$,keyType:q,typeName:Y$.ZodMap,...T$(K)})};class y_ extends A${_parse(q){let{status:$,ctx:K}=this._processInputParams(q);if(K.parsedType!==oq.set)return rq(K,{code:uq.invalid_type,expected:oq.set,received:K.parsedType}),K$;let _=this._def;if(_.minSize!==null){if(K.data.size<_.minSize.value)rq(K,{code:uq.too_small,minimum:_.minSize.value,type:"set",inclusive:!0,exact:!1,message:_.minSize.message}),$.dirty()}if(_.maxSize!==null){if(K.data.size>_.maxSize.value)rq(K,{code:uq.too_big,maximum:_.maxSize.value,type:"set",inclusive:!0,exact:!1,message:_.maxSize.message}),$.dirty()}let P=this._def.valueType;function O(H){let v=new Set;for(let X of H){if(X.status==="aborted")return K$;if(X.status==="dirty")$.dirty();v.add(X.value)}return{status:$.value,value:v}}let Y=[...K.data.values()].map((H,v)=>P._parse(new p6(K,H,K.path,v)));if(K.common.async)return Promise.all(Y).then((H)=>O(H));else return O(Y)}min(q,$){return new y_({...this._def,minSize:{value:q,message:eq.toString($)}})}max(q,$){return new y_({...this._def,maxSize:{value:q,message:eq.toString($)}})}size(q,$){return this.min(q,$).max(q,$)}nonempty(q){return this.min(1,q)}}y_.create=(q,$)=>{return new y_({valueType:q,minSize:null,maxSize:null,typeName:Y$.ZodSet,...T$($)})};class m4 extends A${constructor(){super(...arguments);this.validate=this.implement}_parse(q){let{ctx:$}=this._processInputParams(q);if($.parsedType!==oq.function)return rq($,{code:uq.invalid_type,expected:oq.function,received:$.parsedType}),K$;function K(Y,H){return VP({data:Y,path:$.path,errorMaps:[$.common.contextualErrorMap,$.schemaErrorMap,p4(),NK].filter((v)=>!!v),issueData:{code:uq.invalid_arguments,argumentsError:H}})}function _(Y,H){return VP({data:Y,path:$.path,errorMaps:[$.common.contextualErrorMap,$.schemaErrorMap,p4(),NK].filter((v)=>!!v),issueData:{code:uq.invalid_return_type,returnTypeError:H}})}let P={errorMap:$.common.contextualErrorMap},O=$.data;if(this._def.returns instanceof p_){let Y=this;return p8(async function(...H){let v=new Q8([]),X=await Y._def.args.parseAsync(H,P).catch((G)=>{throw v.addIssue(K(H,G)),v}),Z=await Reflect.apply(O,this,X);return await Y._def.returns._def.type.parseAsync(Z,P).catch((G)=>{throw v.addIssue(_(Z,G)),v})})}else{let Y=this;return p8(function(...H){let v=Y._def.args.safeParse(H,P);if(!v.success)throw new Q8([K(H,v.error)]);let X=Reflect.apply(O,this,v.data),Z=Y._def.returns.safeParse(X,P);if(!Z.success)throw new Q8([_(X,Z.error)]);return Z.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...q){return new m4({...this._def,args:KK.create(q).rest(QK.create())})}returns(q){return new m4({...this._def,returns:q})}implement(q){return this.parse(q)}strictImplement(q){return this.parse(q)}static create(q,$,K){return new m4({args:q?q:KK.create([]).rest(QK.create()),returns:$||QK.create(),typeName:Y$.ZodFunction,...T$(K)})}}class r4 extends A${get schema(){return this._def.getter()}_parse(q){let{ctx:$}=this._processInputParams(q);return this._def.getter()._parse({data:$.data,path:$.path,parent:$})}}r4.create=(q,$)=>{return new r4({getter:q,typeName:Y$.ZodLazy,...T$($)})};class B4 extends A${_parse(q){if(q.data!==this._def.value){let $=this._getOrReturnCtx(q);return rq($,{received:$.data,code:uq.invalid_literal,expected:this._def.value}),K$}return{status:"valid",value:q.data}}get value(){return this._def.value}}B4.create=(q,$)=>{return new B4({value:q,typeName:Y$.ZodLiteral,...T$($)})};function XT(q,$){return new sK({values:q,typeName:Y$.ZodEnum,...T$($)})}class sK extends A${_parse(q){if(typeof q.data!=="string"){let $=this._getOrReturnCtx(q),K=this._def.values;return rq($,{expected:V$.joinValues(K),received:$.parsedType,code:uq.invalid_type}),K$}if(!this._cache)this._cache=new Set(this._def.values);if(!this._cache.has(q.data)){let $=this._getOrReturnCtx(q),K=this._def.values;return rq($,{received:$.data,code:uq.invalid_enum_value,options:K}),K$}return p8(q.data)}get options(){return this._def.values}get enum(){let q={};for(let $ of this._def.values)q[$]=$;return q}get Values(){let q={};for(let $ of this._def.values)q[$]=$;return q}get Enum(){let q={};for(let $ of this._def.values)q[$]=$;return q}extract(q,$=this._def){return sK.create(q,{...this._def,...$})}exclude(q,$=this._def){return sK.create(this.options.filter((K)=>!q.includes(K)),{...this._def,...$})}}sK.create=XT;class i4 extends A${_parse(q){let $=V$.getValidEnumValues(this._def.values),K=this._getOrReturnCtx(q);if(K.parsedType!==oq.string&&K.parsedType!==oq.number){let _=V$.objectValues($);return rq(K,{expected:V$.joinValues(_),received:K.parsedType,code:uq.invalid_type}),K$}if(!this._cache)this._cache=new Set(V$.getValidEnumValues(this._def.values));if(!this._cache.has(q.data)){let _=V$.objectValues($);return rq(K,{received:K.data,code:uq.invalid_enum_value,options:_}),K$}return p8(q.data)}get enum(){return this._def.values}}i4.create=(q,$)=>{return new i4({values:q,typeName:Y$.ZodNativeEnum,...T$($)})};class p_ extends A${unwrap(){return this._def.type}_parse(q){let{ctx:$}=this._processInputParams(q);if($.parsedType!==oq.promise&&$.common.async===!1)return rq($,{code:uq.invalid_type,expected:oq.promise,received:$.parsedType}),K$;let K=$.parsedType===oq.promise?$.data:Promise.resolve($.data);return p8(K.then((_)=>{return this._def.type.parseAsync(_,{path:$.path,errorMap:$.common.contextualErrorMap})}))}}p_.create=(q,$)=>{return new p_({type:q,typeName:Y$.ZodPromise,...T$($)})};class x6 extends A${innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===Y$.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(q){let{status:$,ctx:K}=this._processInputParams(q),_=this._def.effect||null,P={addIssue:(O)=>{if(rq(K,O),O.fatal)$.abort();else $.dirty()},get path(){return K.path}};if(P.addIssue=P.addIssue.bind(P),_.type==="preprocess"){let O=_.transform(K.data,P);if(K.common.async)return Promise.resolve(O).then(async(Y)=>{if($.value==="aborted")return K$;let H=await this._def.schema._parseAsync({data:Y,path:K.path,parent:K});if(H.status==="aborted")return K$;if(H.status==="dirty")return L_(H.value);if($.value==="dirty")return L_(H.value);return H});else{if($.value==="aborted")return K$;let Y=this._def.schema._parseSync({data:O,path:K.path,parent:K});if(Y.status==="aborted")return K$;if(Y.status==="dirty")return L_(Y.value);if($.value==="dirty")return L_(Y.value);return Y}}if(_.type==="refinement"){let O=(Y)=>{let H=_.refinement(Y,P);if(K.common.async)return Promise.resolve(H);if(H instanceof Promise)throw Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return Y};if(K.common.async===!1){let Y=this._def.schema._parseSync({data:K.data,path:K.path,parent:K});if(Y.status==="aborted")return K$;if(Y.status==="dirty")$.dirty();return O(Y.value),{status:$.value,value:Y.value}}else return this._def.schema._parseAsync({data:K.data,path:K.path,parent:K}).then((Y)=>{if(Y.status==="aborted")return K$;if(Y.status==="dirty")$.dirty();return O(Y.value).then(()=>{return{status:$.value,value:Y.value}})})}if(_.type==="transform")if(K.common.async===!1){let O=this._def.schema._parseSync({data:K.data,path:K.path,parent:K});if(!tK(O))return K$;let Y=_.transform(O.value,P);if(Y instanceof Promise)throw Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:$.value,value:Y}}else return this._def.schema._parseAsync({data:K.data,path:K.path,parent:K}).then((O)=>{if(!tK(O))return K$;return Promise.resolve(_.transform(O.value,P)).then((Y)=>({status:$.value,value:Y}))});V$.assertNever(_)}}x6.create=(q,$,K)=>{return new x6({schema:q,typeName:Y$.ZodEffects,effect:$,...T$(K)})};x6.createWithPreprocess=(q,$,K)=>{return new x6({schema:$,effect:{type:"preprocess",transform:q},typeName:Y$.ZodEffects,...T$(K)})};class y6 extends A${_parse(q){if(this._getType(q)===oq.undefined)return p8(void 0);return this._def.innerType._parse(q)}unwrap(){return this._def.innerType}}y6.create=(q,$)=>{return new y6({innerType:q,typeName:Y$.ZodOptional,...T$($)})};class RK extends A${_parse(q){if(this._getType(q)===oq.null)return p8(null);return this._def.innerType._parse(q)}unwrap(){return this._def.innerType}}RK.create=(q,$)=>{return new RK({innerType:q,typeName:Y$.ZodNullable,...T$($)})};class U4 extends A${_parse(q){let{ctx:$}=this._processInputParams(q),K=$.data;if($.parsedType===oq.undefined)K=this._def.defaultValue();return this._def.innerType._parse({data:K,path:$.path,parent:$})}removeDefault(){return this._def.innerType}}U4.create=(q,$)=>{return new U4({innerType:q,typeName:Y$.ZodDefault,defaultValue:typeof $.default==="function"?$.default:()=>$.default,...T$($)})};class F4 extends A${_parse(q){let{ctx:$}=this._processInputParams(q),K={...$,common:{...$.common,issues:[]}},_=this._def.innerType._parse({data:K.data,path:K.path,parent:{...K}});if(x4(_))return _.then((P)=>{return{status:"valid",value:P.status==="valid"?P.value:this._def.catchValue({get error(){return new Q8(K.common.issues)},input:K.data})}});else return{status:"valid",value:_.status==="valid"?_.value:this._def.catchValue({get error(){return new Q8(K.common.issues)},input:K.data})}}removeCatch(){return this._def.innerType}}F4.create=(q,$)=>{return new F4({innerType:q,typeName:Y$.ZodCatch,catchValue:typeof $.catch==="function"?$.catch:()=>$.catch,...T$($)})};class EP extends A${_parse(q){if(this._getType(q)!==oq.nan){let K=this._getOrReturnCtx(q);return rq(K,{code:uq.invalid_type,expected:oq.nan,received:K.parsedType}),K$}return{status:"valid",value:q.data}}}EP.create=(q)=>{return new EP({typeName:Y$.ZodNaN,...T$(q)})};var RD=Symbol("zod_brand");class p1 extends A${_parse(q){let{ctx:$}=this._processInputParams(q),K=$.data;return this._def.type._parse({data:K,path:$.path,parent:$})}unwrap(){return this._def.type}}class RP extends A${_parse(q){let{status:$,ctx:K}=this._processInputParams(q);if(K.common.async)return(async()=>{let P=await this._def.in._parseAsync({data:K.data,path:K.path,parent:K});if(P.status==="aborted")return K$;if(P.status==="dirty")return $.dirty(),L_(P.value);else return this._def.out._parseAsync({data:P.value,path:K.path,parent:K})})();else{let _=this._def.in._parseSync({data:K.data,path:K.path,parent:K});if(_.status==="aborted")return K$;if(_.status==="dirty")return $.dirty(),{status:"dirty",value:_.value};else return this._def.out._parseSync({data:_.value,path:K.path,parent:K})}}static create(q,$){return new RP({in:q,out:$,typeName:Y$.ZodPipeline})}}class t4 extends A${_parse(q){let $=this._def.innerType._parse(q),K=(_)=>{if(tK(_))_.value=Object.freeze(_.value);return _};return x4($)?$.then((_)=>K(_)):K($)}unwrap(){return this._def.innerType}}t4.create=(q,$)=>{return new t4({innerType:q,typeName:Y$.ZodReadonly,...T$($)})};function JT(q,$){let K=typeof q==="function"?q($):typeof q==="string"?{message:q}:q;return typeof K==="string"?{message:K}:K}function fT(q,$={},K){if(q)return g_.create().superRefine((_,P)=>{let O=q(_);if(O instanceof Promise)return O.then((Y)=>{if(!Y){let H=JT($,_),v=H.fatal??K??!0;P.addIssue({code:"custom",...H,fatal:v})}});if(!O){let Y=JT($,_),H=Y.fatal??K??!0;P.addIssue({code:"custom",...Y,fatal:H})}return});return g_.create()}var hD={object:x$.lazycreate},Y$;(function(q){q.ZodString="ZodString",q.ZodNumber="ZodNumber",q.ZodNaN="ZodNaN",q.ZodBigInt="ZodBigInt",q.ZodBoolean="ZodBoolean",q.ZodDate="ZodDate",q.ZodSymbol="ZodSymbol",q.ZodUndefined="ZodUndefined",q.ZodNull="ZodNull",q.ZodAny="ZodAny",q.ZodUnknown="ZodUnknown",q.ZodNever="ZodNever",q.ZodVoid="ZodVoid",q.ZodArray="ZodArray",q.ZodObject="ZodObject",q.ZodUnion="ZodUnion",q.ZodDiscriminatedUnion="ZodDiscriminatedUnion",q.ZodIntersection="ZodIntersection",q.ZodTuple="ZodTuple",q.ZodRecord="ZodRecord",q.ZodMap="ZodMap",q.ZodSet="ZodSet",q.ZodFunction="ZodFunction",q.ZodLazy="ZodLazy",q.ZodLiteral="ZodLiteral",q.ZodEnum="ZodEnum",q.ZodEffects="ZodEffects",q.ZodNativeEnum="ZodNativeEnum",q.ZodOptional="ZodOptional",q.ZodNullable="ZodNullable",q.ZodDefault="ZodDefault",q.ZodCatch="ZodCatch",q.ZodPromise="ZodPromise",q.ZodBranded="ZodBranded",q.ZodPipeline="ZodPipeline",q.ZodReadonly="ZodReadonly"})(Y$||(Y$={}));var DD=(q,$={message:`Input not instance of ${q.name}`})=>fT((K)=>K instanceof q,$),AT=b6.create,kT=aK.create,ID=EP.create,LD=eK.create,GT=c4.create,bD=b_.create,gD=MP.create,yD=l4.create,pD=d4.create,xD=g_.create,uD=QK.create,mD=$K.create,cD=SP.create,lD=g6.create,dD=x$.create,oD=x$.strictCreate,nD=o4.create,rD=y1.create,BD=n4.create,iD=KK.create,UD=CP.create,FD=NP.create,tD=y_.create,QD=m4.create,aD=r4.create,eD=B4.create,sD=sK.create,qI=i4.create,$I=p_.create,KI=x6.create,_I=y6.create,PI=RK.create,YI=x6.createWithPreprocess,jI=RP.create,OI=()=>AT().optional(),WI=()=>kT().optional(),HI=()=>GT().optional(),zI={string:(q)=>b6.create({...q,coerce:!0}),number:(q)=>aK.create({...q,coerce:!0}),boolean:(q)=>c4.create({...q,coerce:!0}),bigint:(q)=>eK.create({...q,coerce:!0}),date:(q)=>b_.create({...q,coerce:!0})};var JI=K$;function ZT(){if(typeof process<"u"&&process.versions&&process.versions.node)return"node";if(typeof globalThis<"u"&&typeof globalThis.window<"u"&&typeof globalThis.window.document<"u")return"browser";return"unknown"}class VT{store={};constructor(){if(typeof globalThis<"u"&&globalThis.window&&globalThis.window.ENV)this.store={...globalThis.window.ENV};if(typeof globalThis<"u"&&globalThis.__ENV__)this.store={...this.store,...globalThis.__ENV__}}get(q){let $=this.store[q];return $!==void 0?String($):void 0}set(q,$){this.store[q]=$}has(q){return q in this.store}getAll(){return{...this.store}}}class MT{runtime;browserStore;cache=new Map;constructor(){if(this.runtime=ZT(),this.runtime==="browser")this.browserStore=new VT}getRuntime(){return this.runtime}isNode(){return this.runtime==="node"}isBrowser(){return this.runtime==="browser"}get(q,$){if(this.cache.has(q)){let _=this.cache.get(q);return _===void 0&&$!==void 0?$:_}let K;switch(this.runtime){case"node":if(typeof process<"u"&&process.env)K=process.env[q];break;case"browser":if(this.browserStore)K=this.browserStore.get(q);break;default:K=void 0}return this.cache.set(q,K),K===void 0&&$!==void 0?$:K}set(q,$){let K=String($);switch(this.cache.delete(q),this.runtime){case"node":if(typeof process<"u"&&process.env)process.env[q]=K;break;case"browser":if(this.browserStore)this.browserStore.set(q,$);break}}has(q){return this.get(q)!==void 0}getAll(){switch(this.runtime){case"node":if(typeof process<"u"&&process.env)return{...process.env};break;case"browser":if(this.browserStore)return this.browserStore.getAll();break}return{}}getBoolean(q,$=!1){let K=this.get(q);if(K===void 0)return $;return["true","1","yes","on"].includes(K.toLowerCase())}getNumber(q,$){let K=this.get(q);if(K===void 0)return $;let _=Number(K);return isNaN(_)?$:_}clearCache(){this.cache.clear()}}var U2=null;function Q4(){if(!U2)U2=new MT;return U2}function q_(q,$){return Q4().get(q,$)}function KF(q,$){Q4().set(q,$)}function _F(q){return Q4().has(q)}function PF(q,$=!1){return Q4().getBoolean(q,$)}function ST(q,$){return Q4().getNumber(q,$)}function YF(q){let $=Q4();if($.isBrowser())Object.entries(q).forEach(([K,_])=>{if(_!==void 0)$.set(K,_)})}var jF=ZT();class x1{globalStore;constructor(q){this.globalStore=q}clear(){console.clear()}filterByLabel(q){CT(q,this.globalStore.cache).forEach((K)=>{hP(K)})}filterByNamespace(...q){NT(q,this.globalStore.cache).forEach((K)=>{hP(K)})}filterByLevel(q){ET(q,this.globalStore.cache).forEach((K)=>{hP(K)})}renderAll(){this.globalStore.cache.forEach((q)=>{hP(q)})}}class a4{config;pidCounter=1;labels=new Map;_listenerCounter=0;_levelsToListeners=new Map;_cache=[];constructor(q={}){this.config=q}get cache(){return this._cache}get configuration(){return this.config}get pid(){let q=this.pidCounter;return this.pidCounter++,q}get tools(){return new x1(this)}addLogToCache(q){if(this._cache.length<(this.config.cacheSize??300))this._cache.push(q)}clearCache(){this._cache=[]}getLabel(q){return this.labels.get(q)}setLabel(q,$){this.labels.set(q,$)}addListener(q,$){let K=this._listenerCounter+=1;return DP({...O6.levels,...this.config.levels??{}},q).forEach((P)=>{if(this._levelsToListeners.has(P))this._levelsToListeners.get(P).set(K,$);else this._levelsToListeners.set(P,new Map([[K,$]]))}),K}removeListener(q){this._levelsToListeners.forEach(($)=>{$.delete(q)})}getListeners(q){return Array.from(this._levelsToListeners.get(q)?.values()??[])}}function F2(q){return globalThis.$adzeGlobal=new a4(q),globalThis.$adzeGlobal}function u1(q){let $=globalThis.$adzeGlobal;if(vI($))return $;let K=new a4(q);return globalThis.$adzeGlobal=K,K}function vI(q){return q instanceof a4}function hK(){return typeof window<"u"&&typeof window.location<"u"&&typeof window.navigator.userAgent<"u"&&!wI()}function wI(){return typeof Deno<"u"}function RT(q){return hK()}function hT(){let q=!1;if(hK())q=new URLSearchParams(globalThis.location.search).get("ADZE_ENV")==="test";return globalThis.$ADZE_ENV==="test"||q}function DT(){let q=globalThis;if(RT(q))return q.navigator.userAgent.includes("Firefox");return!1}function e4(q){return Object.prototype.toString.call(q)==="[object String]"}function s4(q){return q!==null&&typeof q==="number"&&!isNaN(Number(q))}function m1(q){return a2.includes(q)}function IT(q){return gT.includes(q)}function LT(q){return Q2.includes(q)}function t2(q){return q.every(($)=>e4($))}function bT(q){return Array.isArray(q)&&q.length===3&&q[1]==="-"}function yT(){return Error().stack?.replace(/^Error\n/,`
`)}function pT(q){if(s4(q.activeLevel))return q.activeLevel;return q.levels[q.activeLevel].level}var q3=K6(uT(),1),mT=q3.default??q3;function $3(q){return q.charAt(0).toUpperCase()+q.slice(1)}function K3(q){return Object.values(q).map(($)=>$.level)}function _3(q,$,K){return q.filter((_)=>_>=$&&_<=K)}function P3(q,$=!1,K){let P=($&&K?9+K.length:9)-q.length,O=q;for(let Y=0;Y<=P;Y+=1)O+=" ";return O}function Y3(q,$){return $.reduce((K,_)=>{return mT[_](K)},q)}function hP(q){if(q.data)console[q.data.method](...q.data.message)}function cT(q){return q.filter(($)=>$!=="")}function lT(q){return typeof q==="object"&&q!==null}function DP(q,$){if($==="*")return Object.values(q).map((K)=>K.level);if(e4($))return[q[$].level];if(s4($))return[$];if(bT($)){if(t2($)){let K=q[$[0]].level,_=q[$[2]].level;return _3(K3(q),K,_)}return _3(K3(q),$[0],$[2])}if(Array.isArray($)&&t2($))return $.map((K)=>q[K].level);return $}function j3(q,$,K){if($.length===0)return!1;return q==="include"?!$.includes(K):$.includes(K)}function O3(q,$){if(q.length===0)return!1;if(q.length>0&&$.length===0)return!0;return!$.map((K)=>q.includes(K)).includes(!0)}function W3(q,$){if(q.length===0)return!1;if(q.length>0&&$.length===0)return!0;return $.map((K)=>q.includes(K)).includes(!0)}function CT(q,$){return $.filter((K)=>K.data?.label?.name===q)}function NT(q,$){return $.filter((K)=>{if(K.data?.namespace)return K.data.namespace.map((P)=>q.includes(P)).includes(!0);return!1})}function ET(q,$){return $.filter((K)=>{let _=DP(K.configuration.levels,q);if(K.data?.level===void 0)return!1;return j3("exclude",_,K.data.level)})}function H3(q){if(q&&q.length>0)return q.reduce(($,K)=>`${$}#${K} `,"");return""}function z3(q){return q?`[${q.name}] `:""}function J3(q){return q!==void 0?`(Count: ${q}) `:""}function v3(q,$){return q!==void 0&&!q?`${$?" ":""}Assertion failed:`:""}function w3(q,$){return q!==void 0&&q?`${$?" ":""}Expression passed:`:""}var c1=-1,q7=0,$7=1,K7=2,IP=3,LP=4,bP=5,gP=6,l1=7,d1=8;var dT=typeof self==="object"?self:globalThis,TI=(q,$)=>{let K=(P,O)=>{return q.set(O,P),P},_=(P)=>{if(q.has(P))return q.get(P);let[O,Y]=$[P];switch(O){case q7:case c1:return K(Y,P);case $7:{let H=K([],P);for(let v of Y)H.push(_(v));return H}case K7:{let H=K({},P);for(let[v,X]of Y)H[_(v)]=_(X);return H}case IP:return K(new Date(Y),P);case LP:{let{source:H,flags:v}=Y;return K(new RegExp(H,v),P)}case bP:{let H=K(new Map,P);for(let[v,X]of Y)H.set(_(v),_(X));return H}case gP:{let H=K(new Set,P);for(let v of Y)H.add(_(v));return H}case l1:{let{name:H,message:v}=Y;return K(new dT[H](v),P)}case d1:return K(BigInt(Y),P);case"BigInt":return K(Object(BigInt(Y)),P)}return K(new dT[O](Y),P)};return _},T3=(q)=>TI(new Map,q)(0);var _7="",{toString:XI}={},{keys:fI}=Object,yP=(q)=>{let $=typeof q;if($!=="object"||!q)return[q7,$];let K=XI.call(q).slice(8,-1);switch(K){case"Array":return[$7,_7];case"Object":return[K7,_7];case"Date":return[IP,_7];case"RegExp":return[LP,_7];case"Map":return[bP,_7];case"Set":return[gP,_7]}if(K.includes("Array"))return[$7,K];if(K.includes("Error"))return[l1,K];return[K7,K]},o1=([q,$])=>q===q7&&($==="function"||$==="symbol"),AI=(q,$,K,_)=>{let P=(Y,H)=>{let v=_.push(Y)-1;return K.set(H,v),v},O=(Y)=>{if(K.has(Y))return K.get(Y);let[H,v]=yP(Y);switch(H){case q7:{let Z=Y;switch(v){case"bigint":H=d1,Z=Y.toString();break;case"function":case"symbol":if(q)throw TypeError("unable to serialize "+v);Z=null;break;case"undefined":return P([c1],Y)}return P([H,Z],Y)}case $7:{if(v)return P([v,[...Y]],Y);let Z=[],k=P([H,Z],Y);for(let G of Y)Z.push(O(G));return k}case K7:{if(v)switch(v){case"BigInt":return P([v,Y.toString()],Y);case"Boolean":case"Number":case"String":return P([v,Y.valueOf()],Y)}if($&&"toJSON"in Y)return O(Y.toJSON());let Z=[],k=P([H,Z],Y);for(let G of fI(Y))if(q||!o1(yP(Y[G])))Z.push([O(G),O(Y[G])]);return k}case IP:return P([H,Y.toISOString()],Y);case LP:{let{source:Z,flags:k}=Y;return P([H,{source:Z,flags:k}],Y)}case bP:{let Z=[],k=P([H,Z],Y);for(let[G,S]of Y)if(q||!(o1(yP(G))||o1(yP(S))))Z.push([O(G),O(S)]);return k}case gP:{let Z=[],k=P([H,Z],Y);for(let G of Y)if(q||!o1(yP(G)))Z.push(O(G));return k}}let{message:X}=Y;return P([H,{name:v,message:X}],Y)};return O},X3=(q,{json:$,lossy:K}={})=>{let _=[];return AI(!($||K),!!$,new Map,_)(q),_};var f3=typeof structuredClone==="function"?(q,$)=>$&&(("json"in $)||("lossy"in $))?T3(X3(q,$)):structuredClone(q):(q,$)=>T3(X3(q,$));function A3(q,$,K,_){let{formatters:P,middleware:O=[],...Y}=$.exportValues();return class extends q{_cfg=new P7({...f3(Y),formatters:{...P},middleware:[...O]});_modifierData=f3(K);modifierQueue=[..._]}}function k3([q,$]){return`${q}s ${$/1e6}ms`}function oT(){return k3(n1())}function n1(q){let $=performance.now()*0.001,K=Math.floor($),_=Math.floor($%1*1e9);if(q===void 0)return[K,_];let P=K-q[0],O=_-q[1];if(O<0)P-=1,O+=1e9;return[P,O]}function Y7(q){let $=(O)=>`${Math.floor(Math.abs(O))}`.padStart(2,"0"),K=-q.getTimezoneOffset(),P=`${K>=0?"+":"-"}${$(K/60)}:${$(K%60)}`;return`${q.getFullYear()}-${$(q.getMonth()+1)}-${$(q.getDate())}T${$(q.getHours())}:${$(q.getMinutes())}:${$(q.getSeconds())}${P}`}function nT(q){let $=(E,h=2)=>String(E).padStart(h,"0"),K=$(q.getDate()),P=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][q.getMonth()],O=q.getFullYear(),Y=$(q.getHours()),H=$(q.getMinutes()),v=$(q.getSeconds()),X=-q.getTimezoneOffset(),Z=X>=0?"+":"-",k=Math.abs(X),G=$(Math.floor(k/60)),S=$(k%60),N=`${Z}${G}${S}`;return`${K}/${P}/${O}:${Y}:${H}:${v} ${N}`}class u6{cfg;level;timestampFormatFunction=(q)=>Y7(q);constructor(q,$){this.cfg=q,this.level=$}get timestampFormatter(){return this.cfg.timestampFormatter?this.cfg.timestampFormatter:this.timestampFormatFunction}print(q,$,K){if(this.level.level>pT(this.cfg))return[];if(this.failsFilters(q))return[];if(q.assertion===!0)return[];if(q.if===!1)return[];if(q.method&&!LT(q.method)){if(IT(q.method)&&m1(q.method))return K}let _=hK()?this.formatBrowser(q,$,K):this.formatServer(q,$,K);if(q.stacktrace)_.push(q.stacktrace);return _}failsFilters(q){if(this.failsLevelSelector())return!0;if(this.failsNamespacesFilter(q))return!0;if(this.failsLabelsFilter(q))return!0;return!1}failsLevelSelector(){if(this.cfg.filters?.levels===void 0)return!1;let q=DP(this.cfg.levels,this.cfg.filters.levels.values);if(j3(this.cfg.filters.levels.type,q,this.level.level))return!0;return!1}failsNamespacesFilter(q){if(this.cfg.filters?.namespaces===void 0)return!1;if(this.cfg.filters.namespaces.values.length>0&&q.namespace===void 0)return!0;if(this.cfg.filters.namespaces.type==="include"){let K=q.namespace??[];return O3(this.cfg.filters.namespaces.values,K)}let $=q.namespace??[];return W3(this.cfg.filters.namespaces.values,$)}failsLabelsFilter(q){if(this.cfg.filters?.labels===void 0)return!1;if(this.cfg.filters.labels.values.length>0&&q.label===void 0)return!0;let $=q.label?[q.label.name]:[];if(this.cfg.filters.labels.type==="include")return O3(this.cfg.filters.labels.values,$);return W3(this.cfg.filters.labels.values,$)}}class r1 extends u6{timestampFormatFunction=(q)=>nT(q);formatBrowser(q,$,K){return this.formatMessage(q,$,K)}formatServer(q,$,K){return this.formatMessage(q,$,K)}formatMessage(q,$,K){if(this.cfg.meta.hostname===void 0)console.warn(Error("Adze: 'hostname' is required for the common log format. Please provide this value in your log's meta data."));let _=this.cfg.meta.hostname,P=this.cfg.meta.ident??"-",O=this.cfg.meta.user??"-",Y=K[0];return[`${_} ${P} ${O} [${$}] ${Y}`]}}var rT=r1;function BT(q){return typeof q.name==="string"&&typeof q.hostname==="string"}class B1 extends u6{timestampFormatFunction=(q)=>Y7(q);formatBrowser(q,$,K){return this.formatMessage(q,$,K)}formatServer(q,$,K){return this.formatMessage(q,$,K)}formatMessage(q,$,K){let _=u1(),P=[...K],O=P.shift();if(BT(this.cfg.meta)){let{src:Y,err:H,req_id:v,req:X,res:Z,latency:k,hostname:G,name:S,...N}=this.cfg.meta,{namespace:E,label:h}=q,D={v:1,level:this.level.level,levelName:this.level.levelName,name:S,hostname:G,msg:O,args:P,pid:_.pid,time:$,meta:Object.keys(N).length>0?N:void 0,namespace:E,label:h?.name,src:Y,err:H,req_id:v,req:X,res:Z,latency:k};return[JSON.stringify(D)]}return console.warn(Error("Adze: Required fields are missing from the log meta for generating a JSON log.")),[...P]}}var iT=B1;class i1 extends u6{formatBrowser(q,$,K){let _=this.formatLeader(),P=this.formatMeta(q,$);if(this.cfg.withEmoji)return[_,"font-size: 12px;",this.level.style,P,...K];return[_,this.level.style,P,...K]}formatServer(q,$,K){let _=[],O=`${P3(this.formatLeader(!1),this.cfg.withEmoji,this.level.emoji)} `,Y=this.formatMeta(q,$),H=Y3(O,this.level.terminalStyle);return _.push(H),Y!==""&&_.push(Y),[H,Y,...K]}formatLeader(q=!0){let $=q?"%c":"",K=" "+$3(this.level.levelName);if(this.cfg.withEmoji)return`${$}${this.formatEmoji(q)}${$}${K}`;return`${$}${K}`}formatEmoji(q){let $=q?" ":"";return this.level.emoji?`${this.level.emoji}${$}`:""}formatMeta(q,$){let K=this.cfg.showTimestamp?`${$} `:"",_=H3(q.namespace),P=z3(q.label),O=this.formatTime(q),Y=J3(q.label?.count),H=v3(q.assertion,this.cfg.withEmoji),v=w3(q.if,this.cfg.withEmoji),X=H!==""?H:v!==""?v:"";return K+_+P+O+Y+X}formatTime(q){let $=this.cfg.withEmoji?" ":"Time elapsed: ";if(q.timeNow)return`(${$}${q.timeNow})`;return q.label?.timeElapsed?`(${$}${q.label.timeElapsed})`:""}}var G3=i1;class pP extends u6{timestampFormatFunction=(q)=>Y7(q);formatBrowser(q,$,K){return this.formatMessage($,q,K)}formatServer(q,$,K){return this.formatMessage($,q,K)}formatMessage(q,$,K){let _="",{appname:P,hostname:O,port:Y}=this.cfg.meta,H=s4(Y)?`/${Y}`:"",v=e4(P)?`${P}${H}`:"",X=e4(O)?` on ${O}: `:"",Z=this.formatNamespace($.namespace),k=$.label?`[${$.label.name}] `:"";return _=`${v}${X}${Z}${k}`,[`[${q}] ${this.level.levelName.toUpperCase()}: ${_}${K[0]} `,K.map((G)=>lT(G)?JSON.stringify(G):G).slice(1).join(" ")]}formatNamespace(q){if(q&&q.length>0)return`${q.reduce((K,_,P)=>{return P===q.length-1?`${K}${_}`:`${K}${_}/`},"")} `;return""}}var Q2=["group","groupCollapsed"],UT=["dir","dirxml","table",...Q2],a2=["error","warn","info","log","debug",...UT],e2=["clear","groupEnd"],gT=[...UT,...e2],It=[...a2,...e2];var O6={activeLevel:"log",cache:!1,cacheSize:300,dump:!1,format:"pretty",meta:{},middleware:[],showTimestamp:!1,silent:!1,withEmoji:!1,levels:{alert:kI(),error:GI(),warn:ZI(),info:VI(),fail:MI(),success:SI(),log:CI(),debug:NI(),verbose:EI()},formatters:{default:G3,pretty:G3,standard:pP,common:rT,json:iT}};function kI(q={}){return{levelName:"alert",level:0,style:"padding-right: 24px; font-size: 12px; border-radius: 4px; background: linear-gradient(to right, #fc8585, #fc2323); color: #fff; border-color: #b70101;",terminalStyle:["white","bold","bgRed"],method:"error",emoji:"\uD83D\uDEA8",...q}}function GI(q={}){return{levelName:"error",level:1,style:"padding-right: 24px; font-size: 12px; border-radius: 4px; background: linear-gradient(to right, #fff, #ffd1d1); color: #a4000f; border-color: #e3bbbb;",terminalStyle:["white","bgRed"],method:"error",emoji:"\uD83D\uDD25",...q}}function ZI(q={}){return{levelName:"warn",level:2,style:`font-size: 12px; border-radius: 4px;  background: linear-gradient(to right, #fff, #fff0a8); color: #715100; border-color: #e3d696; padding-right: ${DT()?"44px":"30px"};`,terminalStyle:["white","bgYellow"],method:"warn",emoji:"\uD83D\uDD14",...q}}function VI(q={}){return{levelName:"info",level:3,style:"padding-right: 44px; font-size: 12px; border-radius: 4px; background: linear-gradient(to right, #d8ebff, #b2d7ff); color: #465464; border-color: #96b5d7;",terminalStyle:["white","bgBlue"],method:"info",emoji:"",...q}}function MI(q={}){return{levelName:"fail",level:4,style:"padding-right: 44px; font-size: 12px; border-radius: 4px; background: linear-gradient(to right, #ffe8e8, #ffd1d1); color: #a4000f; border-color: #e3bbbb;",terminalStyle:["white","bgRed"],method:"info",emoji:"",...q}}function SI(q={}){return{levelName:"success",level:5,style:"font-size: 12px; border-radius: 4px; padding-right: 22px; background: linear-gradient(to right, #e6f6e4, #ceedc9); color: #4e594d; border-color: #b7d1b3;",terminalStyle:["white","bgGreen"],method:"info",emoji:"\uD83C\uDF89",...q}}function CI(q={}){return{levelName:"log",level:6,style:"font-size: 12px; border-radius: 4px; padding-right: 51px; background: linear-gradient(to right, #ecedef, #d9dce0); color: #333435; border-color: #bfc1c5;",terminalStyle:["white","bgBlackBright"],method:"log",emoji:"\uD83E\uDEB5",...q}}function NI(q={}){return{levelName:"debug",level:7,style:"font-size: 12px; padding-right: 36px; border-right: 1px solid #d9dce0; color: #465464; border-color: #999999;",terminalStyle:["white","bgBlack"],method:"debug",emoji:"\uD83D\uDC1E",...q}}function EI(q={}){return{levelName:"verbose",level:8,style:"font-size: 12px; padding-right: 22px; color: #999999;",terminalStyle:["black","italic"],method:"debug",emoji:"\uD83D\uDCAC",...q}}class P7{logCfg;glblCfg;constructor(q){this.logCfg=q??{},this.glblCfg=globalThis.$adzeGlobal?.configuration}updateConfiguration(q){this.logCfg=q}get activeLevel(){return this.glblCfg?.activeLevel??this.logCfg.activeLevel??O6.activeLevel}set activeLevel(q){this.logCfg.activeLevel=q}get cache(){return this.glblCfg?.cache??this.logCfg.cache??O6.cache}set cache(q){this.logCfg.cache=q}get cacheSize(){return this.glblCfg?.cacheSize??this.logCfg.cacheSize??O6.cacheSize}set cacheSize(q){this.logCfg.cacheSize=q}get dump(){return this.glblCfg?.dump??this.logCfg.dump??O6.dump}set dump(q){this.logCfg.dump=q}get meta(){return{...this.logCfg.meta,...this.glblCfg?.meta}}set meta(q){this.logCfg.meta=q}get silent(){return this.glblCfg?.silent??this.logCfg.silent??O6.silent}set silent(q){this.logCfg.silent=q}get showTimestamp(){return this.glblCfg?.showTimestamp??this.logCfg.showTimestamp??O6.showTimestamp}set showTimestamp(q){this.logCfg.showTimestamp=q}get withEmoji(){return this.glblCfg?.withEmoji??this.logCfg.withEmoji??O6.withEmoji}set withEmoji(q){this.logCfg.withEmoji=q}get format(){return this.glblCfg?.format??this.logCfg.format??O6.format}set format(q){this.logCfg.format=q}get levels(){return{...O6.levels,...this.logCfg.levels??{},...this.glblCfg?.levels??{}}}set levels(q){this.logCfg.levels=q}get middleware(){return[...this.glblCfg?.middleware??[],...this.logCfg.middleware??[]]}set middleware(q){this.logCfg.middleware=q}get filters(){return this.glblCfg?.filters??this.logCfg.filters}set filters(q){this.logCfg.filters=q}get timestampFormatter(){return this.glblCfg?.timestampFormatter??this.logCfg.timestampFormatter}set timestampFormatter(q){this.logCfg.timestampFormatter=q}get formatters(){return{...O6.formatters,...this.logCfg.formatters??{},...this.glblCfg?.formatters??{}}}set formatters(q){this.logCfg.formatters=q}exportValues(){return{activeLevel:this.logCfg.activeLevel,cache:this.logCfg.cache,cacheSize:this.logCfg.cacheSize,dump:this.logCfg.dump,meta:this.logCfg.meta,silent:this.logCfg.silent,showTimestamp:this.logCfg.showTimestamp,withEmoji:this.logCfg.withEmoji,format:this.logCfg.format,levels:this.logCfg.levels,middleware:this.logCfg.middleware,filters:this.logCfg.filters,timestampFormatter:this.logCfg.timestampFormatter,formatters:this.logCfg.formatters}}}function RI(q){return typeof q==="function"}class j7{globalStore;_cfg;_modifierData;_data;modifierQueue=[];constructor(q,$){this.globalStore=u1(q),this._modifierData=$??{},this._cfg=new P7(q),this.doHook((K)=>{if(K.constructed)K.constructed(this)})}get data(){return this._data}get modifierData(){return this._modifierData}get configuration(){return this._cfg}alert(...q){this.terminate("alert",q)}static alert(...q){new this().alert(...q)}error(...q){this.terminate("error",q)}static error(...q){new this().error(...q)}warn(...q){this.terminate("warn",q)}static warn(...q){new this().warn(...q)}info(...q){this.terminate("info",q)}static info(...q){new this().info(...q)}fail(...q){this.terminate("fail",q)}static fail(...q){new this().fail(...q)}success(...q){this.terminate("success",q)}static success(...q){new this().success(...q)}log(...q){this.terminate("log",q)}static log(q,...$){new this().log(...[q,...$])}debug(...q){this.terminate("debug",q)}static debug(...q){new this().debug(...q)}verbose(...q){this.terminate("verbose",q)}static verbose(...q){new this().verbose(...q)}clear(){console.clear()}static clear(){console.clear()}clr(){console.clear()}static clr(){console.clear()}custom(q,...$){if(!this._cfg.levels[q])return console.warn(Error("Custom log level not found in configuration.")),this;return this.terminate(q,$),this}static custom(q,...$){return new this().custom(q,...$)}seal(q){if(q)this._cfg.updateConfiguration(q);return A3(j7,this._cfg,this.modifierData,this.modifierQueue)}static seal(q){return new this().seal(q)}sealTag(q,$){return this._cfg=new P7({...this._cfg.exportValues(),...$}),(K,..._)=>{let P=String.raw({raw:K},..._),O=A3(j7,this._cfg,this.modifierData,this.modifierQueue),Y=q;if(RI(O[Y]))O[Y](P)}}static sealTag(q,$){return new this().sealTag(q,$)}thread(q,$){if(this.runModifierQueue(),this._modifierData.label){if(!this._modifierData.label.context)this._modifierData.label.context={};this._modifierData.label.context={...this._modifierData.label.context,[q]:$}}}static thread(q,$){new this().thread(q,$)}assert(q){return this.modifierQueue.push(["assert",($)=>{return $.assertion=q,$}]),this}static assert(q){return new this().assert(q)}get closeThread(){return this.modifierQueue.push(["closeThread",(q)=>{if(q.label?.context)q.label.context=void 0;return q}]),this}static get closeThread(){return new this().closeThread}get count(){return this.modifierQueue.push(["count",(q)=>{if(q.label)q.label.count=q.label.count!==void 0?q.label.count+1:1;return q}]),this}static get count(){return new this().count}get countClear(){return this.modifierQueue.push(["countClear",(q)=>{if(q.label)delete q.label.count;return q}]),this}static get countClear(){return new this().countClear}get countReset(){return this.modifierQueue.push(["countReset",(q)=>{if(q.label)q.label.count=0;return q}]),this}static get countReset(){return new this().countReset}get dir(){return this.modifierQueue.push(["dir",(q)=>{return q.method="dir",q}]),this}static get dir(){return new this().dir}get dirxml(){return this.modifierQueue.push(["dirxml",(q)=>{return q.method="dirxml",q}]),this}static get dirxml(){return new this().dirxml}get dump(){return this.modifierQueue.push(["dump",(q,$)=>{return $._cfg.dump=!0,q}]),this}static get dump(){return new this().dump}format(q){return this.modifierQueue.push(["format",($,K)=>{if(Object.keys(K._cfg.formatters).includes(q))return K._cfg.format=q,$;return console.warn(Error(`Adze: Formatter "${q}" not found in configuration.`)),$}]),this}static format(q){return new this().format(q)}get group(){return this.modifierQueue.push(["group",(q)=>{return q.method="group",q}]),this}static get group(){return new this().group}get groupCollapsed(){return this.modifierQueue.push(["groupCollapsed",(q)=>{return q.method="groupCollapsed",q}]),this}static get groupCollapsed(){return new this().groupCollapsed}get groupEnd(){return this.modifierQueue.push(["groupEnd",(q)=>{return q.method="groupEnd",q}]),this}static get groupEnd(){return new this().groupEnd}if(q){return this.modifierQueue.push(["if",($)=>{return $.if=q,$}]),this}static if(q){return new this().if(q)}test(q){return this.if(q)}static test(q){return new this().if(q)}label(q){return this.modifierQueue.unshift(["label",($)=>{let K=this.globalStore.getLabel(q)??{name:q};return $.label=K,this.globalStore.setLabel(q,K),$}]),this}static label(q){return new this().label(q)}meta(q){return this.modifierQueue.push(["meta",($,K)=>{return K._cfg.meta={...K._cfg.meta,...q},$}]),this}static meta(q){return new this().meta(q)}namespace(...q){return this.modifierQueue.push(["namespace",($)=>{let K=$.namespace??[];return $.namespace=K.length>0?[...K,...q]:q,$}]),this}static namespace(...q){return new this().namespace(...q)}ns(...q){return this.namespace(...q)}static ns(...q){return new this().namespace(...q)}get silent(){return this.modifierQueue.push(["silent",(q,$)=>{return $._cfg.silent=!0,q}]),this}static get silent(){return new this().silent}get table(){return this.modifierQueue.push(["table",(q)=>{return q.method="table",q}]),this}static get table(){return new this().table}get time(){return this.modifierQueue.push(["time",(q)=>{let $=n1();if(q.label)q.label.timeStart=$;return q}]),this}static get time(){return new this().time}get timeEnd(){return this.modifierQueue.push(["timeEnd",(q)=>{if(q.label?.timeStart)q.label.timeElapsed=k3(n1(q.label.timeStart));return q}]),this}static get timeEnd(){return new this().timeEnd}get timeNow(){return this.modifierQueue.push(["timeNow",(q)=>{return q.timeNow=oT(),q}]),this}static get timeNow(){return new this().timeNow}get timestamp(){return this.modifierQueue.push(["timestamp",(q,$)=>{return $._cfg.showTimestamp=!0,q}]),this}static get timestamp(){return new this().timestamp}get trace(){return this.modifierQueue.push(["trace",(q)=>{return q.stacktrace=yT(),q}]),this}static get trace(){return new this().trace}get withEmoji(){return this.modifierQueue.push(["withEmoji",(q,$)=>{return $._cfg.withEmoji=!0,q}]),this}static get withEmoji(){return new this().withEmoji}print(q){if(hT())return;if(q.silent)return;if(q.message.length<1)return;if(m1(q.method))console[q.method](...q.message);else console[q.method]()}terminate(q,$){this.doHook((D)=>{if(D.beforeTerminated)D.beforeTerminated(this,q,$)}),this.runModifierQueue();let K=this.getLevelConfig(q),P=new(this.selectFormatter(this._cfg.format))(this._cfg,K),O=P.timestampFormatter(new Date),Y=cT(P.print(this.modifierData,O,$));if(this._cfg.dump&&this.modifierData.label?.context)Y.push(this.modifierData.label.context);this.doHook((D)=>{if(D.beforeFormatApplied)Y=D.beforeFormatApplied(this,this._cfg.format,Y)});let{activeLevel:H,cache:v,cacheSize:X,dump:Z,format:k,meta:G,showTimestamp:S,silent:N,withEmoji:E}=this._cfg,h={activeLevel:H,cache:v,cacheSize:X,dump:Z,format:k,meta:G,showTimestamp:S,silent:N,withEmoji:E,...K,...this._modifierData,terminator:q,args:$,timestamp:O,message:Y};if(this.doHook((D)=>{if(D.afterFormatApplied)D.afterFormatApplied(this,this._cfg.format,Y)}),this._data=h,this._cfg.cache)this.globalStore.addLogToCache(this);this.doHook((D)=>{if(D.beforePrint)D.beforePrint(this)}),this.print(this._data),this.doHook((D)=>{if(D.afterTerminated)D.afterTerminated(this,q,$)}),this.globalStore.getListeners(K.level).forEach((D)=>{D(this)})}selectFormatter(q){return this._cfg.formatters[q]}getLevelConfig(q){return this._cfg.levels[q]}runModifierQueue(){this.modifierQueue.forEach(([q,$])=>{let K=$(this.modifierData,this);this.doHook((_)=>{if(_.beforeModifierApplied)_.beforeModifierApplied(this,q,K)}),this._modifierData=K,this.doHook((_)=>{if(_.afterModifierApplied)_.afterModifierApplied(this,q,K)})})}doHook(q){this._cfg.middleware?.forEach(($)=>{q($)})}}class hI{targetEnvironment;environment=hK()?"browser":"server";dependencyLoaders=[];constructor(q){if(this.targetEnvironment=q??"both",!hK()&&(this.targetEnvironment==="server"||this.targetEnvironment==="both"))this.dependencyLoaders.push(this.loadServerDependencies());if(hK()&&(this.targetEnvironment==="browser"||this.targetEnvironment==="both"))this.dependencyLoaders.push(this.loadBrowserDependencies())}async load(){await Promise.all(this.dependencyLoaders)}async loadServerDependencies(){}async loadBrowserDependencies(){}}var DI=["black","red","green","yellow","blue","magenta","cyan","white","gray","blackBright","redBright","greenBright","yellowBright","blueBright","magentaBright","cyanBright","whiteBright","bgBlack","bgRed","bgGreen","bgYellow","bgBlue","bgMagenta","bgCyan","bgWhite","bgBlackBright","bgRedBright","bgGreenBright","bgYellowBright","bgBlueBright","bgMagentaBright","bgCyanBright","bgWhiteBright","reset","bold","dim","italic","underline","inverse","hidden","strikethrough"],FT=Object.freeze(DI);var tT=j7;var _Q={__noop:()=>{}},U1={trace:10,verbose:10,debug:20,success:27,progress:28,log:29,info:30,warn:40,error:50,fatal:60,alert:60},BI={10:"trace",20:"debug",27:"success",28:"progress",29:"log",30:"info",40:"warn",50:"error",60:"fatal"};function qX(q,$){let K=U1[q.toLowerCase()]||30,_=U1[$.toLowerCase()]||30;return K>=_}function Z3(q){try{let $=new WeakSet;return JSON.stringify(q,(K,_)=>{if(typeof _==="object"&&_!==null){if($.has(_))return"[Circular]";$.add(_)}return _})}catch{return String(q)}}function $X(q){if(!q)return!1;let $=q.toLowerCase().trim();return $==="true"||$==="1"||$==="yes"||$==="on"}var iI="info",F1=q_("LOG_LEVEL")||iI,jQ={fatal:60,error:50,warn:40,info:30,log:29,progress:28,success:27,debug:20,trace:10},V3=$X(q_("LOG_JSON_FORMAT")),M3=$X(q_("LOG_TIMESTAMPS")??"true");function UI(q=100){let $=[];return{write(K){if($.push(K),$.length>q)$.shift()},clear(){$.length=0},recentLogs(){return $.map((K)=>{let _=M3?new Date(K.time).toISOString():"",P=BI[K.level??30]||"info";return`${_} ${P} ${K.msg}`.trim()}).join(`
`)}}}var xP=UI(),KX=()=>{let q=F1.toLowerCase();if(q==="trace")return"verbose";if(q==="debug")return"debug";if(q==="log")return"log";if(q==="info")return"info";if(q==="warn")return"warn";if(q==="error")return"error";if(q==="fatal")return"alert";return"info"},FI=KX(),_X={alert:{levelName:"alert",level:0,style:"font-size: 12px; color: #ff0000;",terminalStyle:["bgRed","white","bold"],method:"error",emoji:""},error:{levelName:"error",level:1,style:"font-size: 12px; color: #ff0000;",terminalStyle:["bgRed","whiteBright","bold"],method:"error",emoji:""},warn:{levelName:"warn",level:2,style:"font-size: 12px; color: #ffaa00;",terminalStyle:["bgYellow","black","bold"],method:"warn",emoji:""},info:{levelName:"info",level:3,style:"font-size: 12px; color: #0099ff;",terminalStyle:["cyan"],method:"info",emoji:""},fail:{levelName:"fail",level:4,style:"font-size: 12px; color: #ff6600;",terminalStyle:["red","underline"],method:"error",emoji:""},success:{levelName:"success",level:5,style:"font-size: 12px; color: #00cc00;",terminalStyle:["green"],method:"log",emoji:""},log:{levelName:"log",level:6,style:"font-size: 12px; color: #888888;",terminalStyle:["white"],method:"log",emoji:""},debug:{levelName:"debug",level:7,style:"font-size: 12px; color: #9b59b6;",terminalStyle:["gray","dim"],method:"debug",emoji:""},verbose:{levelName:"verbose",level:8,style:"font-size: 12px; color: #666666;",terminalStyle:["gray","dim","italic"],method:"debug",emoji:""}},tI=F2({activeLevel:FI,format:V3?"json":"pretty",timestampFormatter:M3?void 0:()=>"",withEmoji:!1,levels:_X});tI.addListener("*",(q)=>{try{let $=q.data,K=Array.isArray($?.message)?$.message.map((P)=>typeof P==="string"?P:Z3(P)).join(" "):typeof $?.message==="string"?$.message:"",_={time:Date.now(),level:typeof $?.level==="number"?$.level:void 0,msg:K};xP.write(_)}catch{}});function QI(q){let $=tT,K=[];if(typeof q.namespace==="string")K.push(q.namespace);if(Array.isArray(q.namespaces))K.push(...q.namespaces);if(K.length>0)$=$.ns(...K);let _={...q};if(delete _.namespace,delete _.namespaces,V3){if(!_.name)_.name="elizaos";if(!_.hostname){let O="unknown";if(typeof process<"u"&&process.platform)try{O=(sT(),M$(eT)).hostname()}catch{O="localhost"}else if(typeof window<"u"&&window.location)O=window.location.hostname||"browser";_.hostname=O}}let P={activeLevel:KX(),format:V3?"json":"pretty",timestampFormatter:M3?void 0:()=>"",withEmoji:!1,levels:_X};return $.meta(_).seal(P)}function aI(q){let $=F1,K={},_;if(typeof q==="object"&&q!==null){if("level"in q)$=q.level;if("maxMemoryLogs"in q&&typeof q.maxMemoryLogs==="number")_=q.maxMemoryLogs;let{level:P,maxMemoryLogs:O,...Y}=q;K=Y}return{level:$,base:K,maxMemoryLogs:_}}function uP(q=!1){let{level:$,base:K,maxMemoryLogs:_}=aI(q);if(typeof _==="number"&&_>0)xP.clear();if(typeof q==="object"&&q&&"__forceType"in q&&q.__forceType==="browser"){let c=(typeof $==="number"?"info":$||F1).toLowerCase(),$q=(...n)=>{return n.map((M)=>{if(typeof M==="string")return M;if(M instanceof Error)return M.message;return Z3(M)}).join(" ")},e=(n,...M)=>{if(!qX(n,c))return;let j=$q(...M),J=n==="fatal"?"error":n==="trace"||n==="verbose"?"debug":n==="success"||n==="progress"?"info":n==="log"?"log":console[n]?n:"log";if(typeof console[J]==="function")console[J](j)},d=(n,M,...j)=>{if(typeof n==="string")return M!==void 0?[n,M,...j]:[n,...j];if(n instanceof Error)return M!==void 0?[n.message,M,...j]:[n.message,...j];if(M!==void 0)return[M,n,...j];return[n,...j]};return{level:c,trace:(n,M,...j)=>e("trace",...d(n,M,...j)),debug:(n,M,...j)=>e("debug",...d(n,M,...j)),info:(n,M,...j)=>e("info",...d(n,M,...j)),warn:(n,M,...j)=>e("warn",...d(n,M,...j)),error:(n,M,...j)=>e("error",...d(n,M,...j)),fatal:(n,M,...j)=>e("fatal",...d(n,M,...j)),success:(n,M,...j)=>e("success",...d(n,M,...j)),progress:(n,M,...j)=>e("progress",...d(n,M,...j)),log:(n,M,...j)=>e("log",...d(n,M,...j)),clear:()=>{if(typeof console.clear==="function")console.clear()},child:(n)=>uP({level:c,...K,...n,__forceType:"browser"})}}let O=QI(K),H=(typeof $==="number"?"info":$||F1).toLowerCase(),v=(m,c)=>{},X=(m,...c)=>{if(!qX(m,H))return;v(m,c);try{let d="";if(c.length>0)d=c.map((M)=>{if(typeof M==="string")return M;if(M instanceof Error)return M.message;return Z3(M)}).join(" ");if(K.namespace)d=`#${K.namespace}  ${d}`;let n={time:Date.now(),level:U1[m.toLowerCase()]||U1.info,msg:d};xP.write(n)}catch{}let $q=m,e=c;if(m==="fatal")$q="alert";else if(m==="progress")$q="info",e=["[PROGRESS]",...c];else if(m==="success")$q="info",e=["[SUCCESS]",...c];else if(m==="trace")$q="verbose";try{O[$q](...e)}catch(d){console.log(`[${m.toUpperCase()}]`,...c)}},Z=(m,c,...$q)=>{if(typeof m==="string")return c!==void 0?[m,c,...$q]:[m,...$q];if(m instanceof Error)return c!==void 0?[m.message,{error:m},c,...$q]:[m.message,{error:m},...$q];if(c!==void 0)return[c,m,...$q];return[m,...$q]};return{level:H,trace:(m,c,...$q)=>X("verbose",...Z(m,c,...$q)),debug:(m,c,...$q)=>X("debug",...Z(m,c,...$q)),info:(m,c,...$q)=>X("info",...Z(m,c,...$q)),warn:(m,c,...$q)=>X("warn",...Z(m,c,...$q)),error:(m,c,...$q)=>X("error",...Z(m,c,...$q)),fatal:(m,c,...$q)=>X("fatal",...Z(m,c,...$q)),success:(m,c,...$q)=>X("success",...Z(m,c,...$q)),progress:(m,c,...$q)=>X("progress",...Z(m,c,...$q)),log:(m,c,...$q)=>X("log",...Z(m,c,...$q)),clear:()=>{try{if(typeof console?.clear==="function")console.clear()}catch{}xP.clear()},child:(m)=>{return uP({level:H,...K,...m})}}}var U$=uP(),OQ=U$,WQ=()=>xP.recentLogs();var _K=U$;function YX(q){return q.replace(/(?<!{){{(?![{#\/!>])([\s\S]*?)}}/g,($,K)=>{if(K.trim()==="else")return`{{${K}}}`;return`{{{${K}}}}`})}var jX=({state:q,template:$})=>{let K=typeof $==="function"?$({state:q}):$,_=S3.default.compile(YX(K));return OX(_(q),10)},AQ=({state:q,template:$})=>{let K=typeof $==="function"?$({state:q}):$,_=S3.default.compile(YX(K)),Y=Object.keys(q).filter((v)=>!["text","values","data"].includes(v)).reduce((v,X)=>{return v[X]=q[X],v},{});return OX(_({...Y,...q.values}),10)},kQ=(q,$)=>{return $.length>0?`${q?`${q}
`:q}${$}
`:""},OX=(q,$)=>{let K=Array.from({length:$},()=>I1({dictionaries:[L1]})),_=q;for(let P=0;P<K.length;P++)_=_.replaceAll(`{{name${P+1}}}`,K[P]);return _},GQ=({messages:q,entities:$,conversationHeader:K=!0})=>{let _={};return q.forEach((Y)=>{if(Y.roomId){if(!_[Y.roomId])_[Y.roomId]=[];_[Y.roomId].push(Y)}}),Object.values(_).forEach((Y)=>{Y.sort((H,v)=>(H.createdAt||0)-(v.createdAt||0))}),Object.entries(_).sort(([,Y],[,H])=>(H[H.length-1]?.createdAt||0)-(Y[Y.length-1]?.createdAt||0)).map(([Y,H])=>{let v=H.filter((Z)=>Z.entityId).map((Z)=>{let k=$.find((N)=>N.id===Z.entityId);if(!k)_K.warn({entityId:Z.entityId},"core::prompts:formatPosts - no entity for");let G=k?.names[0]||"Unknown User",S=k?.names[0]||"unknown";return`Name: ${G} (@${S} EntityID:${Z.entityId})
MessageID: ${Z.id}${Z.content.inReplyTo?`
In reply to: ${Z.content.inReplyTo}`:""}
Source: ${Z.content.source}
Date: ${WX(Z.createdAt||0)}
Text:
${Z.content.text}`});return`${K?`Conversation: ${Y.slice(-5)}
`:""}${v.join(`

`)}`}).join(`

`)},ZQ=({messages:q,entities:$})=>{return q.reverse().filter((_)=>_.entityId).map((_)=>{let P=_.content.text,O=_.content.actions,Y=_.content.thought,H=$.find((y)=>y.id===_.entityId)?.names[0]||"Unknown User",v=_.content.attachments,X=v&&v.length>0?` (Attachments: ${v.map((y)=>{let p=[`[${y.id} - ${y.title} (${y.url})]`];if(y.text)p.push(`Text: ${y.text}`);if(y.description)p.push(`Description: ${y.description}`);return p.join(`
`)}).join(v.every((y)=>!y.text&&!y.description)?", ":`
`)})`:null,Z=new Date(_.createdAt||0),k=Z.getHours().toString().padStart(2,"0"),G=Z.getMinutes().toString().padStart(2,"0"),S=`${k}:${G}`,N=WX(_.createdAt||0),E=Y?`(${H}'s internal thought: ${Y})`:null,h=`${S} (${N}) [${_.entityId}]`,D=P?`${h} ${H}: ${P}`:null,I=O&&O.length>0?`${D?"":h} (${H}'s actions: ${O.join(", ")})`:null;return[D,E,I,X].filter(Boolean).join(`
`)}).join(`
`)},WX=(q)=>{let K=new Date().getTime()-q,_=Math.abs(K),P=Math.floor(_/1000),O=Math.floor(P/60),Y=Math.floor(O/60),H=Math.floor(Y/24);if(_<60000)return"just now";if(O<60)return`${O} minute${O!==1?"s":""} ago`;if(Y<24)return`${Y} hour${Y!==1?"s":""} ago`;return`${H} day${H!==1?"s":""} ago`},eI=/```json\n([\s\S]*?)\n```/;function HX(q){if(!q)return null;let $=q.match(/<response>([\s\S]*?)<\/response>/),K;if($)K=$[1],_K.debug("Found response XML block");else{let H=((v)=>{let X=0,Z=v.length;while(X<Z){let k=v.indexOf("<",X);if(k===-1)break;if(v.startsWith("</",k)||v.startsWith("<!--",k)||v.startsWith("<?",k)){X=k+1;continue}let G=k+1,S="";while(G<Z){let g=v[G];if(/^[A-Za-z0-9_-]$/.test(g)){S+=g,G++;continue}break}if(!S){X=k+1;continue}let N=v.indexOf(">",G);if(N===-1)break;let E=v.slice(k,N+1);if(/\/\s*>$/.test(E)){X=N+1;continue}let h=`</${S}>`,D=1,I=N+1;while(D>0&&I<Z){let g=v.indexOf(`<${S}`,I),y=v.indexOf(h,I);if(y===-1)break;if(g!==-1&&g<y){let p=v.indexOf(">",g+1);if(p===-1)break;let m=v.slice(g,p+1);if(/\/\s*>$/.test(m))I=p+1;else D++,I=p+1}else D--,I=y+h.length}if(D===0){let g=I-h.length,y=v.slice(N+1,g);return{tag:S,content:y}}X=N+1}return null})(q);if(!H)return _K.warn("Could not find XML block in text"),_K.debug({textPreview:q.substring(0,200)+"..."},"Text content"),null;K=H.content,_K.debug(`Found XML block with tag: ${H.tag}`)}let _={},O=((Y)=>{let H=[],v=Y.length,X=0;while(X<v){let Z=Y.indexOf("<",X);if(Z===-1)break;if(Y.startsWith("</",Z)||Y.startsWith("<!--",Z)||Y.startsWith("<?",Z)){X=Z+1;continue}let k=Z+1,G="";while(k<v){let p=Y[k];if(/^[A-Za-z0-9_-]$/.test(p)){G+=p,k++;continue}break}if(!G){X=Z+1;continue}let S=Y.indexOf(">",k);if(S===-1)break;let N=Y.slice(Z,S+1);if(/\/\s*>$/.test(N)){X=S+1;continue}let E=`</${G}>`,h=1,D=S+1;while(h>0&&D<v){let p=Y.indexOf(`<${G}`,D),m=Y.indexOf(E,D);if(m===-1)break;if(p!==-1&&p<m){let c=Y.indexOf(">",p+1);if(c===-1)break;let $q=Y.slice(p,c+1);if(!/\/\s*>$/.test($q))h++;D=c+1}else h--,D=m+E.length}if(h!==0){X=S+1;continue}let I=D-E.length,y=Y.slice(S+1,I).replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&").replace(/&quot;/g,'"').replace(/&apos;/g,"'").trim();H.push({key:G,value:y}),X=D}return H})(K);for(let{key:Y,value:H}of O)if(Y==="actions"||Y==="providers"||Y==="evaluators")_[Y]=H?H.split(",").map((v)=>v.trim()):[];else if(Y==="simple")_[Y]=H.toLowerCase()==="true";else _[Y]=H;if(Object.keys(_).length===0)return _K.warn("No key-value pairs extracted from XML content"),_K.debug({xmlPreview:K.substring(0,200)+"..."},"XML content was"),null;return _}function VQ(q){let $=null,K=q.match(eI);try{if(K)$=JSON.parse(PX(K[1].trim()));else $=JSON.parse(PX(q.trim()))}catch(_){return null}if($&&typeof $==="object"&&!Array.isArray($))return $;return null}var PX=(q)=>{return q=q.replace(/\{\s+/,"{").replace(/\s+\}/,"}").trim(),q=q.replace(/("[\w\d_-]+")\s*: \s*(?!"|\[)([\s\S]+?)(?=(,\s*"|\}$))/g,'$1: "$2"'),q=q.replace(/"([^"]+)"\s*:\s*'([^']*)'/g,($,K,_)=>`"${K}": "${_}"`),q=q.replace(/("[\w\d_-]+")\s*:\s*([A-Za-z_]+)(?!["\w])/g,'$1: "$2"'),q};function MQ(q,$){if(q.length<=$)return q;let K=q.lastIndexOf(".",$-1);if(K!==-1){let O=q.slice(0,K+1).trim();if(O.length>0)return O}let _=q.lastIndexOf(" ",$-1);if(_!==-1){let O=q.slice(0,_).trim();if(O.length>0)return`${O}...`}return`${q.slice(0,$-3).trim()}...`}async function SQ(q,$=512,K=20){_K.debug("[splitChunks] Starting text split");let _=3.5,O=await new zP({chunkSize:Number(Math.floor($*_)),chunkOverlap:Number(Math.floor(K*_))}).splitText(q);return _K.debug({numberOfChunks:O.length,averageChunkSize:O.reduce((Y,H)=>Y+H.length,0)/O.length},"[splitChunks] Split complete"),O}async function CQ(q,$,K){if(!q)throw Error("Trim tokens received a null prompt");if(q.length<$/5)return q;if($<=0)throw Error("maxTokens must be positive");let _=await K.useModel(L8.TEXT_TOKENIZER_ENCODE,{prompt:q});if(_.length<=$)return q;let P=_.slice(-$);return await K.useModel(L8.TEXT_TOKENIZER_DECODE,{tokens:P})}function C3(){let q=new WeakSet;return function($,K){if(typeof K==="object"&&K!==null){if(q.has(K))return"[Circular]";q.add(K)}return K}}function NQ(q){if(!q)return!1;let $=["YES","Y","TRUE","T","1","ON","ENABLE"],K=["NO","N","FALSE","F","0","OFF","DISABLE"],_=q.trim().toUpperCase();if($.includes(_))return!0;if(K.includes(_))return!1;return!1}var sI=iq.string().uuid();function qL(q){let $=sI.safeParse(q);return $.success?$.data:null}function mP(q){if(typeof q==="number")q=q.toString();if(typeof q!=="string")throw TypeError("Value must be string");let $=qL(q);if($)return $;let K=encodeURIComponent(q),P=$L(K).slice(0,16);return P[8]=P[8]&63|128,P[6]=P[6]&15|0,_L(P)}async function EQ(q){if(!N3())return;let $=q.map(async(K)=>{let _=encodeURIComponent(K),P=await zX(_);x_.set(_,P)});await Promise.all($)}var x_=new Map,t1=null;function N3(){if(t1!==null)return t1;try{if(typeof globalThis<"u"&&globalThis.crypto&&globalThis.crypto.subtle&&typeof globalThis.crypto.subtle.digest==="function")return t1=!0,!0}catch{}return t1=!1,!1}function $L(q){let $=x_.get(q);if($)return $;let K=JX(q);if(x_.set(q,K),N3())zX(q).then((_)=>{x_.set(q,_)}).catch(()=>{});if(x_.size>1e4)Array.from(x_.keys()).slice(0,5000).forEach((P)=>x_.delete(P));return K}async function zX(q){if(N3())try{let K=new TextEncoder().encode(q),_=await globalThis.crypto.subtle.digest("SHA-1",K);return new Uint8Array(_)}catch{}return JX(q)}function JX(q){let $=KL(q),K=$.length,_=new Uint8Array(K+9+63>>>6<<6);_.set($),_[K]=128;let P=K*8,O=new DataView(_.buffer);O.setUint32(_.length-4,P>>>0,!1),O.setUint32(_.length-8,Math.floor(P/4294967296)>>>0,!1);let Y=1732584193,H=4023233417,v=2562383102,X=271733878,Z=3285377520,k=new Uint32Array(80);for(let N=0;N<_.length;N+=64){for(let y=0;y<16;y++)k[y]=O.getUint32(N+y*4,!1);for(let y=16;y<80;y++){let p=k[y-3]^k[y-8]^k[y-14]^k[y-16];k[y]=p<<1|p>>>31}let E=Y,h=H,D=v,I=X,g=Z;for(let y=0;y<80;y++){let p,m;if(y<20)p=h&D|~h&I,m=1518500249;else if(y<40)p=h^D^I,m=1859775393;else if(y<60)p=h&D|h&I|D&I,m=2400959708;else p=h^D^I,m=3395469782;let c=(E<<5|E>>>27)+p+g+m+k[y]>>>0;g=I,I=D,D=(h<<30|h>>>2)>>>0,h=E,E=c}Y=Y+E>>>0,H=H+h>>>0,v=v+D>>>0,X=X+I>>>0,Z=Z+g>>>0}let G=new Uint8Array(20),S=new DataView(G.buffer);return S.setUint32(0,Y,!1),S.setUint32(4,H,!1),S.setUint32(8,v,!1),S.setUint32(12,X,!1),S.setUint32(16,Z,!1),G}function KL(q){if(typeof TextEncoder<"u")return new TextEncoder().encode(q);let $=[];for(let K=0;K<q.length;K++){let _=q.charCodeAt(K);if(_<128)$.push(_);else if(_<2048)$.push(192|_>>6,128|_&63);else if(_<55296||_>=57344)$.push(224|_>>12,128|_>>6&63,128|_&63);else{K++;let P=65536+((_&1023)<<10|q.charCodeAt(K)&1023);$.push(240|P>>18,128|P>>12&63,128|P>>6&63,128|P&63)}}return new Uint8Array($)}function _L(q){let $=[];for(let K=0;K<q.length;K++){let _=q[K].toString(16).padStart(2,"0");$.push(_)}return $.slice(0,4).join("")+"-"+$.slice(4,6).join("")+"-"+$.slice(6,8).join("")+"-"+$.slice(8,10).join("")+"-"+$.slice(10,16).join("")}var RQ=(q)=>{if(q.startsWith("image/"))return"image";if(q.startsWith("video/"))return"video";if(q.startsWith("audio/"))return"audio";if(q.includes("pdf")||q.includes("document")||q.startsWith("text/"))return"document";return};function hQ(q){return`http://localhost:${q_("SERVER_PORT","3000")}${q}`}var vX=iq.string().regex(/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i,"Invalid UUID format"),PL=iq.object({text:iq.string().optional(),thought:iq.string().optional(),actions:iq.array(iq.string()).optional(),providers:iq.array(iq.string()).optional(),source:iq.string().optional(),target:iq.string().optional(),url:iq.string().optional(),inReplyTo:vX.optional(),attachments:iq.array(iq.any()).optional(),channelType:iq.string().optional()}).passthrough(),YL=iq.object({name:iq.string(),content:PL}),jL=iq.object({directory:iq.string(),shared:iq.boolean().optional()}),OL=iq.union([iq.string(),iq.object({path:iq.string(),shared:iq.boolean().optional()}),jL]),WL=iq.union([iq.string(),iq.function().optional()]),HL=iq.object({all:iq.array(iq.string()).optional(),chat:iq.array(iq.string()).optional(),post:iq.array(iq.string()).optional()}).optional(),zL=iq.record(iq.union([iq.string(),iq.boolean(),iq.number(),iq.any()])).optional(),JL=iq.record(iq.union([iq.string(),iq.boolean(),iq.number()])).optional(),vL=iq.object({id:vX.optional(),name:iq.string().min(1,"Character name is required"),username:iq.string().optional(),system:iq.string().optional(),templates:iq.record(WL).optional(),bio:iq.union([iq.string(),iq.array(iq.string())]),messageExamples:iq.array(iq.array(YL)).optional(),postExamples:iq.array(iq.string()).optional(),topics:iq.array(iq.string()).optional(),adjectives:iq.array(iq.string()).optional(),knowledge:iq.array(OL).optional(),plugins:iq.array(iq.string()).optional(),settings:zL,secrets:JL,style:HL}).strict();function wX(q){let $=vL.safeParse(q);if($.success)return{success:!0,data:$.data};return{success:!1,error:{message:`Character validation failed: ${$.error.message}`,issues:$.error.issues}}}function LQ(q){try{let $=JSON.parse(q);return wX($)}catch($){return{success:!1,error:{message:`Invalid JSON: ${$ instanceof Error?$.message:"Unknown JSON parsing error"}`}}}}function bQ(q){return wX(q).success}function OK(){return typeof Buffer<"u"&&typeof Buffer.from==="function"}function Ey(q){let $=q.replace(/[^0-9a-fA-F]/g,"");if(OK())return Buffer.from($,"hex");let K=new Uint8Array($.length/2);for(let _=0;_<K.length;_++)K[_]=parseInt($.substr(_*2,2),16);return K}function Ry(q,$="utf8"){if(OK()){let _=$==="utf-8"?"utf8":$;return Buffer.from(q,_)}if($==="base64"){let _=atob(q),P=new Uint8Array(_.length);for(let O=0;O<_.length;O++)P[O]=_.charCodeAt(O);return P}return new TextEncoder().encode(q)}function pf(q){if(OK()&&Buffer.isBuffer(q))return q.toString("hex");let $=q instanceof Uint8Array?q:new Uint8Array(q),K="";for(let _=0;_<$.length;_++){let P=$[_].toString(16);K+=P.length===1?"0"+P:P}return K}function hy(q,$="utf8"){if(OK()&&Buffer.isBuffer(q)){let P=$==="utf-8"?"utf8":$;return q.toString(P)}let K=q instanceof Uint8Array?q:new Uint8Array(q);if($==="hex")return pf(K);if($==="base64"){let P="";for(let O=0;O<K.length;O++)P+=String.fromCharCode(K[O]);return btoa(P)}return new TextDecoder().decode(K)}function Dy(q){if(!q)return!1;if(OK()&&Buffer.isBuffer(q))return!0;return q instanceof Uint8Array||q instanceof ArrayBuffer||typeof q==="object"&&q.buffer instanceof ArrayBuffer&&typeof q.byteLength==="number"&&!Array.isArray(q)}function Iy(q){if(OK())return Buffer.alloc(q);return new Uint8Array(q)}function Ly(q){if(OK())return Buffer.from(q);return new Uint8Array(q)}function by(q){if(OK()&&q.every((P)=>Buffer.isBuffer(P)))return Buffer.concat(q);let $=0;for(let P of q)$+=P.length;let K=new Uint8Array($),_=0;for(let P of q){let O=P instanceof Uint8Array?P:new Uint8Array(P);K.set(O,_),_+=O.length}return K}function gy(q,$,K){if(OK()&&Buffer.isBuffer(q))return q.slice($,K);return(q instanceof Uint8Array?q:new Uint8Array(q)).slice($,K)}function yy(q,$){if(q.length!==$.length)return!1;let K=q instanceof Uint8Array?q:new Uint8Array(q),_=$ instanceof Uint8Array?$:new Uint8Array($);for(let P=0;P<K.length;P++)if(K[P]!==_[P])return!1;return!0}function py(q){return q.length}function xy(q){if(OK())try{return($6(),M$(q6)).randomBytes(q)}catch{}let $=new Uint8Array(q);if(typeof globalThis<"u"&&globalThis.crypto&&globalThis.crypto.getRandomValues)globalThis.crypto.getRandomValues($);else for(let K=0;K<q;K++)$[K]=Math.floor(Math.random()*256);return $}var Y_={fromHex:Ey,fromString:Ry,fromBytes:Ly,toHex:pf,toString:hy,isBuffer:Dy,alloc:Iy,concat:by,slice:gy,equals:yy,byteLength:py,randomBytes:xy};var uQ=(q,$)=>{if(!q.length||$<=0)return"";let K=q.filter((Y)=>Y.examples&&Array.isArray(Y.examples)&&Y.examples.length>0);if(!K.length)return"";let _=K.map((Y)=>[...Y.examples||[]]),P=[],O=_.map((Y,H)=>Y.length>0?H:-1).filter((Y)=>Y!==-1);while(P.length<$&&O.length>0){let Y=Math.floor(Math.random()*O.length),H=O[Y],v=_[H],X=Math.floor(Math.random()*v.length);if(P.push(v.splice(X,1)[0]),v.length===0)O.splice(Y,1)}return uy(P)},uy=(q)=>{return q.map((K)=>{let _=Array.from({length:5},()=>I1({dictionaries:[L1]}));return`
${K.map((O)=>{let Y=`${O.name}: ${O.content.text}`;for(let H=0;H<_.length;H++)Y=Y.replaceAll(`{{name${H+1}}}`,_[H]);return Y}).join(`
`)}`}).join(`
`)};function mQ(q){if(!q?.length)return"";return[...q].sort(()=>Math.random()-0.5).map(($)=>$.name).join(", ")}function cQ(q){if(!q?.length)return"";return[...q].sort(()=>Math.random()-0.5).map(($)=>`- **${$.name}**: ${$.description||"No description available"}`).join(`
`)}class my{db}var oQ=`<task>Decide on behalf of {{agentName}} whether they should respond to the message, ignore it or stop the conversation.</task>

<providers>
{{providers}}
</providers>

<instructions>Decide if {{agentName}} should respond to or interact with the conversation.
If the message is directed at or relevant to {{agentName}}, respond with RESPOND action.
If a user asks {{agentName}} to be quiet, respond with STOP action.
If {{agentName}} should ignore the message, respond with IGNORE action.</instructions>

<output>
Do NOT include any thinking, reasoning, or <think> sections in your response. 
Go directly to the XML response format without any preamble or explanation.

Respond using XML format like this:
<response>
  <name>{{agentName}}</name>
  <reasoning>Your reasoning here</reasoning>
  <action>RESPOND | IGNORE | STOP</action>
</response>

IMPORTANT: Your response must ONLY contain the <response></response> XML block above. Do not include any text, thinking, or reasoning before or after this XML block. Start your response immediately with <response> and end with </response>.
</output>`,nQ=`<task>Generate dialog and actions for the character {{agentName}}.</task>

<providers>
{{providers}}
</providers>

<instructions>
Write a thought and plan for {{agentName}} and decide what actions to take. Also include the providers that {{agentName}} will use to have the right context for responding and acting, if any.

IMPORTANT ACTION ORDERING RULES:
- Actions are executed in the ORDER you list them - the order MATTERS!
- REPLY should come FIRST to acknowledge the user's request before executing other actions
- Common patterns:
  - For requests requiring tool use: REPLY,CALL_MCP_TOOL (acknowledge first, then gather info)
  - For task execution: REPLY,SEND_MESSAGE or REPLY,EVM_SWAP_TOKENS (acknowledge first, then do the task)
  - For multi-step operations: REPLY,ACTION1,ACTION2 (acknowledge first, then complete all steps)
- REPLY is used to acknowledge and inform the user about what you're going to do
- Follow-up actions execute the actual tasks after acknowledgment
- Use IGNORE only when you should not respond at all
- If you use IGNORE, do not include any other actions. IGNORE should be used alone when you should not respond or take any actions.

IMPORTANT PROVIDER SELECTION RULES:
- Only include providers if they are needed to respond accurately.
- If the message mentions images, photos, pictures, attachments, or visual content, OR if you see "(Attachments:" in the conversation, you MUST include "ATTACHMENTS" in your providers list
- If the message asks about or references specific people, include "ENTITIES" in your providers list  
- If the message asks about relationships or connections between people, include "RELATIONSHIPS" in your providers list
- If the message asks about facts or specific information, include "FACTS" in your providers list
- If the message asks about the environment or world context, include "WORLD" in your providers list
- If no additional context is needed, you may leave the providers list empty.

IMPORTANT CODE BLOCK FORMATTING RULES:
- If {{agentName}} includes code examples, snippets, or multi-line code in the response, ALWAYS wrap the code with \`\`\` fenced code blocks (specify the language if known, e.g., \`\`\`python).
- ONLY use fenced code blocks for actual code. Do NOT wrap non-code text, instructions, or single words in fenced code blocks.
- If including inline code (short single words or function names), use single backticks (\`) as appropriate.
- This ensures the user sees clearly formatted and copyable code when relevant.

First, think about what you want to do next and plan your actions. Then, write the next message and include the actions you plan to take.
</instructions>

<keys>
"thought" should be a short description of what the agent is thinking about and planning.
"actions" should be a comma-separated list of the actions {{agentName}} plans to take based on the thought, IN THE ORDER THEY SHOULD BE EXECUTED (if none, use IGNORE, if simply responding with text, use REPLY)
"providers" should be a comma-separated list of the providers that {{agentName}} will use to have the right context for responding and acting (NEVER use "IGNORE" as a provider - use specific provider names like ATTACHMENTS, ENTITIES, FACTS, KNOWLEDGE, etc.)
"text" should be the text of the next message for {{agentName}} which they will send to the conversation.
</keys>

<output>
Do NOT include any thinking, reasoning, or <think> sections in your response. 
Go directly to the XML response format without any preamble or explanation.

Respond using XML format like this:
<response>
    <thought>Your thought here</thought>
    <actions>ACTION1,ACTION2</actions>
    <providers>PROVIDER1,PROVIDER2</providers>
    <text>Your response text here</text>
</response>

IMPORTANT: Your response must ONLY contain the <response></response> XML block above. Do not include any text, thinking, or reasoning before or after this XML block. Start your response immediately with <response> and end with </response>.
</output>`,rQ=`# Task: Create a post in the voice and style and perspective of {{agentName}} @{{twitterUserName}}.

Example task outputs:
1. A post about the importance of AI in our lives
<response>
  <thought>I am thinking about writing a post about the importance of AI in our lives</thought>
  <post>AI is changing the world and it is important to understand how it works</post>
  <imagePrompt>A futuristic cityscape with flying cars and people using AI to do things</imagePrompt>
</response>

2. A post about dogs
<response>
  <thought>I am thinking about writing a post about dogs</thought>
  <post>Dogs are man's best friend and they are loyal and loving</post>
  <imagePrompt>A dog playing with a ball in a park</imagePrompt>
</response>

3. A post about finding a new job
<response>
  <thought>Getting a job is hard, I bet there's a good tweet in that</thought>
  <post>Just keep going!</post>
  <imagePrompt>A person looking at a computer screen with a job search website</imagePrompt>
</response>

{{providers}}

Write a post that is {{adjective}} about {{topic}} (without mentioning {{topic}} directly), from the perspective of {{agentName}}. Do not add commentary or acknowledge this request, just write the post.
Your response should be 1, 2, or 3 sentences (choose the length at random).
Your response should not contain any questions. Brief, concise statements only. The total character count MUST be less than 280. No emojis. Use \\n\\n (double spaces) between statements if there are multiple statements in your response.

Your output should be formatted in XML like this:
<response>
  <thought>Your thought here</thought>
  <post>Your post text here</post>
  <imagePrompt>Optional image prompt here</imagePrompt>
</response>

The "post" field should be the post you want to send. Do not including any thinking or internal reflection in the "post" field.
The "imagePrompt" field is optional and should be a prompt for an image that is relevant to the post. It should be a single sentence that captures the essence of the post. ONLY USE THIS FIELD if it makes sense that the post would benefit from an image.
The "thought" field should be a short description of what the agent is thinking about before responding, including a brief justification for the response. Includate an explanation how the post is relevant to the topic but unique and different than other posts.

Do NOT include any thinking, reasoning, or <think> sections in your response. 
Go directly to the XML response format without any preamble or explanation.

IMPORTANT: Your response must ONLY contain the <response></response> XML block above. Do not include any text, thinking, or reasoning before or after this XML block. Start your response immediately with <response> and end with </response>.`,BQ="Respond with only a YES or a NO.",iQ=`<task>Analyze the provided image and generate a comprehensive description with multiple levels of detail.</task>

<instructions>
Carefully examine the image and provide:
1. A concise, descriptive title that captures the main subject or scene
2. A brief summary description (1-2 sentences) highlighting the key elements
3. An extensive, detailed description that covers all visible elements, composition, lighting, colors, mood, and any other relevant details

Be objective and descriptive. Focus on what you can actually see in the image rather than making assumptions about context or meaning.
</instructions>

<output>
Do NOT include any thinking, reasoning, or <think> sections in your response. 
Go directly to the XML response format without any preamble or explanation.

Respond using XML format like this:
<response>
  <title>A concise, descriptive title for the image</title>
  <description>A brief 1-2 sentence summary of the key elements in the image</description>
  <text>An extensive, detailed description covering all visible elements, composition, lighting, colors, mood, setting, objects, people, activities, and any other relevant details you can observe in the image</text>
</response>

IMPORTANT: Your response must ONLY contain the <response></response> XML block above. Do not include any text, thinking, or reasoning before or after this XML block. Start your response immediately with <response> and end with </response>.
</output>`,UQ=`<task>
Determine the next step the assistant should take in this conversation to help the user reach their goal.
</task>

{{recentMessages}}

# Multi-Step Workflow

In each step, decide:

1. **Which providers (if any)** should be called to gather necessary data.
2. **Which action (if any)** should be executed after providers return.
3. Decide whether the task is complete. If so, set \`isFinish: true\`. Do not select the \`REPLY\` action; replies are handled separately after task completion.

You can select **multiple providers** and at most **one action** per step.

If the task is fully resolved and no further steps are needed, mark the step as \`isFinish: true\`.

---

{{actionsWithDescriptions}}

{{providersWithDescriptions}}

These are the actions or data provider calls that have already been used in this run. Use this to avoid redundancy and guide your next move.

{{actionResults}}

<keys>
"thought" Clearly explain your reasoning for the selected providers and/or action, and how this step contributes to resolving the user's request.
"action"  Name of the action to execute after providers return (can be null if no action is needed).
"providers" List of provider names to call in this step (can be empty if none are needed).
"isFinish" Set to true only if the task is fully complete.
</keys>

 IMPORTANT: Do **not** mark the task as \`isFinish: true\` immediately after calling an action like. Wait for the action to complete before deciding the task is finished.

<output>
<response>
  <thought>Your thought here</thought>
  <action>ACTION</action>
  <providers>PROVIDER1,PROVIDER2</providers>
  <isFinish>true | false</isFinish>
</response>
</output>`,FQ=`<task>
Summarize what the assistant has done so far and provide a final response to the user based on the completed steps.
</task>

# Context Information
{{bio}}

---

{{system}}

---

{{messageDirections}}

# Conversation Summary
Below is the users original request and conversation so far:
{{recentMessages}}

# Execution Trace
Here are the actions taken by the assistant to fulfill the request:
{{actionResults}}

# Assistants Last Reasoning Step
{{recentMessage}}

# Instructions

 - Review the execution trace and last reasoning step carefully

 - Your final output MUST be in this XML format:
<output>
<response>
  <thought>Your thought here</thought>
  <text>Your final message to the user</text>
</response>
</output>
`;async function eQ(q,$,K){let _=n_(q,K),P=await q.getWorld(_);if(!P||!P.metadata?.roles)return"NONE";if(P.metadata.roles[$])return P.metadata.roles[$];if(P.metadata.roles[$])return P.metadata.roles[$];return"NONE"}async function sQ(q,$){if(!$)return U$.error("User ID is required to find server"),null;let K=await q.getAllWorlds();if(!K||K.length===0)return U$.info("No worlds found for this agent"),null;let _=[];for(let P of K)if(P.metadata?.ownership?.ownerId===$)_.push(P);return _.length?_:null}var R8=[];for(let q=0;q<256;++q)R8.push((q+256).toString(16).slice(1));function xf(q,$=0){return(R8[q[$+0]]+R8[q[$+1]]+R8[q[$+2]]+R8[q[$+3]]+"-"+R8[q[$+4]]+R8[q[$+5]]+"-"+R8[q[$+6]]+R8[q[$+7]]+"-"+R8[q[$+8]]+R8[q[$+9]]+"-"+R8[q[$+10]]+R8[q[$+11]]+R8[q[$+12]]+R8[q[$+13]]+R8[q[$+14]]+R8[q[$+15]]).toLowerCase()}var Pj,cy=new Uint8Array(16);function Yj(){if(!Pj){if(typeof crypto>"u"||!crypto.getRandomValues)throw Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");Pj=crypto.getRandomValues.bind(crypto)}return Pj(cy)}var ly=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),jj={randomUUID:ly};function dy(q,$,K){if(jj.randomUUID&&!$&&!q)return jj.randomUUID();q=q||{};let _=q.random??q.rng?.()??Yj();if(_.length<16)throw Error("Random bytes length must be >= 16");if(_[6]=_[6]&15|64,_[8]=_[8]&63|128,$){if(K=K||0,K<0||K+16>$.length)throw RangeError(`UUID byte range ${K}:${K+15} is out of buffer bounds`);for(let P=0;P<16;++P)$[K+P]=_[P];return $}return xf(_)}var j_=dy;var gK=(q)=>{switch(q){case 97:case 101:case 105:case 111:case 117:case 121:return!0;default:return!1}},oy=(q)=>{switch(q){case 97:case 101:case 105:case 111:case 117:case 121:case 119:case 120:case 89:return!0;default:return!1}},ny=(q)=>{switch(q){case 99:case 100:case 101:case 103:case 104:case 107:case 109:case 110:case 114:case 116:return!0;default:return!1}},ry=(q)=>{switch(q){case 98:case 100:case 102:case 103:case 109:case 110:case 112:case 114:case 116:return!0;default:return!1}},uf=(q,$)=>{return $>=2&&gK(q[$-2])&&($===2&&!gK(q[$-1])||$>=3&&!gK(q[$-3])&&!oy(q[$-1]))},By=(q)=>{if(q.length<3)return q;if(q.length<=6)switch(q){case"ski":return"ski";case"skies":return"sky";case"dying":return"die";case"lying":return"lie";case"tying":return"tie";case"idly":return"idl";case"gently":return"gentl";case"ugly":return"ugli";case"early":return"earli";case"only":return"onli";case"singly":return"singl";case"sky":case"news":case"howe":case"atlas":case"cosmos":case"bias":case"andes":return q}let $=q.charCodeAt(0)===39?1:0,K=q.length-$,_=Array(K),P=!1;for(let Z=0;Z<K;++Z){let k=q.charCodeAt(Z+$);if(k===121&&(Z===0||gK(_[Z-1]))){P=!0,_[Z]=89;continue}_[Z]=k}if(_[K-1]===39)--K;if(K>=2&&_[K-2]===39&&_[K-1]===115)K-=2;let O=0;while(O<K&&!gK(_[O]))++O;if(O<K)++O;let Y=O;if(K>=5&&(_[0]===103&&_[1]===101&&_[2]===110&&_[3]===101&&_[4]===114||_[0]===97&&_[1]===114&&_[2]===115&&_[3]===101&&_[4]===110))Y=5;else if(K>=6&&_[0]===99&&_[1]===111&&_[2]===109&&_[3]===109&&_[4]===117&&_[5]===110)Y=6;else{while(Y<K&&gK(_[Y]))++Y;if(Y<K)++Y}let H=Y;while(H<K&&!gK(_[H]))++H;while(H<K&&gK(_[H]))++H;if(H<K)++H;if(K>=3){if(_[K-1]===115){if(K>=4&&_[K-2]===101&&_[K-3]===115&&_[K-4]===115)K-=2;else if(_[K-2]===101&&_[K-3]===105)K-=K>=5?2:1;else if(_[K-2]!==117&&_[K-2]!==115&&O<K-1)K-=1}else if(_[K-1]===100&&_[K-2]===101&&_[K-3]===105)K-=K>=5?2:1}if(K===6&&(_[0]===105&&_[1]===110&&_[2]===110&&_[3]===105&&_[4]===110&&_[5]===103||_[0]===111&&_[1]===117&&_[2]===116&&_[3]===105&&_[4]===110&&_[5]===103||_[0]===101&&_[1]===120&&_[2]===99&&_[3]===101&&_[4]===101&&_[5]===100)||K===7&&(_[0]===99&&_[1]===97&&_[2]===110&&_[3]===110&&_[4]===105&&_[5]===110&&_[6]===103||_[0]===104&&_[1]===101&&_[2]===114&&_[3]===114&&_[4]===105&&_[5]===110&&_[6]===103||_[0]===101&&_[1]===97&&_[2]===114&&_[3]===114&&_[4]===105&&_[5]===110&&_[6]===103||_[0]===112&&_[1]===114&&_[2]===111&&_[3]===99&&_[4]===101&&_[5]===101&&_[6]===100||_[0]===115&&_[1]===117&&_[2]===99&&_[3]===99&&_[4]===101&&_[5]===101&&_[6]===100)){let Z="";for(let k=0;k<K;++k)Z+=String.fromCharCode(_[k]);return Z}let v=K>=2&&_[K-1]===121&&_[K-2]===108?K-2:K;if(v>=3)if(_[v-3]===101&&_[v-2]===101&&_[v-1]===100){if(v>=Y+3)K=v-1}else{if(_[v-2]===101&&_[v-1]===100)v-=2;else if(_[v-3]===105&&_[v-2]===110&&_[v-1]===103)v-=3;else v=-1;if(v>=0&&O<=v){if(K=v,K>=2){if(_[K-1]===116&&_[K-2]===97||_[K-1]===108&&_[K-2]===98||_[K-1]===122&&_[K-2]===105)_[K]=101,++K;else if(_[K-2]===_[K-1]&&ry(_[K-1]))--K;else if(Y>=K&&uf(_,K))_[K]=101,++K}}}if(K>=3&&(_[K-1]===89||_[K-1]===121)&&!gK(_[K-2]))_[K-1]=105;if(K>=Y+2)switch(_[K-1]){case 108:if(K>=Y+6&&_[K-2]===97&&_[K-3]===110&&_[K-4]===111&&_[K-5]===105&&_[K-6]===116)if(K>=7&&_[K-7]===97){if(K>=Y+7)K-=4,_[K-1]=101}else K-=2;break;case 110:if(K>=Y+5&&_[K-2]===111&&_[K-3]===105&&_[K-4]===116&&_[K-5]===97)if(K>=7&&_[K-6]===122&&_[K-7]===105){if(K>=Y+7)K-=4,_[K-1]=101}else K-=2,_[K-1]=101;break;case 114:if(K>=Y+4){if(_[K-2]===101){if(_[K-3]===122&&_[K-4]===105)--K}else if(_[K-2]===111){if(_[K-3]===116&&_[K-4]===97)--K,_[K-1]=101}}break;case 115:if(K>=Y+7&&_[K-2]===115&&_[K-3]===101&&_[K-4]===110&&(_[K-5]===108&&_[K-6]===117&&_[K-7]===102||_[K-5]===115&&_[K-6]===117&&_[K-7]===111||_[K-5]===101&&_[K-6]===118&&_[K-7]===105))K-=4;break;case 109:if(K>=Y+5&&_[K-2]===115&&_[K-3]===105&&_[K-4]===108&&_[K-5]===97)K-=3;break;case 105:if(_[K-2]===99){if(K>=Y+4&&(_[K-4]===101||_[K-4]===97)&&_[K-3]===110)_[K-1]=101}else if(_[K-2]===103){if(K>=Y+3&&K>=4&&_[K-2]===103&&_[K-3]===111&&_[K-4]===108)--K}else if(_[K-2]===116){if(K>=Y+5&&_[K-3]===105){if(_[K-4]===108){if(K>=6&&_[K-5]===105&&_[K-6]===98){if(K>=Y+6)K-=3,_[K-2]=108,_[K-1]=101}else if(_[K-4]===108&&_[K-5]===97)K-=3}else if(_[K-4]===118&&_[K-5]===105)K-=2,_[K-1]=101}}else if(_[K-2]===108&&K>=3){if(_[K-3]===98){if(K>=4&&_[K-4]===97){if(K>=Y+4)_[K-1]=101}else if(K>=Y+3)_[K-1]=101}else if(_[K-3]===108){if(K>=5&&_[K-4]===117&&_[K-5]===102){if(K>=Y+5)K-=2}else if(K>=Y+4&&_[K-4]===97)K-=2}else if(_[K-3]===115){if(K>=6&&_[K-4]===115&&_[K-5]===101&&_[K-6]===108){if(K>=Y+6)K-=2}else if(K>=Y+5&&_[K-4]===117&&_[K-5]===111)K-=2}else if(K>=5&&_[K-3]===116&&_[K-4]===110&&_[K-5]===101){if(K>=Y+5)K-=2}else if(ny(_[K-3]))K-=2}}if(K>=Y+3)switch(_[K-1]){case 108:if(_[K-3]===99){if(K>=Y+4&&_[K-4]===105&&_[K-2]===97)K-=2}else if(_[K-3]===102){if(_[K-2]===117)K-=3}else if(_[K-3]===110){if(K>=Y+6&&_[K-2]===97&&_[K-4]===111&&_[K-5]===105&&_[K-6]===116)if(K>=7&&_[K-7]===97){if(K>=Y+7)K-=4,_[K-1]=101}else K-=2}break;case 101:if(_[K-2]===122){if(K>=Y+5&&_[K-3]===105&&_[K-4]===108&&_[K-5]===97)K-=3}else if(_[K-2]===116){if(K>=Y+5&&_[K-3]===97&&_[K-4]===99&&_[K-5]===105)K-=3}else if(_[K-2]===118){if(K>=H+5&&_[K-3]===105&&_[K-4]===116&&_[K-5]===97)K-=5}break;case 105:if(K>=Y+5&&_[K-2]===116&&_[K-3]===105&&_[K-4]===99&&_[K-5]===105)K-=3;break;case 115:if(K>=Y+4&&_[K-2]===115&&_[K-3]===101&&_[K-4]===110)K-=4}if(K>=H+2)switch(_[K-1]){case 110:if(K>=H+3&&_[K-2]===111&&_[K-3]===105&&(_[K-4]===115||_[K-4]===116))K-=3;break;case 108:if(_[K-2]===97)K-=2;break;case 114:if(_[K-2]===101)K-=2;break;case 99:if(_[K-2]===105)K-=2;break;case 109:if(K>=H+3&&_[K-2]===115&&_[K-3]===105)K-=3;break;case 105:if(K>=H+3&&_[K-2]===116&&_[K-3]===105)K-=3;break;case 115:if(K>=H+3&&_[K-2]===117&&_[K-3]===111)K-=3;break;case 116:if(K>=H+3&&_[K-2]===110){if(_[K-3]===97)K-=3;else if(_[K-3]===101)if(K>=4&&_[K-4]===109){if(K>=5&&_[K-5]===101){if(K>=H+5)K-=5}else if(K>=H+4)K-=4}else K-=3}break;case 101:if(_[K-2]===99){if(K>=H+4&&_[K-3]===110&&(_[K-4]===97||_[K-4]===101))K-=4}else if(_[K-2]===108){if(K>=H+4&&_[K-3]===98&&(_[K-4]===97||_[K-4]===105))K-=4}else if(_[K-2]===116){if(K>=H+3&&_[K-3]===97)K-=3}else if(K>=H+3&&(_[K-2]===118||_[K-2]===122)&&_[K-3]===105)K-=3}if(K>=Y+1&&(K>=H+1&&_[K-1]===108&&_[K-2]===108||_[K-1]===101&&(K>=H+1||!uf(_,K-1))))--K;let X="";if(P)for(let Z=0;Z<K;++Z)X+=String.fromCharCode(_[Z]===89?121:_[Z]);else for(let Z=0;Z<K;++Z)X+=String.fromCharCode(_[Z]);return X},iy={k1:1.2,b:0.75,minLength:2,stopWords:new Set(["a","an","and","are","as","at","be","by","for","from","has","he","in","is","it","its","of","on","that","the","to","was","were","will","with"]),stemming:!1,stemWords:(q)=>q};class Oj{stopWords;minLength;stemming;stemmingRules;static DEFAULT_OPTIONS={stopWords:new Set,minLength:2,stemming:!1,stemmingRules:[]};constructor(q={}){let $={...Oj.DEFAULT_OPTIONS,...q};this.stopWords=$.stopWords,this.minLength=$.minLength,this.stemming=$.stemming,this.stemmingRules=$.stemmingRules.map((K)=>({...K,pattern:typeof K.pattern==="string"?new RegExp(K.pattern):K.pattern}))}tokenize(q,$=!1){if(!q)throw Error("Input text cannot be null or empty");let K=Date.now(),_=q.split(/\s+/).filter((H)=>H.length>0),O=this.cleanText(q).split(/\s+/).filter((H)=>this.isValidToken(H)).map((H)=>this.stemming?this.stemWord(H):H),Y=$?{originalWordCount:_.length,stopWordsRemoved:_.length-O.length,stemmedWords:this.stemming?O.length:0,processingTimeMs:Date.now()-K}:{originalWordCount:0,stopWordsRemoved:0,stemmedWords:0,processingTimeMs:0};return{tokens:O,stats:Y}}cleanText(q){return q.toLowerCase().normalize("NFKD").replace(/[\u0000-\u001F\u007F-\u009F\u200B-\u200D\uFEFF]/g,"").replace(/[\u0300-\u036f]/g,"").replace(/[\p{Emoji_Presentation}\p{Extended_Pictographic}]/gu,"").replace(/[]/g,"").replace(/[\p{P}]/gu," ").replace(/[^a-z0-9\u3040-\u30FF\u3400-\u4DBF\u4E00-\u9FFF\uAC00-\uD7AF\s]/gu," ").replace(/\s+/g," ").trim()}isValidToken(q){let $=/^\d+$/.test(q);return(q.length>=this.minLength||$)&&!this.stopWords.has(q)}stemWord(q){if(q.length<3)return q;let $=!1,K=q;for(let _ of this.stemmingRules){let P=K.match(_.pattern);if(P){if(!_.minMeasure||this.measure(K.substring(0,P.index))>=_.minMeasure){if(typeof _.replacement==="string")K=K.replace(_.pattern,_.replacement);else K=K.replace(_.pattern,(...O)=>_.replacement(...O));$=!0}}}if($&&K!==q)return K;return By(K)}isConsonant(q,$){let K=q[$];if("aeiou".includes(K))return!1;return K!=="y"||($===0?!0:!this.isConsonant(q,$-1))}measure(q){let $=0,K=!1;for(let _=0;_<q.length;_++)if(this.isConsonant(q,_)){if(K)$++,K=!1}else K=!0;return $}}class Wj{termFrequencySaturation;lengthNormalizationFactor;tokenizer;documentLengths;averageDocLength;termToIndex;documentFrequency;termFrequencies;fieldBoosts;documents;constructor(q,$={}){let K={...iy,...$};if(this.termFrequencySaturation=K.k1,this.lengthNormalizationFactor=K.b,this.tokenizer=new Oj(K),this.fieldBoosts=K.fieldBoosts||{},this.documents=[],this.documentLengths=new Uint32Array(0),this.termToIndex=new Map,this.documentFrequency=new Uint32Array(0),this.averageDocLength=0,this.termFrequencies=new Map,q&&q.length>0){this.documents=[...q];let{documentLengths:_,termToIndex:P,documentFrequency:O,averageDocLength:Y,termFrequencies:H}=this.processDocuments(q);this.documentLengths=_,this.termToIndex=P,this.documentFrequency=O,this.averageDocLength=Y,this.termFrequencies=H}}processDocuments(q){let $=q.length,K=new Uint32Array($),_=new Map,P=new Map,O=new Map,Y=0,H=0;q.forEach((X,Z)=>{let k=0,G=new Map;Object.entries(X).forEach(([S,N])=>{if(typeof N!=="string")return;let E=this.fieldBoosts[S]||1,{tokens:h}=this.tokenizer.tokenize(N),D=h.length*E;k+=D,h.forEach((I)=>{if(!_.has(I))_.set(I,H++);let g=_.get(I);if(!P.has(I))P.set(I,new Set);P.get(I).add(Z);let y=G.get(g)||0;G.set(g,y+E)})}),K[Z]=k,Y+=k,G.forEach((S,N)=>{if(!O.has(N))O.set(N,new Map);O.get(N).set(Z,S)})});let v=new Uint32Array(_.size);return P.forEach((X,Z)=>{let k=_.get(Z);v[k]=X.size}),{documentLengths:K,termToIndex:_,documentFrequency:v,averageDocLength:$>0?Y/$:0,termFrequencies:O}}recalculateAverageLength(){if(this.documentLengths.length===0){this.averageDocLength=0;return}let q=this.documentLengths.reduce(($,K)=>$+K,0);this.averageDocLength=q/this.documentLengths.length}search(q,$=10){let{tokens:K}=this.tokenizer.tokenize(q),_=new Float32Array(this.documentLengths.length).fill(0);return K.forEach((P)=>{let O=this.termToIndex.get(P);if(O===void 0)return;let Y=this.calculateIdf(O);if(Y<=0)return;let H=this.termFrequencies.get(O);if(!H)return;H.forEach((v,X)=>{let Z=this.documentLengths[X],k=v*(this.termFrequencySaturation+1),G=v+this.termFrequencySaturation*(1-this.lengthNormalizationFactor+this.lengthNormalizationFactor*Z/this.averageDocLength);_[X]+=Y*(k/G)})}),Array.from({length:_.length},(P,O)=>({index:O,score:_[O]})).filter((P)=>P.score>0).sort((P,O)=>O.score-P.score).slice(0,$)}searchPhrase(q,$=10){let{tokens:K}=this.tokenizer.tokenize(q);if(K.length===0)return[];let _=null;for(let O of K){let Y=this.termToIndex.get(O);if(Y===void 0)return[];let H=this.termFrequencies.get(Y)?.keys();if(!H)return[];let v=new Set(H);if(_===null)_=v;else _=new Set([..._].filter((X)=>v.has(X)));if(_.size===0)return[]}if(_===null||_.size===0)return[];let P=new Map;return _.forEach((O)=>{let Y=this.getDocument(O),H=!1;Object.entries(Y).forEach(([v,X])=>{if(typeof X!=="string"||H)return;let Z=this.fieldBoosts[v]||1,{tokens:k}=this.tokenizer.tokenize(X);for(let G=0;G<=k.length-K.length;G++){let S=!0;for(let N=0;N<K.length;N++)if(k[G+N]!==K[N]){S=!1;break}if(S){let N=this.calculatePhraseScore(K,O)*Z;P.set(O,(P.get(O)||0)+N),H=!0;break}}})}),Array.from(P.entries()).map(([O,Y])=>({index:O,score:Y})).sort((O,Y)=>Y.score-O.score).slice(0,$)}calculatePhraseScore(q,$){return q.reduce((K,_)=>{let P=this.termToIndex.get(_);if(P===void 0)return K;let O=this.calculateIdf(P),Y=this.termFrequencies.get(P)?.get($)||0,H=this.documentLengths[$],v=Y*(this.termFrequencySaturation+1),X=Y+this.termFrequencySaturation*(1-this.lengthNormalizationFactor+this.lengthNormalizationFactor*H/this.averageDocLength);return K+O*(v/X)},0)}async addDocument(q){if(!q)throw Error("Document cannot be null");let $=this.documentLengths.length;this.documents.push(q);let K=new Uint32Array($+1);K.set(this.documentLengths,0),this.documentLengths=K;let _=0,P=new Map;Object.entries(q).forEach(([O,Y])=>{if(typeof Y!=="string")return;let H=this.fieldBoosts[O]||1,{tokens:v}=this.tokenizer.tokenize(Y);_+=v.length*H,v.forEach((X)=>{let Z;if(!this.termToIndex.has(X)){if(Z=this.termToIndex.size,this.termToIndex.set(X,Z),this.documentFrequency.length<=Z){let G=this.documentFrequency,S=Math.max(Z+1,G.length*2||1);this.documentFrequency=new Uint32Array(S),this.documentFrequency.set(G,0)}this.documentFrequency[Z]=0}else Z=this.termToIndex.get(X);let k=P.get(Z)||0;P.set(Z,k+H)})}),this.documentLengths[$]=_,P.forEach((O,Y)=>{if(!this.termFrequencies.has(Y))this.termFrequencies.set(Y,new Map);if(this.termFrequencies.get(Y).set($,O),Y<this.documentFrequency.length)this.documentFrequency[Y]++;else console.error(`Error: termIndexVal ${Y} is out of bounds for documentFrequency (length ${this.documentFrequency.length}). This indicates an issue with array resizing or term indexing.`)}),this.recalculateAverageLength()}calculateIdf(q){if(q<0||q>=this.documentFrequency.length)return 0;let $=this.documentFrequency[q];if($<=0||$>this.documentLengths.length)return 0;let _=this.documentLengths.length-$+0.5,P=$+0.5;return Math.log(1+_/P)}getTermFrequency(q,$){return this.termFrequencies.get(q)?.get($)||0}getDocument(q){if(q<0||q>=this.documents.length)throw Error(`Document index ${q} out of bounds (0-${this.documents.length-1})`);return this.documents[q]}clearDocuments(){this.documents=[],this.documentLengths=new Uint32Array(0),this.termToIndex.clear(),this.documentFrequency=new Uint32Array(0),this.averageDocLength=0,this.termFrequencies.clear()}getDocumentCount(){return this.documents.length}async addDocuments(q){return Promise.all(q.map(($)=>this.addDocument($)))}}var Uy={};class Fy{permits;waiting=[];constructor(q){this.permits=q}async acquire(){if(this.permits>0)return this.permits-=1,Promise.resolve();return new Promise((q)=>{this.waiting.push(q)})}release(){this.permits+=1;let q=this.waiting.shift();if(q&&this.permits>0)this.permits-=1,q()}}class ty{#q=32;agentId;character;adapter;actions=[];evaluators=[];providers=[];plugins=[];isInitialized=!1;events=new Map;stateCache=new Map;fetch=fetch;services=new Map;serviceTypes=new Map;models=new Map;routes=[];taskWorkers=new Map;sendHandlers=new Map;eventHandlers=new Map;allAvailablePlugins=new Map;characterPlugins=[];logger;settings;servicesInitQueue=new Set;servicePromiseHandles=new Map;servicePromises=new Map;initPromise;initResolver;currentRunId;currentActionContext;maxWorkingMemoryEntries=50;constructor(q){if(this.agentId=q.character?.id??q?.agentId??mP(q.character?.name??j_()+q.character?.username),this.character=q.character,this.initPromise=new Promise(($)=>{this.initResolver=$}),this.logger=uP({namespace:this.character?.name}),this.#q=q.conversationLength??this.#q,q.adapter)this.registerDatabaseAdapter(q.adapter);if(this.fetch=q.fetch??this.fetch,this.settings=q.settings??Uy,this.plugins=[],this.characterPlugins=q?.plugins??[],q.allAvailablePlugins){for(let $ of q.allAvailablePlugins)if($?.name)this.allAvailablePlugins.set($.name,$)}if(this.logger.debug(`Success: Agent ID: ${this.agentId}`),this.currentRunId=void 0,q.settings?.MAX_WORKING_MEMORY_ENTRIES)this.maxWorkingMemoryEntries=parseInt(q.settings.MAX_WORKING_MEMORY_ENTRIES,10)||50;else this.maxWorkingMemoryEntries=ST("MAX_WORKING_MEMORY_ENTRIES",50)}createRunId(){return j_()}startRun(){return this.currentRunId=this.createRunId(),this.currentRunId}endRun(){this.currentRunId=void 0}getCurrentRunId(){if(!this.currentRunId)this.currentRunId=this.createRunId();return this.currentRunId}async registerPlugin(q){if(!q?.name)throw this.logger.error("*** registerPlugin: Plugin or plugin name is undefined"),Error("*** registerPlugin: Plugin or plugin name is undefined");if(this.plugins.find((K)=>K.name===q.name)){this.logger.warn(`${this.character.name}(${this.agentId}) - Plugin ${q.name} is already registered. Skipping re-registration.`);return}if(this.plugins.push(q),this.logger.debug(`Success: Plugin ${q.name} added to active plugins for ${this.character.name}(${this.agentId}).`),q.init)try{await q.init(q.config||{},this),this.logger.debug(`Success: Plugin ${q.name} initialized successfully`)}catch(K){let _=K instanceof Error?K.message:String(K);if(_.includes("API key")||_.includes("environment variables")||_.includes("Invalid plugin configuration"))console.warn(`Plugin ${q.name} requires configuration. ${_}`),console.warn("Please check your environment variables and ensure all required API keys are set."),console.warn("You can set these in your .env file.");else throw K}if(q.adapter)this.logger.debug(`Registering database adapter for plugin ${q.name}`),this.registerDatabaseAdapter(q.adapter);if(q.actions)for(let K of q.actions)this.registerAction(K);if(q.evaluators)for(let K of q.evaluators)this.registerEvaluator(K);if(q.providers)for(let K of q.providers)this.registerProvider(K);if(q.models)for(let[K,_]of Object.entries(q.models))this.registerModel(K,_,q.name,q?.priority);if(q.routes)for(let K of q.routes){let _=K.path.startsWith("/")?K.path:`/${K.path}`;this.routes.push({...K,path:"/"+q.name+_})}if(q.events)for(let[K,_]of Object.entries(q.events))for(let P of _)this.registerEvent(K,P);if(q.services)for(let K of q.services){if(!this.servicePromises.has(K.serviceType))this._createServiceResolver(K.serviceType);if(this.isInitialized)await this.registerService(K);else this.servicesInitQueue.add(K)}}getAllServices(){return this.services}async stop(){this.logger.debug(`runtime::stop - character ${this.character.name}`);for(let[q,$]of this.services){this.logger.debug(`runtime::stop - requesting service stop for ${q}`);for(let K of $)await K.stop()}}async initialize(){if(this.isInitialized){this.logger.warn("Agent already initialized");return}let q=[],$=this.characterPlugins;for(let _ of $)if(_)q.push(this.registerPlugin(_));if(await Promise.all(q),!this.adapter)throw this.logger.error("Database adapter not initialized. Make sure @elizaos/plugin-sql is included in your plugins."),Error("Database adapter not initialized. The SQL plugin (@elizaos/plugin-sql) is required for agent initialization. Please ensure it is included in your character configuration.");try{await this.adapter.init(),this.logger.info("Running plugin migrations..."),await this.runPluginMigrations(),this.logger.info("Plugin migrations completed.");let _=await this.ensureAgentExists(this.character);if(!_){let O=`Agent ${this.character.name} does not exist in database after ensureAgentExists call`;throw Error(O)}let P=await this.getEntityById(this.agentId);if(!P){if(!await this.createEntity({id:this.agentId,names:[this.character.name],metadata:{},agentId:_.id})){let Y=`Failed to create entity for agent ${this.agentId}`;throw Error(Y)}if(P=await this.getEntityById(this.agentId),!P)throw Error(`Agent entity not found for ${this.agentId}`);this.logger.debug(`Success: Agent entity created successfully for ${this.character.name}`)}}catch(_){let P=_ instanceof Error?_.message:String(_);throw this.logger.error(`Failed to create agent entity: ${P}`),_}try{if(!await this.getRoom(this.agentId))await this.createRoom({id:this.agentId,name:this.character.name,source:"elizaos",type:"SELF",channelId:this.agentId,serverId:this.agentId,worldId:this.agentId});if(!(await this.adapter.getParticipantsForRoom(this.agentId)).includes(this.agentId)){if(!await this.addParticipant(this.agentId,this.agentId)){let Y=`Failed to add agent ${this.agentId} as participant to its own room`;throw Error(Y)}this.logger.debug(`Agent ${this.character.name} linked to its own room successfully`)}}catch(_){let P=_ instanceof Error?_.message:String(_);throw this.logger.error(`Failed to add agent as participant: ${P}`),_}if(!this.getModel(L8.TEXT_EMBEDDING))this.logger.warn(`[AgentRuntime][${this.character.name}] No TEXT_EMBEDDING model registered. Skipping embedding dimension setup.`);else await this.ensureEmbeddingDimension();for(let _ of this.servicesInitQueue)await this.registerService(_);if(this.isInitialized=!0,this.initResolver)this.initResolver()}async runPluginMigrations(){if(!this.adapter?.db){this.logger.warn("Drizzle instance not found on adapter, skipping plugin migrations.");return}let $=this.plugins.filter((K)=>K.schema);this.logger.info(`Found ${$.length} plugins with schemas to migrate.`);for(let K of $)if(K.schema){this.logger.info(`Running migrations for plugin: ${K.name}`);try{if(this.adapter&&"runMigrations"in this.adapter)await this.adapter.runMigrations(K.schema,K.name),this.logger.info(`Successfully migrated plugin: ${K.name}`)}catch(_){this.logger.error(_ instanceof Error?_:Error(String(_)),`Failed to migrate plugin ${K.name}`)}}}async getConnection(){if(!this.adapter)throw Error("Database adapter not registered");return this.adapter.getConnection()}setSetting(q,$,K=!1){if(K){if(!this.character.secrets)this.character.secrets={};this.character.secrets[q]=$}else{if(!this.character.settings)this.character.settings={};this.character.settings[q]=$}}getSetting(q){let $=this.character.secrets?.[q]||this.character.settings?.[q]||typeof this.character.settings==="object"&&this.character.settings!==null&&"secrets"in this.character.settings&&this.character.settings.secrets?.[q]||this.settings[q],K=J5($,r_());if(K==="true")return!0;if(K==="false")return!1;return K||null}getConversationLength(){return this.#q}registerDatabaseAdapter(q){if(this.adapter)this.logger.warn("Database adapter already registered. Additional adapters will be ignored. This may lead to unexpected behavior.");else this.adapter=q,this.logger.debug("Success: Database adapter registered successfully.")}registerProvider(q){this.providers.push(q),this.logger.debug(`Success: Provider ${q.name} registered successfully.`)}registerAction(q){if(this.actions.find(($)=>$.name===q.name))this.logger.warn(`${this.character.name}(${this.agentId}) - Action ${q.name} already exists. Skipping registration.`);else try{this.actions.push(q),this.logger.success(`${this.character.name}(${this.agentId}) - Action ${q.name} registered successfully.`)}catch($){console.error("Error registering action",$)}}registerEvaluator(q){this.evaluators.push(q)}updateActionPlan(q,$){return{...q,...$}}updateActionStep(q,$,K){if(!q.steps||$<0||$>=q.steps.length)return this.logger.warn(`Invalid step index: ${$} for plan with ${q.steps?.length||0} steps`),q;return{...q,steps:q.steps.map((_,P)=>P===$?{..._,...K}:_)}}async processActions(q,$,K,_){let P=[];for(let Z of $)if(Z.content?.actions&&Z.content.actions.length>0)P.push(...Z.content.actions);let O=P.length>1,Y=this.getCurrentRunId(),H=this.createRunId(),v=null;if(O){let Z=$[0]?.content?.thought||`Executing ${P.length} actions: ${P.join(", ")}`;v={runId:H,totalSteps:P.length,currentStep:0,steps:P.map((k)=>({action:k,status:"pending"})),thought:Z,startTime:Date.now()}}let X=0;for(let Z of $){let N=function(E){return E.toLowerCase().replace(/_/g,"")};if(!Z.content?.actions||Z.content.actions.length===0){this.logger.warn("No action found in the response content.");continue}let k=Z.content.actions,G=[],S=K;this.logger.debug(`Found actions: ${this.actions.map((E)=>N(E.name))}`);for(let E of k){if(v)v=this.updateActionPlan(v,{currentStep:X+1});if(S=await this.composeState(q,["RECENT_MESSAGES","ACTION_STATE"]),v&&S.data)S.data.actionPlan=v,S.data.actionResults=G;this.logger.debug(`Success: Calling action: ${E}`);let h=N(E),D=this.actions.find((I)=>N(I.name)===h);if(!D)D=this.actions.find((I)=>N(I.name).includes(h)||h.includes(N(I.name)));if(D)this.logger.debug(`Success: Found action: ${D?.name}`);else{this.logger.debug("Attempting to find action in similes.");for(let I of this.actions){if(I.similes?.find((p)=>N(p)===h)){D=I,this.logger.debug(`Success: Action found in similes (exact match): ${D.name}`);break}if(I.similes?.find((p)=>N(p).includes(h)||h.includes(N(p)))){D=I,this.logger.debug(`Success: Action found in similes (fuzzy match): ${D.name}`);break}}}if(!D){let I=`No action found for: ${E}`;if(this.logger.error(I),v&&v.steps[X])v=this.updateActionStep(v,X,{status:"failed",error:I});let g={id:j_(),entityId:q.entityId,roomId:q.roomId,worldId:q.worldId,content:{thought:I,source:"auto",type:"action_result",actionName:E,actionStatus:"failed",runId:H}};await this.createMemory(g,"messages"),X++;continue}if(!D.handler){if(this.logger.error(`Action ${D.name} has no handler.`),v&&v.steps[X])v=this.updateActionStep(v,X,{status:"failed",error:"No handler"});X++;continue}try{this.logger.debug(`Executing handler for action: ${D.name}`);let I=j_();this.currentActionContext={actionName:D.name,actionId:I,prompts:[]};let y={context:{previousResults:G,getPreviousResult:(n)=>{return G.find((M)=>M.data?.actionName===n)}}};if(v)y.actionPlan={totalSteps:v.totalSteps,currentStep:v.currentStep,steps:v.steps,thought:v.thought};try{this.logger.debug(`Creating action start message for: ${D.name}`),await this.emitEvent("ACTION_STARTED",{messageId:I,roomId:q.roomId,world:q.worldId,content:{text:`Executing action: ${D.name}`,actions:[D.name],actionStatus:"executing",actionId:I,runId:H,type:"agent_action",thought:v?.thought,source:q.content?.source}})}catch(n){this.logger.error("Failed to create action start message:",String(n))}let p=[],m=async(n,M)=>{return p.push({content:n,files:M}),[]},c=await D.handler(this,q,S,y,m,$),$q=c===void 0||c===null||typeof c==="boolean",e=null;if(!$q){if(typeof c==="object"&&c!==null&&(("values"in c)||("data"in c)||("text"in c)))e={...c,success:"success"in c?c.success:!0};else e={success:!0,data:{actionName:D.name,legacyResult:c}};if(G.push(e),e.values)S={...S,values:{...S.values,...e.values},data:{...S.data||{},actionResults:[...S.data?.actionResults||[],e],actionPlan:v}};if(e&&S.data){if(!S.data.workingMemory)S.data.workingMemory={};let n=`action_${E}_${j_()}`,M={actionName:D.name,result:e,timestamp:Date.now()};S.data.workingMemory[n]=M;let j=Object.entries(S.data.workingMemory);if(j.length>this.maxWorkingMemoryEntries){let J=j.sort((w,z)=>{let T=w[1],V=z[1],C=T?.timestamp??0;return(V?.timestamp??0)-C});S.data.workingMemory=Object.fromEntries(J.slice(0,this.maxWorkingMemoryEntries))}}if(v&&v.steps[X])v=this.updateActionStep(v,X,{status:"completed",result:e})}try{let M=e?.success!==!1?"completed":"failed";await this.emitEvent("ACTION_COMPLETED",{messageId:I,roomId:q.roomId,world:q.worldId,content:{text:`Action ${D.name} ${M}`,actions:[D.name],actionStatus:M,actionId:I,type:"agent_action",actionResult:e,source:q.content?.source}})}catch(n){let M=n instanceof Error?n.message:String(n);this.logger.error(`Failed to emit ACTION_COMPLETED event for action ${D.name} (${I}): ${M}`)}if(_)for(let n of p)await _(n.content,n.files);let d={id:I,entityId:this.agentId,roomId:q.roomId,worldId:q.worldId,content:{text:e?.text||`Executed action: ${D.name}`,source:"action",type:"action_result",actionName:D.name,actionStatus:e?.success?"completed":"failed",actionResult:$q?{legacy:c}:e,runId:H,...v&&{planStep:`${v.currentStep}/${v.totalSteps}`,planThought:v.thought}},metadata:{type:"action_result",actionName:D.name,runId:H,parentRunId:Y,actionId:I,...v&&{totalSteps:v.totalSteps,currentStep:v.currentStep}}};await this.createMemory(d,"messages"),this.logger.debug(`Action ${D.name} completed`,JSON.stringify({isLegacyReturn:$q,result:$q?c:void 0,hasValues:e?!!e.values:!1,hasData:e?!!e.data:!1,hasText:e?!!e.text:!1})),await this.adapter.log({entityId:q.entityId,roomId:q.roomId,type:"action",body:{action:D.name,actionId:I,message:q.content.text,messageId:q.id,state:S,responses:$,result:$q?{legacy:c}:e,isLegacyReturn:$q,prompts:this.currentActionContext?.prompts||[],promptCount:this.currentActionContext?.prompts.length||0,runId:H,parentRunId:Y,...v&&{planStep:`${v.currentStep}/${v.totalSteps}`,planThought:v.thought}}}),this.currentActionContext=void 0}catch(I){let g=I instanceof Error?I.message:String(I);if(this.logger.error(I),v&&v.steps[X])v=this.updateActionStep(v,X,{status:"failed",error:g});this.currentActionContext=void 0;let y={success:!1,data:{actionName:D.name,error:g,errorObject:I}};G.push(y);let p={id:j_(),content:{thought:g,source:"auto",type:"action_result",actionName:D.name,actionStatus:"failed",error:g,runId:H,...v&&{planStep:`${v.currentStep}/${v.totalSteps}`,planThought:v.thought}},entityId:this.agentId,roomId:q.roomId,worldId:q.worldId,metadata:{type:"action_result",actionName:D.name,runId:H,parentRunId:Y,error:!0,...v&&{totalSteps:v.totalSteps,currentStep:v.currentStep}}};if(await this.createMemory(p,"messages"),I?.critical||I?.code==="CRITICAL_ERROR")throw I}X++}if(q.id)this.stateCache.set(`${q.id}_action_results`,{values:{actionResults:G},data:{actionResults:G,actionPlan:v},text:JSON.stringify(G)})}}async evaluate(q,$,K,_,P){let O=this.evaluators.map(async(H)=>{if(!H.handler)return null;if(!K&&!H.alwaysRun)return null;if(await H.validate(this,q,$))return H;return null}),Y=(await Promise.all(O)).filter(Boolean);if(Y.length===0)return[];return $=await this.composeState(q,["RECENT_MESSAGES","EVALUATORS"]),await Promise.all(Y.map(async(H)=>{if(H.handler)await H.handler(this,q,$,{},_,P),this.adapter.log({entityId:q.entityId,roomId:q.roomId,type:"evaluator",body:{evaluator:H.name,messageId:q.id,message:q.content.text,state:$,runId:this.getCurrentRunId()}})})),Y}async ensureConnections(q,$,K,_){if(!q){console.trace(),this.logger.error("ensureConnections - no entities");return}if(!$||$.length===0){console.trace(),this.logger.error("ensureConnections - no rooms");return}await this.ensureWorldExists({..._,agentId:this.agentId});let P=$[0],O=(y,p)=>y.reduce((m,c,$q)=>{if($q%p===0)m.push([]);return m[m.length-1].push(c),m},[]),Y=$.map((y)=>y.id),v=(await this.getRoomsByIds(Y))?.map((y)=>y.id),X=Y.filter((y)=>!v?.includes(y)),Z={worldId:_.id,serverId:_.serverId,source:K,agentId:this.agentId};if(X.length){this.logger.debug("runtime/ensureConnections - create",X.length.toLocaleString(),"rooms");let y=$.filter((p)=>X.includes(p.id)).map((p)=>({...p,...Z}));await this.createRooms(y)}let k=q.map((y)=>y.id),S=(await this.adapter.getEntitiesByIds(k))?.map((y)=>y.id),N=q.filter((y)=>!S?.includes(y.id)),E={roomId:P.id,channelId:P.channelId,type:P.type},h={worldId:_.id,serverId:_.serverId};if(N.length){this.logger.debug("runtime/ensureConnections - creating",N.length.toLocaleString(),"entities...");let y={...E,...h,source:K,agentId:this.agentId},p=N.map((c)=>({...c,...y})),m=O(p,5000);for(let c of m)await this.createEntities(c)}await this.ensureParticipantInRoom(this.agentId,P.id);let I=(await this.getParticipantsForRoom(P.id)).filter(Boolean),g=k.filter((y)=>!I.includes(y));if(g.length){this.logger.debug("runtime/ensureConnections - Missing",g.length.toLocaleString(),"connections in",P.id);let y=O(g,5000);for(let p of y)await this.addParticipantsRoom(p,P.id)}this.logger.success("Success: Successfully connected world")}async ensureConnection({entityId:q,roomId:$,worldId:K,worldName:_,userName:P,name:O,source:Y,type:H,channelId:v,serverId:X,userId:Z,metadata:k}){if(!K&&X)K=n_(this,X);let G=[O,P].filter(Boolean),S={[Y]:{id:Z,name:O,userName:P}};try{let N=await this.getEntityById(q);if(!N)try{if(await this.createEntity({id:q,names:G,metadata:S,agentId:this.agentId}))this.logger.debug(`Created new entity ${q} for user ${O||P||"unknown"}`);else throw Error(`Failed to create entity ${q}`)}catch(E){if(E.message?.includes("duplicate key")||E.code==="23505")this.logger.debug(`Entity ${q} exists in database but not for this agent. This is normal in multi-agent setups.`);else throw E}else await this.adapter.updateEntity({id:q,names:[...new Set([...N.names||[],...G])].filter(Boolean),metadata:{...N.metadata,[Y]:{...N.metadata?.[Y],id:Z,name:O,userName:P}},agentId:this.agentId});await this.ensureWorldExists({id:K,name:_||X?`World for server ${X}`:`World for room ${$}`,agentId:this.agentId,serverId:X||"default",metadata:k}),await this.ensureRoomExists({id:$,name:O||"default",source:Y||"default",type:H||"DM",channelId:v,serverId:X,worldId:K});try{await this.ensureParticipantInRoom(q,$)}catch(E){if(E.message?.includes("not found")){if(!await this.addParticipant(q,$))throw Error(`Failed to add participant ${q} to room ${$}`);this.logger.debug(`Added participant ${q} to room ${$} directly`)}else throw E}await this.ensureParticipantInRoom(this.agentId,$),this.logger.debug(`Success: Successfully connected entity ${q} in room ${$}`)}catch(N){throw this.logger.error(`Failed to ensure connection: ${N instanceof Error?N.message:String(N)}`),N}}async ensureParticipantInRoom(q,$){let K=await this.getEntityById(q);if(!K&&q!==this.agentId)this.logger.warn(`Entity ${q} not directly accessible to agent ${this.agentId}. Will attempt to add as participant anyway.`);else if(!K&&q===this.agentId)throw Error(`Agent entity ${q} not found, cannot add as participant.`);else if(!K)throw Error(`User entity ${q} not found, cannot add as participant.`);if(!(await this.adapter.getParticipantsForRoom($)).includes(q)){if(!await this.addParticipant(q,$))throw Error(`Failed to add participant ${q} to room ${$}`);if(q===this.agentId)this.logger.debug(`Agent ${this.character.name} linked to room ${$} successfully.`);else this.logger.debug(`User ${q} linked to room ${$} successfully.`)}}async removeParticipant(q,$){return await this.adapter.removeParticipant(q,$)}async getParticipantsForEntity(q){return await this.adapter.getParticipantsForEntity(q)}async getParticipantsForRoom(q){return await this.adapter.getParticipantsForRoom(q)}async addParticipant(q,$){return await this.adapter.addParticipantsRoom([q],$)}async addParticipantsRoom(q,$){return await this.adapter.addParticipantsRoom(q,$)}async ensureWorldExists({id:q,name:$,serverId:K,metadata:_}){if(!await this.getWorld(q))this.logger.debug("Creating world:",JSON.stringify({id:q,name:$,serverId:K,agentId:this.agentId})),await this.adapter.createWorld({id:q,name:$,agentId:this.agentId,serverId:K||"default",metadata:_}),this.logger.debug(`World ${q} created successfully.`)}async ensureRoomExists({id:q,name:$,source:K,type:_,channelId:P,serverId:O,worldId:Y,metadata:H}){if(!Y)throw Error("worldId is required");if(!await this.getRoom(q))await this.createRoom({id:q,name:$,agentId:this.agentId,source:K,type:_,channelId:P,serverId:O,worldId:Y,metadata:H}),this.logger.debug(`Room ${q} created successfully.`)}async composeState(q,$=null,K=!1,_=!1){let P=K?$:null,O={values:{},data:{},text:""},Y=_||!q.id?O:await this.stateCache.get(q.id)||O,H=new Set;if(P&&P.length>0)P.forEach((E)=>H.add(E));else this.providers.filter((E)=>!E.private&&!E.dynamic).forEach((E)=>H.add(E.name));if(!P&&$&&$.length>0)$.forEach((E)=>H.add(E));let v=Array.from(new Set(this.providers.filter((E)=>H.has(E.name)))).sort((E,h)=>(E.position||0)-(h.position||0)),X=await Promise.all(v.map(async(E)=>{let h=Date.now();try{let D=await E.get(this,q,Y),I=Date.now()-h;if(I>100)this.logger.debug(`${E.name} Provider took ${I}ms to respond`);return{...D,providerName:E.name}}catch(D){return console.error("provider error",E.name,D),{values:{},text:"",data:{},providerName:E.name}}})),Z={...Y.data?.providers||{}};for(let E of X)Z[E.providerName]=E;let k=[];for(let E of v){let h=Z[E.name];if(h&&h.text&&h.text.trim()!=="")k.push(h.text)}let G=k.join(`
`),S={...Y.values||{}};for(let E of v){let h=Z[E.name];if(h&&h.values&&typeof h.values==="object")Object.assign(S,h.values)}for(let E in Z)if(!v.some((h)=>h.name===E)){let h=Z[E];if(h&&h.values&&typeof h.values==="object")Object.assign(S,h.values)}let N={values:{...S,providers:G},data:{...Y.data||{},providers:Z},text:G};if(q.id)this.stateCache.set(q.id,N);return N}getService(q){let $=this.services.get(q);if(!$||$.length===0)return this.logger.debug(`Service ${q} not found`),null;return $[0]}getTypedService(q){return this.getService(q)}getServicesByType(q){let $=this.services.get(q);if(!$||$.length===0)return this.logger.debug(`No services found for type ${q}`),[];return $}getRegisteredServiceTypes(){return Array.from(this.services.keys())}hasService(q){let $=this.services.get(q);return $!==void 0&&$.length>0}async registerService(q){let $=q.serviceType;if(!$){this.logger.warn(`Service ${q.name} is missing serviceType. Please define a static serviceType property.`);return}this.logger.debug(`${this.character.name}(${this.agentId}) - Registering service:`,$);try{let K=await q.start(this);if(!this.services.has($))this.services.set($,[]);if(!this.serviceTypes.has($))this.serviceTypes.set($,[]);this.services.get($).push(K),this.serviceTypes.get($).push(q);let _=this.servicePromiseHandles.get($);if(_)_(K);else this.logger.debug(`${this.character.name} - Service ${$} has no servicePromiseHandle`);if(typeof q.registerSendHandlers==="function")q.registerSendHandlers(this,K);this.logger.debug(`${this.character.name}(${this.agentId}) - Service ${$} registered successfully`)}catch(K){let _=K instanceof Error?K.message:String(K);throw this.logger.error(`${this.character.name}(${this.agentId}) - Failed to register service ${$}: ${_}`),K}}_createServiceResolver(q){let $;if(this.servicePromises.set(q,new Promise((K)=>{$=K})),!$)throw Error(`Failed to create resolver for service ${q}`);return this.servicePromiseHandles.set(q,$),this.servicePromises.get(q)}getServiceLoadPromise(q){let $=this.servicePromises.get(q);if(!$)$=this._createServiceResolver(q);return $}registerModel(q,$,K,_){let P=typeof q==="string"?q:L8[q];if(!this.models.has(P))this.models.set(P,[]);let O=Date.now();this.models.get(P)?.push({handler:$,provider:K,priority:_||0,registrationOrder:O}),this.models.get(P)?.sort((Y,H)=>{if((H.priority||0)!==(Y.priority||0))return(H.priority||0)-(Y.priority||0);return(Y.registrationOrder||0)-(H.registrationOrder||0)})}getModel(q,$){let K=typeof q==="string"?q:L8[q],_=this.models.get(K);if(!_?.length)return;if($){let P=_.find((O)=>O.provider===$);if(P)return this.logger.debug(`[AgentRuntime][${this.character.name}] Using model ${K} from provider ${$}`),P.handler;else this.logger.warn(`[AgentRuntime][${this.character.name}] No model found for provider ${$}`)}return this.logger.debug(`[AgentRuntime][${this.character.name}] Using model ${K} from provider ${_[0].provider}`),_[0].handler}getModelSettings(q){let $={},K=(H,v)=>{if(q){let G=`${q}_${H}`,S=this.getSetting(G);if(S!==null&&S!==void 0){let N=Number(S);if(!isNaN(N))return N}}let X=`DEFAULT_${H}`,Z=this.getSetting(X);if(Z!==null&&Z!==void 0){let G=Number(Z);if(!isNaN(G))return G}let k=this.getSetting(v);if(k!==null&&k!==void 0){let G=Number(k);if(!isNaN(G))return G}return null},_=K("MAX_TOKENS",X7.MODEL_MAX_TOKEN),P=K("TEMPERATURE",X7.MODEL_TEMPERATURE),O=K("FREQUENCY_PENALTY",X7.MODEL_FREQ_PENALTY),Y=K("PRESENCE_PENALTY",X7.MODEL_PRESENCE_PENALTY);if(_!==null)$.maxTokens=_;if(P!==null)$.temperature=P;if(O!==null)$.frequencyPenalty=O;if(Y!==null)$.presencePenalty=Y;return Object.keys($).length>0?$:null}async useModel(q,$,K){let _=typeof q==="string"?q:L8[q],P=$?.prompt||$?.input||(Array.isArray($?.messages)?JSON.stringify($.messages):null),O=this.getModel(_,K);if(!O){let v=`No handler found for delegate type: ${_}`;throw Error(v)}this.logger.debug(`[useModel] ${_} input: `+JSON.stringify($,C3(),2).replace(/\\n/g,`
`));let Y;if($===null||$===void 0||typeof $!=="object"||Array.isArray($)||Y_.isBuffer($))Y=$;else{let v=this.getModelSettings(_);if(v)Y={...v,...$,runtime:this};else Y={...$,runtime:this}}let H=typeof performance<"u"&&typeof performance.now==="function"?performance.now():Date.now();try{let v=await O(this,Y),X=(typeof performance<"u"&&typeof performance.now==="function"?performance.now():Date.now())-H;if(this.logger.debug(`[useModel] ${_} output (took ${Number(X.toFixed(2)).toLocaleString()}ms):`,Array.isArray(v)?`${JSON.stringify(v.slice(0,5))}...${JSON.stringify(v.slice(-5))} (${v.length} items)`:JSON.stringify(v,C3(),2).replace(/\\n/g,`
`)),_!==L8.TEXT_EMBEDDING&&P){if(this.currentActionContext)this.currentActionContext.prompts.push({modelType:_,prompt:P,timestamp:Date.now()})}return this.adapter.log({entityId:this.agentId,roomId:this.agentId,body:{modelType:q,modelKey:_,params:{...typeof $==="object"&&!Array.isArray($)&&$?$:{},prompt:P},prompt:P,runId:this.getCurrentRunId(),timestamp:Date.now(),executionTime:X,provider:K||this.models.get(_)?.[0]?.provider||"unknown",actionContext:this.currentActionContext?{actionName:this.currentActionContext.actionName,actionId:this.currentActionContext.actionId}:void 0,response:Array.isArray(v)&&v.every((Z)=>typeof Z==="number")?"[array]":v},type:`useModel:${_}`}),v}catch(v){throw v}}registerEvent(q,$){if(!this.events.has(q))this.events.set(q,[]);this.events.get(q)?.push($)}getEvent(q){return this.events.get(q)}async emitEvent(q,$){let K=Array.isArray(q)?q:[q];for(let _ of K){let P=this.events.get(_);if(!P)continue;try{let O={runtime:this};if(typeof $==="object"&&$)O={...$,...O};await Promise.all(P.map((Y)=>Y(O)))}catch(O){this.logger.error(`Error during emitEvent for ${_} (handler execution): ${O}`)}}}async ensureEmbeddingDimension(){if(this.logger.debug(`[AgentRuntime][${this.character.name}] Starting ensureEmbeddingDimension`),!this.adapter)throw Error(`[AgentRuntime][${this.character.name}] Database adapter not initialized before ensureEmbeddingDimension`);try{if(!this.getModel(L8.TEXT_EMBEDDING))throw Error(`[AgentRuntime][${this.character.name}] No TEXT_EMBEDDING model registered`);this.logger.debug(`[AgentRuntime][${this.character.name}] Getting embedding dimensions`);let $=await this.useModel(L8.TEXT_EMBEDDING,null);if(!$||!$.length)throw Error(`[AgentRuntime][${this.character.name}] Invalid embedding received`);this.logger.debug(`[AgentRuntime][${this.character.name}] Setting embedding dimension: ${$.length}`),await this.adapter.ensureEmbeddingDimension($.length),this.logger.debug(`[AgentRuntime][${this.character.name}] Successfully set embedding dimension`)}catch(q){throw this.logger.debug(`[AgentRuntime][${this.character.name}] Error in ensureEmbeddingDimension: ${q}`),q}}registerTaskWorker(q){if(this.taskWorkers.has(q.name))this.logger.warn(`Task definition ${q.name} already registered. Will be overwritten.`);this.taskWorkers.set(q.name,q)}getTaskWorker(q){return this.taskWorkers.get(q)}get db(){return this.adapter.db}async init(){await this.adapter.init()}async close(){await this.adapter.close()}async getAgent(q){return await this.adapter.getAgent(q)}async getAgents(){return await this.adapter.getAgents()}async createAgent(q){return await this.adapter.createAgent(q)}async updateAgent(q,$){return await this.adapter.updateAgent(q,$)}async deleteAgent(q){return await this.adapter.deleteAgent(q)}async ensureAgentExists(q){if(!q.name)throw Error("Agent name is required");let K=(await this.adapter.getAgents()).find((O)=>O.name===q.name)?.id;if(K){let O={...q,id:K,updatedAt:Date.now()};await this.adapter.updateAgent(K,O);let Y=await this.adapter.getAgent(K);if(!Y)throw Error(`Failed to retrieve agent after update: ${K}`);return this.logger.debug(`Updated existing agent ${q.name} on restart`),Y}let _={...q,id:mP(q.name)};if(!await this.adapter.createAgent(_))throw Error(`Failed to create agent: ${q.name}`);return this.logger.debug(`Created new agent ${q.name}`),_}async getEntityById(q){let $=await this.adapter.getEntitiesByIds([q]);if(!$?.length)return null;return $[0]}async getEntitiesByIds(q){return await this.adapter.getEntitiesByIds(q)}async getEntitiesForRoom(q,$){return await this.adapter.getEntitiesForRoom(q,$)}async createEntity(q){if(!q.agentId)q.agentId=this.agentId;return await this.createEntities([q])}async createEntities(q){return q.forEach(($)=>{$.agentId=this.agentId}),await this.adapter.createEntities(q)}async updateEntity(q){await this.adapter.updateEntity(q)}async getComponent(q,$,K,_){return await this.adapter.getComponent(q,$,K,_)}async getComponents(q,$,K){return await this.adapter.getComponents(q,$,K)}async createComponent(q){return await this.adapter.createComponent(q)}async updateComponent(q){await this.adapter.updateComponent(q)}async deleteComponent(q){await this.adapter.deleteComponent(q)}async addEmbeddingToMemory(q){if(q.embedding)return q;let $=q.content.text;if(!$)throw Error("Cannot generate embedding: Memory content is empty");try{q.embedding=await this.useModel(L8.TEXT_EMBEDDING,{text:$})}catch(K){this.logger.error("Failed to generate embedding:",K),q.embedding=await this.useModel(L8.TEXT_EMBEDDING,null)}return q}async queueEmbeddingGeneration(q,$="normal"){if(!q)return;if(q.embedding)return;if(!q.content?.text){this.logger.debug("Skipping embedding generation for memory without text content");return}await this.emitEvent("EMBEDDING_GENERATION_REQUESTED",{runtime:this,memory:q,priority:$,source:"runtime",retryCount:0,maxRetries:3,runId:this.getCurrentRunId()})}async getMemories(q){return await this.adapter.getMemories(q)}async getAllMemories(){let q=["memories","messages","facts","documents"],$=[];for(let K of q)try{let _=await this.adapter.getMemories({agentId:this.agentId,tableName:K,count:1e4});$.push(..._)}catch(_){this.logger.debug(`Failed to get memories from table ${K}: ${_}`)}return $}async getMemoryById(q){return await this.adapter.getMemoryById(q)}async getMemoriesByIds(q,$){return await this.adapter.getMemoriesByIds(q,$)}async getMemoriesByRoomIds(q){return await this.adapter.getMemoriesByRoomIds(q)}async getCachedEmbeddings(q){return await this.adapter.getCachedEmbeddings(q)}async log(q){await this.adapter.log(q)}async searchMemories(q){let $=await this.adapter.searchMemories(q);if(q.query)return await this.rerankMemories(q.query,$);return $}async rerankMemories(q,$){let K=$.map((O)=>({title:O.id,content:O.content.text}));return new Wj(K).search(q,$.length).map((O)=>$[O.index])}async createMemory(q,$,K){if(K!==void 0)q.unique=K;return await this.adapter.createMemory(q,$,K)}async updateMemory(q){return await this.adapter.updateMemory(q)}async deleteMemory(q){await this.adapter.deleteMemory(q)}async deleteManyMemories(q){await this.adapter.deleteManyMemories(q)}async clearAllAgentMemories(){this.logger.info(`Clearing all memories for agent ${this.character.name} (${this.agentId})`);let $=(await this.getAllMemories()).map((K)=>K.id).filter((K)=>K!==void 0);if($.length===0){this.logger.info("No memories found to delete");return}this.logger.info(`Found ${$.length} memories to delete`),await this.adapter.deleteManyMemories($),this.logger.info(`Successfully cleared all ${$.length} memories for agent`)}async deleteAllMemories(q,$){await this.adapter.deleteAllMemories(q,$)}async countMemories(q,$,K){return await this.adapter.countMemories(q,$,K)}async getLogs(q){return await this.adapter.getLogs(q)}async deleteLog(q){await this.adapter.deleteLog(q)}async createWorld(q){return await this.adapter.createWorld(q)}async getWorld(q){return await this.adapter.getWorld(q)}async removeWorld(q){await this.adapter.removeWorld(q)}async getAllWorlds(){return await this.adapter.getAllWorlds()}async updateWorld(q){await this.adapter.updateWorld(q)}async getRoom(q){let $=await this.adapter.getRoomsByIds([q]);if(!$?.length)return null;return $[0]}async getRoomsByIds(q){return await this.adapter.getRoomsByIds(q)}async createRoom({id:q,name:$,source:K,type:_,channelId:P,serverId:O,worldId:Y}){if(!Y)throw Error("worldId is required");let H=await this.adapter.createRooms([{id:q,name:$,source:K,type:_,channelId:P,serverId:O,worldId:Y}]);if(!H.length)throw Error("Failed to create room");return H[0]}async createRooms(q){return await this.adapter.createRooms(q)}async deleteRoom(q){await this.adapter.deleteRoom(q)}async deleteRoomsByWorldId(q){await this.adapter.deleteRoomsByWorldId(q)}async updateRoom(q){await this.adapter.updateRoom(q)}async getRoomsForParticipant(q){return await this.adapter.getRoomsForParticipant(q)}async getRoomsForParticipants(q){return await this.adapter.getRoomsForParticipants(q)}async getRooms(q){return await this.adapter.getRoomsByWorld(q)}async getRoomsByWorld(q){return await this.adapter.getRoomsByWorld(q)}async getParticipantUserState(q,$){return await this.adapter.getParticipantUserState(q,$)}async setParticipantUserState(q,$,K){await this.adapter.setParticipantUserState(q,$,K)}async createRelationship(q){return await this.adapter.createRelationship(q)}async updateRelationship(q){await this.adapter.updateRelationship(q)}async getRelationship(q){return await this.adapter.getRelationship(q)}async getRelationships(q){return await this.adapter.getRelationships(q)}async getCache(q){return await this.adapter.getCache(q)}async setCache(q,$){return await this.adapter.setCache(q,$)}async deleteCache(q){return await this.adapter.deleteCache(q)}async createTask(q){return await this.adapter.createTask(q)}async getTasks(q){return await this.adapter.getTasks(q)}async getTask(q){return await this.adapter.getTask(q)}async getTasksByName(q){return await this.adapter.getTasksByName(q)}async updateTask(q,$){await this.adapter.updateTask(q,$)}async deleteTask(q){await this.adapter.deleteTask(q)}on(q,$){if(!this.eventHandlers.has(q))this.eventHandlers.set(q,[]);this.eventHandlers.get(q)?.push($)}off(q,$){if(!this.eventHandlers.has(q))return;let K=this.eventHandlers.get(q),_=K.indexOf($);if(_!==-1)K.splice(_,1)}emit(q,$){if(!this.eventHandlers.has(q))return;for(let K of this.eventHandlers.get(q))K($)}async sendControlMessage(q){try{let{roomId:$,action:K,target:_}=q,P={type:"control",payload:{action:K,target:_},roomId:$};await this.emitEvent("CONTROL_MESSAGE",{runtime:this,message:P,source:"agent"}),this.logger.debug(`Sent control message: ${K} to room ${$}`)}catch($){this.logger.error(`Error sending control message: ${$}`)}}registerSendHandler(q,$){if(this.sendHandlers.has(q))this.logger.warn(`Send handler for source '${q}' already registered. Overwriting.`);this.sendHandlers.set(q,$),this.logger.info(`Registered send handler for source: ${q}`)}async sendMessageToTarget(q,$){let K=this.sendHandlers.get(q.source);if(!K){let _=`No send handler registered for source: ${q.source}`;throw this.logger.error(_),Error(_)}try{await K(this,q,$)}catch(_){throw this.logger.error(`Error executing send handler for source ${q.source}:`,_),_}}async getMemoriesByWorldId(q){return await this.adapter.getMemoriesByWorldId(q)}async runMigrations(q){if(this.adapter&&"runMigrations"in this.adapter)await this.adapter.runMigrations(q);else this.logger.warn("Database adapter does not support migrations.")}async isReady(){if(!this.adapter)throw Error("Database adapter not registered");return await this.adapter.isReady()}}import v5 from"crypto-browserify";function Qy(q){return{name:q.name,description:q.description,usageDescription:q.usageDescription||"",value:null,required:q.required,validation:q.validation||void 0,public:q.public||!1,secret:q.secret||!1,dependsOn:q.dependsOn||[],onSetAction:q.onSetAction||void 0,visibleIf:q.visibleIf||void 0}}var v7=null,Hj=!1,ay=300000;function r_(){let q=q_("SECRET_SALT","secretsalt")||"secretsalt",$=Date.now();if(v7!==null){if($-v7.timestamp<ay&&v7.value===q)return v7.value}if(q==="secretsalt"&&!Hj)U$.warn("SECRET_SALT is not set or using default value"),Hj=!0;return v7={value:q,timestamp:$},q}function Ra(){v7=null,Hj=!1}function lf(q,$){if(q===void 0||q===null)return U$.debug("Attempted to encrypt undefined or null value"),q;if(typeof q==="boolean"||typeof q==="number")return U$.debug("Value is a boolean or number, returning as is"),q;if(typeof q!=="string")return U$.debug(`Value is not a string (type: ${typeof q}), returning as is`),q;let K=q.split(":");if(K.length===2)try{if(Y_.fromHex(K[0]).length===16)return U$.debug("Value appears to be already encrypted, skipping re-encryption"),q}catch(H){}let _=v5.createHash("sha256").update($).digest().slice(0,32),P=Y_.randomBytes(16),O=v5.createCipheriv("aes-256-cbc",_,P),Y=O.update(q,"utf8","hex");return Y+=O.final("hex"),`${Y_.toHex(P)}:${Y}`}function J5(q,$){try{if(q===void 0||q===null)return q;if(typeof q==="boolean"||typeof q==="number")return q;if(typeof q!=="string")return U$.debug(`Value is not a string (type: ${typeof q}), returning as is`),q;let K=q.split(":");if(K.length!==2)return q;let _=Y_.fromHex(K[0]),P=K[1];if(_.length!==16){if(_.length)U$.debug(`Invalid IV length (${_.length}) - expected 16 bytes`);return q}let O=v5.createHash("sha256").update($).digest().slice(0,32),Y=v5.createDecipheriv("aes-256-cbc",O,_),H=Y.update(P,"hex","utf8");return H+=Y.final("utf8"),H}catch(K){return U$.error(`Error decrypting value: ${K}`),q}}function ey(q,$){let K={...q};if(q.secret===!0&&typeof q.value==="string"&&q.value)K.value=lf(q.value,$);return K}function sy(q,$){let K={...q};if(q.secret===!0&&typeof q.value==="string"&&q.value)K.value=J5(q.value,$);return K}function qp(q,$){let K={};for(let[_,P]of Object.entries(q))K[_]=ey(P,$);return K}function df(q,$){let K={};for(let[_,P]of Object.entries(q))K[_]=sy(P,$);return K}async function ha(q,$,K){let _=n_(q,$),P=await q.getWorld(_);if(!P)return U$.error(`No world found for server ${$}`),!1;if(!P.metadata)P.metadata={};let O=r_(),Y=qp(K,O);return P.metadata.settings=Y,await q.updateWorld(P),!0}async function Da(q,$){let K=n_(q,$),_=await q.getWorld(K);if(!_||!_.metadata?.settings)return null;let P=_.metadata.settings,O=r_();return df(P,O)}async function Ia(q,$,K){if($.metadata?.settings){U$.info(`Onboarding state already exists for server ${$.serverId}`);let P=$.metadata.settings,O=r_();return df(P,O)}let _={};if(K.settings)for(let[P,O]of Object.entries(K.settings))_[P]=Qy(O);if(!$.metadata)$.metadata={};return $.metadata.settings=_,await q.updateWorld($),U$.info(`Initialized settings config for server ${$.serverId}`),_}function La(q){let $=JSON.parse(JSON.stringify(q)),K=r_();if($.settings?.secrets)$.settings.secrets=mf($.settings.secrets,K);if($.secrets)$.secrets=mf($.secrets,K);return $}function ba(q,$){let K=JSON.parse(JSON.stringify(q)),_=r_();if(K.settings?.secrets)K.settings.secrets=cf(K.settings.secrets,_);if(K.secrets)K.secrets=cf(K.secrets,_);return K}function mf(q,$){let K={};for(let[_,P]of Object.entries(q))if(typeof P==="string"&&P)K[_]=lf(P,$);else K[_]=P;return K}function cf(q,$){let K={};for(let[_,P]of Object.entries(q))if(typeof P==="string"&&P)K[_]=J5(P,$);else K[_]=P;return K}class of{serviceType;startFn;stopFn;description;constructor(q){this.serviceType=q,this.description=""}withDescription(q){return this.description=q,this}withStart(q){return this.startFn=q,this}withStop(q){return this.stopFn=q,this}build(){let q=this.serviceType,$=this.description,K=this.startFn,_=this.stopFn;return class extends I${static serviceType=q;capabilityDescription=$;static async start(P){if(!K)throw Error(`Start function not defined for service ${q}`);return K(P)}async stop(){if(_)await _()}}}}function $p(q){return new of(q)}function pa(q){return $p(q.serviceType).withDescription(q.description).withStart(q.start).withStop(q.stop||(()=>Promise.resolve())).build()}var Kp=`# Task: Resolve Entity Name
Message Sender: {{senderName}} (ID: {{senderId}})
Agent: {{agentName}} (ID: {{agentId}})

# Entities in Room:
{{#if entitiesInRoom}}
{{entitiesInRoom}}
{{/if}}

{{recentMessages}}

# Instructions:
1. Analyze the context to identify which entity is being referenced
2. Consider special references like "me" (the message sender) or "you" (agent the message is directed to)
3. Look for usernames/handles in standard formats (e.g. @username, user#1234)
4. Consider context from recent messages for pronouns and references
5. If multiple matches exist, use context to disambiguate
6. Consider recent interactions and relationship strength when resolving ambiguity

Do NOT include any thinking, reasoning, or <think> sections in your response. 
Go directly to the XML response format without any preamble or explanation.

Return an XML response with:
<response>
  <entityId>exact-id-if-known-otherwise-null</entityId>
  <type>EXACT_MATCH | USERNAME_MATCH | NAME_MATCH | RELATIONSHIP_MATCH | AMBIGUOUS | UNKNOWN</type>
  <matches>
    <match>
      <name>matched-name</name>
      <reason>why this entity matches</reason>
    </match>
  </matches>
</response>

IMPORTANT: Your response must ONLY contain the <response></response> XML block above. Do not include any text, thinking, or reasoning before or after this XML block. Start your response immediately with <response> and end with </response>.`;async function _p(q,$,K,_,P){let O=[],Y=await q.getMemories({tableName:"messages",roomId:_,count:20});for(let H of K){let v=[],X=0,Z=Y.filter((S)=>S.entityId===$&&S.content.inReplyTo===H.id||S.entityId===H.id&&S.content.inReplyTo===$);v.push(...Z);let k=P.find((S)=>S.sourceEntityId===$&&S.targetEntityId===H.id||S.targetEntityId===$&&S.sourceEntityId===H.id);if(k?.metadata?.interactions)X=k.metadata.interactions;X+=Z.length;let G=[...new Set(v)];O.push({entity:H,interactions:G.slice(-5),count:Math.round(X)})}return O.sort((H,v)=>v.count-H.count)}async function oa(q,$,K){let _=K.data.room??await q.getRoom($.roomId);if(!_)return U$.warn("Room not found for entity search"),null;let P=_.worldId?await q.getWorld(_.worldId):null,O=await q.getEntitiesForRoom(_.id,!0),Y=await Promise.all(O.map(async(E)=>{if(!E.components)return E;let h=P?.metadata?.roles||{};return E.components=E.components.filter((D)=>{if(D.sourceEntityId===$.entityId)return!0;if(P&&D.sourceEntityId){let I=h[D.sourceEntityId];if(I==="OWNER"||I==="ADMIN")return!0}if(D.sourceEntityId===q.agentId)return!0;return!1}),E})),H=await q.getRelationships({entityId:$.entityId}),v=await Promise.all(H.map(async(E)=>{let h=E.sourceEntityId===$.entityId?E.targetEntityId:E.sourceEntityId;return q.getEntityById(h)})),X=[...Y,...v.filter((E)=>E!==null)],Z=await _p(q,$.entityId,X,_.id,H),k=jX({state:{roomName:_.name||_.id,worldName:P?.name||"Unknown",entitiesInRoom:JSON.stringify(Y,null,2),entityId:$.entityId,senderId:$.entityId},template:Kp}),G=await q.useModel(L8.TEXT_SMALL,{prompt:k,stopSequences:[]}),S=HX(G);if(!S)return U$.warn("Failed to parse entity resolution result"),null;if(S.type==="EXACT_MATCH"&&S.entityId){let E=await q.getEntityById(S.entityId);if(E){if(E.components){let h=P?.metadata?.roles||{};E.components=E.components.filter((D)=>{if(D.sourceEntityId===$.entityId)return!0;if(P&&D.sourceEntityId){let I=h[D.sourceEntityId];if(I==="OWNER"||I==="ADMIN")return!0}if(D.sourceEntityId===q.agentId)return!0;return!1})}return E}}let N=[];if(S.matches?.match)N=Array.isArray(S.matches.match)?S.matches.match:[S.matches.match];if(N.length>0&&N[0]?.name){let E=N[0].name.toLowerCase(),h=X.find((D)=>{if(D.names.some((I)=>I.toLowerCase()===E))return!0;return D.components?.some((I)=>I.data.username?.toLowerCase()===E||I.data.handle?.toLowerCase()===E)});if(h)if(S.type==="RELATIONSHIP_MATCH"){let D=Z.find((I)=>I.entity.id===h.id);if(D&&D.count>0)return h}else return h}return null}var n_=(q,$)=>{if($===q.agentId)return q.agentId;let K=`${$}:${q.agentId}`;return mP(K)};async function na({runtime:q,roomId:$}){let[K,_]=await Promise.all([q.getRoom($),q.getEntitiesForRoom($,!0)]),P=new Map;for(let O of _){if(P.has(O.id))continue;let Y={};for(let v of O.components||[])Object.assign(Y,v.data);let H={};for(let[v,X]of Object.entries(Y)){if(!H[v]){H[v]=X;continue}if(Array.isArray(H[v])&&Array.isArray(X))H[v]=[...new Set([...H[v],...X])];else if(typeof H[v]==="object"&&typeof X==="object")H[v]={...H[v],...X}}P.set(O.id,{id:O.id,name:K?.source?O.metadata[K.source]?.name||O.names[0]:O.names[0],names:O.names,data:JSON.stringify({...H,...O.metadata})})}return Array.from(P.values())}function ra({entities:q}){return q.map((K)=>{return`"${K.names.join('" aka "')}"
ID: ${K.id}${K.metadata&&Object.keys(K.metadata).length>0?`
Data: ${JSON.stringify(K.metadata)}
`:`
`}`}).join(`
`)}var ia=!0,Ua=!1,Fa={check:async()=>({status:"not-applicable",environment:"browser"}),isHealthy:()=>!0};export{qL as validateUuid,wX as validateCharacter,ha as updateWorldSettings,df as unsaltWorldSettings,sy as unsaltSettingValue,MQ as truncateToCompleteSentence,CQ as trimTokens,hy as toString,pf as toHex,mP as stringToUuid,SQ as splitChunks,gy as slice,oQ as shouldRespondTemplate,KF as setEnv,Fa as serverHealth,qp as saltWorldSettings,ey as saltSettingValue,C3 as safeReplacer,WQ as recentLogs,xy as randomBytes,EQ as prewarmUuidCache,rQ as postCreationTemplate,HX as parseKeyValueXml,VQ as parseJSONObjectFromText,NQ as parseBooleanFromText,LQ as parseAndValidateCharacter,PX as normalizeJsonString,FQ as multiStepSummaryTemplate,UQ as multiStepDecisionTemplate,nQ as messageHandlerTemplate,U$ as logger,bQ as isValidCharacter,Ua as isNode,zp as isMessageMetadata,Hp as isFragmentMetadata,Tp as isFragmentMemory,Wp as isDocumentMetadata,wp as isDocumentMemory,Jp as isDescriptionMetadata,vp as isCustomMetadata,Dy as isBuffer,ia as isBrowser,Ia as initializeOnboarding,YF as initBrowserEnvironment,iQ as imageDescriptionTemplate,_F as hasEnv,Da as getWorldSettings,eQ as getUserServerRole,Mp as getTypedService,r_ as getSalt,ST as getNumberEnv,Np as getModelSpecificSettingKey,Xp as getMemoryText,hQ as getLocalServerUrl,Q4 as getEnvironment,q_ as getEnv,na as getEntityDetails,RQ as getContentTypeFromMimeType,PF as getBooleanEnv,Ry as fromString,Ey as fromHex,Ly as fromBytes,WX as formatTimestamp,GQ as formatPosts,ZQ as formatMessages,ra as formatEntities,cQ as formatActions,mQ as formatActionNames,sQ as findWorldsForOwner,oa as findEntityByName,yy as equals,La as encryptedCharacter,lf as encryptStringValue,mf as encryptObjectValues,OQ as elizaLogger,ZT as detectEnvironment,pa as defineService,ba as decryptedCharacter,J5 as decryptStringValue,J5 as decryptSecret,cf as decryptObjectValues,jQ as customLevels,jF as currentRuntime,n_ as createUniqueUuid,Qy as createSettingFromConfig,Sp as createServiceError,$p as createService,Op as createMessageMemory,uP as createLogger,Zp as createActionResult,by as concat,AQ as composePromptFromState,jX as composePrompt,uQ as composeActionExamples,Ra as clearSaltCache,vL as characterSchema,py as byteLength,BQ as booleanFooter,Yp as asUUID,Iy as alloc,kQ as addHeader,_Q as __loggerTestHooks,Rp as VECTOR_DIMS,qA as TeeType,sf as TEEMode,r$ as ServiceType,of as ServiceBuilder,I$ as Service,Fy as Semaphore,KA as SOCKET_MESSAGE_TYPE,Qf as Role,ef as PlatformPrefix,L8 as ModelType,Uf as MemoryType,X7 as MODEL_SETTINGS,Ff as KnowledgeScope,HA as IWebSearchService,_A as IWalletService,jA as IVideoService,WA as ITranscriptionService,$A as ITokenDataService,vA as IPostService,YA as IPdfService,JA as IMessageService,PA as ILpService,zA as IEmailService,OA as IBrowserService,Xj as EventType,MT as Environment,my as DatabaseAdapter,wj as ContentType,Tj as ChannelType,tf as CacheKeyPrefix,Y_ as BufferUtils,Wj as BM25,af as AgentStatus,ty as AgentRuntime};

//# debugId=12259F2E8E00B0EB64756E2164756E21
//# sourceMappingURL=index.browser.js.map
