---
/**
 * Website Builder - Page Management Interface
 *
 * List, create, edit, duplicate, and delete pages for a website.
 * Provides a table view with sorting, filtering, and bulk actions.
 *
 * Route: /builder/[websiteId]/pages
 */

import { PageManagementPanel } from "@/components/builder/PageManagementPanel";
import Layout from "@/layouts/Layout.astro";

const { websiteId } = Astro.params;

if (!websiteId) {
	return Astro.redirect("/404");
}

const title = `Pages | ${websiteId}`;
const description = "Manage website pages";

// Mock data for demo - in production this would fetch from Convex
const mockPages = [
	{
		id: "page-1",
		name: "Home",
		slug: "home",
		status: "published" as const,
		isHomepage: true,
		createdAt: Date.now() - 86400000 * 30,
		updatedAt: Date.now() - 86400000 * 2,
		viewCount: 1205,
	},
	{
		id: "page-2",
		name: "About Us",
		slug: "about",
		status: "published" as const,
		isHomepage: false,
		createdAt: Date.now() - 86400000 * 25,
		updatedAt: Date.now() - 86400000 * 5,
		viewCount: 432,
	},
	{
		id: "page-3",
		name: "Services",
		slug: "services",
		status: "published" as const,
		isHomepage: false,
		createdAt: Date.now() - 86400000 * 20,
		updatedAt: Date.now() - 86400000 * 1,
		viewCount: 856,
	},
	{
		id: "page-4",
		name: "Blog",
		slug: "blog",
		status: "draft" as const,
		isHomepage: false,
		createdAt: Date.now() - 86400000 * 10,
		updatedAt: Date.now() - 3600000 * 2,
		viewCount: 0,
	},
	{
		id: "page-5",
		name: "Contact",
		slug: "contact",
		status: "published" as const,
		isHomepage: false,
		createdAt: Date.now() - 86400000 * 5,
		updatedAt: Date.now(),
		viewCount: 234,
	},
];
---

<Layout
	title={title}
	description={description}
	sidebarInitialCollapsed={true}
	hideHeader={true}
	fullHeight={true}
>
	<PageManagementPanel
		websiteId={websiteId}
		pages={mockPages}
		client:only="react"
	/>
</Layout>
