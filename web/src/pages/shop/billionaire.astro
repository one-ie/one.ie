---
/**
 * Billionaire Dreams - The Ultimate Luxury Collection
 * Showcasing the top 10 coolest products money can buy
 */

import { ThemeToggle } from "@/components/shop/ThemeToggle";
// Import billionaire products data
import billionaireData from "@/data/billionaire-products.json";
import ShopLayout from "@/layouts/ShopLayout.astro";

const products = billionaireData.products;
const metadata = billionaireData.metadata;

// Debug: Log image URLs to console
console.log("Products loaded:", products.length);
console.log("First product image:", products[0]?.images?.hero);

// Page metadata
const title = "Billionaire Dreams - The Ultimate Luxury Collection";
const description =
  "Explore the top 10 coolest products money can buy. From $18.9M hypercars to a $2B submarine. Total collection value: $21.6 billion.";
---

<ShopLayout title={title}>
  <div class="bg-white dark:bg-black text-black dark:text-white">
    <!-- Hero Section -->
    <section class="max-w-7xl mx-auto px-6 py-24 border-b-4 border-black dark:border-white">
      <div class="text-center space-y-8">
        <p class="text-xs font-bold tracking-[0.3em] uppercase">
          ULTRA LUXURY COLLECTION
        </p>
        <h1 class="text-6xl md:text-8xl font-light tracking-tight leading-none">
          Billionaire<br/>Dreams
        </h1>
        <p class="text-xl md:text-2xl font-light max-w-3xl mx-auto leading-relaxed">
          The top 10 coolest products money can buy. From hypercars to private islands,
          explore the ultimate symbols of success and luxury.
        </p>
        <div class="flex flex-col items-center gap-2 pt-8">
          <p class="text-sm tracking-wide">Total Collection Value</p>
          <p class="text-5xl md:text-6xl font-light tabular-nums">
            ${(metadata.totalValue / 1000000000).toFixed(2)}B
          </p>
          <p class="text-xs tracking-[0.2em] uppercase opacity-60">
            {metadata.totalProducts} Exclusive Items
          </p>
        </div>
      </div>
    </section>

    <!-- Products Grid -->
    <section class="max-w-7xl mx-auto px-6 py-32">
      <div class="space-y-32">
        {products.map((product, index) => {
          const specsEntries = product.specs ? Object.entries(product.specs) : [];
          const displaySpecs = specsEntries.slice(0, 3);

          return (
            <div class={`grid md:grid-cols-2 gap-16 items-center ${index % 2 === 1 ? 'md:grid-flow-dense' : ''}`}>
              <!-- Product Image -->
              <div class={index % 2 === 1 ? 'md:col-start-2' : ''}>
                <div class="relative aspect-[4/3] bg-gray-100 dark:bg-gray-900 border-2 border-black dark:border-white overflow-hidden group">
                  {product.images?.hero ? (
                    <img
                      src={product.images.hero}
                      alt={product.name}
                      class="w-full h-full object-cover transition-transform duration-700 group-hover:scale-105"
                      loading="lazy"
                      crossorigin="anonymous"
                      onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';"
                    />
                  ) : null}
                  <div class="absolute inset-0 hidden items-center justify-center text-center p-8" style="display: none;">
                    <div>
                      <p class="text-sm opacity-60">Image not available</p>
                      <p class="text-xs opacity-40 mt-2">{product.name}</p>
                    </div>
                  </div>
                  <div class="absolute top-6 right-6 bg-black dark:bg-white text-white dark:text-black px-4 py-2 z-10">
                    <span class="text-[10px] font-bold tracking-[0.3em] uppercase">
                      #{index + 1}
                    </span>
                  </div>
                </div>
              </div>

              <!-- Product Details -->
              <div class={`space-y-8 ${index % 2 === 1 ? 'md:col-start-1 md:row-start-1' : ''}`}>
                <!-- Category -->
                <p class="text-xs font-bold tracking-[0.3em] uppercase">
                  {product.category}
                </p>

                <!-- Product Name -->
                <h2 class="text-4xl md:text-5xl font-light tracking-tight leading-tight">
                  {product.name}
                </h2>

                <!-- Brand -->
                <div class="flex items-center gap-3 opacity-60">
                  <span class="text-sm tracking-wide">by {product.brand?.name || 'Unknown'}</span>
                </div>

                <!-- Description -->
                <p class="text-base leading-relaxed">
                  {product.description}
                </p>

                <!-- Specs -->
                {displaySpecs.length > 0 && (
                  <div class="space-y-4 border-t-2 border-black dark:border-white pt-6">
                    <p class="text-xs font-bold tracking-[0.2em] uppercase opacity-60">
                      Key Specifications
                    </p>
                    <div class="space-y-3">
                      {displaySpecs.map(([key, value]) => (
                        <div class="flex justify-between text-sm">
                          <span class="capitalize opacity-60">{String(key).replace(/([A-Z])/g, ' $1').trim()}</span>
                          <span class="font-medium">{String(value)}</span>
                        </div>
                      ))}
                    </div>
                  </div>
                )}

                <!-- Price & CTA -->
                <div class="space-y-6 border-t-2 border-black dark:border-white pt-8">
                  <div class="flex items-baseline gap-4">
                    <span class="text-5xl font-light tabular-nums">
                      ${product.price >= 1000000000
                        ? `${(product.price / 1000000000).toFixed(2)}B`
                        : product.price >= 1000000
                        ? `${(product.price / 1000000).toFixed(1)}M`
                        : `${product.price.toLocaleString()}`
                      }
                    </span>
                    <span class="text-xs tracking-[0.2em] uppercase opacity-60">
                      {product.currency}
                    </span>
                  </div>

                  <!-- Availability -->
                  <div class="flex items-center gap-2">
                    <div class={`w-2 h-2 rounded-full ${
                      product.availability.includes('Available')
                        ? 'bg-green-500'
                        : product.availability.includes('Sold')
                        ? 'bg-red-500'
                        : 'bg-yellow-500'
                    }`}></div>
                    <span class="text-xs tracking-wide opacity-60">{product.availability}</span>
                  </div>

                  <!-- Buttons -->
                  <div class="flex gap-4">
                    <a
                      href={product.officialUrl}
                      target="_blank"
                      rel="noopener noreferrer"
                      class="flex-1 bg-black dark:bg-white text-white dark:text-black border-2 border-black dark:border-white py-4 text-center hover:opacity-80 transition-opacity duration-200"
                    >
                      <span class="text-xs font-bold tracking-[0.3em] uppercase">
                        View Details
                      </span>
                    </a>
                    {product.availability.includes('Available') && (
                      <button
                        class="inquiry-button flex-1 border-2 border-black dark:border-white py-4 hover:bg-black hover:text-white dark:hover:bg-white dark:hover:text-black transition-colors duration-200"
                        data-product-id={product.id}
                        data-product-name={product.name}
                      >
                        <span class="text-xs font-bold tracking-[0.3em] uppercase">
                          Inquire Now
                        </span>
                      </button>
                    )}
                  </div>
                </div>
              </div>
            </div>
          );
        })}
      </div>
    </section>

    <!-- Statistics Section -->
    <section class="max-w-7xl mx-auto px-6 py-32 border-t-4 border-black dark:border-white">
      <div class="text-center mb-16">
        <h2 class="text-4xl md:text-5xl font-light tracking-tight mb-6">
          Collection Overview
        </h2>
        <p class="text-base opacity-60 max-w-2xl mx-auto">
          A curated selection of the world's most exclusive luxury items,
          representing the pinnacle of engineering, design, and craftsmanship.
        </p>
      </div>

      <div class="grid md:grid-cols-4 gap-12">
        <div class="text-center space-y-3">
          <p class="text-5xl font-light tabular-nums">{metadata.totalProducts}</p>
          <p class="text-xs tracking-[0.2em] uppercase opacity-60">Products</p>
        </div>
        <div class="text-center space-y-3">
          <p class="text-5xl font-light tabular-nums">${(metadata.totalValue / 1000000000).toFixed(1)}B</p>
          <p class="text-xs tracking-[0.2em] uppercase opacity-60">Total Value</p>
        </div>
        <div class="text-center space-y-3">
          <p class="text-5xl font-light tabular-nums">{metadata.categories.length}</p>
          <p class="text-xs tracking-[0.2em] uppercase opacity-60">Categories</p>
        </div>
        <div class="text-center space-y-3">
          <p class="text-5xl font-light tabular-nums">${(metadata.averagePrice / 1000000000).toFixed(1)}B</p>
          <p class="text-xs tracking-[0.2em] uppercase opacity-60">Avg Price</p>
        </div>
      </div>
    </section>

    <!-- Categories Section -->
    <section class="max-w-7xl mx-auto px-6 py-32 border-t-4 border-black dark:border-white">
      <div class="text-center mb-16">
        <p class="text-xs font-bold tracking-[0.3em] uppercase mb-4">
          CATEGORIES
        </p>
        <h2 class="text-4xl md:text-5xl font-light tracking-tight">
          Explore by Type
        </h2>
      </div>

      <div class="grid md:grid-cols-2 lg:grid-cols-4 gap-6">
        {metadata.categories.map(category => {
          const categoryProducts = products.filter(p => p.category === category);
          const categoryTotal = categoryProducts.reduce((sum, p) => sum + p.price, 0);

          return (
            <div class="border-2 border-black dark:border-white p-8 hover:bg-black hover:text-white dark:hover:bg-white dark:hover:text-black transition-colors duration-200 cursor-pointer group">
              <div class="space-y-4">
                <p class="text-xs font-bold tracking-[0.3em] uppercase">
                  {category}
                </p>
                <p class="text-2xl font-light tabular-nums">
                  ${categoryTotal >= 1000000000
                    ? `${(categoryTotal / 1000000000).toFixed(1)}B`
                    : `${(categoryTotal / 1000000).toFixed(1)}M`
                  }
                </p>
                <p class="text-xs opacity-60 group-hover:opacity-100 transition-opacity">
                  {categoryProducts.length} {categoryProducts.length === 1 ? 'item' : 'items'}
                </p>
              </div>
            </div>
          );
        })}
      </div>
    </section>

    <!-- CTA Section -->
    <section class="max-w-7xl mx-auto px-6 py-32 border-t-4 border-black dark:border-white">
      <div class="max-w-4xl mx-auto text-center space-y-12">
        <div>
          <p class="text-xs font-bold tracking-[0.3em] uppercase mb-6">
            READY TO MAKE IT YOURS?
          </p>
          <h2 class="text-5xl md:text-6xl font-light tracking-tight leading-tight mb-8">
            Start Your Journey to Ultimate Luxury
          </h2>
          <p class="text-lg leading-relaxed max-w-2xl mx-auto">
            Connect with our luxury acquisition specialists to bring your
            billionaire dreams to reality. Exclusive financing and white-glove
            service available.
          </p>
        </div>

        <div class="flex flex-col sm:flex-row gap-6 justify-center">
          <button
            class="contact-button bg-black dark:bg-white text-white dark:text-black border-2 border-black dark:border-white px-12 py-6 hover:opacity-80 transition-opacity duration-200"
          >
            <span class="text-xs font-bold tracking-[0.3em] uppercase">
              Contact Specialist
            </span>
          </button>
          <button
            class="border-2 border-black dark:border-white px-12 py-6 hover:bg-black hover:text-white dark:hover:bg-white dark:hover:text-black transition-colors duration-200"
          >
            <span class="text-xs font-bold tracking-[0.3em] uppercase">
              Download Catalog
            </span>
          </button>
        </div>

        <div class="grid grid-cols-3 gap-8 pt-12 border-t border-black dark:border-white text-sm">
          <div>Concierge Service</div>
          <div>Global Delivery</div>
          <div>Lifetime Support</div>
        </div>
      </div>
    </section>

    <!-- Footer -->
    <footer class="border-t-4 border-black dark:border-white py-16">
      <div class="max-w-7xl mx-auto px-6">
        <div class="grid md:grid-cols-3 gap-8 mb-12">
          <div>
            <p class="text-xs font-bold tracking-[0.3em] uppercase mb-4">
              Service
            </p>
            <p class="text-sm leading-relaxed">
              White-glove concierge service for all acquisitions
            </p>
          </div>
          <div>
            <p class="text-xs font-bold tracking-[0.3em] uppercase mb-4">
              Privacy
            </p>
            <p class="text-sm leading-relaxed">
              Fully confidential transactions and delivery
            </p>
          </div>
          <div>
            <p class="text-xs font-bold tracking-[0.3em] uppercase mb-4">
              Expertise
            </p>
            <p class="text-sm leading-relaxed">
              50+ years combined luxury acquisition experience
            </p>
          </div>
        </div>
        <div class="border-t border-black dark:border-white pt-8 text-center">
          <p class="text-xs tracking-wide">
            Â© 2025 Billionaire Dreams. All rights reserved.
          </p>
        </div>
      </div>
    </footer>

    <!-- Theme Toggle -->
    <ThemeToggle client:load />
  </div>
</ShopLayout>

<script>
  // Inquiry button handlers
  const inquiryButtons = document.querySelectorAll('.inquiry-button');
  inquiryButtons.forEach(button => {
    button.addEventListener('click', () => {
      const productName = button.getAttribute('data-product-name');
      alert(`Thank you for your interest in ${productName}. A luxury acquisition specialist will contact you within 24 hours.`);
    });
  });

  // Contact button handler
  const contactButton = document.querySelector('.contact-button');
  contactButton?.addEventListener('click', () => {
    alert('Our luxury acquisition specialists will be in touch shortly. Please check your email.');
  });
</script>
