---
/**
 * Generative UI Demo - Test All 6 Components
 *
 * This page demonstrates all 6 dynamic UI components that can be
 * generated by AI in chat responses:
 *
 * 1. DynamicChart - Line and bar charts with datasets
 * 2. DynamicTable - Data tables with headers and rows
 * 3. DynamicForm - Input forms with validation
 * 4. DynamicList - Lists with icons and labels
 * 5. DynamicTimeline - Event timelines with timestamps
 * 6. DynamicCard - Cards with actions and content
 *
 * USAGE IN CHAT:
 *
 * When AI wants to show UI, it returns a message with:
 * {
 *   type: "ui",
 *   payload: {
 *     component: "chart" | "table" | "form" | "list" | "timeline" | "card",
 *     data: { ... component-specific data ... }
 *   },
 *   timestamp: Date.now()
 * }
 *
 * AgentMessage.tsx automatically renders the UI using GenerativeUIRenderer.
 */

import Layout from '@/layouts/Layout.astro';
import { AgentMessage } from '@/components/ai/premium/AgentMessage';

// Test data for all 6 component types
const testMessages = [
  {
    type: "text" as const,
    payload: { text: "Here are some examples of generative UI components I can create:" },
    timestamp: Date.now()
  },

  // 1. CHART - Line Chart
  {
    type: "ui" as const,
    payload: {
      component: "chart" as const,
      data: {
        title: "Sales Growth (Line Chart)",
        description: "Monthly revenue over Q1 2025",
        chartType: "line",
        labels: ["January", "February", "March"],
        datasets: [
          {
            label: "Revenue",
            data: [45000, 52000, 61000],
            color: "#3b82f6"
          },
          {
            label: "Expenses",
            data: [30000, 35000, 38000],
            color: "#ef4444"
          }
        ]
      }
    },
    timestamp: Date.now()
  },

  // 2. CHART - Bar Chart
  {
    type: "ui" as const,
    payload: {
      component: "chart" as const,
      data: {
        title: "Product Sales (Bar Chart)",
        description: "Units sold by product category",
        chartType: "bar",
        labels: ["Electronics", "Clothing", "Books", "Home"],
        datasets: [
          {
            label: "Q1 Sales",
            data: [850, 620, 340, 480],
            color: "#10b981"
          }
        ]
      }
    },
    timestamp: Date.now()
  },

  // 3. TABLE - User Data
  {
    type: "ui" as const,
    payload: {
      component: "table" as const,
      data: {
        title: "Team Members",
        headers: ["Name", "Email", "Role", "Status"],
        rows: [
          ["Alice Johnson", "alice@example.com", "Admin", "Active"],
          ["Bob Smith", "bob@example.com", "Editor", "Active"],
          ["Carol White", "carol@example.com", "Viewer", "Pending"],
          ["David Brown", "david@example.com", "Admin", "Active"]
        ]
      }
    },
    timestamp: Date.now()
  },

  // 4. TABLE - Product Inventory
  {
    type: "ui" as const,
    payload: {
      component: "table" as const,
      data: {
        title: "Product Inventory",
        headers: ["Product", "SKU", "Stock", "Price", "Category"],
        rows: [
          ["Wireless Headphones", "WH-1000", "245", "$89.99", "Electronics"],
          ["Cotton T-Shirt", "TS-2040", "1,200", "$19.99", "Clothing"],
          ["Programming Book", "BK-3050", "87", "$49.99", "Books"],
          ["Coffee Maker", "CM-4060", "62", "$129.99", "Home"]
        ]
      }
    },
    timestamp: Date.now()
  },

  // 5. FORM - Contact Form
  {
    type: "ui" as const,
    payload: {
      component: "form" as const,
      data: {
        title: "Contact Us",
        fields: [
          {
            label: "Full Name",
            type: "text",
            name: "name",
            required: true
          },
          {
            label: "Email Address",
            type: "email",
            name: "email",
            required: true
          },
          {
            label: "Phone Number",
            type: "tel",
            name: "phone",
            required: false
          },
          {
            label: "Message",
            type: "text",
            name: "message",
            required: true
          }
        ],
        submitLabel: "Send Message"
      }
    },
    timestamp: Date.now()
  },

  // 6. FORM - Survey Form
  {
    type: "ui" as const,
    payload: {
      component: "form" as const,
      data: {
        title: "Customer Satisfaction Survey",
        fields: [
          {
            label: "How satisfied are you?",
            type: "text",
            name: "satisfaction",
            required: true,
            defaultValue: "Very satisfied"
          },
          {
            label: "Would you recommend us?",
            type: "text",
            name: "recommend",
            required: true
          },
          {
            label: "Additional Comments",
            type: "text",
            name: "comments",
            required: false
          }
        ],
        submitLabel: "Submit Survey"
      }
    },
    timestamp: Date.now()
  },

  // 7. LIST - Features
  {
    type: "ui" as const,
    payload: {
      component: "list" as const,
      data: {
        title: "Platform Features",
        items: [
          { icon: "✓", label: "Real-time collaboration" },
          { icon: "✓", label: "Cloud storage integration" },
          { icon: "✓", label: "Advanced security" },
          { icon: "✓", label: "Mobile apps" },
          { icon: "✓", label: "24/7 support" }
        ]
      }
    },
    timestamp: Date.now()
  },

  // 8. LIST - Requirements
  {
    type: "ui" as const,
    payload: {
      component: "list" as const,
      data: {
        title: "System Requirements",
        items: [
          { icon: "⚙️", label: "Node.js 18+ installed" },
          { icon: "⚙️", label: "8GB RAM minimum" },
          { icon: "⚙️", label: "Modern browser (Chrome, Firefox, Safari)" },
          { icon: "⚙️", label: "Internet connection" }
        ]
      }
    },
    timestamp: Date.now()
  },

  // 9. TIMELINE - Project Events
  {
    type: "ui" as const,
    payload: {
      component: "timeline" as const,
      data: {
        title: "Project Timeline",
        events: [
          { title: "Project kickoff", timestamp: "2025-01-01" },
          { title: "Design phase completed", timestamp: "2025-01-15" },
          { title: "Development started", timestamp: "2025-02-01" },
          { title: "Beta testing begins", timestamp: "2025-03-01" },
          { title: "Launch planned", timestamp: "2025-04-01" }
        ]
      }
    },
    timestamp: Date.now()
  },

  // 10. TIMELINE - Order Status
  {
    type: "ui" as const,
    payload: {
      component: "timeline" as const,
      data: {
        title: "Order Status",
        events: [
          { title: "Order placed", timestamp: "2025-01-08 10:30 AM" },
          { title: "Payment confirmed", timestamp: "2025-01-08 10:35 AM" },
          { title: "Processing", timestamp: "2025-01-08 11:00 AM" },
          { title: "Shipped", timestamp: "2025-01-09 9:15 AM" },
          { title: "Out for delivery", timestamp: "2025-01-10 8:00 AM" }
        ]
      }
    },
    timestamp: Date.now()
  },

  // 11. CARD - Quick Stats
  {
    type: "ui" as const,
    payload: {
      component: "card" as const,
      data: {
        title: "Quick Stats",
        description: "Current platform metrics",
        content: {
          users: "1,234",
          revenue: "$52,340",
          growth: "+12.5%"
        },
        actions: [
          { label: "View Details", variant: "default" },
          { label: "Export", variant: "outline" }
        ]
      }
    },
    timestamp: Date.now()
  },

  // 12. CARD - User Profile
  {
    type: "ui" as const,
    payload: {
      component: "card" as const,
      data: {
        title: "Alice Johnson",
        description: "Senior Product Manager",
        content: "Alice has been with the team for 3 years and leads the platform development efforts. She specializes in user experience and product strategy.",
        actions: [
          { label: "View Profile", variant: "default" },
          { label: "Send Message", variant: "outline" }
        ]
      }
    },
    timestamp: Date.now()
  },

  // Final text message
  {
    type: "text" as const,
    payload: { text: "These are all the generative UI components available. AI can create any of these dynamically based on user requests!" },
    timestamp: Date.now()
  }
];
---

<Layout title="Generative UI Demo">
  <div class="container mx-auto max-w-4xl p-6">
    <header class="mb-8">
      <h1 class="text-4xl font-bold mb-2">Generative UI Components Demo</h1>
      <p class="text-muted-foreground text-lg">
        Test all 6 dynamic UI components that AI can generate in chat responses
      </p>
    </header>

    <div class="space-y-6">
      {testMessages.map((message) => (
        <div class="rounded-lg border bg-card text-card-foreground shadow-sm">
          <AgentMessage client:load message={message} />
        </div>
      ))}
    </div>

    <footer class="mt-12 p-6 rounded-lg bg-muted">
      <h2 class="text-xl font-semibold mb-4">Component Payload Documentation</h2>

      <div class="space-y-6">
        <div>
          <h3 class="font-semibold text-lg mb-2">1. Chart Component</h3>
          <pre class="text-xs bg-background p-4 rounded-lg overflow-x-auto"><code>{`{
  type: "ui",
  payload: {
    component: "chart",
    data: {
      title: "Chart Title",
      description: "Optional description",
      chartType: "line" | "bar",
      labels: ["Label 1", "Label 2", "Label 3"],
      datasets: [
        {
          label: "Dataset Name",
          data: [100, 150, 200],
          color: "#3b82f6"
        }
      ]
    }
  }
}`}</code></pre>
        </div>

        <div>
          <h3 class="font-semibold text-lg mb-2">2. Table Component</h3>
          <pre class="text-xs bg-background p-4 rounded-lg overflow-x-auto"><code>{`{
  type: "ui",
  payload: {
    component: "table",
    data: {
      title: "Table Title",
      headers: ["Column 1", "Column 2", "Column 3"],
      rows: [
        ["Cell 1", "Cell 2", "Cell 3"],
        ["Cell 4", "Cell 5", "Cell 6"]
      ]
    }
  }
}`}</code></pre>
        </div>

        <div>
          <h3 class="font-semibold text-lg mb-2">3. Form Component</h3>
          <pre class="text-xs bg-background p-4 rounded-lg overflow-x-auto"><code>{`{
  type: "ui",
  payload: {
    component: "form",
    data: {
      title: "Form Title",
      fields: [
        {
          label: "Field Label",
          type: "text" | "email" | "tel",
          name: "fieldName",
          required: true,
          defaultValue: "Optional default"
        }
      ],
      submitLabel: "Submit"
    }
  }
}`}</code></pre>
        </div>

        <div>
          <h3 class="font-semibold text-lg mb-2">4. List Component</h3>
          <pre class="text-xs bg-background p-4 rounded-lg overflow-x-auto"><code>{`{
  type: "ui",
  payload: {
    component: "list",
    data: {
      title: "List Title",
      items: [
        { icon: "✓", label: "Item 1" },
        { icon: "✓", label: "Item 2" }
      ]
    }
  }
}`}</code></pre>
        </div>

        <div>
          <h3 class="font-semibold text-lg mb-2">5. Timeline Component</h3>
          <pre class="text-xs bg-background p-4 rounded-lg overflow-x-auto"><code>{`{
  type: "ui",
  payload: {
    component: "timeline",
    data: {
      title: "Timeline Title",
      events: [
        { title: "Event 1", timestamp: "2025-01-01" },
        { title: "Event 2", timestamp: "2025-01-15" }
      ]
    }
  }
}`}</code></pre>
        </div>

        <div>
          <h3 class="font-semibold text-lg mb-2">6. Card Component</h3>
          <pre class="text-xs bg-background p-4 rounded-lg overflow-x-auto"><code>{`{
  type: "ui",
  payload: {
    component: "card",
    data: {
      title: "Card Title",
      description: "Optional description",
      content: "String or object",
      actions: [
        { label: "Action", variant: "default" | "outline" }
      ]
    }
  }
}`}</code></pre>
        </div>
      </div>

      <div class="mt-6 p-4 bg-background rounded-lg">
        <h3 class="font-semibold mb-2">Error Handling</h3>
        <p class="text-sm text-muted-foreground mb-2">
          Unknown component types display an error message:
        </p>
        <div class="rounded-lg border border-destructive bg-destructive/10 p-4">
          Unknown component: invalid-component
        </div>
      </div>

      <div class="mt-6 p-4 bg-background rounded-lg">
        <h3 class="font-semibold mb-2">Integration with AgentMessage</h3>
        <p class="text-sm text-muted-foreground">
          The AgentMessage component automatically handles "ui" message types and renders them using GenerativeUIRenderer.
          No additional setup is required - just return the correct payload structure from your AI agent.
        </p>
      </div>
    </footer>
  </div>
</Layout>
