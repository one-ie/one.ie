---
/**
 * Example: Token Dashboard Page
 *
 * Demonstrates wallet and payment components:
 * - WalletConnectButton
 * - WalletBalance
 * - SendToken
 * - ReceivePayment
 */

import Layout from "@/layouts/Layout.astro";
import { WalletConnectButton, WalletBalance } from "@/components/ontology-ui/crypto/wallet";
import { SendToken, ReceivePayment } from "@/components/ontology-ui/crypto/payments";
import { Card, CardHeader, CardTitle, CardDescription, CardContent } from "@/components/ui/card";
import { Badge } from "@/components/ui/badge";
import { Alert, AlertDescription } from "@/components/ui/alert";
import { Separator } from "@/components/ui/separator";

const title = "Token Dashboard Example | ONE Platform";
const description = "Manage your crypto wallet, send and receive tokens";
---

<Layout title={title} description={description}>
  <div class="min-h-screen bg-gradient-to-b from-background to-secondary">

    <!-- Header -->
    <section class="container mx-auto px-4 py-12">
      <div class="text-center mb-8">
        <Badge variant="secondary" class="mb-4">
          üëõ Wallet Dashboard
        </Badge>
        <h1 class="text-4xl font-bold mb-4">Token Dashboard</h1>
        <p class="text-xl text-muted-foreground max-w-2xl mx-auto">
          Manage your crypto assets, send and receive tokens
        </p>
      </div>

      <!-- Wallet Connection -->
      <div class="flex justify-center mb-8">
        <WalletConnectButton
          label="Connect Your Wallet"
          showBalance={true}
          size="lg"
          client:load
        />
      </div>

      <!-- Info Alert -->
      <Alert class="max-w-4xl mx-auto mb-8">
        <AlertDescription>
          <strong>Demo Mode:</strong> Using mock wallet data. Connect a real Web3 wallet (MetaMask, WalletConnect) for live data.
        </AlertDescription>
      </Alert>
    </section>

    <!-- Dashboard Grid -->
    <section class="container mx-auto px-4 pb-20">
      <div class="grid grid-cols-1 lg:grid-cols-3 gap-6 max-w-7xl mx-auto">

        <!-- Left Column: Wallet Balance -->
        <div class="lg:col-span-1 space-y-6">
          <Card>
            <CardHeader>
              <CardTitle class="flex items-center gap-2">
                <span class="text-xl">üí∞</span>
                Wallet Balance
              </CardTitle>
              <CardDescription>
                Your token balances across chains
              </CardDescription>
            </CardHeader>
            <CardContent>
              <WalletBalance
                walletAddress="0x742d35Cc6634C0532925a3b844Bc9e7595f0bEb"
                chainId={1}
                showTokens={true}
                refreshInterval={30000}
                client:load
              />
            </CardContent>
          </Card>

          <!-- Quick Stats -->
          <Card>
            <CardHeader>
              <CardTitle class="text-base">Portfolio Stats</CardTitle>
            </CardHeader>
            <CardContent class="space-y-3">
              <div class="flex justify-between items-center">
                <span class="text-sm text-muted-foreground">Total Value</span>
                <span class="font-bold">$12,458.32</span>
              </div>
              <Separator />
              <div class="flex justify-between items-center">
                <span class="text-sm text-muted-foreground">24h Change</span>
                <span class="font-bold text-green-500">+2.4%</span>
              </div>
              <Separator />
              <div class="flex justify-between items-center">
                <span class="text-sm text-muted-foreground">Total Tokens</span>
                <span class="font-bold">8</span>
              </div>
            </CardContent>
          </Card>
        </div>

        <!-- Right Column: Send & Receive -->
        <div class="lg:col-span-2 space-y-6">

          <!-- Send Token Card -->
          <Card>
            <CardHeader>
              <CardTitle class="flex items-center gap-2">
                <span class="text-xl">üì§</span>
                Send Tokens
              </CardTitle>
              <CardDescription>
                Transfer ERC-20 tokens to any address with gas estimation
              </CardDescription>
            </CardHeader>
            <CardContent>
              <SendToken
                walletAddress="0x742d35Cc6634C0532925a3b844Bc9e7595f0bEb"
                chainId={1}
                onSend={(tx) => {
                  console.log('Transaction sent:', tx);
                  alert(`Transaction sent! Hash: ${tx.hash || 'mock-hash'}`);
                }}
                client:load
              />
            </CardContent>
          </Card>

          <!-- Receive Payment Card -->
          <Card>
            <CardHeader>
              <CardTitle class="flex items-center gap-2">
                <span class="text-xl">üì•</span>
                Receive Payments
              </CardTitle>
              <CardDescription>
                Share your address or QR code to receive crypto instantly
              </CardDescription>
            </CardHeader>
            <CardContent>
              <ReceivePayment
                walletAddress="0x742d35Cc6634C0532925a3b844Bc9e7595f0bEb"
                showQR={true}
                chainId={1}
                client:load
              />
            </CardContent>
          </Card>

        </div>

      </div>
    </section>

    <!-- Recent Transactions (Mock) -->
    <section class="container mx-auto px-4 pb-20">
      <Card class="max-w-7xl mx-auto">
        <CardHeader>
          <CardTitle class="flex items-center gap-2">
            <span class="text-xl">üìã</span>
            Recent Transactions
          </CardTitle>
          <CardDescription>
            Your latest token transfers and swaps
          </CardDescription>
        </CardHeader>
        <CardContent>
          <div class="space-y-3">
            {[
              { type: 'send', token: 'USDC', amount: '100.00', to: '0xabcd...ef12', time: '2 hours ago', status: 'confirmed' },
              { type: 'receive', token: 'ETH', amount: '0.5', from: '0x1234...5678', time: '5 hours ago', status: 'confirmed' },
              { type: 'swap', fromToken: 'DAI', fromAmount: '500', toToken: 'USDC', toAmount: '499.50', time: '1 day ago', status: 'confirmed' },
            ].map((tx, i) => (
              <div key={i} class="flex items-center justify-between p-3 bg-secondary rounded-lg">
                <div class="flex items-center gap-3">
                  <div class={`text-2xl ${tx.type === 'send' ? 'üì§' : tx.type === 'receive' ? 'üì•' : 'üí±'}`}>
                    {tx.type === 'send' ? 'üì§' : tx.type === 'receive' ? 'üì•' : 'üí±'}
                  </div>
                  <div>
                    <div class="font-medium capitalize">{tx.type}</div>
                    <div class="text-sm text-muted-foreground">
                      {tx.type === 'swap'
                        ? `${tx.fromAmount} ${tx.fromToken} ‚Üí ${tx.toAmount} ${tx.toToken}`
                        : `${tx.amount} ${tx.token}`
                      }
                    </div>
                  </div>
                </div>
                <div class="text-right">
                  <Badge variant="secondary" class="mb-1">
                    {tx.status}
                  </Badge>
                  <div class="text-xs text-muted-foreground">
                    {tx.time}
                  </div>
                </div>
              </div>
            ))}
          </div>
        </CardContent>
      </Card>
    </section>

    <!-- Features Grid -->
    <section class="container mx-auto px-4 pb-20">
      <div class="text-center mb-12">
        <h2 class="text-3xl font-bold mb-4">Dashboard Features</h2>
        <p class="text-xl text-muted-foreground">
          Everything you need to manage your crypto
        </p>
      </div>

      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 max-w-6xl mx-auto">
        <Card>
          <CardHeader>
            <CardTitle class="flex items-center gap-2">
              <span class="text-2xl">üîÑ</span>
              Real-Time
            </CardTitle>
          </CardHeader>
          <CardContent>
            <p class="text-sm text-muted-foreground">
              Live balance updates and transaction tracking
            </p>
          </CardContent>
        </Card>

        <Card>
          <CardHeader>
            <CardTitle class="flex items-center gap-2">
              <span class="text-2xl">üåç</span>
              Multi-Chain
            </CardTitle>
          </CardHeader>
          <CardContent>
            <p class="text-sm text-muted-foreground">
              Support for Ethereum, Polygon, BSC, and more
            </p>
          </CardContent>
        </Card>

        <Card>
          <CardHeader>
            <CardTitle class="flex items-center gap-2">
              <span class="text-2xl">‚ö°</span>
              Gas Optimization
            </CardTitle>
          </CardHeader>
          <CardContent>
            <p class="text-sm text-muted-foreground">
              Real-time gas estimates for all transactions
            </p>
          </CardContent>
        </Card>

        <Card>
          <CardHeader>
            <CardTitle class="flex items-center gap-2">
              <span class="text-2xl">üîê</span>
              Secure
            </CardTitle>
          </CardHeader>
          <CardContent>
            <p class="text-sm text-muted-foreground">
              Non-custodial wallet integration, you control your keys
            </p>
          </CardContent>
        </Card>
      </div>
    </section>

    <!-- Code Example -->
    <section class="container mx-auto px-4 pb-20">
      <Card class="max-w-4xl mx-auto">
        <CardHeader>
          <CardTitle>Integration Code</CardTitle>
          <CardDescription>
            Add wallet dashboard to your page
          </CardDescription>
        </CardHeader>
        <CardContent class="space-y-6">
          <div>
            <h3 class="font-semibold mb-2">Wallet Balance Component</h3>
            <pre class="bg-secondary p-4 rounded-lg overflow-x-auto text-sm"><code>{`import { WalletBalance } from '@/components/ontology-ui/crypto/wallet';

<WalletBalance
  walletAddress={wallet.address}
  chainId={1}
  showTokens={true}
  refreshInterval={30000}
  client:load
/>`}</code></pre>
          </div>

          <div>
            <h3 class="font-semibold mb-2">Send Token Component</h3>
            <pre class="bg-secondary p-4 rounded-lg overflow-x-auto text-sm"><code>{`import { SendToken } from '@/components/ontology-ui/crypto/payments';

<SendToken
  walletAddress={wallet.address}
  chainId={1}
  onSend={(tx) => console.log('Sent:', tx)}
  client:load
/>`}</code></pre>
          </div>

          <div>
            <h3 class="font-semibold mb-2">Receive Payment Component</h3>
            <pre class="bg-secondary p-4 rounded-lg overflow-x-auto text-sm"><code>{`import { ReceivePayment } from '@/components/ontology-ui/crypto/payments';

<ReceivePayment
  walletAddress={wallet.address}
  showQR={true}
  client:load
/>`}</code></pre>
          </div>
        </CardContent>
      </Card>
    </section>

  </div>
</Layout>
