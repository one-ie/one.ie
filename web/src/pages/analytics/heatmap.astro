---
/**
 * Click Heatmap Demo Page
 *
 * Cycle 77: Click Heatmaps
 *
 * Demonstrates click heatmap tracking and visualization with:
 * - Live click tracking
 * - Heatmap overlay
 * - Device filtering
 * - Date range filtering
 * - Scroll depth tracking
 * - Statistics and insights
 */

import Layout from "@/layouts/Layout.astro";
import { HeatmapViewer } from "@/components/analytics/HeatmapViewer";
import { Card, CardContent, CardDescription, CardHeader, CardTitle } from "@/components/ui/card";
import { Button } from "@/components/ui/button";

const title = "Click Heatmap Analytics";
const description = "Visualize user click patterns and scroll behavior";
---

<Layout title={title} description={description}>
	<div class="container mx-auto py-8 space-y-8">
		<!-- Page header -->
		<div class="space-y-2">
			<h1 class="text-4xl font-bold text-foreground">Click Heatmap Analytics</h1>
			<p class="text-lg text-muted-foreground">
				Visual representation of where users click and how they interact with your pages
			</p>
		</div>

		<!-- Demo section with interactive elements -->
		<Card>
			<CardHeader>
				<CardTitle>Interactive Demo</CardTitle>
				<CardDescription>
					Click around this section to generate heatmap data. The more you click, the more interesting the heatmap becomes!
				</CardDescription>
			</CardHeader>
			<CardContent class="space-y-4">
				<div class="grid gap-4 md:grid-cols-3">
					<Button variant="default" class="h-24">
						Click Me
					</Button>
					<Button variant="secondary" class="h-24">
						Or Click Here
					</Button>
					<Button variant="outline" class="h-24">
						Try This Too
					</Button>
				</div>

				<div class="grid gap-4 md:grid-cols-2">
					<div class="p-6 border rounded-lg hover:bg-accent transition-colors cursor-pointer">
						<h3 class="font-semibold mb-2">Card A</h3>
						<p class="text-sm text-muted-foreground">
							Click anywhere in this card to track interactions
						</p>
					</div>
					<div class="p-6 border rounded-lg hover:bg-accent transition-colors cursor-pointer">
						<h3 class="font-semibold mb-2">Card B</h3>
						<p class="text-sm text-muted-foreground">
							Each click is tracked with coordinates and element info
						</p>
					</div>
				</div>

				<div class="p-8 bg-gradient-to-r from-blue-500/10 to-purple-500/10 rounded-lg text-center">
					<h3 class="text-xl font-semibold mb-2">Large Click Target</h3>
					<p class="text-muted-foreground">
						This entire area is clickable - notice how the heatmap changes with multiple clicks
					</p>
				</div>

				<div class="grid gap-2 md:grid-cols-4">
					{[1, 2, 3, 4, 5, 6, 7, 8].map((i) => (
						<button
							class="p-4 border rounded hover:bg-accent transition-colors"
							key={i}
						>
							Button {i}
						</button>
					))}
				</div>
			</CardContent>
		</Card>

		<!-- Heatmap visualization -->
		<HeatmapViewer
			client:load
			page="/analytics/heatmap"
			refreshInterval={5000}
			showStatistics={true}
			gridSize={50}
		/>

		<!-- Information section -->
		<div class="grid gap-6 md:grid-cols-2">
			<Card>
				<CardHeader>
					<CardTitle>How It Works</CardTitle>
				</CardHeader>
				<CardContent class="space-y-4">
					<div>
						<h4 class="font-semibold mb-1">Click Tracking</h4>
						<p class="text-sm text-muted-foreground">
							Every click is captured with x,y coordinates, element information, and timestamp.
							Data is stored locally in your browser.
						</p>
					</div>

					<div>
						<h4 class="font-semibold mb-1">Heatmap Visualization</h4>
						<p class="text-sm text-muted-foreground">
							Clicks are aggregated into a grid and colored by density:
							<span class="text-red-600 font-medium">red</span> = high clicks,
							<span class="text-yellow-600 font-medium">yellow</span> = medium clicks,
							<span class="text-blue-600 font-medium">blue</span> = low clicks.
						</p>
					</div>

					<div>
						<h4 class="font-semibold mb-1">Scroll Depth</h4>
						<p class="text-sm text-muted-foreground">
							Track how far users scroll on each page. Helps identify if important content
							is being seen or if users drop off early.
						</p>
					</div>

					<div>
						<h4 class="font-semibold mb-1">Device Filtering</h4>
						<p class="text-sm text-muted-foreground">
							Compare click patterns across desktop, tablet, and mobile devices to optimize
							for each platform.
						</p>
					</div>
				</CardContent>
			</Card>

			<Card>
				<CardHeader>
					<CardTitle>Use Cases</CardTitle>
				</CardHeader>
				<CardContent class="space-y-4">
					<div>
						<h4 class="font-semibold mb-1">üéØ Optimize CTAs</h4>
						<p class="text-sm text-muted-foreground">
							Identify which call-to-action buttons get the most clicks and adjust placement
							or design accordingly.
						</p>
					</div>

					<div>
						<h4 class="font-semibold mb-1">üì± Mobile vs Desktop</h4>
						<p class="text-sm text-muted-foreground">
							Compare interaction patterns between devices to ensure mobile users can
							easily access important features.
						</p>
					</div>

					<div>
						<h4 class="font-semibold mb-1">üìä Content Performance</h4>
						<p class="text-sm text-muted-foreground">
							See which sections of your page get the most attention and which are ignored.
							Rearrange content based on user interest.
						</p>
					</div>

					<div>
						<h4 class="font-semibold mb-1">üîç User Confusion</h4>
						<p class="text-sm text-muted-foreground">
							Identify areas with excessive clicking (rage clicks) that might indicate
							confusing UI or broken functionality.
						</p>
					</div>
				</CardContent>
			</Card>
		</div>

		<!-- Integration guide -->
		<Card>
			<CardHeader>
				<CardTitle>Integration Guide</CardTitle>
				<CardDescription>How to add heatmap tracking to your pages</CardDescription>
			</CardHeader>
			<CardContent class="space-y-4">
				<div>
					<h4 class="font-semibold mb-2">1. Initialize Tracking</h4>
					<pre class="bg-muted p-4 rounded-lg overflow-x-auto"><code class="text-sm">{`import { initializeHeatmapTracking } from '@/lib/analytics/heatmap-tracker';

// In your app initialization or layout
initializeHeatmapTracking();`}</code></pre>
				</div>

				<div>
					<h4 class="font-semibold mb-2">2. Add Heatmap Viewer</h4>
					<pre class="bg-muted p-4 rounded-lg overflow-x-auto"><code class="text-sm">{`import { HeatmapViewer } from '@/components/analytics/HeatmapViewer';

<HeatmapViewer
  client:load
  page="/your-page"
  refreshInterval={5000}
  showStatistics={true}
  gridSize={50}
/>`}</code></pre>
				</div>

				<div>
					<h4 class="font-semibold mb-2">3. Get Click Data</h4>
					<pre class="bg-muted p-4 rounded-lg overflow-x-auto"><code class="text-sm">{`import { getClickEvents, getHeatmapData } from '@/lib/analytics/heatmap-tracker';

// Get all clicks
const clicks = getClickEvents({ page: '/products' });

// Get heatmap data for visualization
const heatmap = getHeatmapData({
  page: '/products',
  deviceType: 'mobile',
  gridSize: 50
});`}</code></pre>
				</div>
			</CardContent>
		</Card>
	</div>
</Layout>

<style>
	/* Add some spacing for the demo content */
	:global(button) {
		cursor: pointer;
	}
</style>
